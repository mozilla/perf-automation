if (self.CavalryLogger) { CavalryLogger.start_js(["xwO4W"]); }

__d("FundsAvailability",[],(function(a,b,c,d,e,f){e.exports={NONE:0,FUNDS_AVAILABILITY_NA:65,FUNDS_AVAILABILITY_IMMEDIATE:73,FUNDS_AVAILABILITY_SAME_DAY:83,FUNDS_AVAILABILITY_NEXT_DAY:78,FUNDS_AVAILABILITY_FIVE_DAY:70,FUNDS_AVAILABILITY_UNKNOWN:85,FUNDS_AVAILABILITY_ONE_THREE_DAY:79,FUNDS_AVAILABILITY_CROSS_BORDER:66,FUNDS_AVAILABILITY_CROSS_BORDER_FAST_FUNDS:67,FUNDS_AVAILABILITY_DOMESTIC:68,FUNDS_AVAILABILITY_DOMESTIC_FAST_FUNDS:69}}),null);
__d("IrisProtocolMessageLifetime",[],(function(a,b,c,d,e,f){e.exports={TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:3e4,TTL_1MINUTE:6e4,TTL_3MINUTES:18e4,TTL_5MINUTES:3e5,TTL_10MINUTES:6e5,TTL_15MINUTES:9e5,TTL_30MINUTES:18e5,TTL_1HOUR:36e5,TTL_2HOURS:72e5,TTL_4HOURS:144e5,TTL_8HOURS:288e5,TTL_12HOURS:432e5,TTL_24HOURS:864e5}}),null);
__d("MercuryAPIArgsSource",[],(function(a,b,c,d,e,f){e.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"}}),null);
__d("MercuryAudioType",[],(function(a,b,c,d,e,f){e.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"}}),null);
__d("MessageLiveLocationClientSyncProtocolStopReason",[],(function(a,b,c,d,e,f){e.exports={EXPIRED:1,CANCELED:2,ARRIVED:3}}),null);
__d("MessengerEmojiConfig",[],(function(a,b,c,d,e,f){e.exports={emoji_colors:[0,127995,127996,127997,127998,127999]}}),null);
__d("MessengerView",[],(function(a,b,c,d,e,f){e.exports={DETAIL:{COMPOSE:"detail/compose",THREAD:"detail/thread",PAYTHREAD:"detail/paythread",PAYFRIENDPICKER:"detail/payfriendpicker"},MASTER:{PAYMENT:"master/payment",PEOPLE:"master/people",RECENT:"master/recent",SUPPORT:"master/support",SEARCH:"master/search"}}}),null);
__d("MNCommercePageSetting",[],(function(a,b,c,d,e,f){e.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"}}),null);
__d("PageCommItemStatus",[],(function(a,b,c,d,e,f){e.exports={FOLLOW_UP:"FOLLOW_UP",DONE:"DONE",TODO:"TODO",SPAM:"SPAM",DELETED:"DELETED"}}),null);
__d("BonfireFeatureGating",["gkx"],(function(a,b,c,d,e,f){"use strict";a={canReceiveBonfireRingInterop:function(){return b("gkx")("AT67-yEeEisuZnuRf9ZZfe8uDaUmU0f8iOgZ8XTHAvRp7_a_JJm4LDabRivTtsii-tCqADjQbwZjHRWhjygfaDJN")}};e.exports=a}),null);
__d("AjaxRequest",["ErrorUtils","Keys","PHPQuerySerializer","TimeSlice","URI","UserAgent_DEPRECATED","ZeroRewrites","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c,d){c instanceof b("URI")||(c=new(b("URI"))(c)),this.xhr=b("ZeroRewrites").getTransportBuilderForURI(c)(),d&&a=="GET"?c.setQueryData(d):this._params=d,this.method=a,this.uri=c,this.xhr.open(a,c)}var h=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest();g.supportsCORS=function(){return h};g.ERROR="ar:error";g.TIMEOUT="ar:timeout";g.PROXY_ERROR="ar:proxy error";g.TRANSPORT_ERROR="ar:transport error";g.SERVER_ERROR="ar:http error";g.PARSE_ERROR="ar:parse error";g.SERVICE_UNAVAILABLE="ar:noservice";g._inflight=[];function a(){var a=g._inflight;g._inflight=[];a.forEach(function(a){a.abort()})}function i(a){a.onJSON=a.onError=a.onSuccess=null,b("clearTimeout")(a._timer),a.xhr&&a.xhr.readyState<4&&(a.xhr.abort(),a.xhr=null),g._inflight=g._inflight.filter(function(b){return b&&b!=a&&b.xhr&&b.xhr.readyState<4})}Object.assign(g.prototype,{timeout:6e4,streamMode:!0,prelude:/^for \(;;\);/,status:null,_eol:-1,_call:function(a){this[a]&&this[a](this)},_parseStatus:function(){__p&&__p();var a;try{this.status=this.xhr.status,a=this.xhr.statusText}catch(a){this.xhr.readyState>=4&&(this.errorType=g.TRANSPORT_ERROR,this.errorText=a.message);return}if(this.status===0&&!/^(file|ftp)/.test(this.uri))this.errorType=g.TRANSPORT_ERROR;else if(this.status>=100&&this.status<200)this.errorType=g.PROXY_ERROR;else if(this.status>=200&&this.status<300)return;else if(this.status>=300&&this.status<400)this.errorType=g.PROXY_ERROR;else if(this.status>=400&&this.status<500)this.errorType=g.SERVER_ERROR;else if(this.status===503)this.errorType=g.SERVICE_UNAVAILABLE;else if(this.status>500&&this.status<600)this.errorType=g.PROXY_ERROR;else if(this.status==1223)return;else this.status>=12001&&this.status<=12156?this.errorType=g.TRANSPORT_ERROR:(a="unrecognized status code: "+this.status,this.errorType=g.ERROR);this.errorText||(this.errorText=a)},_parseResponse:function(){__p&&__p();var a,c=this.xhr.readyState;try{a=this.xhr.responseText||""}catch(a){c>=4&&(this.errorType=g.ERROR,this.errorText="responseText not available - "+a.message);return}while(this.xhr){var d=this._eol+1,e=this.streamMode?a.indexOf("\n",d):a.length;e<0&&c==4&&(e=a.length);if(e<=this._eol)break;var f=a;this.streamMode&&(f=a.substr(d,e-d).replace(/^\s*|\s*$/g,""));d===0&&this.prelude&&(this.prelude.test(f)&&(f=f.replace(this.prelude,"")));this._eol=e;if(f){try{this.json=JSON.parse(f)}catch(b){e=/(<body[\S\s]+?<\/body>)/i.test(a)&&RegExp.$1;d={message:b.message,"char":d,excerpt:(d===0&&e||f).substr(512)};this.errorType=g.PARSE_ERROR;this.errorText="parse error - "+JSON.stringify(d);return}b("ErrorUtils").applyWithGuard(this._call,this,["onJSON"])}}},_onReadyState:function(a){var b=this.xhr&&this.xhr.readyState||0;this.status==null&&b>=2&&this._parseStatus();!this.errorType&&this.status!=null&&((b==3&&this.streamMode||b==4)&&a(this._parseResponse.bind(this)));(this.errorType||b==4)&&(this._time=Date.now()-this._sentAt,a.last(function(){this._call(this.errorType?"onError":"onSuccess"),i(this)}.bind(this)))},send:function(a){var c=b("TimeSlice").getReusableContinuation("AjaxRequest xhr.onreadystatechange");this.xhr.onreadystatechange=this._onReadyState.bind(this,c);c=this.timeout;c&&(this._timer=b("setTimeoutAcrossTransitions")(function(){this.errorType=g.TIMEOUT,this.errorText="timeout",this._time=Date.now()-this._sentAt,this._call("onError"),i(this)}.bind(this),c));g._inflight.push(this);this.method=="POST"&&this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this._sentAt=Date.now();this.xhr.send(a?b("PHPQuerySerializer").serialize(a):"")},abort:function(){i(this)},toString:function(){var a="[AjaxRequest readyState="+this.xhr.readyState;this.errorType&&(a+=" errorType="+this.errorType+" ("+this.errorText+")");return a+"]"},toJSON:function(){var a={json:this.json,status:this.status,errorType:this.errorType,errorText:this.errorText,time:this._time};this.errorType&&(a.uri=this.uri);for(var b in a)a[b]==null&&delete a[b];return a}});window.addEventListener&&b("UserAgent_DEPRECATED").firefox()&&window.addEventListener("keydown",function(event){event.keyCode===b("Keys").ESC&&event.prevent()},!1);window.attachEvent&&window.attachEvent("onunload",a);e.exports=g}),null);
__d("ChannelSubdomain",["Event","JSLogger","Run","LogHistory","clearTimeout","setTimeoutAcrossTransitions","WebStorage"],(function(a,b,c,d,e,f){__p&&__p();var g=b("LogHistory").getInstance("channel"),h=b("JSLogger").create("channel"),i="channel_sub:",j=7,k=100*1e3,l=null,m;function n(){var a=b("WebStorage").getLocalStorage();m&&(b("clearTimeout")(m),m=null);a&&l!=null&&a.removeItem(i+l);l=null}function a(a,c,d){__p&&__p();a=(a-1)*j;d&&(m&&b("clearTimeout")(m),l=m=null);c==null&&(c=Math.floor(Math.random()*a));if(l==null){var e=b("WebStorage").getLocalStorage();if(e){d=[];for(var f=0;f<e.length;f++){var o=e.key(f);if(o.indexOf(i)===0){var p=parseInt(o.substr(i.length),10);d[p]=parseInt(e.getItem(o),10)}}p=Date.now()-k;for(f=0;f<a;f++){o=(f+c)%a;if(!d[o]||d[o]<p){l=o;break}}if(l!=null){o=function a(){try{e.setItem(i+l,Date.now())}catch(a){g.warn("subdomain set failed",a.message)}m=b("setTimeoutAcrossTransitions")(a,k/2)};o()}else g.warn("no channel subdomain",d),h.error("subdomain_overflow");typeof window.onpageshow!=="undefined"?b("Event").listen(window,"pagehide",n):b("Run").onUnload(n)}else l=c}return l==null?null:l%j}e.exports={allocate:a,clear:n}}),null);
__d("ChatproxyClientErrorsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setBatchSize=function(a){this.$1.batch_size=a;return this};a.prototype.setErrorMessage=function(a){this.$1.error_message=a;return this};a.prototype.setErrorReason=function(a){this.$1.error_reason=a;return this};a.prototype.setErrorText=function(a){this.$1.error_text=a;return this};a.prototype.setJsEventTimeMs=function(a){this.$1.js_event_time_ms=a;return this};a.prototype.setMultiViewSubscription=function(a){this.$1.multi_view_subscription=a;return this};a.prototype.setRequestID=function(a){this.$1.request_id=a;return this};a.prototype.setResponseHeaders=function(a){this.$1.response_headers=a;return this};a.prototype.setSessionID=function(a){this.$1.session_id=a;return this};a.prototype.setSessionIDStr=function(a){this.$1.session_id_str=a;return this};a.prototype.setStatusCode=function(a){this.$1.status_code=a;return this};a.prototype.setSubscriberID=function(a){this.$1.subscriber_id=a;return this};a.prototype.setTopicPrefixes=function(a){this.$1.topic_prefixes=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setURL=function(a){this.$1.url=a;return this};a.prototype.setXhrReadyState=function(a){this.$1.xhr_ready_state=a;return this};a.prototype.setXhrStatus=function(a){this.$1.xhr_status=a;return this};c={app_version:!0,batch_size:!0,error_message:!0,error_reason:!0,error_text:!0,js_event_time_ms:!0,multi_view_subscription:!0,request_id:!0,response_headers:!0,session_id:!0,session_id_str:!0,status_code:!0,subscriber_id:!0,topic_prefixes:!0,url:!0,xhr_ready_state:!0,xhr_status:!0};e.exports=a}),null);
__d("DocRPC",["ErrorUtils","FBLogger"],(function(a,b,c,d,e,f){__p&&__p();var g={_apis:{},_dispatch:function(a){__p&&__p();var c;try{a=JSON.parse(a)}catch(b){throw new Error('DocRPC unparsable dispatch: "'+a+'"')}if(Object.prototype.hasOwnProperty.call(g._apis,a.api)){var d=g._apis[a.api];d[a.method]&&(c=b("ErrorUtils").applyWithGuard(d[a.method],d,a.args))}c===undefined&&(c=null);return JSON.stringify(c)},publish:function(a,b){g._apis[b]=a},proxy:function(a,c,d){__p&&__p();var e={};d.forEach(function(d){__p&&__p();e[d]=function(){__p&&__p();var e={api:c,method:d,args:Array.prototype.slice.call(arguments)},f;try{if(a.closed)throw new Error("DocRPC window closed");f=a.DocRPC._dispatch(JSON.stringify(e))}catch(a){b("FBLogger")("doc_rpc").catching(a).warn("Encountered an error duing proxy call");return}if(typeof f==="string")try{f=JSON.parse(f)}catch(a){b("FBLogger")("doc_rpc").catching(a).mustfix("DocRPC %s.%s unparsable return: %s",c,d,f);throw new Error("DocRPC "+c+"."+d+' unparsable return: "'+f+'"')}return f}});return e}};e.exports=a.DocRPC=g}),null);
__d("ChannelTransport",["AjaxRequest","BanzaiODS","ChannelConstants","ChatproxyClientErrorsTypedLogger","DocRPC","LogHistory","TimeSlice","URI","bind","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g=b("LogHistory").getInstance("channel");function h(a){var c=new(b("ChatproxyClientErrorsTypedLogger"))();c.setStatusCode(a.status);if(a.xhr!=null){var d=a.xhr.getResponseHeader("x-fb-chat-failure-reason");d&&c.setErrorReason(d)}c.setErrorMessage(a.errorType);a.uri!==undefined&&c.setURL(a.uri.getPath());c.log()}function i(){return(1048576*Math.random()|0).toString(36)}function j(a){return a!==null&&a!==undefined&&!isNaN(a)&&isFinite(a)&&0<=a&&a<=6}function k(a,c){var d="";j(a.subdomain)&&(d=a.subdomain+"-");var e=a.host;e=e===null||e===undefined?"edge-chat":a.host;c=new(b("URI"))(c).setDomain(d+e+"."+a.domain).setPort(a.port).setSecure(new(b("URI"))(window.location.href).isSecure());return c}function l(a){__p&&__p();var c={partition:a.partition,cb:i(),failure:a.pingFailuresOnSubdomain};a.sticky_token&&(c.sticky_token=a.sticky_token);a.sticky_pool&&(c.sticky_pool=a.sticky_pool);c=k(a,"/p").setQueryData(c);g.log("start_p",{uri:c.toString()});var d=new(b("AjaxRequest"))("GET",c);b("AjaxRequest").supportsCORS()&&(d.xhr.withCredentials=!0);var e=function(b){g.log("finish_p",{xhr:b.toJSON?b.toJSON():b,subdomain:a.subdomain,fullHost:a.fullHost})};d.onError=function(c){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendP.error");h(d);e(c);if(a.subdomain===null)return;j(a.subdomain)&&(a.pingFailuresOnSubdomain++,a.subdomain++,a.subdomain>6&&(a.subdomain=0))};d.timeout=a.P_TIMEOUT;d.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendP.success"),e(a)};d.send()}function m(a,c,d){__p&&__p();var e=new Image(),f=0,j=function(a){e.abort();return a?c():d()};e.onload=b("TimeSlice").guard(function(){g.log("ping_ok",{duration:Date.now()-f}),b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPing.success"),j(!0)},"ChannelTransport image.onload");e.onerror=b("TimeSlice").guard(function(){l(a),b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPing.error"),h(e),j(!1)},"ChannelTransport image.onerror");var m=b("setTimeoutAcrossTransitions")(e.onerror,1e4);e.abort=function(){m&&(b("clearTimeout")(m),m=null),e.onload=e.onerror=null};var n={partition:a.partition,cb:i()};a.sticky_token&&(n.sticky_token=a.sticky_token);a.sticky_pool&&(n.sticky_pool=a.sticky_pool);a.lastRequestErrorReason&&(n.reason=a.lastRequestErrorReason,a.lastRequestErrorReason=null);a.uid&&a.viewerUid&&(n.uid=a.uid,n.viewer_uid=a.viewerUid);f=Date.now();e.src=k(a,"/ajax/chatproxy-ping").setQueryData(n);return e}function a(a,c){__p&&__p();var d={channel:a.user_channel,partition:a.partition,clientid:a.sessionID,cb:i(),cap:0,uid:a.uid,viewer_uid:a.viewerUid};a.sticky_token&&(d.sticky_token=a.sticky_token);a.sticky_pool&&(d.sticky_pool=a.sticky_pool);a.profile&&(d.profile=a.profile);a.capabilities&&(d.cap=a.capabilities);d.id=c;c=k(a,"/add_bud").setQueryData(d);var e=new(b("AjaxRequest"))("GET",c);b("AjaxRequest").supportsCORS()&&(e.xhr.withCredentials=!0);e.onError=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendAdditionalBuddy.error"),g.warn("add_buddy_error"),h(e)};e.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendAdditionalBuddy.success"),g.log("add_buddy_ok")};e.timeout=a.P_TIMEOUT;e.send()}function c(a){__p&&__p();var c={channel:a.user_channel,partition:a.partition,clientid:a.sessionID,cb:i(),cap:0,uid:a.uid,viewer_uid:a.viewerUid};a.sticky_token&&(c.sticky_token=a.sticky_token);a.sticky_pool&&(c.sticky_pool=a.sticky_pool);a.is_offline||a.shouldSuppressPresence?c.state="offline":c.state="active";if(c.state===a.lastPresenceState)return;a.lastPresenceState=c.state;a.profile&&(c.profile=a.profile);a.capabilities&&(c.cap=a.capabilities);c=k(a,"/active_ping").setQueryData(c);var d=new(b("AjaxRequest"))("GET",c);b("AjaxRequest").supportsCORS()&&(d.xhr.withCredentials=!0);d.onError=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendActivePing.error"),g.warn("active_ping_error"),h(d)};d.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendActivePing.success"),g.log("active_ping_ok")};d.timeout=a.P_TIMEOUT;d.send()}function n(a,c,d,e){__p&&__p();var f=new Date(),j=-1;a.userActive>0&&(j=(f-a.userActive)/1e3|0,j<0&&g.warn("idle_regression",{idleTime:j,now:f.getTime(),userActive:a.userActive}));f={channel:a.user_channel,seq:a.seq,partition:a.partition,clientid:a.sessionID,cb:i(),idle:j,qp:"y",cap:0};a.state.aiq&&(f.aiq=a.state.aiq);a.ready&&((a.seqTurSentAt==-1||a.seqTurSentAt==a.seq)&&(f.tur=a.timeUntilReady,f.qpmade=a.queueMade,a.seqTurSentAt=a.seq));f.pws=a.pws;a.sequenceId>0&&(f.isq=a.sequenceId);f.msgs_recv=a.estimatedReceived;a.uid&&a.viewerUid&&(f.uid=a.uid,f.viewer_uid=a.viewerUid);a.sticky_token?f.sticky_token=a.sticky_token:(f.request_batch=1,a.msgr_region&&(f.msgr_region=a.msgr_region));a.sticky_pool&&(f.sticky_pool=a.sticky_pool);"trace_id"in a&&(f.traceid=a.trace_id);a.is_offline||a.shouldSuppressPresence?f.state="offline":a.userActive>0&&j<60&&(f.state="active");a.lastPresenceState=f.state;a.streamingCapable&&(f.mode="stream",f.format="json");a.profile&&(f.profile=a.profile);a.capabilities&&(f.cap=a.capabilities);j=k(a,"/pull").setQueryData(f);f="GET";var l=new(b("AjaxRequest"))(f,j);b("AjaxRequest").supportsCORS()&&(l.xhr.withCredentials=!0);l.timeout=a.streamingCapable?a.STREAMING_TIMEOUT:a.LONGPOLL_TIMEOUT;l.onJSON=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.json"),c(a)};l.onSuccess=function(a){b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.success"),d(a)};l.onError=function(){var c=this.status==12002&&this._time>=a.MIN_12002_TIMEOUT||this.status==504&&this._time>=a.MIN_504_TIMEOUT,f=c?d:e;c?b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.success"):(b("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.error"),h(l));return f&&f.apply(this,arguments)};l.send();a.inStreaming=a.streamingCapable;return l}function o(a){this.manager=a,this.init&&this.init()}function d(a){o.apply(this,arguments)}Object.assign(d.prototype,{logName:"CORS",enterState:function(a,c){this._request&&(this._request.abort(),this._request=null);a=="init"&&b("setTimeoutAcrossTransitions")(b("bind")(this.manager,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),0);if(!/pull|ping/.test(a))return;var d=this.manager;a=="ping"?this._request=m(c,b("bind")(d,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(d,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})):a=="pull"&&(this._request=n(c,b("bind")(d,"_processTransportData",c.stateId),b("bind")(d,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(d,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})))}});function f(a){g.log("iframe_init_constructor"),o.apply(this,arguments),this._iframe=document.createElement("iframe"),this._iframe.style.display="none",document.body.appendChild(this._iframe),b("DocRPC").publish(this,"outerTransport")}Object.assign(f.prototype,{logName:"iframe",_initIframe:function(a){__p&&__p();g.log("iframe_init_start");window.onchanneliframeready=function(){g.log("iframe_resources");return a.resources};window.onchanneliframeloaded=function(){g.log("iframe_loaded")};if(a){this._iframeURI=k(a,a.path);if(a.resources){var c=this._iframeURI.getDomain();a.resources=a.resources.map(function(a){var d=new(b("URI"))(a);return d.getPath().startsWith("/intern/rsrc.php")&&d.getQueryData().origin!==undefined?d.addQueryData("origin",c).toString():a})}}else this._iframeURI="about:blank";this._iframeProxy=null;try{this._iframe.contentWindow.location.replace(this._iframeURI),g.log("iframe_uri_set")}catch(c){g.error("iframe_uri_set_error",c),this.exitState({status:b("ChannelConstants").ERROR,stateId:a.stateId},c+"")}},enterState:function(a,c){a=="init"?this._initIframe(c):/idle|ping|pull/.test(a)?this._iframeProxy?this._iframeProxy.enterState.apply(this._iframeProxy,arguments):a!="idle"&&this.exitState({status:b("ChannelConstants").ERROR,stateId:c.stateId},"iframe not yet loaded"):a=="shutdown"&&this._initIframe()},_processTransportData:function(){this.manager._processTransportData.apply(this.manager,arguments)},exitState:function(a){this.manager.state=="init"&&a.status==b("ChannelConstants").OK&&(this._iframeProxy=b("DocRPC").proxy(this._iframe.contentWindow,"innerTransport",["enterState"],(this._iframeURI+"").replace(/iframe.*/,"")));if(/ping|pull/.test(this.manager.state)&&!this._iframeProxy)return;this.manager.exitState.apply(this.manager,arguments)}});function p(){this.init=this.init.bind(this),o.apply(this,arguments)}Object.assign(p.prototype,{logName:"iframe(inner)",init:function(){b("DocRPC").publish(this,"innerTransport");try{var a=b("DocRPC").proxy(window.parent,"outerTransport",["_processTransportData","exitState"],top.DocRPC.origin);Object.assign(this,a);this.exitState({status:b("ChannelConstants").OK,stateId:1e6})}catch(a){g.error("iframe_inner_init_error",a)}},enterState:function(a,c){this._request&&(this._request.abort(),this._request=null),a=="ping"?this._request=m(c,b("bind")(this,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(this,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})):a=="pull"&&(this._request=n(c,b("bind")(this,"_processTransportData",c.stateId),b("bind")(this,"exitState",{status:b("ChannelConstants").OK,stateId:c.stateId}),b("bind")(this,"exitState",{status:b("ChannelConstants").ERROR,stateId:c.stateId})))}});e.exports={isSubdomain:j,getURI:k,Transport:o,CORSTransport:d,IframeTransport:f,IframeInnerTransport:p,sendActivePing:c,sendAdditionalBuddyRequest:a}}),null);
__d("MercuryLoggingHelper",[],(function(a,b,c,d,e,f){__p&&__p();function g(a){return Array.from(a).slice(0,6).join("")}a={obfuscateThread:function(a){var b=babelHelpers["extends"]({},a);a&&a.snippet&&a.snippet.length>9&&(b.snippet=g(a.snippet)+"...");return b},obfuscateMessage:function(a){var b=babelHelpers["extends"]({},a);a&&a.body&&a.body.length>9&&(b.body=g(a.body)+"...");return b}};e.exports=a}),null);
__d("ChannelTransportDataLogger",["Arbiter","JSLogger","MercuryLoggingHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[],h=10,i=function(a){return a.map(function(a){var c=a;(a.message||a.delta&&a.delta.body)&&(c=babelHelpers["extends"]({},a),a.message&&(c.message=b("MercuryLoggingHelper").obfuscateMessage(a.message)),a.delta&&a.delta.body&&(c.delta=b("MercuryLoggingHelper").obfuscateMessage(a.delta)));return c})};a={log:function(a){var b={t:a.t,seq:a.seq};a.ms&&(b.ms=i(a.ms));g.push(b);g.length>h&&g.shift()}};b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.channelTransportLog=g});e.exports=a}),null);
__d("ChatProxyConnectionState",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.auxiliaryIrisQueues={},this.aiq=null}a.prototype.subscribeIrisQueue=function(a,b){this.auxiliaryIrisQueues[a]=b,this.updateCaches()};a.prototype.unsubscribeIrisQueue=function(a){delete this.auxiliaryIrisQueues[a],this.updateCaches()};a.prototype.updateCaches=function(){var a=[];for(var b in this.auxiliaryIrisQueues)Object.prototype.hasOwnProperty.call(this.auxiliaryIrisQueues,b)&&(a.push(b),a.push(this.auxiliaryIrisQueues[b]));a.length===0?this.aiq=null:this.aiq=a.join(",")};e.exports=a}),null);
__d("FBAjaxRequest",["AjaxRequest","getAsyncParams"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d){__p&&__p();d=babelHelpers["extends"]({},b("getAsyncParams")(a),d);a=new(b("AjaxRequest"))(a,c,d);a.streamMode=!1;var e=a._call;a._call=function(a){a=="onJSON"&&this.json&&(this.json.error&&(this.errorType=b("AjaxRequest").SERVER_ERROR,this.errorText="AsyncResponse error: "+this.json.error),this.json=this.json.payload),e.apply(this,arguments)};a.ajaxReqSend=a.send;a.send=function(a){this.ajaxReqSend(babelHelpers["extends"]({},a,d))};return a}e.exports=a}),null);
__d("CollabMinimumChromeVersion",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SCREEN_SHARE_CALL:65,VIDEO_CALL:48})}),null);
__d("FBRTCSupport",["ChannelConstants","CollabMinimumChromeVersion","RTCConfig","UserAgent","WorkplaceChatHelper"],(function(a,b,c,d,e,f){__p&&__p();var g={isWebrtcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Firefox >= 25")||b("UserAgent").isBrowser("Edge >= 15.15042")||b("UserAgent").isBrowser("Opera >= 20")},isGroupCallWebtrcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Opera >= 20")},isCollabSupported:function(){return g.isWebrtcSupported()&&(!!b("RTCConfig").CollabWhitelistedBrowserGK||b("UserAgent").isBrowser("Chrome >= "+b("CollabMinimumChromeVersion").VIDEO_CALL))},isOSSupported:function(){return!b("UserAgent").isPlatform("Android")&&!b("UserAgent").isPlatform("iOS")},isVideoFilterEffectSupported:function(){return!!b("RTCConfig").RtcWwwVideoCallFiltersGK&&(b("UserAgent").isBrowser("Chrome >= 51")||b("UserAgent").isBrowser("Opera >= 36"))},getCapabilities:function(){var a=b("ChannelConstants").CAPABILITY_VOIP_INTEROP;b("WorkplaceChatHelper").isDesktopChatApp()&&(a|=b("ChannelConstants").CAPABILITY_ACTIVE_ON_DESKTOP_APP);return a}};e.exports=g}),null);
__d("FantailLogger",["FantailConfig"],(function(a,b,c,d,e,f){__p&&__p();var g=b("FantailConfig").FantailLogQueue;a={debug:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).debug.apply(c,[b].concat(e))},info:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).info.apply(c,[b].concat(e))},warn:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).warn.apply(c,[b].concat(e))},error:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).error.apply(c,[b].concat(e))}};e.exports=a}),null);
__d("MovingStat",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){__p&&__p();a=a||6e4;var b={t:new Date(),count:0,v:0},c=b,d=0,e=0;function f(){var b=new Date()-a;while(c&&c.next&&c.t<b)d-=c.v,e-=c.count,c=c.next}this.add=function(a){d+=a;e++;var c=new Date();c-b.t<1e3?(b.v+=a,b.count++):(b.next={t:c,v:a,count:1},b=b.next,f())};this.tally=function(b){b=b||1e3;f();return{sum:d,count:e,timeAverage:d*b/a}}}e.exports=a}),null);
__d("RTISession",["invariant","AjaxRequest","BanzaiODS","ChatproxyClientErrorsTypedLogger","ErrorUtils","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b,c,d,e,f,h,i,j,k){a||g(0),e||g(0),f||g(0),this.domain=a,this.topLevelDomain=b,this.port=c,this.edgePoolName=d,this.stickyToken=e,this.loggedInId=f,this.accountId=h,this.clientProfile=i||"desktop",this.clientId=j,this.capabilities=k}a.prototype.issueRequest=function(a,c,d,e,f){__p&&__p();a||g(0);c||g(0);e||g(0);var h=this.domain+"."+this.topLevelDomain,i=(1048576*Math.random()|0).toString(36);i={cb:i,sticky_token:this.stickyToken,uid:this.loggedInId,viewer_uid:this.accountId,sticky_pool:this.edgePoolName,profile:this.clientProfile,clientid:this.clientId,cap:this.capabilities};for(var j in i)c[j]&&g(0);Object.assign(i,c);c=new(b("URI"))(a).setDomain(h).setPort(this.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(i);a=d?"POST":"GET";var k=new(b("AjaxRequest"))(a,c);k.timeout=f?f*1e3:3e4;k.streamMode=!1;k.xhr&&(k.xhr.withCredentials=!0);var l={};k.onSuccess=function(){b("BanzaiODS").bumpEntityKey("RTISession","request.success")};k.onJSON=function(){l.data=k.json,l.error=null,b("ErrorUtils").applyWithGuard(e,this,[l])}.bind(this);k.onError=function(){__p&&__p();var a=new Set(),c;if(d!==undefined&&d.subscriptions!==undefined){c=d.subscriptions.length;for(var f=0;f<d.subscriptions.length;f++){var g=d.subscriptions[f].topic.split("/");g.pop();a.add(g.join("/"))}}l.data=null;l.error=k.errorType||"error";b("BanzaiODS").bumpEntityKey("RTISession","request.error");this.logRequestFailure(k,a,c);b("ErrorUtils").applyWithGuard(e,this,[l])}.bind(this);k.send(JSON.stringify(d));b("BanzaiODS").bumpEntityKey("RTISession","request.attempt")};a.prototype.logRequestFailure=function(a,c,d){__p&&__p();var e=new(b("ChatproxyClientErrorsTypedLogger"))();e.setStatusCode(a.status);if(a.xhr!=null){var f=a.xhr.getResponseHeader("x-fb-chat-failure-reason");f&&e.setErrorReason(f)}e.setSubscriberID(this.loggedInId);e.setSessionIDStr(this.clientId);e.setErrorMessage(a.errorType);e.setErrorText(a.errorText);e.setTopicPrefixes(c);e.setJsEventTimeMs(Math.floor(Date.now()/1e3));d&&e.setBatchSize(d);a.uri&&e.setURL(a.uri.getPath());e.log()};e.exports=a}),null);
__d("ChannelManager",["errorCode","Promise","AjaxRequest","Arbiter","AsyncRequest","BanzaiODS","Bootloader","ChannelClientID","ChannelConstants","ChannelInitialData","ChannelSubdomain","ChannelTransport","ChannelTransportDataLogger","ChatProxyConnectionState","ChatReliabilityInstrumentation","ChatVisibility","DTSG","Env","FantailLogger","FBAjaxRequest","FBRTCSupport","ISB","JSLogger","LogHistory","MovingStat","PresenceCookieManager","PresenceState","PresenceUtil","Random","RTISession","SystemEvents","URI","UserActivity","clearTimeout","emptyFunction","requestAnimationFrameAcrossTransitions","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("JSLogger").create("channel"),j=b("LogHistory").getInstance("channel_manager"),k=null,l=b("emptyFunction"),m=new(b("Promise"))(function(a,b){l=a});function a(a){k=a}var n={idle:{ok:"init!"},init:{ok:"pull!",error:"reconnect",sys_online:"init",sys_timetravel:"init"},pull:{ok:"pull!",error:"ping",error_missing:"pull",error_msg_type:"pull",refresh_0:"reconnect",refresh_110:"reconnect",refresh_111:"reconnect",refresh_112:"pull",refresh_113:"pull",refresh_117:"reconnect"},ping:{ok:"pull!",error:"ping",error_stale:"reconnect!"},reconnect:{ok:"init!",error:"reconnect",sys_online:"reconnect",sys_timetravel:"reconnect"},shutdown:{},_all:{error_max:"shutdown!",error_shutdown:"shutdown!",sys_owner:"reconnect",sys_nonowner:"idle!",sys_online:"ping",sys_offline:"idle!",sys_timetravel:"ping"}},o={state:new(b("ChatProxyConnectionState"))(),userActive:Date.now(),created:Date.now(),ready:!1,seqTurSentAt:-1,queueMade:"",sequenceId:0,lastPresenceState:null,lastRequestErrorReason:null,seq:0,pingFailuresOnSubdomain:0,pws:"fresh",estimatedReceived:0,sessionID:b("ChannelClientID").getID(),capabilities:b("FBRTCSupport").getCapabilities(),streamingCapable:!1,inStreaming:!1,shouldSuppressPresence:b("PresenceState").shouldSuppress(),LONGPOLL_TIMEOUT:6e4,STREAMING_TIMEOUT:6e4,P_TIMEOUT:3e4,IFRAME_LOAD_TIMEOUT:3e4,MIN_RETRY_INTERVAL:5e3,MAX_RETRY_INTERVAL:32e4,MIN_12002_TIMEOUT:9e3,MIN_504_TIMEOUT:2e4,STALL_THRESHOLD:18e4,JUMPSTART_THRESHOLD:9e4,MIN_INIT_PROBE_DELAY:3e3,INIT_PROBE_DELAY_RANDOMIZE_RANGE:12e3,CHANNEL_PROXY_REPORTING_MIN_INTERVAL:1e4,PROBE_DELAY:6e4,PROBE_HEARTBEATS_INTERVAL_LOW:1e3,PROBE_HEARTBEATS_INTERVAL_HIGH:5e3,STREAMING_EXIT_STATE_ON_CONTINUE:!1},p=1,q={},r=0;function s(){return b("AsyncRequest").lastSuccessTime?Math.round((Date.now()-b("AsyncRequest").lastSuccessTime)/1e3):-1}function t(){var a={};h.getConfig("host")&&(a[h.getConfig("user_channel")]=h.getConfig("seq",0));return a}function u(){__p&&__p();var a=Date.now(),c=Date.now(),d={total:0},e="idle",f=!1;b("SystemEvents").subscribe([b("SystemEvents").USER,b("SystemEvents").ONLINE,b("SystemEvents").TIME_TRAVEL],function(a,d){__p&&__p();v(!0);c=null;h.lastPullTime=Date.now();var e;switch(a){case b("SystemEvents").USER:e=b("SystemEvents").isPageOwner()?b("ChannelConstants").SYS_OWNER:b("ChannelConstants").SYS_NONOWNER;break;case b("SystemEvents").ONLINE:e=d?b("ChannelConstants").SYS_ONLINE:b("ChannelConstants").SYS_OFFLINE;break;case b("SystemEvents").TIME_TRAVEL:if(o.skipTimeTravel)return;if(0<d){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"skipping time travel failure. %s",d);return}e=b("ChannelConstants").SYS_TIMETRAVEL;break}h.exitState({status:e,stateId:p})});var g=function(f,g){__p&&__p();var h=Date.now(),i=null;g?(a=h,i=g.nextState||g.state):i=e;b("SystemEvents").checkTimeTravel();if(c){g=Math.round((h-c)/1e3);g>0&&(d[e]=(d[e]||0)+g,d.total+=g)}e=i;c=h;f||(d.lastSuccessTime=s(),d.online=b("SystemEvents").isOnline(),j.log("rollup",JSON.stringify(d)))};b("Arbiter").subscribe(b("ChannelConstants").ON_ENTER_STATE,g);b("setIntervalAcrossTransitions")(g,6e4);b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.channelRollup=d});g=function(){__p&&__p();if(h.isShutdown()||h.shouldIdle())return;b("SystemEvents").checkTimeTravel();var c=Date.now()-(h.lastPullTime||b("Env").start);if(!f&&c>o.STALL_THRESHOLD){var d=s();j.error("stall",JSON.stringify({lastSuccessTime:d,rollupState:e}));b("ChatReliabilityInstrumentation").logCHANNEL_STALLED(c.toString());f=!0}d=Date.now()-a;h.state=="pull"&&d>o.JUMPSTART_THRESHOLD&&(a=null,j.warn("jumpstart",JSON.stringify({state:h.state,dormant:d})),b("Arbiter").inform(b("ChannelConstants").JUMPSTART,d),h.enterState("init"))};b("setIntervalAcrossTransitions")(g,5e3)}function v(a){a?(r=0,q={}):r++}function w(a,c){var d=!b("AjaxRequest").supportsCORS(),e=b("ChannelTransport").isSubdomain(o.subdomain);!e||d?o.fullHost=o.host:o.fullHost=o.subdomain+"-"+o.host;b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"received lb info: %s at seq: %s{%s} with ".concat("sticky: %s/%s, subdomain: %s, fullHost: %s, state: %s,").concat(" source: %s, args: %s"),o.sessionID,o.seq,o.sequenceId,o.sticky_token,o.sticky_pool,o.subdomain,o.fullHost,h.state,a,c)}h={state:"idle",nextState:null,proxyDown:!1,lastPullTime:Date.now(),lastReportOnMisguidedMsgTime:Date.now(),heartbeats:[],setTestCallback:a,backoff:!1,sessionRegistered:!1,init:function(a,c){__p&&__p();b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"initializing sessionid:%s at iris-seq:%s",o.sessionID,o.sequenceId);this.init=b("emptyFunction");b("Arbiter").subscribe(b("ChannelConstants").GET_RTI_SESSION_REQUEST,function(event,a){this.informCurrentSession()}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").CONSOLE_LOG,function(a,b){!1});b("requestAnimationFrameAcrossTransitions")(function(){b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"using session id: %s at seq: %s {%s} with sticky: %s/%s",o.sessionID,o.seq,o.sequenceId,o.sticky_token,o.sticky_pool),b("UserActivity").subscribe(function(){var a=b("ChannelTransport").getURI(o,"/U");b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"user activity sessionid: %s at seq: %s/{%s} with sticky: %s/%s state: %s uri: %s",o.sessionID,o.seq,o.sequenceId,o.sticky_token,o.sticky_pool,h.state,a);h.state=="pull"&&(o.userActive=Date.now(),b("ChannelTransport").sendActivePing(o))}),b("Arbiter").subscribe(b("ChannelConstants").ENTITY_PRESENCE_ACTIVE_PING,function(a){a=b("ChannelTransport").getURI(o,"/U");b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entity presence activity sessionid: %s at seq: %s/{%s} with sticky: %s/%s state: %s uri: %s",o.sessionID,o.seq,o.sequenceId,o.sticky_token,o.sticky_pool,h.state,a);h.state=="pull"&&(o.userActive=Date.now())})});b("PresenceCookieManager").register("ch",t);var d=this.getConfig("max_conn",2);o.subdomain=b("ChannelSubdomain").allocate(d);b("ChannelTransport").isSubdomain(o.subdomain)||(b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"invalid subdomain from ChannelSubdomain: %s",o.subdomain),o.subdomain=null);this._transportRate=new(b("MovingStat"))(3e4);var e=b("AjaxRequest").supportsCORS()?"CORSTransport":"IframeTransport";b("BanzaiODS").bumpEntityKey("ChannelManager","transport_chosen."+e);this.transport=new(b("ChannelTransport")[e])(this);l(this.transport);a&&this.enterState(a,c);b("requestAnimationFrameAcrossTransitions")(function(){b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(event,a){this._transportRate&&(a.transportRate=this._transportRate.tally(),a.transportType=e,a.transportVersion=2)}.bind(this)),u()}.bind(this));if(h.getConfig("fullHost")&&b("AjaxRequest").supportsCORS()){if(h.getConfig("tryStreaming")){d=o.MIN_INIT_PROBE_DELAY+b("Random").random()*o.INIT_PROBE_DELAY_RANDOMIZE_RANGE;b("setTimeoutAcrossTransitions")(this._probeTest,d)}if(h.getConfig("trySSEStreaming")){a=o.MIN_INIT_PROBE_DELAY+b("Random").random()*o.INIT_PROBE_DELAY_RANDOMIZE_RANGE;b("setTimeoutAcrossTransitions")(this._sseProbeTest,a)}}},configure:function(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];j.log("configure",JSON.stringify(c));c.forEach(function(a){return Object.assign(o,a)});w("reconnect",JSON.stringify(c));b("Arbiter").inform(b("ChannelConstants").ON_CONFIG,this)},getConfig:function(a,b){return Object.prototype.hasOwnProperty.call(o,a)?o[a]:b},getCompleteConfig:function(){return o},subscribeIrisQueue:function(a,c){o.state.subscribeIrisQueue(a,c),this.exitState({status:b("ChannelConstants").OK,stateId:p})},unsubscribeIrisQueue:function(a){o.state.unsubscribeIrisQueue(a)},informCurrentSession:function(){var a=null;this.sessionRegistered&&o&&o.fullHost&&o.sticky_token&&o.uid&&(a=new(b("RTISession"))(o.fullHost,o.domain,o.port,o.sticky_pool,o.sticky_token,o.uid,o.viewerUid,o.profile,o.sessionID,o.capabilities));b("Arbiter").inform(b("ChannelConstants").RTI_SESSION,a)},isShutdown:function(){return this.state=="shutdown"},shouldIdle:function(){return!(b("SystemEvents").isPageOwner()&&b("SystemEvents").isOnline())},_sendIframeError:function(a){a=new(b("AsyncRequest"))().setURI("/ajax/presence/reconnect.php").setData({reason:a,fb_dtsg:b("DTSG").getToken()}).setOption("suppressErrorHandlerWarning",!0).setOption("retries",1).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(!0);a.specifiesWriteRequiredParams()&&a.send()},_getDelay:function(){var a=Math.min(o.MIN_RETRY_INTERVAL*Math.pow(2,Math.max(0,r-1)),o.MAX_RETRY_INTERVAL);this.proxyDown&&"proxy_down_delay_millis"in o&&(a=o.proxy_down_delay_millis);this.proxyDown=!1;return Math.floor(a*(1+Math.random()*.5))},resetDelay:function(){v(!0)},enterState:function(){this._inEnterState&&(j.warn("enterstate_recursion",JSON.stringify({state:this.state,args:arguments})),b("ChatReliabilityInstrumentation").logERROR("enterstate_recursion"));this._inEnterState=!0;try{this._enterState.apply(this,arguments),this._inEnterState=!1}catch(a){this._inEnterState=!1;throw a}},_enterState:function(a){__p&&__p();var c=this.backoff?this._getDelay():0;this.backoff=!1;if(this.isShutdown()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"not executing state due to shutdown mode: %s",a);return}if(a!="idle!"&&this.shouldIdle()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"forced idleness");return}p++;o.stateId=p;b("clearTimeout")(this._deferredTransition);this._deferredTransition=null;!this.transport?(m.done(function(a){return a.enterState("idle")}),b("ChatReliabilityInstrumentation").logERROR("called enterState "+a+" before transport init")):this.transport.enterState("idle");this.state="idle";this.nextState=null;if(/!$/.test(a)){if(this._transportRate){var d=this._transportRate.tally().timeAverage,e=h.getConfig("MAX_CHANNEL_STATES_PER_SEC",1);d>=e&&(this._throttled||(this._throttled=!0,j.warn("throttled","{}"),b("Arbiter").inform(b("ChannelConstants").THROTTLED,d)),i.bump("throttle"),c=1e3/e)}}else/#$/.test(a)||(c=this._getDelay());a=a.replace(/\W*$/,"");if(!n[a]){b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"invalid state: %s",a);throw new Error("invalid state:"+a)}var f=Array.from(arguments),g;if(c<=0){g={state:a};this._transportRate&&this._transportRate.add(1);this.state=a;var k=this["_enter_"+this.state];k&&(f.shift(),k.apply(this,f));/init|idle|pull|ping/.test(this.state)&&(o.streamingCapable&&/pull/.test(this.state)&&(this.heartbeats=[]),o.is_offline=!b("ChatVisibility").isOnline(),o.capabilities=b("FBRTCSupport").getCapabilities(),b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entering transport state: %s",this.state),!this.transport?(m.done(function(a){return a.enterState(this.state,o)}.bind(this)),b("ChatReliabilityInstrumentation").logERROR("called enterState "+a+" before transport init")):this.transport.enterState(this.state,o),this.state=="ping"&&(g.url=b("ChannelTransport").getURI(o).toString(),g.port=o.port||"undefined"))}else this.state="idle",this.nextState=a,g={state:this.state,delay:c,nextState:a},f[0]=a+"#",this._deferredTransition=b("setTimeoutAcrossTransitions")(function(){this._deferredTransition=null,this.enterState.apply(this,f)}.bind(this),c);/pull/.test(a)&&(g.client_id=o.sessionID,g.streaming=o.inStreaming);b("Arbiter").inform(b("ChannelConstants").ON_ENTER_STATE,g)},exitState:function(a,c){__p&&__p();var d=a.stateId,e=a.status;if(this.isShutdown()||d<p)return;var f=this.state,g=Array.from(arguments);g[0]=a.status;var h={state:f,status:e};/pull/.test(f)&&(h.client_id=o.sessionID,h.streaming=o.inStreaming);/ping/.test(f)&&e!=b("ChannelConstants").OK&&(h.url=b("ChannelTransport").getURI(o).toString());this.nextState&&(h.nextState=this.nextState);c&&c.errorType?(o.lastRequestErrorReason=c.errorType,h.xhr=c.toJSON?c.toJSON():c,c.errorType==b("AjaxRequest").SERVICE_UNAVAILABLE&&(b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"got 5xx http status code, setting long delay"),this.proxyDown=!0),delete h.xhr.json):e!=b("ChannelConstants").OK&&(o.lastRequestErrorReason=e);c&&c.json&&(c.json.t&&(h.t=c.json.t),c.json.reason&&(h.reason=c.json.reason),c.json.seq&&(h.seq=c.json.seq));b("Arbiter").inform(b("ChannelConstants").ON_EXIT_STATE,h);var i=this["_exit_"+f];i&&(e=i.apply(this,g)||e);e!=b("ChannelConstants").OK&&(v(),q[f]=(q[f]||0)+1);var k=n[this.nextState||f][e]||n._all[e],l=k&&k.replace(/!*$/,"");l||(j.error("terminal_transition",JSON.stringify(h)),this._shutdownHint=b("ChannelConstants").HINT_INVALID_STATE,k="shutdown!",b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"entering shutdown state"));this._lastState=f;this._lastStatus=e;this.enterState(k)},_processTransportData:function(a,b){this._processTransportData0(a,b,b.json)},_processTransportData0:function(a,c,d){__p&&__p();var e=d.t;"s"in d&&(d.seq=d.s,delete d.s);if(d.u&&o.user&&d.u!=o.user){j.warn("misguided_msg",JSON.stringify({user:o.user,target:d.u}));this._reportProxyMisguidedMsg(d.u,o.user);return}b("ChannelTransportDataLogger").log(d);var f=o.seq;"seq"in d&&(o.seq=d.seq,b("PresenceState").doSync());switch(e){case"continue":o.inStreaming&&this.heartbeats.length<1&&(o.streamingCapable=!1,j.log("switch_to_longpoll","{}"),b("setTimeoutAcrossTransitions")(this._probeTest,o.PROBE_DELAY));v(!0);(!o.inStreaming||o.STREAMING_EXIT_STATE_ON_CONTINUE)&&this.exitState({status:b("ChannelConstants").OK,stateId:a});break;case"refresh":case"refreshDelay":b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"got refresh with reason: %s",d.reason);this.exitState({status:"refresh_"+(d.reason||0),stateId:a},c);break;case"backoff":b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"server told client to back off");v();this.backoff=!0;break;case"lb":var g=d.lb_info;if(g){o.sticky_token=g.sticky;"pool"in g&&(o.sticky_pool=g.pool);if("sd"in g){var h=g.subdomain;b("ChannelTransport").isSubdomain(h)&&(o.subdomain=g.subdomain)}"vip"in g&&(o.host=g.vip);w("chatproxy",JSON.stringify(d))}else j.error("missing_lb_info","{}");break;case"test_streaming":b("setTimeoutAcrossTransitions")(this._probeTest,500);break;case"fullReload":b("PresenceCookieManager").clear();j.log("full_reload","{}");this.sessionRegistered=!0;this.informCurrentSession();b("Arbiter").inform(b("ChannelConstants").ON_INVALID_HISTORY);v(!0);b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"full reload incurred");h=b("ChannelConstants").OK;this.exitState({status:h,stateId:a},c);"ms"in d&&this._processMessages(d,f);break;case"msg":v(!0);this._processMessages(d,f);break;case"heartbeat":if(o.inStreaming){g=Date.now();if(this.heartbeats.length>0)var i=g-this.heartbeats[this.heartbeats.length-1];j.log("heartbeat_interval",JSON.stringify({client_id:o.sessionID,interval:i}));this.heartbeats.push(g)}break;case"batched":h=d.batches;for(f=0;f<h.length;f++)this._processTransportData0(a,c,h[f]);break;default:b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"got an unknown protocol message: %s",e);j.error("unknown_msg_type",JSON.stringify({type:e}));break}},_processMessages:function(a,c){__p&&__p();var d,e,f;"tr"in a&&(o.trace_id=a.tr);a=a.ms;e=o.seq-a.length;for(d=0;d<a.length;d++,e++){o.estimatedReceived++;if(e>=c){f=a[d];if(f.type){var g=b("ChannelConstants").getArbiterType(f.type);if(f.type==="messaging"){var h={type:"messaging",event:f.event};f.message&&(h.inbox_unread=f.unread_counts&&f.unread_counts.inbox,h.tid=f.message.tid,h.mid=f.message.mid,b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"got message with id: %s",f.message.mid))}else f.type==="skywalker"?g=b("ChannelConstants").SKYWALKER:f.type==="qprimer"?(f.first=!o.ready,f.first&&(o.ready=!0,o.timeUntilReady=Date.now()-o.created,o.queueMade=f.made),g=b("ChannelConstants").CHANNEL_ESTABLISHED):f.type==="pws"?o.pws=f.pws:f.type==="delta"&&(o.sequenceId=f.iseq);try{b("Arbiter").inform(g,{obj:f})}catch(a){b("BanzaiODS").bumpEntityKey("ChannelManager","processMessages.error."+f.type),b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"message threw exception: %s %s",a,f)}}}else j.warn("seq_regression",JSON.stringify({last_seq:c,messages:a.length,seq:e}))}},_enter_init:function(){if(q.init>=h.getConfig("MAX_INIT_FAILS",2))return b("setTimeoutAcrossTransitions")(function(){return this.exitState({status:b("ChannelConstants").ERROR_MAX,stateId:p})}.bind(this),0);this._initTimer=b("setTimeoutAcrossTransitions")(function(){return this.exitState({status:b("ChannelConstants").ERROR,stateId:p},"timeout")}.bind(this),o.IFRAME_LOAD_TIMEOUT)},_enter_reconnect:function(a){__p&&__p();j.warn("enter_reconnect",a);b("FantailLogger").info(b("ChannelConstants").FANTAIL_SERVICE,"entered reconnect with reason: %s",a);var c=p;if(!b("PresenceUtil").hasUserCookie()){b("FantailLogger").warn(b("ChannelConstants").FANTAIL_SERVICE,"user has no cookie???");j.warn("no_user_cookie","{}");b("setTimeoutAcrossTransitions")(function(){this._shutdownHint=b("ChannelConstants").HINT_AUTH,this.exitState({status:b("ChannelConstants").ERROR_SHUTDOWN,stateId:c})}.bind(this),0);return}a={reason:a,fb_dtsg:b("DTSG").getToken()};b("ISB").token&&(a.fb_isb=b("ISB").token);k&&k(a);var d=new(b("FBAjaxRequest"))("GET","/ajax/presence/reconnect.php",a);d.onSuccess=function(){h.configure(d.json),b("PresenceCookieManager").store(),this.exitState({status:b("ChannelConstants").OK,stateId:c})}.bind(this);d.onError=function(){var a=d.json&&d.json.error;b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"reconnect error: %s",d.errorType);(d.errorType==b("AjaxRequest").TRANSPORT_ERROR||d.errorType==b("AjaxRequest").PROXY_ERROR||d.errorType==b("AjaxRequest").SERVICE_UNAVAILABLE)&&(this._shutdownHint=b("ChannelConstants").HINT_CONN);a&&a==1356007?this._shutdownHint=b("ChannelConstants").HINT_MAINT:a==1357001||a==1357004||a==1348009?this._shutdownHint=b("ChannelConstants").HINT_AUTH:this._shutdownHint=null;this.exitState({status:this._shutdownHint?b("ChannelConstants").ERROR_SHUTDOWN:b("ChannelConstants").ERROR,stateId:c},d)}.bind(this);d.send()},_enter_shutdown:function(){b("Arbiter").inform(b("ChannelConstants").ON_SHUTDOWN,{reason:this._shutdownHint});if("shutdown_recovery_interval_seconds"in o&&o.shutdown_recovery_interval_seconds>0){var a=o.shutdown_recovery_interval_seconds*1e3;b("setTimeoutAcrossTransitions")(function(){b("Arbiter").inform(b("ChannelConstants").ATTEMPT_RECONNECT),this._shutdownHint=null,this.state="reconnect!",this.enterState("reconnect!")}.bind(this),a)}},_exit_init:function(a){this._initTimer&&(this._initTimer=b("clearTimeout")(this._initTimer)),a==b("ChannelConstants").ERROR_MAX&&this._sendIframeError(b("ChannelConstants").reason_IFrameLoadGiveUp)},_exit_pull:function(a,c){var d=a==b("ChannelConstants").OK;if(d)this.lastPullTime=Date.now();else{d="exit status: "+a;c&&c.errorType&&(d+=" ajax request error: "+c.errorType);b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"pull failed with status: %s",d)}},_exit_ping:function(a){if(a==b("ChannelConstants").OK){var c=Date.now()-(this.lastPullTime||b("Env").start);if(c>o.STALL_THRESHOLD){b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"didnt complete a successful pull for too long");return b("ChannelConstants").ERROR_STALE}}else b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"ping failed with status: %s",a)},_reportProxyMisguidedMsg:function(a,c){__p&&__p();b("FantailLogger").error(b("ChannelConstants").FANTAIL_SERVICE,"misguided message to %s meant for %s",c,a);var d=Date.now();if(d-this.lastReportOnMisguidedMsgTime<=o.CHANNEL_PROXY_REPORTING_MIN_INTERVAL)return;this.lastReportOnMisguidedMsgTime=d;d={received_uid:a,expected_uid:c};o.sticky_token&&(d.sticky_token=o.sticky_token);a=new(b("URI"))("/err_misguided_msg").setDomain(o.host+"."+o.domain).setPort(o.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(d);c=new(b("AjaxRequest"))("GET",a);b("AjaxRequest").supportsCORS()&&(c.xhr.withCredentials=!0);c.onSuccess=function(a){};c.onError=function(a){};c.onJSON=function(a,b){};c.send()},_probeTest:function(){__p&&__p();o.streamingCapable=!1;var a=[],c={mode:"stream",format:"json"};o.sticky_token&&(c.sticky_token=o.sticky_token);c=new(b("URI"))("/probe").setDomain(o.fullHost+"."+o.domain).setPort(o.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(c);b("BanzaiODS").bumpEntityKey("ChannelManager","probe.attempt");c=new(b("AjaxRequest"))("GET",c);c.onJSON=function(c,d){if(c&&c.json&&c.json.t==="heartbeat"){a.push(Date.now());if(a.length>=2){d=a[1]-a[0];d>=o.PROBE_HEARTBEATS_INTERVAL_LOW&&d<=o.PROBE_HEARTBEATS_INTERVAL_HIGH?(o.streamingCapable=!0,b("BanzaiODS").bumpEntityKey("ChannelManager","probe.switch_to_streaming"),j.log("switch_to_streaming","{}")):b("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.delayed")}}};c.onSuccess=function(c){a.length!=2&&(o.streamingCapable=!1,b("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.data_loss"),j.error("probe_error",JSON.stringify({error:"beats.length = "+a.length}))),b("BanzaiODS").bumpEntityKey("ChannelManager","probe.success"),j.log("probe_success","{}")};c.onError=function(a){o.streamingCapable=!1,b("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.error"),j.error("probe_error",JSON.stringify(a))};c.send()},_sseProbeTest:function(){__p&&__p();if(!window.EventSource){b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.no_event_source");j.log("sse_probe.failure.no_event_source","{}");return}var a=[],c={mode:"sse",format:"json"};o.sticky_token&&(c.sticky_token=o.sticky_token);c=new(b("URI"))("/sse_probe").setDomain(o.fullHost+"."+o.domain).setPort(o.port).setSecure(new(b("URI"))(window.location.href).isSecure()).setQueryData(c);b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.attempt");var d=new EventSource(c),e=b("setTimeoutAcrossTransitions")(function(){d.close(),b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.timeout"),j.log("sse_probe.failure.timeout","{}")},o.PROBE_HEARTBEATS_INTERVAL_HIGH*6);d.addEventListener("heartbeat",function(c){a.push(Date.now());if(a.length>=2){c=a[1]-a[0];c>=o.PROBE_HEARTBEATS_INTERVAL_LOW&&c<=o.PROBE_HEARTBEATS_INTERVAL_HIGH?(b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.success"),j.log("sse_probe.success","{}")):(b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.delayed"),j.log("sse_probe.failure.delayed","{}"));b("clearTimeout")(e);d.close()}});d.onerror=function(a){b("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.error"),j.error("sse_probe.failure.error",JSON.stringify(a)),b("clearTimeout")(e),d.close()}},startChannelManagerForApp:function(a){h.startChannelManager!==b("emptyFunction")&&h.startChannelManager(),b("ChannelInitialData").channelConfig&&o&&(o.profile=a)},startChannelManager:function(){b("ChannelInitialData").channelConfig?(h.configure(b("ChannelInitialData").channelConfig),/shutdown/.test(b("ChannelInitialData").state)&&(h._shutdownHint=b("ChannelConstants")[b("ChannelInitialData").reason]),h.init(b("ChannelInitialData").state,b("ChannelInitialData").reason),b("ChatReliabilityInstrumentation").logCHANNEL_INIT(),this.startChannelManager=b("emptyFunction"),window.WebSocket||b("Bootloader").loadModules(["MqttWsClientTypedLogger"],function(a){return new a().log()},"ChannelManager")):b("ChatReliabilityInstrumentation").logCHANNEL_NOCONFIG()}};e.exports=h}),null);
__d("ChatOpenTab",["csx","Bootloader","ContextualThing","CurrentUser","Event","MercuryIDs","MercuryParticipantTypes","Parent","WorkplaceChatHelper","gkx","requireWeak"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null;b("requireWeak")("FantaTabsReactApp",function(a){return h=a});b("requireWeak")("FantaTabsSlimApp",function(a){return h=a});function i(a,c,d,e){b("Event").listen(a,"click",function(f){(l.canOpenTab()||b("CurrentUser").isWorkUser()&&b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop()&&b("gkx")("AT7jinnyRPDg4OtD2DVZhvkvAcwN4UEfD67JxgYKN8ktNW7yrzWDgUhjX86ZgaJp_pMk__upuP12-9rZjDRDprZwcbUv5zDffty-rkNZ2YUXjQ"))&&(e(c,d),a.removeAttribute("ajaxify"),a.removeAttribute("rel"),f.preventDefault())})}function j(a,c,d,e){b("Event").listen(a,"click",function(a){l.canOpenTab()&&e(c,d)})}function k(a){a=b("ContextualThing").getContext(a);return a&&b("Parent").bySelector(a,"._3qw")!==null}var l={canOpenTab:function(){return h&&!h.isHidden()},listenOpenEmptyTabDEPRECATED:function(a,b){i(a,null,b,this._loadAndOpenEmptyFantaTab)},listenOpenThreadDEPRECATED:function(a,b,c){i(a,b,c,function(a,b){return this.loadAndOpenFantaTab(a,b,c)}.bind(this))},listenOpenUserTabDEPRECATED:function(a,c,d){k(a)||i(a,c,d,function(a){return this.loadAndOpenFantaTab(a,b("MercuryParticipantTypes").USER,d)}.bind(this))},listenOpenUserTabPersistentEventDEPRECATED:function(a,c,d){k(a)||j(a,c,d,function(a){return this.loadAndOpenFantaTab(a,b("MercuryParticipantTypes").USER,d)}.bind(this))},listenOpenPageTabDEPRECATED:function(a,c,d,e){k(a)||i(a,c,e,function(a){return this.loadAndOpenFantaTab(a,b("MercuryParticipantTypes").PAGE,e)}.bind(this))},listenOpenPageTabPersistentEventDEPRECATED:function(a,c,d,e){k(a)||j(a,c,e,function(a){return this.loadAndOpenFantaTab(a,b("MercuryParticipantTypes").PAGE,e)}.bind(this))},loadAndOpenFantaTab:function(a,c,d){b("Bootloader").loadModules(["ChatOpenTabEventLogger","FantaTabActions"],function(e,f){if(c===b("MercuryParticipantTypes").USER||c===b("MercuryParticipantTypes").PAGE){var g=b("MercuryIDs").getThreadIDFromUserID(a);f.openTab(g,[d]);e.logUserClickOpen(d,a)}else f.openTab(a,[d]),e.logClickOpen(d,a)},"ChatOpenTab")},_loadAndOpenEmptyFantaTab:function(){b("Bootloader").loadModules(["ChatOpenTabEventLogger","FantaTabActions","MessengerState.bs"],function(a,c,d){d=d.createNewLocalThreadGenerateID(b("CurrentUser").getID());c.openNewMessageTab(d,"jewel_new_message");a.logClickOpen("EmptyTab")},"ChatOpenTab")}};e.exports=l}),null);
__d("ChatOpenTabEventLogger",["Banzai","Bootloader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="messaging_tracking";a={_log:function(a,c,d,e){var f={referrer:a||"",message_thread_id:c,message_view:"chat",timestamp_send:Date.now(),message_target_ids:[]};d!==undefined&&(f.message_target_ids=[d]);b("Bootloader").loadModules(["ChatImpressionLogger"],function(c){c.logImpression(a,d,e),b("Banzai").post(g,f,{delay:0,retry:!0})},"ChatOpenTabEventLogger")},logClickOpen:function(a,c,d,e){b("Bootloader").loadModules(["MercuryIDs","getPageIDFromThreadID","ChatImpressionLogger"],function(b,f){this._log(a,c,d,e);b=f(String(c));b&&this._logPageClick(a,b)}.bind(this),"ChatOpenTabEventLogger")},logUserClickOpen:function(a,c,d){b("Bootloader").loadModules(["MercuryIDs","ChatImpressionLogger"],function(b){b=b.getThreadIDFromUserID(c);this.logClickOpen(a,b,c,d)}.bind(this),"ChatOpenTabEventLogger")},logAutoOpen:function(a,b,c,d){this._log(a,b,c,d)},logUserAutoOpen:function(a,c){b("Bootloader").loadModules(["MercuryIDs","ChatImpressionLogger"],function(b){b=b.getThreadIDFromUserID(c);this._log(a,b,c)}.bind(this),"ChatOpenTabEventLogger")},_logPageClick:function(a,c){b("Banzai").post("page_message_button_click",{page_id:c,ref:a}),b("Bootloader").loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum"],function(b,d,e){b.log(c,d.CLICK,e.PAGE_MESSAGE,a)},"ChatOpenTabEventLogger")}};e.exports=a}),null);
__d("MercuryErrorType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SERVER:1,TRANSPORT:2,TIMEOUT:3})}),null);
__d("MercuryActionStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNSENT:0,SUCCESS:1,UNCONFIRMED:3,FAILED_UNKNOWN_REASON:4,UNABLE_TO_CONFIRM:5,RESENT:6,RESENDING:7,ERROR:10})}),null);
__d("MercuryActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LOG_MESSAGE:"ma-type:log-message",USER_GENERATED_MESSAGE:"ma-type:user-generated-message",ADD_GROUP_ADMINS:"ma-type:add_group_admins",REMOVE_GROUP_ADMINS:"ma-type:remove_group_admins",CHANGE_READ_STATUS:"ma-type:change_read_status",MARK_THREAD_SEEN:"ma-type:mark_thread_seen",CHANGE_MUTE_SETTINGS:"ma-type:change-mute-settings",SEND_MESSAGE:"ma-type:send-message",DELETE_MESSAGES:"ma-type:delete-messages",DELETE_THREAD:"ma-type:delete-thread",UPDATE_SNIPPET:"ma-type:update-snippet",CHANGE_ARCHIVED_STATUS:"ma-type:change-archived-status",CHANGE_PINNED_STATUS:"ma-type:change-pinned-status",CHANGE_PAGE_FOLLOW_UP_STATUS:"ma-type:change-page-follow-up-status",CHANGE_FOLDER:"ma-type:change-folder",ADD_PARTICIPANTS:"ma-type:add-participants",CANCEL_ATTACHMENT_PLACEHOLDER:"ma-type:cancel-attachment-placeholder",CONFIRM_ATTACHMENT_PLACEHOLDER:"ma-type:confirm-attachment-placeholder",CHANGE_FLAG:"ma-type:change_flag",MOVE_PENDING_TO_INBOX:"ma-type:move_pending_to_inbox",CREATE_PAGE_ADMIN_NOTE:"ma-type:create-page-admin-note",REPLACE_MESSAGE:"ma-type:replace-message",UPDATE_CUSTOM_LIKE:"ma-type:update_custom_like",UNWRAP_MESSAGE:"ma-type:unwrap-message",JOINABLE_MODE:"ma-type:joinable-mode",APPROVAL_MODE:"ma-type:approval-mode",APPROVAL_QUEUE:"ma-type:approval-queue",IS_PIN_PROTECTED:"ma-type:is_pin_protected",REACTION_UPDATE:"ma-type:reaction-update",LIVE_LOCATION_UPDATE:"ma-type:live-location-update",UPDATE_RTC_CALL_DATA:"ma-type:update-rtc-call-data",UPDATE_COMM_STATUS:"ma-type:update-comm-status",EVENT_RSVP_CHANGED:"ma-type:event-rsvp-changed",BLOCK_STATUS_CHANGED:"ma-type:block-status-changed",UPDATE_COMM_ITEM_OWNER:"ma-type:update-comm-item-owner",MONTAGE_DIRECT_EXPIRE:"ma-type:montage-direct-expire",GROUPS_SYNC_STATUS_CHANGED:"ma-type:groups-sync-status-changed",GROUPS_SYNC_METADATA_UPDATE:"ma-type:groups-sync-metadata-update",DESCRIPTION_CHANGED:"ma-type:description-changed",UPDATE_THREAD_THEME:"ma-type:update-thread-theme",UPDATE_JOINABLE_LINK:"ma-type:update-joinable-link",CREATE_OMNI_M_SUGGESTIONS:"ma-type:create-omni-m-suggestions",DELETE_MONTAGE_MESSAGES:"ma-type:delete-montage-messages",NEW_MONTAGE_MESSAGE:"ma-type:new-montage-message"})}),null);
__d("MercuryLogMessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SUBSCRIBE:"log:subscribe",UNSUBSCRIBE:"log:unsubscribe",VIDEO_CALL:"log:video-call",PHONE_CALL:"log:phone-call",THREAD_NAME:"log:thread-name",THREAD_IMAGE:"log:thread-image",SERVER_ERROR:"log:error-msg",LIVE_LISTEN:"log:live-listen",WALLPAPER:"log:wallpaper",ORION:"log:orion",SWITCH_TO_WORK:"log:switch",PAGE_REPLY:"log:page-reply",GENERIC_ADMIN_TEXT:"log:generic-admin-text"})}),null);
__d("MercuryMessageDeliveryState",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1});e.exports=a}),null);
__d("MercuryAssert",["MercuryIDs"],(function(a,b,c,d,e,f){__p&&__p();e.exports={isParticipantID:function(a){if(!b("MercuryIDs").isValid(a))throw new Error("bad_participant_id "+a)},allParticipantIDs:function(a){a.forEach(this.isParticipantID)},isUserParticipantID:function(a){var c=b("MercuryIDs").tokenize(a);if(c.type!="fbid")throw new Error("bad_user_id "+a)},isEmailParticipantID:function(a){var c=b("MercuryIDs").tokenize(a);if(c.type!="email")throw new Error("bad_email_id "+a)},allThreadID:function(a){a.forEach(this.isThreadID)},isThreadID:function(a){if(!b("MercuryIDs").isValid(a))throw new Error("bad_thread_id "+a)}}}),null);
__d("MercuryViewer",["CurrentUser","MercuryAssert"],(function(a,b,c,d,e,f){"use strict";var g="fbid:"+b("CurrentUser").getID();a={getID:function(){return g},isViewer:function(a){b("MercuryAssert").isParticipantID(a);return a===g}};e.exports=a}),null);
__d("Utils.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return!1;else return a}function b(a,b){if(a)return a[0];else return b}function c(a){if(a)return a[0];else return!1}function d(a){if(a)return a[0];else return!1}f.isTruthy=a;f.$pipe$unknown=b;f.isSomeTrue=c;f.optionBoolToBool=d}),null);
__d("bs_caml_builtin_exceptions",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=["Out_of_memory",0];b=["Sys_error",-1];c=["Failure",-2];d=["Invalid_argument",-3];e=["End_of_file",-4];var g=["Division_by_zero",-5],h=["Not_found",-6],i=["Match_failure",-7],j=["Stack_overflow",-8],k=["Sys_blocked_io",-9],l=["Assert_failure",-10],m=["Undefined_recursive_module",-11];a.tag=248;b.tag=248;c.tag=248;d.tag=248;e.tag=248;g.tag=248;h.tag=248;i.tag=248;j.tag=248;k.tag=248;l.tag=248;m.tag=248;f.out_of_memory=a;f.sys_error=b;f.failure=c;f.invalid_argument=d;f.end_of_file=e;f.division_by_zero=g;f.not_found=h;f.match_failure=i;f.stack_overflow=j;f.sys_blocked_io=k;f.assert_failure=l;f.undefined_recursive_module=m}),null);
__d("bs_caml_array",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(b,c,a){var d=new Array(a),e=0;c=c;while(e<a)d[e]=b[c],e=e+1|0,c=c+1|0;return d}function g(a,b){while(!0){var c=b,d=a;if(c){b=c[1];a=c[0].length+d|0;continue}else return d}}function h(a,b,c){__p&&__p();while(!0){var d=c,e=b;if(d){var f=d[0],g=f.length;e=e;var h=0;while(h<g)a[e]=f[h],e=e+1|0,h=h+1|0;c=d[1];b=e;continue}else return 0}}function c(a){var b=g(0,a);b=new Array(b);h(b,0,a);return b}function d(a,c,d){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else{a[c]=d;return 0}}function e(a,c){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return a[c]}function i(a,b){var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b;return c}function j(a){var b=new Array(a);for(var c=0,a=a-1|0;c<=a;++c)b[c]=0;return b}function k(b,c,d,e,a){if(e<=c){for(var f=0,h=a-1|0;f<=h;++f)d[f+e|0]=b[f+c|0];return 0}else{for(var f=a-1|0;f>=0;--f)d[f+e|0]=b[f+c|0];return 0}}function l(a){return a.slice(0)}f.caml_array_dup=l;f.caml_array_sub=a;f.caml_array_concat=c;f.caml_make_vect=i;f.caml_make_float_vect=j;f.caml_array_blit=k;f.caml_array_get=e;f.caml_array_set=d}),null);
__d("bs_caml_exceptions",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[0];function a(a){a[1]=g[0];g[0]+=1;return a}function h(){g[0]+=1;return g[0]}function b(a){var b=h(0);a=[a,b];a.tag=248;return a}function c(a){if(a===undefined)return!1;else if(a.tag===248)return!0;else{a=a[0];if(a!==undefined)return a.tag===248;else return!1}}f.caml_set_oo_id=a;f.get_id=h;f.create=b;f.isCamlExceptionOrOpenVariant=c}),null);
__d("bs_curry",["bs_caml_array"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){__p&&__p();while(!0){var d=c,e=a,f=e.length;f=f===0?1:f;var h=d.length;h=f-h|0;if(h===0)return e.apply(null,d);else if(h<0){c=b("bs_caml_array").caml_array_sub(d,f,-h|0);a=e.apply(null,b("bs_caml_array").caml_array_sub(d,0,f));continue}else return function(b,a){return function(c){return g(b,a.concat([c]))}}(e,d)}}function h(a,b,c){__p&&__p();if(c>7||c<0)return g(a,[b]);else switch(c){case 0:case 1:return a(b);case 2:return function(c){return a(b,c)};case 3:return function(c,d){return a(b,c,d)};case 4:return function(c,d,e){return a(b,c,d,e)};case 5:return function(c,d,e,f){return a(b,c,d,e,f)};case 6:return function(c,d,e,f,g){return a(b,c,d,e,f,g)};case 7:return function(c,d,e,f,g,h){return a(b,c,d,e,f,g,h)}}}function i(a,b){var c=a.length;if(c===1)return a(b);else return h(a,b,c)}function a(a){var b=a.length;if(b===1)return a;else return function(b){return i(a,b)}}function j(a,b,c,d){__p&&__p();if(d>7||d<0)return g(a,[b,c]);else switch(d){case 0:case 1:return g(a(b),[c]);case 2:return a(b,c);case 3:return function(d){return a(b,c,d)};case 4:return function(d,e){return a(b,c,d,e)};case 5:return function(d,e,f){return a(b,c,d,e,f)};case 6:return function(d,e,f,g){return a(b,c,d,e,f,g)};case 7:return function(d,e,f,g,h){return a(b,c,d,e,f,g,h)}}}function k(a,b,c){var d=a.length;if(d===2)return a(b,c);else return j(a,b,c,d)}function c(a){var b=a.length;if(b===2)return a;else return function(b,c){return k(a,b,c)}}function l(a,b,c,d,e){__p&&__p();var f=0;if(e>7||e<0)return g(a,[b,c,d]);else switch(e){case 0:case 1:f=1;break;case 2:return g(a(b,c),[d]);case 3:return a(b,c,d);case 4:return function(e){return a(b,c,d,e)};case 5:return function(e,f){return a(b,c,d,e,f)};case 6:return function(e,f,g){return a(b,c,d,e,f,g)};case 7:return function(e,f,g,h){return a(b,c,d,e,f,g,h)}}if(f===1)return g(a(b),[c,d])}function m(a,b,c,d){var e=a.length;if(e===3)return a(b,c,d);else return l(a,b,c,d,e)}function d(a){var b=a.length;if(b===3)return a;else return function(b,c,d){return m(a,b,c,d)}}function n(a,b,c,d,e,f){__p&&__p();var h=0;if(f>7||f<0)return g(a,[b,c,d,e]);else switch(f){case 0:case 1:h=1;break;case 2:return g(a(b,c),[d,e]);case 3:return g(a(b,c,d),[e]);case 4:return a(b,c,d,e);case 5:return function(f){return a(b,c,d,e,f)};case 6:return function(f,g){return a(b,c,d,e,f,g)};case 7:return function(f,g,h){return a(b,c,d,e,f,g,h)}}if(h===1)return g(a(b),[c,d,e])}function o(a,b,c,d,e){var f=a.length;if(f===4)return a(b,c,d,e);else return n(a,b,c,d,e,f)}function e(a){var b=a.length;if(b===4)return a;else return function(b,c,d,e){return o(a,b,c,d,e)}}function p(a,b,c,d,e,f,h){__p&&__p();var i=0;if(h>7||h<0)return g(a,[b,c,d,e,f]);else switch(h){case 0:case 1:i=1;break;case 2:return g(a(b,c),[d,e,f]);case 3:return g(a(b,c,d),[e,f]);case 4:return g(a(b,c,d,e),[f]);case 5:return a(b,c,d,e,f);case 6:return function(g){return a(b,c,d,e,f,g)};case 7:return function(g,h){return a(b,c,d,e,f,g,h)}}if(i===1)return g(a(b),[c,d,e,f])}function q(a,b,c,d,e,f){var g=a.length;if(g===5)return a(b,c,d,e,f);else return p(a,b,c,d,e,f,g)}function r(a){var b=a.length;if(b===5)return a;else return function(b,c,d,e,f){return q(a,b,c,d,e,f)}}function s(a,b,c,d,e,f,h,i){__p&&__p();var j=0;if(i>7||i<0)return g(a,[b,c,d,e,f,h]);else switch(i){case 0:case 1:j=1;break;case 2:return g(a(b,c),[d,e,f,h]);case 3:return g(a(b,c,d),[e,f,h]);case 4:return g(a(b,c,d,e),[f,h]);case 5:return g(a(b,c,d,e,f),[h]);case 6:return a(b,c,d,e,f,h);case 7:return function(g){return a(b,c,d,e,f,h,g)}}if(j===1)return g(a(b),[c,d,e,f,h])}function t(a,b,c,d,e,f,g){var h=a.length;if(h===6)return a(b,c,d,e,f,g);else return s(a,b,c,d,e,f,g,h)}function u(a){var b=a.length;if(b===6)return a;else return function(b,c,d,e,f,g){return t(a,b,c,d,e,f,g)}}function v(a,b,c,d,e,f,h,i,j){__p&&__p();var k=0;if(j>7||j<0)return g(a,[b,c,d,e,f,h,i]);else switch(j){case 0:case 1:k=1;break;case 2:return g(a(b,c),[d,e,f,h,i]);case 3:return g(a(b,c,d),[e,f,h,i]);case 4:return g(a(b,c,d,e),[f,h,i]);case 5:return g(a(b,c,d,e,f),[h,i]);case 6:return g(a(b,c,d,e,f,h),[i]);case 7:return a(b,c,d,e,f,h,i)}if(k===1)return g(a(b),[c,d,e,f,h,i])}function w(a,b,c,d,e,f,g,h){var i=a.length;if(i===7)return a(b,c,d,e,f,g,h);else return v(a,b,c,d,e,f,g,h,i)}function x(a){var b=a.length;if(b===7)return a;else return function(b,c,d,e,f,g,h){return w(a,b,c,d,e,f,g,h)}}function y(a,b,c,d,e,f,h,i,j,k){__p&&__p();var l=0;if(k>7||k<0)return g(a,[b,c,d,e,f,h,i,j]);else switch(k){case 0:case 1:l=1;break;case 2:return g(a(b,c),[d,e,f,h,i,j]);case 3:return g(a(b,c,d),[e,f,h,i,j]);case 4:return g(a(b,c,d,e),[f,h,i,j]);case 5:return g(a(b,c,d,e,f),[h,i,j]);case 6:return g(a(b,c,d,e,f,h),[i,j]);case 7:return g(a(b,c,d,e,f,h,i),[j])}if(l===1)return g(a(b),[c,d,e,f,h,i,j])}function z(a,b,c,d,e,f,g,h,i){var j=a.length;if(j===8)return a(b,c,d,e,f,g,h,i);else return y(a,b,c,d,e,f,g,h,i,j)}function A(a){var b=a.length;if(b===8)return a;else return function(b,c,d,e,f,g,h,i){return z(a,b,c,d,e,f,g,h,i)}}f.app=g;f.curry_1=h;f._1=i;f.__1=a;f.curry_2=j;f._2=k;f.__2=c;f.curry_3=l;f._3=m;f.__3=d;f.curry_4=n;f._4=o;f.__4=e;f.curry_5=p;f._5=q;f.__5=r;f.curry_6=s;f._6=t;f.__6=u;f.curry_7=v;f._7=w;f.__7=x;f.curry_8=y;f._8=z;f.__8=A}),null);
__d("bs_js_exn",["bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_exceptions").create("Js_exn.Error");function a(a){if(b("bs_caml_exceptions").isCamlExceptionOrOpenVariant(a))return a;else return[g,a]}function c(a){throw new Error(a)}function d(a){throw new EvalError(a)}function e(a){throw new RangeError(a)}function h(a){throw new ReferenceError(a)}function i(a){throw new SyntaxError(a)}function j(a){throw new TypeError(a)}function k(a){throw new URIError(a)}f.$$Error=g;f.internalToOCamlException=a;f.raiseError=c;f.raiseEvalError=d;f.raiseRangeError=e;f.raiseReferenceError=h;f.raiseSyntaxError=i;f.raiseTypeError=j;f.raiseUriError=k}),null);
__d("bs_array",["bs_curry","bs_js_exn","bs_caml_array","bs_caml_exceptions","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){if(a===0)return[];else if(a<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.init"];else{var d=b("bs_caml_array").caml_make_vect(a,b("bs_curry")._1(c,0));for(var e=1,a=a-1|0;e<=a;++e)d[e]=b("bs_curry")._1(c,e);return d}}function c(a,c,d){var e=b("bs_caml_array").caml_make_vect(a,[]);for(var f=0,a=a-1|0;f<=a;++f)e[f]=b("bs_caml_array").caml_make_vect(c,d);return e}function g(a){var c=a.length;if(c===0)return[];else return b("bs_caml_array").caml_array_sub(a,0,c)}function d(a,c){var d=a.length;if(d===0)return g(c);else if(c.length===0)return b("bs_caml_array").caml_array_sub(a,0,d);else return a.concat(c)}function e(a,c,d){if(d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.sub"];else return b("bs_caml_array").caml_array_sub(a,c,d)}function h(a,c,d,e){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.fill"];else{for(var f=c,c=(c+d|0)-1|0;f<=c;++f)a[f]=e;return 0}}function i(a,c,d,e,f){if(f<0||c<0||c>(a.length-f|0)||e<0||e>(d.length-f|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.blit"];else return b("bs_caml_array").caml_array_blit(a,c,d,e,f)}function j(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._1(a,c[d]);return 0}function k(a,c){var d=c.length;if(d===0)return[];else{var e=b("bs_caml_array").caml_make_vect(d,b("bs_curry")._1(a,c[0]));for(var f=1,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._1(a,c[f]);return e}}function l(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._2(a,d,c[d]);return 0}function m(a,c){var d=c.length;if(d===0)return[];else{var e=b("bs_caml_array").caml_make_vect(d,b("bs_curry")._2(a,0,c[0]));for(var f=1,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._2(a,f,c[f]);return e}}function n(a){__p&&__p();var b=a.length-1|0,c=0;while(!0){var d=c,e=b;if(e<0)return d;else{c=[a[e],d];b=e-1|0;continue}}}function o(a,b){while(!0){var c=b,d=a;if(c){b=c[1];a=d+1|0;continue}else return d}}function p(a){__p&&__p();if(a){var c=b("bs_caml_array").caml_make_vect(o(0,a),a[0]),d=1;a=a[1];while(!0){var e=a,f=d;if(e){c[f]=e[0];a=e[1];d=f+1|0;continue}else return c}}else return[]}function q(a,c,d){c=c;for(var e=0,f=d.length-1|0;e<=f;++e)c=b("bs_curry")._2(a,c,d[e]);return c}function r(a,c,d){d=d;for(var e=c.length-1|0;e>=0;--e)d=b("bs_curry")._2(a,c[e],d);return d}var s=b("bs_caml_exceptions").create("Array.Bottom");function t(a,c){__p&&__p();var d=function(d,e){__p&&__p();var f=((e+e|0)+e|0)+1|0,g=f;if((f+2|0)<d){b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,f),b("bs_caml_array").caml_array_get(c,f+1|0))<0&&(g=f+1|0);b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,g),b("bs_caml_array").caml_array_get(c,f+2|0))<0&&(g=f+2|0);return g}else if((f+1|0)<d&&b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,f),b("bs_caml_array").caml_array_get(c,f+1|0))<0)return f+1|0;else if(f<d)return f;else throw[s,e]},e=function(e,f,g){__p&&__p();try{e=e;f=f;var h=g;while(!0){var i=f,j=d(e,i);if(b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,j),h)>0){b("bs_caml_array").caml_array_set(c,i,b("bs_caml_array").caml_array_get(c,j));f=j;continue}else return b("bs_caml_array").caml_array_set(c,i,h)}}catch(a){j=b("bs_js_exn").internalToOCamlException(a);if(j[0]===s)return b("bs_caml_array").caml_array_set(c,j[1],g);else throw j}},f=function(a,e){__p&&__p();try{a=a;e=e;while(!0){var f=e,g=d(a,f);b("bs_caml_array").caml_array_set(c,f,b("bs_caml_array").caml_array_get(c,g));e=g;continue}}catch(a){f=b("bs_js_exn").internalToOCamlException(a);if(f[0]===s)return f[1];else throw f}},g=function(e,f){__p&&__p();while(!0){var d=e,g=(d-1|0)/3|0;if(d===g)throw[b("bs_caml_builtin_exceptions").assert_failure,["array.ml",173,4]];if(b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,g),f)<0){b("bs_caml_array").caml_array_set(c,d,b("bs_caml_array").caml_array_get(c,g));if(g>0){e=g;continue}else return b("bs_caml_array").caml_array_set(c,0,f)}else return b("bs_caml_array").caml_array_set(c,d,f)}},h=c.length;for(var i=((h+1|0)/3|0)-1|0;i>=0;--i)e(h,i,b("bs_caml_array").caml_array_get(c,i));for(var i=h-1|0;i>=2;--i){e=b("bs_caml_array").caml_array_get(c,i);b("bs_caml_array").caml_array_set(c,i,b("bs_caml_array").caml_array_get(c,0));g(f(i,0),e)}if(h>1){e=b("bs_caml_array").caml_array_get(c,1);b("bs_caml_array").caml_array_set(c,1,b("bs_caml_array").caml_array_get(c,0));return b("bs_caml_array").caml_array_set(c,0,e)}else return 0}function u(a,c){__p&&__p();var d=function(d,e,f,g,h,j,k){__p&&__p();e=d+e|0;h=g+h|0;var l=d;d=b("bs_caml_array").caml_array_get(c,d);var m=g;g=b("bs_caml_array").caml_array_get(f,g);k=k;while(!0){var n=k,o=g,p=m,q=d,r=l;if(b("bs_curry")._2(a,q,o)<=0){b("bs_caml_array").caml_array_set(j,n,q);q=r+1|0;if(q<e){k=n+1|0;d=b("bs_caml_array").caml_array_get(c,q);l=q;continue}else return i(f,p,j,n+1|0,h-p|0)}else{b("bs_caml_array").caml_array_set(j,n,o);q=p+1|0;if(q<h){k=n+1|0;g=b("bs_caml_array").caml_array_get(f,q);m=q;continue}else return i(c,r,j,n+1|0,e-r|0)}}},e=function(d,e,f,g){for(var h=0,g=g-1|0;h<=g;++h){var i=b("bs_caml_array").caml_array_get(c,d+h|0),j=(f+h|0)-1|0;while(j>=f&&b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(e,j),i)>0)b("bs_caml_array").caml_array_set(e,j+1|0,b("bs_caml_array").caml_array_get(e,j)),j=j-1|0;b("bs_caml_array").caml_array_set(e,j+1|0,i)}return 0},f=function a(f,g,h,i){if(i<=5)return e(f,g,h,i);else{var b=i/2|0;i=i-b|0;a(f+b|0,g,h+b|0,i);a(f,c,f+i|0,b);return d(f+i|0,b,g,h+b|0,i,g,h)}},g=c.length;if(g<=5)return e(0,c,0,g);else{var h=g/2|0;g=g-h|0;var j=b("bs_caml_array").caml_make_vect(g,b("bs_caml_array").caml_array_get(c,0));f(h,j,0,g);f(0,c,g,h);return d(g,h,j,0,g,c,0)}}var v=c,w=b("bs_caml_array").caml_array_concat,x=u;f.init=a;f.make_matrix=c;f.create_matrix=v;f.append=d;f.concat=w;f.sub=e;f.copy=g;f.fill=h;f.blit=i;f.to_list=n;f.of_list=p;f.iter=j;f.map=k;f.iteri=l;f.mapi=m;f.fold_left=q;f.fold_right=r;f.sort=t;f.stable_sort=u;f.fast_sort=x}),null);
__d("bs_block",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){b.tag=a;return b}function b(a,b){return Object.defineProperty(b,Symbol["for"]("BsRecord"),{value:a})}function c(a,b){return Object.defineProperty(b,Symbol["for"]("BsVariant"),{value:a})}function d(a,b){return Object.defineProperty(b,Symbol["for"]("BsLocalModule"),{value:a})}function e(a,b){return Object.defineProperty(b,Symbol["for"]("BsPolyVar"),{value:a})}f.__=a;f.record=b;f.variant=c;f.localModule=d;f.polyVar=e}),null);
__d("bs_caml_primitive",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){if(a<b)return-1;else if(a===b)return 0;else return 1}function b(a,b){if(a)if(b)return 0;else return 1;else if(b)return-1;else return 0}function c(a,b){if(a===b)return 0;else if(a<b)return-1;else if(a>b||a===a)return 1;else if(b===b)return-1;else return 0}function d(a,b){if(a===b)return 0;else if(a<b)return-1;else return 1}function e(a,b){if(a)return b;else return a}function g(a,b){if(a<b)return a;else return b}function h(a,b){if(a<b)return a;else return b}function i(a,b){if(a<b)return a;else return b}function j(a,b){if(a<b)return a;else return b}function k(a,b){if(a<b)return a;else return b}function l(a,b){if(a)return a;else return b}function m(a,b){if(a>b)return a;else return b}function n(a,b){if(a>b)return a;else return b}function o(a,b){if(a>b)return a;else return b}function p(a,b){if(a>b)return a;else return b}function q(a,b){if(a>b)return a;else return b}var r=a,s=a;f.caml_int_compare=a;f.caml_bool_compare=b;f.caml_float_compare=c;f.caml_nativeint_compare=r;f.caml_string_compare=d;f.caml_int32_compare=s;f.caml_bool_min=e;f.caml_int_min=g;f.caml_float_min=h;f.caml_string_min=i;f.caml_nativeint_min=j;f.caml_int32_min=k;f.caml_bool_max=l;f.caml_int_max=m;f.caml_float_max=n;f.caml_string_max=o;f.caml_nativeint_max=p;f.caml_int32_max=q}),null);
__d("bs_caml_obj",["bs_block","bs_caml_primitive","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){b=new Array(b);b.tag=a;return b}function c(a){var b=a.length|0,c=new Array(b);for(var d=0,b=b-1|0;d<=b;++d)c[d]=a[d];c.tag=a.tag|0;return c}function d(a,c){__p&&__p();var d=a.length|0;if(c<=0||c>d)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.truncate"];else if(d!==c){for(var e=c,d=d-1|0;e<=d;++e)a[e]=0;a.length=c;return 0}else return 0}function e(a){return b("bs_block").__(250,[a])}function g(a,b){var c=b.length|0;for(var d=0,c=c-1|0;d<=c;++d)a[d]=b[d];d=b.tag|0;if(d!==0){a.tag=d;return 0}else return 0}var h=function(a,b){for(var c in a)b(c)};function i(a,c){__p&&__p();while(!0){var d=c,e=a;if(e===d)return 0;else if(e===null)return-1;else if(d===null)return 1;else if(e===undefined)return-1;else if(d===undefined)return 1;else{var f=typeof e,g=typeof d;if(f==="string")return b("bs_caml_primitive").caml_string_compare(e,d);else{var j=f==="number",k=g==="number";if(j)if(k)return b("bs_caml_primitive").caml_int_compare(e,d);else return-1;else if(k)return 1;else if(f==="boolean"){j=e;k=d;if(j===k)return 0;else if(j<k)return-1;else return 1}else if(f==="function"||g==="function")throw[b("bs_caml_builtin_exceptions").invalid_argument,"compare: functional value"];else{j=e.tag|0;k=d.tag|0;if(j===250){a=e[0];continue}else if(k===250){c=d[0];continue}else if(j===248)return b("bs_caml_primitive").caml_int_compare(e[1],d[1]);else if(j===251)throw[b("bs_caml_builtin_exceptions").invalid_argument,"equal: abstract value"];else if(j!==k)if(j<k)return-1;else return 1;else{f=e.length|0;g=d.length|0;if(f===g)if(Array.isArray(e)){j=e;k=d;var l=0,m=f;while(!0){var n=l;if(n===m)return 0;else{var o=i(j[n],k[n]);if(o!==0)return o;else{l=n+1|0;continue}}}}else{o=e;n=d;l=[0];j=[0];var p=function(b,c){__p&&__p();var d=b[2],a=b[1];if(!Object.prototype.hasOwnProperty.call(a,c)||i(b[0][c],a[c])>0){b=d[0];if(b)if(c<b[0]){d[0]=[c];return 0}else return 0;else{d[0]=[c];return 0}}else return 0};k=[o,n,j];m=function(a){return function(b){return p(a,b)}}(k);k=[n,o,l];k=function(a){return function(b){return p(a,b)}}(k);h(o,m);h(n,k);o=l[0];m=j[0];if(o)if(m)return b("bs_caml_primitive").caml_string_compare(o[0],m[0]);else return-1;else if(m)return 1;else return 0}else if(f<g){n=e;k=d;l=0;j=f;while(!0){o=l;if(o===j)return-1;else{m=i(n[o],k[o]);if(m!==0)return m;else{l=o+1|0;continue}}}}else{f=e;m=d;o=0;l=g;while(!0){n=o;if(n===l)return 1;else{k=i(f[n],m[n]);if(k!==0)return k;else{o=n+1|0;continue}}}}}}}}}}function j(a,c){__p&&__p();while(!0){var d=c,e=a;if(e===d)return!0;else{var f=typeof e;if(f==="string"||f==="number"||f==="boolean"||f==="undefined"||e===null)return!1;else{var g=typeof d;if(f==="function"||g==="function")throw[b("bs_caml_builtin_exceptions").invalid_argument,"equal: functional value"];else if(g==="number"||g==="undefined"||d===null)return!1;else{f=e.tag|0;g=d.tag|0;if(f===250){a=e[0];continue}else if(g===250){c=d[0];continue}else if(f===248)return e[1]===d[1];else if(f===251)throw[b("bs_caml_builtin_exceptions").invalid_argument,"equal: abstract value"];else if(f!==g)return!1;else{f=e.length|0;g=d.length|0;if(f===g)if(Array.isArray(e)){g=e;var i=d,k=0;f=f;while(!0){var l=k;if(l===f)return!0;else if(j(g[l],i[l])){k=l+1|0;continue}else return!1}}else{l=e;k=d;g=[!0];i=function(a,b){return function(c){if(Object.prototype.hasOwnProperty.call(a,c))return 0;else{b[0]=!1;return 0}}}(k,g);f=function(a,b,c){return function(d){if(!Object.prototype.hasOwnProperty.call(a,d)||!j(b[d],a[d])){c[0]=!1;return 0}else return 0}}(l,k,g);h(l,i);g[0]&&h(k,f);return g[0]}else return!1}}}}}}function k(a,b){if(b!==null)return j(a,b);else return a===b}function l(a,b){if(b!==undefined)return j(a,b);else return a===b}function m(a,b){if(b==null)return a===b;else return j(a,b)}function n(a,b){return!j(a,b)}function o(a,b){return i(a,b)>=0}function p(a,b){return i(a,b)>0}function q(a,b){return i(a,b)<=0}function r(a,b){return i(a,b)<0}function s(a,b){if(i(a,b)<=0)return a;else return b}function t(a,b){if(i(a,b)>=0)return a;else return b}f.caml_obj_block=a;f.caml_obj_dup=c;f.caml_obj_truncate=d;f.caml_lazy_make_forward=e;f.caml_update_dummy=g;f.caml_compare=i;f.caml_equal=j;f.caml_equal_null=k;f.caml_equal_undefined=l;f.caml_equal_nullable=m;f.caml_notequal=n;f.caml_greaterequal=o;f.caml_greaterthan=p;f.caml_lessthan=r;f.caml_lessequal=q;f.caml_min=s;f.caml_max=t}),null);
__d("bs_js_json",["bs_block"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=typeof a;if(c==="string")return b("bs_block").__(0,[a]);else if(c==="number")return b("bs_block").__(1,[a]);else if(c==="boolean")if(a===!0)return 1;else return 0;else if(a===null)return 2;else if(Array.isArray(a))return b("bs_block").__(3,[a]);else return b("bs_block").__(2,[a])}function c(a,b){switch(b){case 0:return typeof a==="string";case 1:return typeof a==="number";case 2:if(a!==null&&typeof a==="object")return!Array.isArray(a);else return!1;case 3:return Array.isArray(a);case 4:return typeof a==="boolean";case 5:return a===null}}function d(a){if(typeof a==="string")return[a];else return 0}function e(a){if(typeof a==="number")return[a];else return 0}function g(a){if(typeof a==="object"&&!Array.isArray(a)&&a!==null)return[a];else return 0}function h(a){if(Array.isArray(a))return[a];else return 0}function i(a){if(typeof a==="boolean")return[a];else return 0}function j(a){if(a===null)return[null];else return 0}f.classify=a;f.test=c;f.decodeString=d;f.decodeNumber=e;f.decodeObject=g;f.decodeArray=h;f.decodeBoolean=i;f.decodeNull=j}),null);
__d("MessengerMessage.bs",["URI","bs_array","Utils.bs","bs_js_json","bs_caml_obj","MercuryViewer","bs_caml_primitive","MercuryActionType","MercuryActionStatus","MercuryPayloadSource","isMessengerDotComURI","MercuryLogMessageType","MercuryMessageDeliveryState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){return b("bs_caml_primitive").caml_float_compare(a.timestamp,c.timestamp)}function c(a){var b=a.offline_threading_id;if(b==null)return!1;else return b===a.message_id}function d(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE))return!0;else{a=a.log_message_type;if(a==null)return!0;else return!(b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").UNSUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SERVER_ERROR)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").LIVE_LISTEN))}}function e(a){__p&&__p();var c=a.ranges;if(c==null)return 0;else{c=b("bs_array").map(function(c){__p&&__p();var a=c.entity;if(a==null)return c;else{var d=b("Utils.bs").isTruthy(a.external),e=a.url;if(d||e==null)return c;else{d=new(b("URI"))(e);e=b("isMessengerDotComURI")(b("URI").getRequestURI());var f=d.getDomain();if(e&&(f==null||f===""))e=1;else return c;if(e===1)return Object.assign(Object.assign({},c),{entity:Object.assign(Object.assign({},a),{url:d.setProtocol("https").setDomain("www.facebook.com").toString()})})}}},c);Object.assign(a,{ranges:c});return 0}}function g(){return!0}function h(a){return a.filter(function(){return!0})}function i(a){if(b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").UNKNOWN)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_INITIAL_DATA)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_THREAD_SYNC)}function j(a){return b("bs_caml_obj").caml_equal(a.author,b("MercuryViewer").getID())}function k(a){return!j(a)}function l(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNSENT)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNCONFIRMED)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").RESENDING)}function m(a){a=a.status;if(a==null)return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").SUCCESS)}function n(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").FAILED_UNKNOWN_REASON)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").ERROR)}function o(a,c){__p&&__p();if(n(a))return b("MercuryMessageDeliveryState").ERROR;else if(l(a))return b("MercuryMessageDeliveryState").SENDING;else if(m(a)){a=a.timestamp<=c;if(a)return b("MercuryMessageDeliveryState").DELIVERED;else return b("MercuryMessageDeliveryState").SENT}else return b("MercuryMessageDeliveryState").UNKNOWN}function p(a){__p&&__p();try{a=[JSON.parse(a)]}catch(b){a=0}if(a){a=b("bs_js_json").classify(a[0]);if(typeof a==="number"||a.tag!==2)return 0;else{a=a[0].persona;if(a!==undefined){a=b("bs_js_json").classify(a);if(typeof a==="number"||a.tag!==2)return 0;else return[a[0]]}else return 0}}else return 0}function q(a){__p&&__p();if(a==null)return null;else{a=a.platform_xmd;if(a==null)return null;else{a=p(a);if(a){a=a[0];var b=a.id,c=a.name;a=a.profile_picture_url;if(b!==undefined&&c!==undefined&&a!==undefined)return{id:b,name:c,profile_picture_url:a};else return null}else return null}}}f.compare=a;f.isLocalMessage=c;f.isTitanMessage=d;f.finalizeRanges=e;f.canSaveMessage=g;f.getSavedMessages=h;f.shouldSortForPayloadSource=i;f.isOutbound=j;f.isInbound=k;f.isSending=l;f.isSent=m;f.hasError=n;f.getDeliveryState=o;f.getPersonaData=p;f.getPersona=q}),null);
__d("MercuryErrorInfo",["fbt","MercuryErrorType","MessengerMessage.bs"],(function(a,b,c,d,e,f,g){var h={getMessage:function(a){var b="";h.isConnectionError(a)?(b=g._("This message didn't send.").toString(),h.isTransient(a)&&(b=g._("{message} Check your internet connection and click to try again.",[g._param("message",b)]).toString())):(a&&a.description?b=a.description:b=g._("This message failed to send.").toString(),h.isTransient(a)&&(b=g._("{message} Click to send again.",[g._param("message",b)]).toString()));return b},isConnectionError:function(a){return a&&a.type==b("MercuryErrorType").TRANSPORT?a.code===1001||a.code===1004||a.code===1006:!1},isTransient:function(a){return a&&a.is_transient},isPermanent:function(a){return a?!this.isTransient(a):!1},hasErrorStatus:function(a){return b("MessengerMessage.bs").hasError(a)}};e.exports=h}),null);
__d("MercurySingletonMixin",["CurrentUser"],(function(a,b,c,d,e,f){a={_getInstances:function(){this._instances||(this._instances={});return this._instances},get:function(){return this.getForFBID(b("CurrentUser").getID())},getForFBID:function(a){var b=this._getInstances();b[a]||(b[a]=new this(a));return b[a]}};e.exports=a}),null);
__d("MercuryMessageActions",["MercuryActionType","MercuryDispatcher","MercuryMessageObject","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=b("MercuryMessageObject").getForFBID(this.$1),this.__serverRequests=b("MercuryServerRequests").getForFBID(this.$1),this.__dispatcher=b("MercuryDispatcher").getForFBID(this.$1)}a.prototype.send=function(a,c,d){c=c||Function.prototype,this.$2.normalizeNewMessage(a),this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload(babelHelpers["extends"]({},a),b("MercuryPayloadSource").CLIENT_SEND_MESSAGE)),this.__serverRequests.sendNewMessage(a,d),c(a.thread_id)};a.prototype.resend=function(a,b){a=babelHelpers["extends"]({},a);this.$2.normalizeResendMessage(a);this.send(a,undefined,b)};a.prototype.addAttachmentPlaceholder=function(a,c,d){this.$2.normalizeAddAttachmentPlaceholder(a,c,d),this.$2.normalizeNewMessage(a),this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload(babelHelpers["extends"]({},a),b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))};a.prototype.cancelAttachmentPlaceholder=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({upload_id:a,upload_data:c,action_type:b("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER},b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))};a.prototype.confirmAttachmentPlaceholder=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({upload_id:a,upload_data:c,action_type:b("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER},b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))};a.prototype["delete"]=function(a,c,d){this.__dispatcher.handleUpdate(this.$3(a,c,b("MercuryActionType").DELETE_MESSAGES,d||b("MercuryPayloadSource").CLIENT_DELETE_MESSAGES))};a.prototype.__constructClientSingleMessagePayload=function(a,b){return{actions:[a],from_client:!0,payload_source:b}};a.prototype.$4=function(a,b){return{actions:[a],from_client:!1,payload_source:b}};a.prototype.$3=function(a,b,c,d){return{actions:[{action_type:c,thread_id:a,message_ids:b}],from_client:!0,payload_source:d}};Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("AsyncDialog",["cx","AsyncRequest","CSS","DialogX","DOM","Keys","LayerFadeOnShow","LoadingDialogDimensions","Parent","React","ReactDOM","URI","XUIDialogTitle.react","XUISpinner.react","emptyFunction","forEachObject"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i;function j(a){__p&&__p();var c=b("LoadingDialogDimensions").WIDTH,d;a&&(c=parseInt(a.getAttribute("data-dialog-width"),10)||c,d=a.getAttribute("data-dialog-title")||d);if(!h){a=b("DOM").create("div",{className:"_57-x"});h=new(b("DialogX"))({width:c,addedBehaviors:[b("LayerFadeOnShow")],xui:!0},b("DOM").create("div",null,a));i=b("DOM").create("div");b("DOM").insertBefore(a,i);b("ReactDOM").render(b("React").createElement(b("XUISpinner.react"),{size:"large"}),a);h.subscribe(["key","blur"],function(a,c){if(a=="blur"||a=="key"&&c.keyCode==b("Keys").ESC){n();return!1}})}d?b("ReactDOM").render(b("React").createElement(b("XUIDialogTitle.react"),{showCloseButton:!1},d),i):b("DOM").empty(i);h.setWidth(c);return h}var k={},l=1,m=[];function n(){b("forEachObject")(k,function(a,b){a.abandon(),o(b)})}function o(a){delete k[a],Object.keys(k).length||j().hide()}function p(a,c){__p&&__p();var d=l++;m[d]=c;k[d]=a;var e=o.bind(null,""+d);Object.assign(a.getData(),{__asyncDialog:d});c=a.getRelativeTo();j(c).setCausalElement(c).show();var f=a.finallyHandler;a.setFinallyHandler(function(a){var c=a.getPayload();c&&c.asyncURL&&q.send(new(b("AsyncRequest"))(c.asyncURL));e();f&&f(a)});var g=a.abortHandler||b("emptyFunction"),h=a.interceptHandler||b("emptyFunction");a.setInterceptHandler(function(){try{h()}finally{e()}}).setAbortHandler(function(){try{g()}finally{e()}});a.send()}var q={send:function(a,c){p(a,c||b("emptyFunction"))},bootstrap:function(a,c,d){__p&&__p();if(!a)return;var e=b("Parent").byClass(c,"stat_elem")||c;if(e&&b("CSS").hasClass(e,"async_saving"))return!1;var f=new(b("URI"))(a).getQueryData();d=d==="dialog";a=new(b("AsyncRequest"))().setURI(a).setData(f).setMethod(d?"GET":"POST").setReadOnly(d).setStatusElement(e);c&&(a.setRelativeTo(c),a.setNectarModuleDataSafe(c));q.send(a)},respond:function(a,b){var c=m[a];c&&(c(b),delete m[a])},getLoadingDialog:function(){return j()}};e.exports=q}),null);
__d("EmojiLikeConstants",["EmojiStaticConfig"],(function(a,b,c,d,e,f){"use strict";a=b("EmojiStaticConfig").sizeMap;c=Object.freeze({XSMALL:"xsmall",SMALL:"small",MEDIUM:"medium",LARGE:"large"});d={dp16:"xsmall",dp32:"small",dp64:"medium",db64:"medium",dp128:"large"};f=Object.freeze({PICKER:"picker",HOT_LIKE:"hot_like"});b=[983040];var g="hot_emoji_source",h="hot_emoji_size",i="emoji_like",j="\ud83d\udc4d",k=[128077];e.exports={FB_THUMBS_UP_EMOJI:b,size:c,sizeMap:a,sizeMapTransfer:d,source:f,SOURCE_TAG_PREFIX:g,TAG_PREFIX_NEW:h,TAG_PREFIX_OLD:i,THUMBS_UP_EMOJI:j,THUMBS_UP_EMOJI_CODES:k}}),null);
__d("IgnoreMessagesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setPlatform=function(a){this.$1.platform=a;return this};a.prototype.setThreadID=function(a){this.$1.thread_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={event:!0,platform:!0,thread_id:!0,vc:!0};e.exports=a}),null);
__d("MercurySourceType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT_ORCA:"source:chat:orca",CHAT_LIGHT_SPEED:"source:chat:light_speed",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT:"source:chat",CONTACT_ADD_MUTATION:"source:contact_add:graphql_mutation",CONTACT_ADD_CYMK:"source:contact_add:cymk_suggestion",CUSTOMER_CHAT_PLUGIN:"source:discovery:customer_chat_plugin",EMAIL:"source:email",EVENT_MESSAGE_BLAST:"source:event_message_blast",EVENT_TICKETING:"source:event_ticket",EVENT_REMINDERS:"source:event_reminders",FUNDRAISER_MESSAGE_BLAST:"source:fundraiser_message_blast",GENERIC_ADMIN_TEXT:"source:generic_admin_text",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",INVITE:"source:invite",LEIA:"source:leia",MESSENGER_WEB:"source:messenger:web",MESSENGER_WEB_SEARCH:"source:messenger:web_search",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",PAGE_UNIFIED_INBOX:"source:page_unified_inbox",UNKNOWN:"source:unknown",WEB:"source:web",HELPCENTER:"source:helpcenter",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot",MESSENGER_EMPLOYEE_ONLY_BOT:"source:bot:employee_only",MESSENGER_OMNIM:"source:messenger:omnim",PAGES_PRIVATE_REPLY:"source:pages:private_reply",MESSENGER_FORWARD_DIALOG:"source:messenger:forward",MESSENGER_AD:"source:messenger:ad",MARKETPLACE:"source:marketplace",MARKETPLACE_BOT:"source:marketplace:bot",MESSENGER_LEAD_GEN:"source:messenger:lead_gen",PAGES_MESSAGE_SHORTLINK:"source:pages:message_shortlink",STICKER_SUBSCRIBE:"source:messenger:sticker_subscribe",PHOTO_TAG:"source:messenger:photo_tag",INTERNAL_TEST_PENDING:"source:internal:test_pending",JOB_SEARCH_APPLICATION:"source:job_search:application",MESSENGER_JOINABLE_LINK:"source:messenger:joinable_link",MESSENGER_ADD_WITH_APPROVAL:"source:messenger:add_with_approval",MESSENGER_SMS_BRIDGE_CONVERT:"source:messenger:sms_bridge_conversion",TINCAN_ORCA:"source:tincan:orca",TINCAN_IOS:"source:tincan:ios",TINCAN_UNKNOWN:"source:tincan:unknown",FACEBOOK_GROUPS_CHANNELS:"source:groups:channels",GROUP_COMMERCE:"source:group_commerce",INTERNAL_TOOL:"source:internal:tool",PAGES_PLATFORM:"source:pages:platform",PAGES_RECOMMENDATION:"source:pages:recommendation",PAGES_ORDER_MANAGEMENT:"source:pages:order_management",PAGE_AUTO_RESPONSE:"source:pages:auto_response",PAGES_INVITE:"source:pages:invite",PAGES_CHAT_EXTENSION:"source:pages:chat_extension",PAGES_COMPOSER:"source:pages:composer",SAVED_CHAT_EXTENSION:"source:saved:chat_extension",CREATOR_PAGE_INITIATE_TO_CREATOR_PAGE:"source:pages:creator_page_initiate_to_creator_page",LIVE_VIDEO_CHAT:"source:live_video_chat",GEMSTONE:"source:gemstone",WATCH_PARTY:"source:watch_party",FRIENDING_ADMIN_BUMP:"source:messenger_growth:friending_admin_bump",NEW_MESSENGER_USER_ADMIN_BUMP:"source:messenger_growth:new_messenger_user_admin_bump",EVENT_UPCOMING_BUMP:"source:messenger_growth:event_upcoming_bump",PHOTO_TAG_BUMP:"source:messenger_growth:photo_tag_bump",WALL_POST_BUMP:"source:messenger_growth:wall_post_bump",FRIENDVERSARY_BUMP:"source:messenger_growth:friendversary_bump",CUSTOMIZATION_UPSELL_BUMP:"source:messenger_growth:customization_upsell_bump",MESSENGER_BROADCASTFLOW:"source:messenger:broadcastflow",PAGE_COMMENT_MSG:"source:pages:question_triggered_convo",COMMENT_PIVOT:"source:messenger_growth:comment_pivot",PAGE_HOVERCARD:"source:pages:hovercard",INSTANT_GAMES:"source:instant_games",PAGE_EMAIL_REPLY:"source:pages:email_reply",PAGE_HOME_PAGE_PANEL:"source:page_home_page_panel",GROUPSYNC_MESSENGER_GROUP_CREATE:"source:groupsync:messenger_group_create",GROUPSYNC_SYNC_FROM_FB:"source:groupsync:sync_from_fb",GROUPSYNC_NAMING:"source:groupsync:naming",GROUPSYNC_THREAD_INFO_SYNC_FROM_FB:"source:groupsync:thread_info_sync",WORK_GROUP_SYNCED_CHAT_CREATION:"source:work:groupchat:creation",WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC:"source:work:groupchat:member_sync",WORK_GROUP_SYNCED_CHAT_NAME_SYNC:"source:work:groupchat:name_sync",PAGE_PQI_MESSAGE:"source:pages:pqi_message",PAGE_PLUGIN_MESSAGE:"source:pages:page_plugin_message",WORKPLACE_CHAT_DESKTOP:"source:workchat:desktop",CREATOR_STUDIO:"source:creator_studio"})}),null);
__d("SkinToneEmoji.bs",["bs_caml_array","EmojiFormat.bs","MessengerEmojiConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f385":case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f442":case"1f443":case"1f446":case"1f447":case"1f448":case"1f449":case"1f44a":case"1f44b":case"1f44c":case"1f44d":case"1f44e":case"1f44f":case"1f450":case"1f466":case"1f467":case"1f468":case"1f469":case"1f46e":case"1f470":case"1f471":case"1f472":case"1f473":case"1f474":case"1f475":case"1f476":case"1f477":case"1f478":case"1f47c":case"1f481":case"1f482":case"1f483":case"1f485":case"1f486":case"1f487":case"1f4aa":case"1f575":case"1f590":case"1f595":case"1f596":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64c":case"1f64d":case"1f64e":case"1f64f":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"1f6c0":case"1f918":case"261d":case"26f9":case"270a":case"270b":case"270c":case"270d":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){var c=b("MessengerEmojiConfig").emoji_colors;c=c.filter(function(b){return b===a});return c.length!==0}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-1|0);else return i(a.slice(0,a.length-2|0))}else return a}function a(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function c(a){return m(j(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(j(a))))}e=65039;f.emoji_modifier_code=e;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isToneModifier=k;f.getTone=l;f.removeTone=m;f.applyTone=a;f.removeAllModifiers=c;f.hasVariations=d}),null);
__d("MessengerEmojiTransitionMapping.bs",["bs_caml_array","EmojiFormat.bs","SkinToneEmoji.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f3cc":case"1f46e":case"1f46f":case"1f471":case"1f473":case"1f477":case"1f481":case"1f482":case"1f486":case"1f487":case"1f575":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64d":case"1f64e":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"26f9":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){if(a===9792)return!0;else return a===9794}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-2|0);else return i(a.slice(0,a.length-3|0))}else return a}function n(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([8205,b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function a(a){return n(a,9792)}function c(a){return m(b("SkinToneEmoji.bs").removeTone(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(b("SkinToneEmoji.bs").removeTone(a))))}function e(a){a=b("EmojiFormat.bs").codeArrayToCodeString(m(b("SkinToneEmoji.bs").removeTone(a)));switch(a){case"1f46a":case"1f48f":case"1f491":return!0;default:return!1}}var o=65039,p=9792,q=9794,r=8205;f.emoji_modifier_code=o;f.gender_female=p;f.gender_male=q;f.zero_join=r;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isGenderModifier=k;f.getGender=l;f.removeGender=m;f.applyGender=n;f.makeFemale=a;f.removeAllModifiers=c;f.hasGender=d;f.isBlacklisted=e}),null);
__d("MessengerGroupLinkActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CREATE_LINK:"create_link",REVOKE_LINK:"revoke_link",SHARE_LINK:"share_link",DELETE_ON_UNSUBSCRIBE:"delete_on_unsubscribe"})}),null);
__d("MessengerGroupsSyncStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PENDING_OPT_IN:"PENDING_OPT_IN",OPT_IN:"OPT_IN",PENDING_OPT_OUT:"PENDING_OPT_OUT",OPT_OUT:"OPT_OUT",UNSET:"UNSET",UNSUPPORTED:"UNSUPPORTED"})}),null);
__d("MessengerGroupsSyncStatusChangeMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1855592967826245"};c.getQueryID=function(){"use strict";return"1621038754641387"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("bs_js_types",["bs_block"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(typeof a==="undefined")return[0,a];else if(a===null)return[1,a];else if(typeof a==="number")return[3,a];else if(typeof a==="string")return[4,a];else if(typeof a==="boolean")return[2,a];else if(typeof a==="function")return[5,a];else if(typeof a==="object")return[6,a];else return[7,a]}function c(a){__p&&__p();var c=typeof a;if(c==="undefined")return 3;else if(a===null)return 2;else if(c==="number")return b("bs_block").__(0,[a]);else if(c==="string")return b("bs_block").__(1,[a]);else if(c==="boolean")if(a===!0)return 1;else return 0;else if(c==="function")return b("bs_block").__(2,[a]);else if(c==="object")return b("bs_block").__(3,[a]);else return b("bs_block").__(4,[a])}function d(a,b){switch(b){case 0:return typeof a==="undefined";case 1:return a===null;case 2:return typeof a==="boolean";case 3:return typeof a==="number";case 4:return typeof a==="string";case 5:return typeof a==="function";case 6:return typeof a==="object";case 7:return typeof a==="symbol"}}f.reify_type=a;f.test=d;f.classify=c}),null);
__d("bs_caml_int32",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){if(c===0)throw b("bs_caml_builtin_exceptions").division_by_zero;else return a/c|0}function c(a,c){if(c===0)throw b("bs_caml_builtin_exceptions").division_by_zero;else return a%c}function d(a){return(a&255)<<8|(a&65280)>>>8}function e(a){return(a&255)<<24|(a&65280)<<8|(a&16711680)>>>8|(a&4278190080)>>>24}var g=Math.imul||function(a,b){b|=0;return((a>>16)*b<<16)+(a&65535)*b|0},h=e;f.div=a;f.mod_=c;f.caml_bswap16=d;f.caml_int32_bswap=e;f.caml_nativeint_bswap=h;f.imul=g}),null);
__d("bs_caml_string",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return String.fromCharCode(a)}function c(a,c){if(c>=a.length||c<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return a.charCodeAt(c)}function d(a){if(a<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.create"];else{var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=0;return c}}function e(a,b,c,d){if(c>0){for(var e=b,c=(c+b|0)-1|0;e<=c;++e)a[e]=d;return 0}else return 0}function g(a,b,c,d,e){__p&&__p();if(e>0){var f=a.length-b|0;if(e<=f){for(var g=0,h=e-1|0;g<=h;++g)c[d+g|0]=a.charCodeAt(b+g|0);return 0}else{for(var g=0,h=f-1|0;g<=h;++g)c[d+g|0]=a.charCodeAt(b+g|0);for(var g=f,b=e-1|0;g<=b;++g)c[d+g|0]=0;return 0}}else return 0}function h(a,b,c,d,e){__p&&__p();if(e>0)if(a===c){var f=a,g=b,h=d,i=e;if(g<h){var j=(f.length-h|0)-1|0,k=i-1|0;k=j>k?k:j;for(var j=k;j>=0;--j)f[h+j|0]=f[g+j|0];return 0}else if(g>h){k=(f.length-g|0)-1|0;j=i-1|0;i=k>j?j:k;for(var j=0;j<=i;++j)f[h+j|0]=f[g+j|0];return 0}else return 0}else{k=a.length-b|0;if(e<=k){for(var g=0,h=e-1|0;g<=h;++g)c[d+g|0]=a[b+g|0];return 0}else{for(var j=0,i=k-1|0;j<=i;++j)c[d+j|0]=a[b+j|0];for(var f=k,g=e-1|0;f<=g;++f)c[d+f|0]=0;return 0}}else return 0}function i(a){var b=a.length,c=new Array(b);for(var d=0,b=b-1|0;d<=b;++d)c[d]=a.charCodeAt(d);return c}function j(a){__p&&__p();var b=a,c=0;a=a.length;var d="",e=a;if(c===0&&a<=4096&&a===b.length)return String.fromCharCode.apply(null,b);else{c=0;while(e>0){a=e<1024?e:1024;var f=new Array(a);h(b,c,f,0,a);d=d+String.fromCharCode.apply(null,f);e=e-a|0;c=c+a|0}return d}}function k(a){var b=a.length,c=new Array(b);for(var d=0,b=b-1|0;d<=b;++d)c[d]=a[d];return j(c)}function l(a){if(a>31)return a<127;else return!1}function m(a,b){return a.charCodeAt(b)+(a.charCodeAt(b+1|0)<<8)|0}function n(a,b){return((a.charCodeAt(b)+(a.charCodeAt(b+1|0)<<8)|0)+(a.charCodeAt(b+2|0)<<16)|0)+(a.charCodeAt(b+3|0)<<24)|0}function o(a,c){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return a.charCodeAt(c)}f.bytes_of_string=i;f.bytes_to_string=j;f.caml_is_printable=l;f.caml_string_of_char_array=k;f.caml_string_get=c;f.caml_create_string=d;f.caml_fill_string=e;f.caml_blit_string=g;f.caml_blit_bytes=h;f.caml_string_get16=m;f.caml_string_get32=n;f.string_of_char=a;f.get=o}),null);
__d("bs_char",["bs_caml_string","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a<0||a>255)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Char.chr"];else return a}function c(a){__p&&__p();var c=0;if(a>=40)if(a!==92)c=a>=127?1:2;else return"\\\\";else if(a>=32)if(a>=39)return"\\'";else c=2;else if(a>=14)c=1;else switch(a){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:c=1;break;case 13:return"\\r"}switch(c){case 1:c=b("bs_caml_string").caml_create_string(4);c[0]=92;c[1]=48+(a/100|0)|0;c[2]=48+(a/10|0)%10|0;c[3]=48+a%10|0;return b("bs_caml_string").bytes_to_string(c);case 2:c=b("bs_caml_string").caml_create_string(1);c[0]=a;return b("bs_caml_string").bytes_to_string(c)}}function d(a){if(a>=65&&a<=90||a>=192&&a<=214||a>=216&&a<=222)return a+32|0;else return a}function e(a){if(a>=97&&a<=122||a>=224&&a<=246||a>=248&&a<=254)return a-32|0;else return a}function g(a,b){return a-b|0}f.chr=a;f.escaped=c;f.lowercase=d;f.uppercase=e;f.compare=g}),null);
__d("bs_caml_utils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=String.prototype.repeat&&function(a,b){return b.repeat(a)}||function(a,b){__p&&__p();if(b.length==0||a==0)return"";if(b.length*a>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var c="";for(;;){(a&1)==1&&(c+=b);a>>>=1;if(a==0)break;b+=b}return c};f.repeat=a}),null);
__d("bs_caml_int64",["bs_caml_int32","bs_caml_utils","bs_caml_primitive","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[-2147483648,0],h=[2147483647,1],i=[0,1],j=[0,0],k=[-1,4294967295];function l(a){return(a&2147483648)!==0}function m(a,b){var c=b[1],d=a[1],e=d+c&4294967295;d=l(d)&&(l(c)||!l(e))||l(c)&&!l(e)?1:0;c=a[0]+b[0]+d&4294967295;return[c,e>>>0]}function n(a){var b=a[0]^-1;a=a[1]^-1;return[b,a>>>0]}function o(a,b){if(a[0]===b[0])return a[1]===b[1];else return!1}function a(a,b){if(b!==null)return o(a,b);else return!1}function c(a,b){if(b!==undefined)return o(a,b);else return!1}function d(a,b){if(b==null)return!1;else return o(a,b)}function p(a){if(o(a,g))return g;else return m(n(a),i)}function e(a,b){return m(a,p(b))}function q(a,b){if(b===0)return a;else{var c=a[1];if(b>=32)return[c<<(b-32|0),0];else{a=c>>>(32-b|0)|a[0]<<b;return[a,c<<b>>>0]}}}function r(a,b){__p&&__p();if(b===0)return a;else{var c=a[0],d=b-32|0;if(d===0)return[0,c>>>0];else if(d>0){var e=c>>>d;return[0,e>>>0]}else{e=c>>>b;c=c<<(-d|0)|a[1]>>>b;return[e,c>>>0]}}}function s(a,b){__p&&__p();if(b===0)return a;else{var c=a[0];if(b<32){var d=c>>b;a=c<<(32-b|0)|a[1]>>>b;return[d,a>>>0]}else{d=c>>(b-32|0);return[c>=0?0:-1,d>>>0]}}}function t(a){if(a[0]!==0||a[1]!==0)return!1;else return!0}function u(a,b){__p&&__p();while(!0){var c=b,d=a,e=0,f,h=d[0],i=0,k=0,l;if(h!==0||d[1]!==0)l=4;else return j;if(l===4)if(c[0]!==0||c[1]!==0)k=3;else return j;k===3&&(h!==-2147483648||d[1]!==0?i=2:(f=c[1],e=1));if(i===2){l=c[0];k=d[1];i=0;l!==-2147483648||c[1]!==0?i=3:(f=k,e=1);if(i===3){i=c[1];if(h<0)if(l<0){b=p(c);a=p(d);continue}else return p(u(p(d),c));else if(l<0)return p(u(d,p(c)));else{d=h>>>16;c=h&65535;h=k>>>16;k=k&65535;var m=l>>>16;l=l&65535;var n=i>>>16;i=i&65535;var o,q,r,s=k*i;r=(s>>>16)+h*i;q=r>>>16;r=(r&65535)+k*n;q=q+(r>>>16)+c*i;o=q>>>16;q=(q&65535)+h*n;o+=q>>>16;q=(q&65535)+k*l;o+=q>>>16;q=q&65535;o=o+(d*i+c*n+h*l+k*m)&65535;d=q|o<<16;i=s&65535|(r&65535)<<16;return[d,i>>>0]}}}if(e===1)if((f&1)===0)return j;else return g}}function v(a){var c=b("bs_caml_int32").caml_int32_bswap(a[1]);a=b("bs_caml_int32").caml_int32_bswap(a[0]);return[c,a>>>0]}function w(a,b){return[a[0]^b[0],(a[1]^b[1])>>>0]}function x(a,b){return[a[0]|b[0],(a[1]|b[1])>>>0]}function y(a,b){return[a[0]&b[0],(a[1]&b[1])>>>0]}function z(a,b){var c=b[0],d=a[0];if(d>c)return!0;else if(d<c)return!1;else return a[1]>=b[1]}function A(a,b){return!o(a,b)}function B(a,b){return!z(a,b)}function C(a,b){if(a[0]>b[0])return!0;else if(a[0]<b[0])return!1;else return a[1]>b[1]}function D(a,b){return!C(a,b)}function E(a,b){if(z(a,b))return b;else return a}function F(a,b){if(C(a,b))return a;else return b}function G(a){return a[0]*4294967296+a[1]}var H=Math.pow(2,32),I=Math.pow(2,63),J=-Math.pow(2,63);function K(a){__p&&__p();if(isNaN(a)||!isFinite(a))return j;else if(a<=J)return g;else if(a+1>=I)return h;else if(a<0)return p(K(-a));else{var b=a/H|0;a=a%H|0;return[b,a>>>0]}}function L(a,c){__p&&__p();while(!0){var d=c,e=a,f=e[0],h=0,l;if(d[0]!==0||d[1]!==0)l=2;else throw b("bs_caml_builtin_exceptions").division_by_zero;if(l===2)if(f!==-2147483648)if(f!==0||e[1]!==0)h=1;else return j;else if(e[1]!==0)h=1;else if(o(d,i)||o(d,k))return e;else if(o(d,g))return i;else{l=d[0];var n=s(e,1);n=q(L(n,d),1);var r;if(n[0]!==0||n[1]!==0)r=3;else if(l<0)return i;else return p(i);if(r===3){l=u(d,n);r=m(e,p(l));return m(n,L(r,d))}}if(h===1){l=d[0];if(l!==-2147483648||d[1]!==0)n=2;else return j;if(n===2)if(f<0)if(l<0){c=p(d);a=p(e);continue}else return p(L(p(e),d));else if(l<0)return p(L(e,p(d)));else{r=j;h=e;while(z(h,d)){n=b("bs_caml_primitive").caml_float_max(1,Math.floor(G(h)/G(d)));f=Math.ceil(Math.log(n)/Math.LN2);l=f<=48?1:Math.pow(2,f-48);e=K(n);f=u(e,d);while(f[0]<0||C(f,h))n-=l,e=K(n),f=u(e,d);t(e)&&(e=i);r=m(r,e);h=m(h,p(f))}return r}}}}function M(a,b){b=u(L(a,b),b);return m(a,p(b))}function N(a,b){var c=L(a,b);b=u(c,b);return[c,m(a,p(b))]}function O(a,c){var d=b("bs_caml_primitive").caml_nativeint_compare(a[0],c[0]);if(d===0)return b("bs_caml_primitive").caml_nativeint_compare(a[1],c[1]);else return d}function P(a){return[a<0?-1:0,a>>>0]}function Q(a){return a[1]|0}function R(a){__p&&__p();var c=function(a){return(a>>>0).toString(16)},d=a[0],e=a[1],f;if(d!==0||e!==0)f=1;else return"0";if(f===1)if(e!==0)if(d!==0){f=c(a[1]);e=8-f.length|0;if(e<=0)return c(a[0])+f;else return c(a[0])+(b("bs_caml_utils").repeat(e,"0")+f)}else return c(a[1]);else return c(a[0])+"00000000"}function S(a){return[2147483647&a[0],a[1]]}function T(a){a=new Int32Array([a[1],a[0]]);return new Float64Array(a.buffer)[0]}function U(a){a=new Float64Array([a]);a=new Int32Array(a.buffer);var b=a[1];b=b;a=a[0];a=a;return[b,a>>>0]}function V(a,b){var c=a.charCodeAt(b+4|0)<<32|a.charCodeAt(b+5|0)<<40|a.charCodeAt(b+6|0)<<48|a.charCodeAt(b+7|0)<<56;a=a.charCodeAt(b)|a.charCodeAt(b+1|0)<<8|a.charCodeAt(b+2|0)<<16|a.charCodeAt(b+3|0)<<24;return[c,a>>>0]}f.min_int=g;f.max_int=h;f.one=i;f.zero=j;f.not=n;f.of_int32=P;f.to_int32=Q;f.add=m;f.neg=p;f.sub=e;f.lsl_=q;f.lsr_=r;f.asr_=s;f.is_zero=t;f.mul=u;f.xor=w;f.or_=x;f.and_=y;f.swap=v;f.ge=z;f.eq=o;f.neq=A;f.lt=B;f.gt=C;f.le=D;f.equal_null=a;f.equal_undefined=c;f.equal_nullable=d;f.min=E;f.max=F;f.to_float=G;f.of_float=K;f.div=L;f.mod_=M;f.div_mod=N;f.compare=O;f.to_hex=R;f.discard_sign=S;f.float_of_bits=T;f.bits_of_float=U;f.get64=V}),null);
__d("bs_caml_format",["bs_curry","bs_caml_int32","bs_caml_int64","bs_caml_utils","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){throw[b("bs_caml_builtin_exceptions").failure,a]}function h(a){__p&&__p();if(a>=65)if(a>=97)if(a>=123)return-1;else return a-87|0;else if(a>=91)return-1;else return a-55|0;else if(a>57||a<48)return-1;else return a-48|0}function i(a){switch(a){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function j(a){var b=1,c=2,d=0;a[d]==="-"&&(b=-1,d=d+1|0);var e=a.charCodeAt(d);a=a.charCodeAt(d+1|0);e===48&&(a>=89?a!==98?a!==111?a===120&&(c=1,d=d+2|0):(c=0,d=d+2|0):(c=3,d=d+2|0):a!==66?a!==79?a>=88&&(c=1,d=d+2|0):(c=0,d=d+2|0):(c=3,d=d+2|0));return[d,b,c]}function a(a){__p&&__p();var c=j(a),d=c[0],e=i(c[2]),f=4294967295,g=a.length,k=d<g?a.charCodeAt(d):0;k=h(k);if(k<0||k>=e)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];var l=function(c,d){__p&&__p();while(!0){var i=d,j=c;if(i===g)return j;else{var k=a.charCodeAt(i);if(k===95){d=i+1|0;continue}else{k=h(k);if(k<0||k>=e)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];else{j=e*j+k;if(j>f)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];else{d=i+1|0;c=j;continue}}}}}};c=c[1]*l(k,d+1|0);l=c|0;if(e===10&&c!==l)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];return l}function c(a){__p&&__p();var c=j(a),d=c[2],e=c[0],f=b("bs_caml_int64").of_int32(i(d));c=b("bs_caml_int64").of_int32(c[1]);var g;switch(d){case 0:g=[536870911,4294967295];break;case 1:g=[268435455,4294967295];break;case 2:g=[429496729,2576980377];break;case 3:g=[2147483647,4294967295];break}var k=a.length;d=e<k?a.charCodeAt(e):0;d=b("bs_caml_int64").of_int32(h(d));if(b("bs_caml_int64").lt(d,[0,0])||b("bs_caml_int64").ge(d,f))throw[b("bs_caml_builtin_exceptions").failure,"int64_of_string"];var l=function(c,d){__p&&__p();while(!0){var e=d,i=c;if(e===k)return i;else{var j=a.charCodeAt(e);if(j===95){d=e+1|0;continue}else{j=b("bs_caml_int64").of_int32(h(j));if(b("bs_caml_int64").lt(j,[0,0])||b("bs_caml_int64").ge(j,f)||b("bs_caml_int64").gt(i,g))throw[b("bs_caml_builtin_exceptions").failure,"int64_of_string"];else{i=b("bs_caml_int64").add(b("bs_caml_int64").mul(f,i),j);d=e+1|0;c=i;continue}}}}};c=b("bs_caml_int64").mul(c,l(d,e+1|0));l=b("bs_caml_int64").or_(c,[0,0]);if(b("bs_caml_int64").eq(f,[0,10])&&b("bs_caml_int64").neq(c,l))throw[b("bs_caml_builtin_exceptions").failure,"int64_of_string"];return l}function k(a){switch(a){case 0:return 8;case 1:return 16;case 2:return 10}}function l(a){if(a>=65&&a<=90||a>=192&&a<=214||a>=216&&a<=222)return a+32|0;else return a}function m(a){__p&&__p();var c=a.length;if(c>31)throw[b("bs_caml_builtin_exceptions").invalid_argument,"format_int: format too long"];var d=["+","-"," ",!1,2,!1,0,!1,1,-1,"f"],e=0;while(!0){var f=e;if(f>=c)return d;else{var g=a.charCodeAt(f),h=0;if(g>=69)if(g>=88)if(g>=121)h=1;else switch(g-88|0){case 0:d[4]=1;d[7]=!0;e=f+1|0;continue;case 13:case 14:case 15:h=5;break;case 12:case 17:h=4;break;case 23:d[4]=0;e=f+1|0;continue;case 29:d[4]=2;e=f+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:h=1;break;case 32:d[4]=1;e=f+1|0;continue}else if(g>=72)h=1;else{d[5]=!0;d[7]=!0;d[10]=String.fromCharCode(l(g));e=f+1|0;continue}else{var i=g-32|0;if(i>25||i<0)h=1;else switch(i){case 3:d[3]=!0;e=f+1|0;continue;case 0:case 11:h=2;break;case 13:d[0]="-";e=f+1|0;continue;case 14:d[9]=0;i=f+1|0;while(function(b){return function(){var c=a.charCodeAt(b)-48|0;return c>=0&&c<=9}}(i)())d[9]=(b("bs_caml_int32").imul(d[9],10)+a.charCodeAt(i)|0)-48|0,i=i+1|0;e=i;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:h=1;break;case 16:d[2]="0";e=f+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:h=3;break}}switch(h){case 1:e=f+1|0;continue;case 2:d[1]=String.fromCharCode(g);e=f+1|0;continue;case 3:d[6]=0;i=f;while(function(b){return function(){var c=a.charCodeAt(b)-48|0;return c>=0&&c<=9}}(i)())d[6]=(b("bs_caml_int32").imul(d[6],10)+a.charCodeAt(i)|0)-48|0,i=i+1|0;e=i;continue;case 4:d[5]=!0;d[4]=2;e=f+1|0;continue;case 5:d[5]=!0;d[10]=String.fromCharCode(g);e=f+1|0;continue}}}}function n(a,b){__p&&__p();var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7];a=a[8];var k=b.length;h&&(a<0||d!=="-")&&(k=k+1|0);f&&(g===0?k=k+1|0:g===1&&(k=k+2|0));var l="";if(c==="+"&&e===" ")for(var m=k,n=i-1|0;m<=n;++m)l=l+e;h&&(a<0?l=l+"-":d!=="-"&&(l=l+d));f&&g===0&&(l=l+"0");f&&g===1&&(l=l+"0x");if(c==="+"&&e==="0")for(var m=k,n=i-1|0;m<=n;++m)l=l+e;l=j?l+b.toUpperCase():l+b;if(c==="-")for(var h=k,a=i-1|0;h<=a;++h)l=l+" ";return l}function d(a,c){__p&&__p();if(a==="%d")return String(c);else{a=m(a);a=a;c=c;c=c<0?a[5]?(a[8]=-1,-c):c>>>0:c;c=c.toString(k(a[4]));if(a[9]>=0){a[2]=" ";var d=a[9]-c.length|0;d>0&&(c=b("bs_caml_utils").repeat(d,"0")+c)}return n(a,c)}}function e(a,c){__p&&__p();a=m(a);c=a[5]&&b("bs_caml_int64").lt(c,[0,0])?(a[8]=-1,b("bs_caml_int64").neg(c)):c;var d="",e=a[4];switch(e){case 0:e=[0,8];var f="01234567";if(b("bs_caml_int64").lt(c,[0,0])){var g=b("bs_caml_int64").discard_sign(c);g=b("bs_caml_int64").div_mod(g,e);var h=b("bs_caml_int64").add([268435456,0],g[0]);g=g[1];d=String.fromCharCode(f.charCodeAt(g[1]|0))+d;while(b("bs_caml_int64").neq(h,[0,0])){var i=b("bs_caml_int64").div_mod(h,e);h=i[0];g=i[1];d=String.fromCharCode(f.charCodeAt(g[1]|0))+d}}else{i=b("bs_caml_int64").div_mod(c,e);g=i[0];h=i[1];d=String.fromCharCode(f.charCodeAt(h[1]|0))+d;while(b("bs_caml_int64").neq(g,[0,0])){i=b("bs_caml_int64").div_mod(g,e);g=i[0];h=i[1];d=String.fromCharCode(f.charCodeAt(h[1]|0))+d}}break;case 1:d=b("bs_caml_int64").to_hex(c)+d;break;case 2:i=[0,10];h="0123456789";if(b("bs_caml_int64").lt(c,[0,0])){f=b("bs_caml_int64").discard_sign(c);g=b("bs_caml_int64").div_mod(f,i);e=b("bs_caml_int64").div_mod(b("bs_caml_int64").add([0,8],g[1]),i);f=b("bs_caml_int64").add(b("bs_caml_int64").add([214748364,3435973836],g[0]),e[0]);g=e[1];d=String.fromCharCode(h.charCodeAt(g[1]|0))+d;while(b("bs_caml_int64").neq(f,[0,0])){e=b("bs_caml_int64").div_mod(f,i);f=e[0];g=e[1];d=String.fromCharCode(h.charCodeAt(g[1]|0))+d}}else{e=b("bs_caml_int64").div_mod(c,i);g=e[0];f=e[1];d=String.fromCharCode(h.charCodeAt(f[1]|0))+d;while(b("bs_caml_int64").neq(g,[0,0])){c=b("bs_caml_int64").div_mod(g,i);g=c[0];f=c[1];d=String.fromCharCode(h.charCodeAt(f[1]|0))+d}}break}if(a[9]>=0){a[2]=" ";e=a[9]-d.length|0;e>0&&(d=b("bs_caml_utils").repeat(e,"0")+d)}return n(a,d)}function o(a,b){__p&&__p();a=m(a);var c=a[9]<0?6:a[9],d=b<0?(a[8]=-1,-b):b;b="";if(isNaN(d))b="nan",a[2]=" ";else if(isFinite(d)){var e=a[10];switch(e){case"e":b=d.toExponential(c);e=b.length;b[e-3|0]==="e"&&(b=b.slice(0,e-1|0)+("0"+b.slice(e-1|0)));break;case"f":b=d.toFixed(c);break;case"g":var f=c!==0?c:1;b=d.toExponential(f-1|0);e=b.indexOf("e");c=Number(b.slice(e+1|0))|0;if(c<-4||d>=1e21||d.toFixed().length>f){var g=e-1|0;while(b[g]==="0")g=g-1|0;b[g]==="."&&(g=g-1|0);b=b.slice(0,g+1|0)+b.slice(e);g=b.length;b[g-3|0]==="e"&&(b=b.slice(0,g-1|0)+("0"+b.slice(g-1|0)))}else{var h=f;if(c<0)h=h-(c+1|0)|0,b=d.toFixed(h);else while(function(){b=d.toFixed(h);return b.length>(f+1|0)}())h=h-1|0;if(h!==0){e=b.length-1|0;while(b[e]==="0")e=e-1|0;b[e]==="."&&(e=e-1|0);b=b.slice(0,e+1|0)}}break;default:}}else b="inf",a[2]=" ";return n(a,b)}var p=function(b,a){__p&&__p();var c=+b;if(b.length>0&&c===c)return c;b=b.replace(/_/g,"");c=+b;if(b.length>0&&c===c||/^[+-]?nan$/i.test(b))return c;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(b)){var d=b.indexOf("p");d=d==-1?b.indexOf("P"):d;var e=+b.substring(d+1);c=+b.substring(0,d);return c*Math.pow(2,e)}if(/^\+?inf(inity)?$/i.test(b))return Infinity;if(/^-inf(inity)?$/i.test(b))return-Infinity;a("float_of_string")};function q(a){return b("bs_curry")._2(p,a,g)}var r=d,s=d,t=a,u=a;f.caml_format_float=o;f.caml_format_int=d;f.caml_nativeint_format=r;f.caml_int32_format=s;f.caml_float_of_string=q;f.caml_int64_format=e;f.caml_int_of_string=a;f.caml_int32_of_string=t;f.caml_int64_of_string=c;f.caml_nativeint_of_string=u}),null);
__d("bs_caml_io",["bs_curry","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){return a+b}var g=["",function(a,b){__p&&__p();a=b.length-1|0;if(typeof process!=="undefined"&&process.stdout&&process.stdout.write)return process.stdout.write(b);else if(b[a]==="\n"){!1;return 0}else{!1;return 0}}],h=["",function(a,b){a=b.length-1|0;if(b[a]==="\n"){!1;return 0}else{!1;return 0}}];function c(){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_open_descriptor_in not implemented"]}function d(){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_open_descriptor_out not implemented"]}function i(a){if(a[0]!==""){b("bs_curry")._2(a[1],a,a[0]);a[0]="";return 0}else return 0}var j=function(a){return typeof process!=="undefined"&&process.stdout&&(process.stdout.write(a),!0)};function k(a,b,c,d){__p&&__p();b=c===0&&d===b.length?b:b.slice(c,d);if(typeof process!=="undefined"&&process.stdout&&process.stdout.write&&a===g)return process.stdout.write(b);else{c=b.lastIndexOf("\n");if(c<0){a[0]=a[0]+b;return 0}else{a[0]=a[0]+b.slice(0,c+1|0);i(a);a[0]=a[0]+b.slice(c+1|0);return 0}}}function e(a,b){return k(a,String.fromCharCode(b),0,1)}function l(a,c,d,e){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_input ic not implemented"]}function m(){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_input_char not implemnted"]}function n(){return[g,[h,0]]}var o=undefined;f.$caret=a;f.stdin=o;f.stdout=g;f.stderr=h;f.caml_ml_open_descriptor_in=c;f.caml_ml_open_descriptor_out=d;f.caml_ml_flush=i;f.node_std_output=j;f.caml_ml_output=k;f.caml_ml_output_char=e;f.caml_ml_input=l;f.caml_ml_input_char=m;f.caml_ml_out_channels_list=n}),null);
__d("bs_caml_missing_polyfill",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a+" not implemented by BuckleScript yet\n";throw new Error(a)}f.not_implemented=a}),null);
__d("bs_caml_sys",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=typeof process==="undefined"?undefined:process;if(c!==undefined){c=c.env[a];if(c!==undefined)return c;else throw b("bs_caml_builtin_exceptions").not_found}else throw b("bs_caml_builtin_exceptions").not_found}function c(){var a=typeof process==="undefined"?undefined:process;if(a!==undefined)return a.uptime();else return-1}function d(){return[((Date.now()|0)^4294967295)*Math.random()|0]}function e(){return 127}function g(){var a=typeof process==="undefined"?undefined:process;if(a!==undefined)return a.cwd();else return"/"}function h(){var a=typeof process==="undefined"?undefined:process;if(a!==undefined)if(a.argv==null)return["",[""]];else return[a.argv[0],a.argv];else return["",[""]]}function i(a){var b=typeof process==="undefined"?undefined:process;if(b!==undefined)return b.exit(a);else return 0}function j(){throw[b("bs_caml_builtin_exceptions").failure,"caml_sys_is_directory not implemented"]}function k(){throw[b("bs_caml_builtin_exceptions").failure,"caml_sys_file_exists not implemented"]}f.caml_sys_getenv=a;f.caml_sys_time=c;f.caml_sys_random_seed=d;f.caml_sys_system_command=e;f.caml_sys_getcwd=g;f.caml_sys_get_argv=h;f.caml_sys_exit=i;f.caml_sys_is_directory=j;f.caml_sys_file_exists=k}),null);
__d("bs_camlinternalFormatBasics",["bs_block"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();if(typeof a==="number")return 0;else switch(a.tag|0){case 0:return b("bs_block").__(0,[g(a[0])]);case 1:return b("bs_block").__(1,[g(a[0])]);case 2:return b("bs_block").__(2,[g(a[0])]);case 3:return b("bs_block").__(3,[g(a[0])]);case 4:return b("bs_block").__(4,[g(a[0])]);case 5:return b("bs_block").__(5,[g(a[0])]);case 6:return b("bs_block").__(6,[g(a[0])]);case 7:return b("bs_block").__(7,[g(a[0])]);case 8:return b("bs_block").__(8,[a[0],g(a[1])]);case 9:var c=a[0];return b("bs_block").__(9,[c,c,g(a[2])]);case 10:return b("bs_block").__(10,[g(a[0])]);case 11:return b("bs_block").__(11,[g(a[0])]);case 12:return b("bs_block").__(12,[g(a[0])]);case 13:return b("bs_block").__(13,[g(a[0])]);case 14:return b("bs_block").__(14,[g(a[0])])}}function h(a,c){__p&&__p();if(typeof a==="number")return c;else switch(a.tag|0){case 0:return b("bs_block").__(0,[h(a[0],c)]);case 1:return b("bs_block").__(1,[h(a[0],c)]);case 2:return b("bs_block").__(2,[h(a[0],c)]);case 3:return b("bs_block").__(3,[h(a[0],c)]);case 4:return b("bs_block").__(4,[h(a[0],c)]);case 5:return b("bs_block").__(5,[h(a[0],c)]);case 6:return b("bs_block").__(6,[h(a[0],c)]);case 7:return b("bs_block").__(7,[h(a[0],c)]);case 8:return b("bs_block").__(8,[a[0],h(a[1],c)]);case 9:return b("bs_block").__(9,[a[0],a[1],h(a[2],c)]);case 10:return b("bs_block").__(10,[h(a[0],c)]);case 11:return b("bs_block").__(11,[h(a[0],c)]);case 12:return b("bs_block").__(12,[h(a[0],c)]);case 13:return b("bs_block").__(13,[h(a[0],c)]);case 14:return b("bs_block").__(14,[h(a[0],c)])}}function i(a,c){__p&&__p();if(typeof a==="number")return c;else switch(a.tag|0){case 0:return b("bs_block").__(0,[i(a[0],c)]);case 1:return b("bs_block").__(1,[i(a[0],c)]);case 2:return b("bs_block").__(2,[a[0],i(a[1],c)]);case 3:return b("bs_block").__(3,[a[0],i(a[1],c)]);case 4:return b("bs_block").__(4,[a[0],a[1],a[2],i(a[3],c)]);case 5:return b("bs_block").__(5,[a[0],a[1],a[2],i(a[3],c)]);case 6:return b("bs_block").__(6,[a[0],a[1],a[2],i(a[3],c)]);case 7:return b("bs_block").__(7,[a[0],a[1],a[2],i(a[3],c)]);case 8:return b("bs_block").__(8,[a[0],a[1],a[2],i(a[3],c)]);case 9:return b("bs_block").__(9,[i(a[0],c)]);case 10:return b("bs_block").__(10,[i(a[0],c)]);case 11:return b("bs_block").__(11,[a[0],i(a[1],c)]);case 12:return b("bs_block").__(12,[a[0],i(a[1],c)]);case 13:return b("bs_block").__(13,[a[0],a[1],i(a[2],c)]);case 14:return b("bs_block").__(14,[a[0],a[1],i(a[2],c)]);case 15:return b("bs_block").__(15,[i(a[0],c)]);case 16:return b("bs_block").__(16,[i(a[0],c)]);case 17:return b("bs_block").__(17,[a[0],i(a[1],c)]);case 18:return b("bs_block").__(18,[a[0],i(a[1],c)]);case 19:return b("bs_block").__(19,[i(a[0],c)]);case 20:return b("bs_block").__(20,[a[0],a[1],i(a[2],c)]);case 21:return b("bs_block").__(21,[a[0],i(a[1],c)]);case 22:return b("bs_block").__(22,[i(a[0],c)]);case 23:return b("bs_block").__(23,[a[0],i(a[1],c)]);case 24:return b("bs_block").__(24,[a[0],a[1],i(a[2],c)])}}f.concat_fmtty=h;f.erase_rel=g;f.concat_fmt=i}),null);
__d("bs_pervasives",["bs_curry","bs_caml_io","bs_caml_sys","bs_caml_format","bs_caml_string","bs_caml_exceptions","bs_caml_missing_polyfill","bs_caml_builtin_exceptions","bs_camlinternalFormatBasics"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){throw[b("bs_caml_builtin_exceptions").failure,a]}function c(a){throw[b("bs_caml_builtin_exceptions").invalid_argument,a]}var g=b("bs_caml_exceptions").create("Pervasives.Exit");function d(a){if(a>=0)return a;else return-a|0}function e(a){return a^-1}var h=-2147483648;function i(a){if(a<0||a>255)throw[b("bs_caml_builtin_exceptions").invalid_argument,"char_of_int"];else return a}function j(a){if(a)return"true";else return"false"}function k(a){switch(a){case"false":return!1;case"true":return!0;default:throw[b("bs_caml_builtin_exceptions").invalid_argument,"bool_of_string"]}}function l(a){__p&&__p();var c=a.length,d=0;while(!0){var e=d;if(e>=c)return a+".";else{var f=b("bs_caml_string").get(a,e);if(f>=48)if(f>=58)return a;else{d=e+1|0;continue}else if(f!==45)return a;else{d=e+1|0;continue}}}}function m(a){return l(b("bs_caml_format").caml_format_float("%.12g",a))}function n(a,b){if(a)return[a[0],n(a[1],b)];else return b}var o=b("bs_caml_io").stdin,p=b("bs_caml_io").stdout,q=b("bs_caml_io").stderr;function r(a,c,d){return b("bs_caml_io").caml_ml_open_descriptor_out(b("bs_caml_missing_polyfill").not_implemented("caml_sys_open"))}function s(a){return r([1,[3,[4,[7,0]]]],438,a)}function t(a){return r([1,[3,[4,[6,0]]]],438,a)}function u(){__p&&__p();var a=b("bs_caml_io").caml_ml_out_channels_list(0);while(!0){var c=a;if(c){try{b("bs_caml_io").caml_ml_flush(c[0])}catch(a){}a=c[1];continue}else return 0}}function v(a,c){return b("bs_caml_io").caml_ml_output(a,c,0,c.length)}function w(a,c){return b("bs_caml_io").caml_ml_output(a,c,0,c.length)}function x(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"output"];else return b("bs_caml_io").caml_ml_output(a,c,d,e)}function y(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"output_substring"];else return b("bs_caml_io").caml_ml_output(a,c,d,e)}function z(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value")}function A(a){b("bs_caml_io").caml_ml_flush(a);return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}function B(a){try{b("bs_caml_io").caml_ml_flush(a)}catch(a){}try{return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}catch(a){return 0}}function C(a,c,d){return b("bs_caml_io").caml_ml_open_descriptor_in(b("bs_caml_missing_polyfill").not_implemented("caml_sys_open"))}function D(a){return C([0,[7,0]],0,a)}function E(a){return C([0,[6,0]],0,a)}function F(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"input"];else return b("bs_caml_missing_polyfill").not_implemented("caml_ml_input")}function G(a,c,d,e){__p&&__p();while(!0){a=e;c=d;if(a<=0)return 0;else{var f=b("bs_caml_missing_polyfill").not_implemented("caml_ml_input");if(f===0)throw b("bs_caml_builtin_exceptions").end_of_file;else{e=a-f|0;d=c+f|0;continue}}}}function H(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"really_input"];else return G(a,c,d,e)}function I(a,c){var d=b("bs_caml_string").caml_create_string(c);H(a,d,0,c);return b("bs_caml_string").bytes_to_string(d)}function J(a){__p&&__p();var c=function(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(e){var g=e[0],h=g.length;b("bs_caml_string").caml_blit_bytes(g,0,a,f-h|0,h);d=e[1];c=f-h|0;continue}else return a}},d=function(d,e){__p&&__p();while(!0){var f=e,g=d,h=b("bs_caml_missing_polyfill").not_implemented("caml_ml_input_scan_line");if(h===0)if(g)return c(b("bs_caml_string").caml_create_string(f),f,g);else throw b("bs_caml_builtin_exceptions").end_of_file;else if(h>0){var i=b("bs_caml_string").caml_create_string(h-1|0);b("bs_caml_missing_polyfill").not_implemented("caml_ml_input");b("bs_caml_io").caml_ml_input_char(a);if(g){var j=(f+h|0)-1|0;return c(b("bs_caml_string").caml_create_string(j),j,[i,g])}else return i}else{j=b("bs_caml_string").caml_create_string(-h|0);b("bs_caml_missing_polyfill").not_implemented("caml_ml_input");e=f-h|0;d=[j,g];continue}}};return b("bs_caml_string").bytes_to_string(d(0,0))}function K(){try{return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}catch(a){return 0}}function L(a){return b("bs_caml_io").caml_ml_output_char(p,a)}function M(a){return w(p,a)}function N(a){return v(p,a)}function O(a){return w(p,String(a))}function P(a){return w(p,l(b("bs_caml_format").caml_format_float("%.12g",a)))}function Q(){b("bs_caml_io").caml_ml_output_char(p,10);return b("bs_caml_io").caml_ml_flush(p)}function R(a){return b("bs_caml_io").caml_ml_output_char(q,a)}function S(a){return w(q,a)}function T(a){return v(q,a)}function U(a){return w(q,String(a))}function V(a){return w(q,l(b("bs_caml_format").caml_format_float("%.12g",a)))}function W(){b("bs_caml_io").caml_ml_output_char(q,10);return b("bs_caml_io").caml_ml_flush(q)}function X(){b("bs_caml_io").caml_ml_flush(p);return J(o)}function aa(){return b("bs_caml_format").caml_int_of_string((b("bs_caml_io").caml_ml_flush(p),J(o)))}function ba(){return b("bs_caml_format").caml_float_of_string((b("bs_caml_io").caml_ml_flush(p),J(o)))}function ca(a){return a[1]}function da(a,c){return[b("bs_camlinternalFormatBasics").concat_fmt(a[0],c[0]),a[1]+("%,"+c[1])]}var Y=[u];function ea(a){var c=Y[0];Y[0]=function(){b("bs_curry")._1(a,0);return b("bs_curry")._1(c,0)};return 0}function Z(){return b("bs_curry")._1(Y[0],0)}function fa(a){Z(0);return b("bs_caml_sys").caml_sys_exit(a)}var ga=2147483647,ha=2220446049250313e-31,ia=b("bs_caml_io").caml_ml_flush,ja=b("bs_caml_io").caml_ml_output_char,ka=b("bs_caml_io").caml_ml_output_char;function la(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_output_int")}function ma(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_out")}function na(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_out")}function oa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size")}function pa(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_set_binary_mode")}var qa=b("bs_caml_io").caml_ml_input_char,ra=b("bs_caml_io").caml_ml_input_char;function sa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_input_int")}function ta(){return b("bs_caml_missing_polyfill").not_implemented("caml_input_value")}function ua(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_in")}function va(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_in")}function wa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size")}function xa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}function ya(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_set_binary_mode")}function $(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_out_64")}function za(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_out_64")}function Aa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size_64")}function Ba(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_in_64")}function Ca(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_in_64")}function Da(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size_64")}$=[$,za,Aa,Ba,Ca,Da];f.invalid_arg=c;f.failwith=a;f.Exit=g;f.abs=d;f.max_int=ga;f.min_int=h;f.lnot=e;f.epsilon_float=ha;f.char_of_int=i;f.string_of_bool=j;f.bool_of_string=k;f.string_of_float=m;f.$at=n;f.stdin=o;f.stdout=p;f.stderr=q;f.print_char=L;f.print_string=M;f.print_bytes=N;f.print_int=O;f.print_float=P;f.print_newline=Q;f.prerr_char=R;f.prerr_string=S;f.prerr_bytes=T;f.prerr_int=U;f.prerr_float=V;f.prerr_newline=W;f.read_line=X;f.read_int=aa;f.read_float=ba;f.open_out=s;f.open_out_bin=t;f.open_out_gen=r;f.flush=ia;f.flush_all=u;f.output_char=ja;f.output_string=w;f.output_bytes=v;f.output=x;f.output_substring=y;f.output_byte=ka;f.output_binary_int=la;f.output_value=z;f.seek_out=ma;f.pos_out=na;f.out_channel_length=oa;f.close_out=A;f.close_out_noerr=B;f.set_binary_mode_out=pa;f.open_in=D;f.open_in_bin=E;f.open_in_gen=C;f.input_char=qa;f.input_line=J;f.input=F;f.really_input=H;f.really_input_string=I;f.input_byte=ra;f.input_binary_int=sa;f.input_value=ta;f.seek_in=ua;f.pos_in=va;f.in_channel_length=wa;f.close_in=xa;f.close_in_noerr=K;f.set_binary_mode_in=ya;f.LargeFile=$;f.string_of_format=ca;f.$caret$caret=da;f.exit=fa;f.at_exit=ea;f.valid_float_lexem=l;f.unsafe_really_input=G;f.do_at_exit=Z}),null);
__d("bs_list",["bs_curry","bs_caml_obj","bs_pervasives","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();var b=0;a=a;while(!0){var c=a,d=b;if(c){a=c[1];b=d+1|0;continue}else return d}}function a(a){if(a)return a[0];else throw[b("bs_caml_builtin_exceptions").failure,"hd"]}function c(a){if(a)return a[1];else throw[b("bs_caml_builtin_exceptions").failure,"tl"]}function d(a,c){__p&&__p();if(c<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.nth"];else{a=a;c=c;while(!0){var d=c,e=a;if(e)if(d===0)return e[0];else{c=d-1|0;a=e[1];continue}else throw[b("bs_caml_builtin_exceptions").failure,"nth"]}}}function h(a,b){while(!0){var c=b,d=a;if(d){b=[d[0],c];a=d[1];continue}else return c}}function e(a){return h(a,0)}function i(a){if(a)return b("bs_pervasives").$at(a[0],i(a[1]));else return 0}function j(a,c){if(c){var d=b("bs_curry")._1(a,c[0]);return[d,j(a,c[1])]}else return 0}function k(a,c,d){if(d){var e=b("bs_curry")._2(c,a,d[0]);return[e,k(a+1|0,c,d[1])]}else return 0}function l(a,b){return k(0,a,b)}function m(a,c){__p&&__p();var d=0;c=c;while(!0){var e=c,f=d;if(e){c=e[1];d=[b("bs_curry")._1(a,e[0]),f];continue}else return f}}function n(a,c){while(!0){var d=c;if(d){b("bs_curry")._1(a,d[0]);c=d[1];continue}else return 0}}function o(a,c){__p&&__p();var d=0;a=a;c=c;while(!0){var e=c,f=d;if(e){b("bs_curry")._2(a,f,e[0]);c=e[1];d=f+1|0;continue}else return 0}}function p(a,c,d){while(!0){var e=d,f=c;if(e){d=e[1];c=b("bs_curry")._2(a,f,e[0]);continue}else return f}}function q(a,c,d){if(c)return b("bs_curry")._2(a,c[0],q(a,c[1],d));else return d}function r(a,c,d){if(c)if(d){var e=b("bs_curry")._2(a,c[0],d[0]);return[e,r(a,c[1],d[1])]}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.map2"];else if(d)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.map2"];else return 0}function s(a,c,d){__p&&__p();var e=0;c=c;d=d;while(!0){var f=d,g=c,h=e;if(g)if(f){d=f[1];c=g[1];e=[b("bs_curry")._2(a,g[0],f[0]),h];continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.rev_map2"];else if(f)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.rev_map2"];else return h}}function t(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(f)if(e){b("bs_curry")._2(a,f[0],e[0]);d=e[1];c=f[1];continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.iter2"];else if(e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.iter2"];else return 0}}function u(a,c,d,e){__p&&__p();while(!0){var f=e,g=d,h=c;if(g)if(f){e=f[1];d=g[1];c=b("bs_curry")._3(a,h,g[0],f[0]);continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_left2"];else if(f)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_left2"];else return h}}function v(a,c,d,e){if(c)if(d)return b("bs_curry")._3(a,c[0],d[0],v(a,c[1],d[1],e));else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_right2"];else if(d)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_right2"];else return e}function w(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_curry")._1(a,d[0])){c=d[1];continue}else return!1;else return!0}}function x(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_curry")._1(a,d[0]))return!0;else{c=d[1];continue}else return!1}}function y(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(f)if(e)if(b("bs_curry")._2(a,f[0],e[0])){d=e[1];c=f[1];continue}else return!1;else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.for_all2"];else if(e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.for_all2"];else return!0}}function z(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(f)if(e)if(b("bs_curry")._2(a,f[0],e[0]))return!0;else{d=e[1];c=f[1];continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.exists2"];else if(e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.exists2"];else return!1}}function A(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_caml_obj").caml_equal(d[0],a))return!0;else{c=d[1];continue}else return!1}}function B(a,b){__p&&__p();while(!0){var c=b;if(c)if(c[0]===a)return!0;else{b=c[1];continue}else return!1}}function C(a,c){__p&&__p();while(!0){var d=c;if(d){var e=d[0];if(b("bs_caml_obj").caml_equal(e[0],a))return e[1];else{c=d[1];continue}}else throw b("bs_caml_builtin_exceptions").not_found}}function D(a,c){__p&&__p();while(!0){var d=c;if(d){var e=d[0];if(e[0]===a)return e[1];else{c=d[1];continue}}else throw b("bs_caml_builtin_exceptions").not_found}}function E(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_caml_obj").caml_equal(d[0][0],a))return!0;else{c=d[1];continue}else return!1}}function F(a,b){__p&&__p();while(!0){var c=b;if(c)if(c[0][0]===a)return!0;else{b=c[1];continue}else return!1}}function G(a,c){if(c){var d=c[1];c=c[0];if(b("bs_caml_obj").caml_equal(c[0],a))return d;else return[c,G(a,d)]}else return 0}function H(a,b){if(b){var c=b[1];b=b[0];if(b[0]===a)return c;else return[b,H(a,c)]}else return 0}function I(a,c){__p&&__p();while(!0){var d=c;if(d){var e=d[0];if(b("bs_curry")._1(a,e))return e;else{c=d[1];continue}}else throw b("bs_caml_builtin_exceptions").not_found}}function J(a){__p&&__p();return function(c){__p&&__p();var d=0;c=c;while(!0){var e=c,f=d;if(e){var g=e[1];e=e[0];if(b("bs_curry")._1(a,e)){c=g;d=[e,f];continue}else{c=g;continue}}else return h(f,0)}}}function K(a,c){__p&&__p();var d=0,e=0;c=c;while(!0){var f=c,g=e,i=d;if(f){var j=f[1];f=f[0];if(b("bs_curry")._1(a,f)){c=j;d=[f,i];continue}else{c=j;e=[f,g];continue}}else return[h(i,0),h(g,0)]}}function L(a){if(a){var b=a[0];a=L(a[1]);return[[b[0],a[0]],[b[1],a[1]]]}else return[0,0]}function M(a,c){if(a)if(c)return[[a[0],c[0]],M(a[1],c[1])];else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.combine"];else if(c)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.combine"];else return 0}function N(a,c,d){if(c)if(d){var e=d[0],f=c[0];if(b("bs_curry")._2(a,f,e)<=0)return[f,N(a,c[1],d)];else return[e,N(a,c,d[1])]}else return c;else return d}function O(a,c){__p&&__p();while(!0){var d=c,e=a;if(e===0)return d;else if(d){c=d[1];a=e-1|0;continue}else throw[b("bs_caml_builtin_exceptions").assert_failure,["list.ml",223,11]]}}function P(c,d){__p&&__p();var a=function(d,a){__p&&__p();var f;if(d!==2)if(d!==3||!a)f=1;else{var g=a[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=a[0];if(b("bs_curry")._2(c,j,g)<=0)if(b("bs_curry")._2(c,g,i)<=0)return[j,[g,[i,0]]];else if(b("bs_curry")._2(c,j,i)<=0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]];else if(b("bs_curry")._2(c,j,i)<=0)return[g,[j,[i,0]]];else if(b("bs_curry")._2(c,g,i)<=0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}else f=1}else f=1}else if(a){i=a[1];if(i){g=i[0];j=a[0];if(b("bs_curry")._2(c,j,g)<=0)return[j,[g,0]];else return[g,[j,0]]}else f=1}else f=1;if(f===1){i=d>>1;g=d-i|0;j=O(i,a);f=e(i,a);d=e(g,j);i=f;a=d;g=0;while(!0){j=g;f=a;d=i;if(d)if(f){var k=f[0],l=d[0];if(b("bs_curry")._2(c,l,k)>0){g=[l,j];i=d[1];continue}else{g=[k,j];a=f[1];continue}}else return h(d,j);else return h(f,j)}}},e=function(e,d){__p&&__p();var f;if(e!==2)if(e!==3||!d)f=1;else{var g=d[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=d[0];if(b("bs_curry")._2(c,j,g)>0)if(b("bs_curry")._2(c,g,i)>0)return[j,[g,[i,0]]];else if(b("bs_curry")._2(c,j,i)>0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]];else if(b("bs_curry")._2(c,j,i)>0)return[g,[j,[i,0]]];else if(b("bs_curry")._2(c,g,i)>0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}else f=1}else f=1}else if(d){i=d[1];if(i){g=i[0];j=d[0];if(b("bs_curry")._2(c,j,g)>0)return[j,[g,0]];else return[g,[j,0]]}else f=1}else f=1;if(f===1){i=e>>1;g=e-i|0;j=O(i,d);f=a(i,d);e=a(g,j);i=f;d=e;g=0;while(!0){j=g;f=d;e=i;if(e)if(f){var k=f[0],l=e[0];if(b("bs_curry")._2(c,l,k)<=0){g=[l,j];i=e[1];continue}else{g=[k,j];d=f[1];continue}}else return h(e,j);else return h(f,j)}}},f=g(d);if(f<2)return d;else return a(f,d)}function Q(c,d){__p&&__p();var a=function(d,a){__p&&__p();var f;if(d!==2)if(d!==3||!a)f=1;else{var g=a[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=a[0],k=b("bs_curry")._2(c,j,g);if(k===0){var l=b("bs_curry")._2(c,g,i);if(l===0)return[g,0];else if(l<0)return[g,[i,0]];else return[i,[g,0]]}else if(k<0){l=b("bs_curry")._2(c,g,i);if(l===0)return[j,[g,0]];else if(l<0)return[j,[g,[i,0]]];else{k=b("bs_curry")._2(c,j,i);if(k===0)return[j,[g,0]];else if(k<0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]]}}else{l=b("bs_curry")._2(c,j,i);if(l===0)return[g,[j,0]];else if(l<0)return[g,[j,[i,0]]];else{k=b("bs_curry")._2(c,g,i);if(k===0)return[g,[j,0]];else if(k<0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}}}else f=1}else f=1}else if(a){l=a[1];if(l){k=l[0];i=a[0];g=b("bs_curry")._2(c,i,k);if(g===0)return[i,0];else if(g<0)return[i,[k,0]];else return[k,[i,0]]}else f=1}else f=1;if(f===1){j=d>>1;l=d-j|0;g=O(j,a);k=e(j,a);i=e(l,g);f=k;d=i;j=0;while(!0){a=j;l=d;g=f;if(g)if(l){k=l[1];i=l[0];var m=g[1],n=g[0],o=b("bs_curry")._2(c,n,i);if(o===0){j=[n,a];d=k;f=m;continue}else if(o>0){j=[n,a];f=m;continue}else{j=[i,a];d=k;continue}}else return h(g,a);else return h(l,a)}}},e=function(e,d){__p&&__p();var f;if(e!==2)if(e!==3||!d)f=1;else{var g=d[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=d[0],k=b("bs_curry")._2(c,j,g);if(k===0){var l=b("bs_curry")._2(c,g,i);if(l===0)return[g,0];else if(l>0)return[g,[i,0]];else return[i,[g,0]]}else if(k>0){l=b("bs_curry")._2(c,g,i);if(l===0)return[j,[g,0]];else if(l>0)return[j,[g,[i,0]]];else{k=b("bs_curry")._2(c,j,i);if(k===0)return[j,[g,0]];else if(k>0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]]}}else{l=b("bs_curry")._2(c,j,i);if(l===0)return[g,[j,0]];else if(l>0)return[g,[j,[i,0]]];else{k=b("bs_curry")._2(c,g,i);if(k===0)return[g,[j,0]];else if(k>0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}}}else f=1}else f=1}else if(d){l=d[1];if(l){k=l[0];i=d[0];g=b("bs_curry")._2(c,i,k);if(g===0)return[i,0];else if(g>0)return[i,[k,0]];else return[k,[i,0]]}else f=1}else f=1;if(f===1){j=e>>1;l=e-j|0;g=O(j,d);k=a(j,d);i=a(l,g);f=k;e=i;j=0;while(!0){d=j;l=e;g=f;if(g)if(l){k=l[1];i=l[0];var m=g[1],n=g[0],o=b("bs_curry")._2(c,n,i);if(o===0){j=[n,d];e=k;f=m;continue}else if(o<0){j=[n,d];f=m;continue}else{j=[i,d];e=k;continue}}else return h(g,d);else return h(l,d)}}},f=g(d);if(f<2)return d;else return a(f,d)}var R=b("bs_pervasives").$at,S=i,T=J,U=P,V=P;f.length=g;f.hd=a;f.tl=c;f.nth=d;f.rev=e;f.append=R;f.rev_append=h;f.concat=S;f.flatten=i;f.iter=n;f.iteri=o;f.map=j;f.mapi=l;f.rev_map=m;f.fold_left=p;f.fold_right=q;f.iter2=t;f.map2=r;f.rev_map2=s;f.fold_left2=u;f.fold_right2=v;f.for_all=w;f.exists=x;f.for_all2=y;f.exists2=z;f.mem=A;f.memq=B;f.find=I;f.filter=T;f.find_all=J;f.partition=K;f.assoc=C;f.assq=D;f.mem_assoc=E;f.mem_assq=F;f.remove_assoc=G;f.remove_assq=H;f.split=L;f.combine=M;f.sort=U;f.stable_sort=P;f.fast_sort=V;f.sort_uniq=Q;f.merge=N}),null);
__d("bs_bytes",["bs_char","bs_list","bs_curry","bs_caml_obj","bs_caml_int32","bs_caml_string","bs_caml_primitive","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=b("bs_caml_string").caml_create_string(a);b("bs_caml_string").caml_fill_string(d,0,a,c);return d}function c(a,c){var d=b("bs_caml_string").caml_create_string(a);for(var e=0,a=a-1|0;e<=a;++e)d[e]=b("bs_curry")._1(c,e);return d}var g=[];function h(a){var c=a.length,d=b("bs_caml_string").caml_create_string(c);b("bs_caml_string").caml_blit_bytes(a,0,d,0,c);return d}function d(a){return b("bs_caml_string").bytes_to_string(h(a))}function e(a){return h(b("bs_caml_string").bytes_of_string(a))}function i(a,c,d){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.sub / Bytes.sub"];else{var e=b("bs_caml_string").caml_create_string(d);b("bs_caml_string").caml_blit_bytes(a,c,e,0,d);return e}}function j(a,c,d){return b("bs_caml_string").bytes_to_string(i(a,c,d))}function k(a,c,d){d=(a.length+c|0)+d|0;var e=b("bs_caml_string").caml_create_string(d);c=c<0?[-c|0,0]:[0,c];var f=c[1];c=c[0];d=b("bs_caml_primitive").caml_int_min(a.length-c|0,d-f|0);d>0&&b("bs_caml_string").caml_blit_bytes(a,c,e,f,d);return e}function l(a,c,d,e){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.fill / Bytes.fill"];else return b("bs_caml_string").caml_fill_string(a,c,d,e)}function m(a,c,d,e,f){if(f<0||c<0||c>(a.length-f|0)||e<0||e>(d.length-f|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Bytes.blit"];else return b("bs_caml_string").caml_blit_bytes(a,c,d,e,f)}function n(a,c,d,e,f){if(f<0||c<0||c>(a.length-f|0)||e<0||e>(d.length-f|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.blit / Bytes.blit_string"];else return b("bs_caml_string").caml_blit_string(a,c,d,e,f)}function o(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._1(a,c[d]);return 0}function p(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._2(a,d,c[d]);return 0}function q(a,c){__p&&__p();if(c){var d=c[0],e=[0],f=[0];b("bs_list").iter(function(a){e[0]=e[0]+1|0;f[0]=f[0]+a.length|0;return 0},c);var h=b("bs_caml_string").caml_create_string(f[0]+b("bs_caml_int32").imul(a.length,e[0]-1|0)|0);b("bs_caml_string").caml_blit_bytes(d,0,h,0,d.length);var i=[d.length];b("bs_list").iter(function(c){b("bs_caml_string").caml_blit_bytes(a,0,h,i[0],a.length);i[0]=i[0]+a.length|0;b("bs_caml_string").caml_blit_bytes(c,0,h,i[0],c.length);i[0]=i[0]+c.length|0;return 0},c[1]);return h}else return g}function r(a,c){var d=a.length,e=c.length,f=b("bs_caml_string").caml_create_string(d+e|0);b("bs_caml_string").caml_blit_bytes(a,0,f,0,d);b("bs_caml_string").caml_blit_bytes(c,0,f,d,e);return f}function s(a){a=a-9|0;if(a>4||a<0)return a===23;else return a!==2}function t(a){var b=a.length,c=0;while(c<b&&s(a[c]))c=c+1|0;b=b-1|0;while(b>=c&&s(a[b]))b=b-1|0;if(b>=c)return i(a,c,(b-c|0)+1|0);else return g}function u(a){__p&&__p();var c=0;for(var d=0,e=a.length-1|0;d<=e;++d){var f=a[d];if(f>=32){var g=f-34|0;g=g>58||g<0?g>=93?4:1:g>57||g<1?2:1}else g=f>=11?f!==13?4:2:f>=8?2:4;c=c+g|0}if(c===a.length)return h(a);else{f=b("bs_caml_string").caml_create_string(c);c=0;for(var g=0,d=a.length-1|0;g<=d;++g){e=a[g];var i=0;if(e>=35)e!==92?e>=127?i=1:f[c]=e:i=2;else if(e>=32)e>=34?i=2:f[c]=e;else if(e>=14)i=1;else switch(e){case 8:f[c]=92;c=c+1|0;f[c]=98;break;case 9:f[c]=92;c=c+1|0;f[c]=116;break;case 10:f[c]=92;c=c+1|0;f[c]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:i=1;break;case 13:f[c]=92;c=c+1|0;f[c]=114;break}switch(i){case 1:f[c]=92;c=c+1|0;f[c]=48+(e/100|0)|0;c=c+1|0;f[c]=48+(e/10|0)%10|0;c=c+1|0;f[c]=48+e%10|0;break;case 2:f[c]=92;c=c+1|0;f[c]=e;break}c=c+1|0}return f}}function v(a,c){var d=c.length;if(d===0)return c;else{var e=b("bs_caml_string").caml_create_string(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._1(a,c[f]);return e}}function w(a,c){var d=c.length;if(d===0)return c;else{var e=b("bs_caml_string").caml_create_string(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._2(a,f,c[f]);return e}}function x(a){return v(b("bs_char").uppercase,a)}function y(a){return v(b("bs_char").lowercase,a)}function z(a,c){if(c.length===0)return c;else{var d=h(c);d[0]=b("bs_curry")._1(a,c[0]);return d}}function A(a){return z(b("bs_char").uppercase,a)}function B(a){return z(b("bs_char").lowercase,a)}function C(a,c,d,e){__p&&__p();while(!0){var f=d;if(f>=c)throw b("bs_caml_builtin_exceptions").not_found;else if(a[f]===e)return f;else{d=f+1|0;continue}}}function D(a,b){return C(a,a.length,0,b)}function E(a,c,d){var e=a.length;if(c<0||c>e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.index_from / Bytes.index_from"];else return C(a,e,c,d)}function F(a,c,d){__p&&__p();while(!0){var e=c;if(e<0)throw b("bs_caml_builtin_exceptions").not_found;else if(a[e]===d)return e;else{c=e-1|0;continue}}}function G(a,b){return F(a,a.length-1|0,b)}function H(a,c,d){if(c<-1||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.rindex_from / Bytes.rindex_from"];else return F(a,c,d)}function I(a,c,d){var e=a.length;if(c<0||c>e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.contains_from / Bytes.contains_from"];else try{C(a,e,c,d);return!0}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)return!1;else throw a}}function J(a,b){return I(a,0,b)}function K(a,c,d){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.rcontains_from / Bytes.rcontains_from"];else try{F(a,c,d);return!0}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)return!1;else throw a}}var L=b("bs_caml_obj").caml_compare,M=b("bs_caml_string").bytes_to_string,N=b("bs_caml_string").bytes_of_string;f.make=a;f.init=c;f.empty=g;f.copy=h;f.of_string=e;f.to_string=d;f.sub=i;f.sub_string=j;f.extend=k;f.fill=l;f.blit=m;f.blit_string=n;f.concat=q;f.cat=r;f.iter=o;f.iteri=p;f.map=v;f.mapi=w;f.trim=t;f.escaped=u;f.index=D;f.rindex=G;f.index_from=E;f.rindex_from=H;f.contains=J;f.contains_from=I;f.rcontains_from=K;f.uppercase=x;f.lowercase=y;f.capitalize=A;f.uncapitalize=B;f.compare=L;f.unsafe_to_string=M;f.unsafe_of_string=N}),null);
__d("bs_string",["bs_list","bs_bytes","bs_caml_int32","bs_caml_string","bs_caml_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").make(a,c))}function c(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").init(a,c))}function d(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").copy(b("bs_caml_string").bytes_of_string(a)))}function e(a,c,d){return b("bs_caml_string").bytes_to_string(b("bs_bytes").sub(b("bs_caml_string").bytes_of_string(a),c,d))}function g(a,c){__p&&__p();if(c){var d=c[0],e=[0],f=[0];b("bs_list").iter(function(a){e[0]=e[0]+1|0;f[0]=f[0]+a.length|0;return 0},c);var g=b("bs_caml_string").caml_create_string(f[0]+b("bs_caml_int32").imul(a.length,e[0]-1|0)|0);b("bs_caml_string").caml_blit_string(d,0,g,0,d.length);var h=[d.length];b("bs_list").iter(function(c){b("bs_caml_string").caml_blit_string(a,0,g,h[0],a.length);h[0]=h[0]+a.length|0;b("bs_caml_string").caml_blit_string(c,0,g,h[0],c.length);h[0]=h[0]+c.length|0;return 0},c[1]);return b("bs_caml_string").bytes_to_string(g)}else return""}function h(a,c){return b("bs_bytes").iter(a,b("bs_caml_string").bytes_of_string(c))}function i(a,c){return b("bs_bytes").iteri(a,b("bs_caml_string").bytes_of_string(c))}function j(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").map(a,b("bs_caml_string").bytes_of_string(c)))}function k(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").mapi(a,b("bs_caml_string").bytes_of_string(c)))}function l(a){a=a-9|0;if(a>4||a<0)return a===23;else return a!==2}function m(a){if(a===""||!(l(a.charCodeAt(0))||l(a.charCodeAt(a.length-1|0))))return a;else return b("bs_caml_string").bytes_to_string(b("bs_bytes").trim(b("bs_caml_string").bytes_of_string(a)))}function n(a){__p&&__p();var c=function(b){__p&&__p();while(!0){var c=b;if(c>=a.length)return!1;else{var d=a.charCodeAt(c);if(d>=32){d=d-34|0;if(d>58||d<0)if(d>=93)return!0;else{b=c+1|0;continue}else if(d>57||d<1)return!0;else{b=c+1|0;continue}}else return!0}}};if(c(0))return b("bs_caml_string").bytes_to_string(b("bs_bytes").escaped(b("bs_caml_string").bytes_of_string(a)));else return a}function o(a,c){return b("bs_bytes").index(b("bs_caml_string").bytes_of_string(a),c)}function p(a,c){return b("bs_bytes").rindex(b("bs_caml_string").bytes_of_string(a),c)}function q(a,c,d){return b("bs_bytes").index_from(b("bs_caml_string").bytes_of_string(a),c,d)}function r(a,c,d){return b("bs_bytes").rindex_from(b("bs_caml_string").bytes_of_string(a),c,d)}function s(a,c){return b("bs_bytes").contains(b("bs_caml_string").bytes_of_string(a),c)}function t(a,c,d){return b("bs_bytes").contains_from(b("bs_caml_string").bytes_of_string(a),c,d)}function u(a,c,d){return b("bs_bytes").rcontains_from(b("bs_caml_string").bytes_of_string(a),c,d)}function v(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").uppercase(b("bs_caml_string").bytes_of_string(a)))}function w(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").lowercase(b("bs_caml_string").bytes_of_string(a)))}function x(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").capitalize(b("bs_caml_string").bytes_of_string(a)))}function y(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").uncapitalize(b("bs_caml_string").bytes_of_string(a)))}var z=b("bs_caml_primitive").caml_string_compare,A=b("bs_bytes").fill,B=b("bs_bytes").blit_string;f.make=a;f.init=c;f.copy=d;f.sub=e;f.fill=A;f.blit=B;f.concat=g;f.iter=h;f.iteri=i;f.map=j;f.mapi=k;f.trim=m;f.escaped=n;f.index=o;f.rindex=p;f.index_from=q;f.rindex_from=r;f.contains=s;f.contains_from=t;f.rcontains_from=u;f.uppercase=v;f.lowercase=w;f.capitalize=x;f.uncapitalize=y;f.compare=z}),null);
__d("FBID.bs",["invariant","bs_js_exn","bs_string","gkx","bs_js_types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){if(b("gkx")("AT5AGDWr7VWKZPg1PvTz69G07vIW7nWrxrA4PloGCgjyPuof8r7WUUsWLIKzWOZMmcJyN6U1BeEUXZmBqPUEAKAe")){b("bs_js_types").test(a,4)||g(0);a!=="0"||g(0);var c=/^[0-9]+$/;c.test(a)||g(0)}return a}function a(a){try{return[h(a)]}catch(c){a=b("bs_js_exn").internalToOCamlException(c);if(a[0]===b("bs_js_exn").$$Error)return 0;else throw a}}c=b("bs_string").compare;f.compare=c;f.ofString=a;f.ofStringExn=h}),null);
__d("ImageSourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({PROFILE_PICTURE:"profile_picture",IMAGE:"image"});e.exports=a}),null);
__d("PhotoResizeModeConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTAIN:"s",COVER:"p"})}),null);
__d("ImageSourceRequest",["CurrentUser","ImageSourceType","KeyedCallbackManager","MercuryServerDispatcher","PhotoResizeModeConst"],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this._request={fbid:null,type:null,width:null,height:null,resize_mode:null},this._callback=null}a.prototype.setFBID=function(a){"use strict";this._request.fbid=a;return this};a.prototype.setType=function(a){"use strict";if(![b("ImageSourceType").PROFILE_PICTURE,b("ImageSourceType").IMAGE].includes(a))throw new TypeError("ImageSourceRequest.setType: invalid type "+a);this._request.type=a;return this};a.prototype.setDimensions=function(a,b){"use strict";this._request.width=a;this._request.height=b;return this};a.prototype.setResizeMode=function(a){"use strict";if(![b("PhotoResizeModeConst").COVER,b("PhotoResizeModeConst").CONTAIN].includes(a))throw new TypeError("ImageSourceRequest.setResizeMode: invalid resize mode "+a);this._request.resize_mode=a;return this};a.prototype.setCallback=function(a){"use strict";this._callback=a;return this};a.prototype.send=function(){"use strict";__p&&__p();if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error("ImageSourceRequest: You must set all the fields");var a=h(),c=i(this._request);a.executeOrEnqueue(c,this._callback);if(a.getUnavailableResourcesFromRequest(c).length===1){b("MercuryServerDispatcher").trySend("/ajax/image_source.php",{requests:[this._request]});return!0}return!1};var g=null;function h(){__p&&__p();if(g)return g;var a=new(b("KeyedCallbackManager"))();g=a;b("MercuryServerDispatcher").registerEndpoints({"/ajax/image_source.php":{request_user_id:b("CurrentUser").getID(),mode:b("MercuryServerDispatcher").BATCH_DEFERRED_MULTI,batch_function:function(a,b){var c;(c=a.requests).push.apply(c,b.requests);return a},handler:function(b,c){c=c.getData().requests;for(var d=0;d<c.length;++d)a.setResource(i(c[d]),b[d])}}});return a}function i(a){return[a.fbid,a.type,a.width,a.height,a.resize_mode].join("|")}e.exports=a}),null);
__d("bs_js_null_undefined",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){if(a==null)return a;else return b(a)}function b(a,b){if(a==null)return 0;else return b(a)}function c(a){if(a)return a[0];else return undefined}d=c;f.bind=a;f.iter=b;f.fromOption=c;f.from_opt=d}),null);
__d("bs_js_primitive",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a===null)return!0;else return a===undefined}function b(a){if(a===null||a===undefined)return 0;else return[a]}function c(a){if(a===undefined)return 0;else return[a]}function d(a){if(a===null)return 0;else return[a]}function e(a){if(a)return a[0];else return undefined}function g(a){if(a)return a[0][1];else return undefined}f.is_nil_undef=a;f.null_undefined_to_opt=b;f.undefined_to_opt=c;f.null_to_opt=d;f.option_get=e;f.option_get_unwrap=g}),null);
__d("MercuryVanityIDMap.bs",["bs_string","bs_js_primitive","MercuryAssert","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={};function a(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(g[b("bs_string").lowercase(a)]))}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(h[a]))}function d(a){a=h[a];return a!==undefined}function e(a){a=g[b("bs_string").lowercase(a)];return a!==undefined}function i(a,c){b("MercuryAssert").isParticipantID(c);a=b("bs_string").lowercase(a);g[a]=c;h[c]=a;return 0}f.vanityToID=g;f.idToVanity=h;f.getID=a;f.getVanity=c;f.hasID=d;f.hasVanity=e;f.set=i}),null);
__d("MessengerParticipantsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"907094522748772"};c.getQueryID=function(){"use strict";return"461917067580061"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("DisplayGenderConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"UNKNOWN",FEMALE:"FEMALE",MALE:"MALE",NEUTER:"NEUTER"})}),null);
__d("MessagingThreadType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ONE_TO_ONE:1,GROUP:2,ROOM:3,MONTAGE:4,MARKETPLACE:5})}),null);
__d("MercuryAttachmentContentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO:"attach:image",VIDEO:"attach:video",MUSIC:"attach:music",VOICE:"attach:voice",TEXT:"attach:text",PDF:"attach:pdf",RICHTEXT:"attach:richtext",SPREADSHEET:"attach:spreadsheet",PRESENTATION:"attach:presentation",ARCHIVE:"attach:archive",MSWORD:"attach:ms:word",MSXLS:"attach:ms:xls",MSPPT:"attach:ms:ppt",ORION:"attach:orion",SHOERACK_INVITATION:"attach:shoerackinvite",UNKNOWN:"attach:unknown"})}),null);
__d("MercuryAttachmentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image",EMOJI_LIKE:"emoji_like",GIFT:"gift",THIRDPARTYSTICKER:"third_party_sticker"})}),null);
__d("MNCommerceBubbleType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9,FB_RETAIL_SHIPMENT_ETA:10,FB_RETAIL_NOW_IN_STOCK:11,FB_RETAIL_AGENT_ITEM_SUGGESTION:12,FB_RETAIL_AGENT_ITEM_RECEIPT:13,FB_RETAIL_PROMOTIONAL_MSG:14})}),null);
__d("MNCommerceCallToActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN_NATIVE:1,OPEN_URL:2,OPEN_CANCEL_RIDE_MUTATION:3,POSTBACK:4,ACCOUNT_LINK:5,MANAGE_MESSAGES:6,SHARE:7,PAYMENT:8,FACEBOOK_REPORT_A_PROBLEM:9,SUBSCRIPTION_PRESELECT:10,NAVIGATION:11,EXTENSIBLE_SHARE:12,OPEN_REACT_NATIVE_MINI_APP:13,OPEN_PAGE_ABOUT:14,OPEN_BRANDED_CAMERA:15,OPEN_THREAD:16})}),null);
__d("P2PPaymentRequestStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INITED:1,DECLINED:2,TRANSFER_INITED:3,TRANSFER_COMPLETED:4,TRANSFER_FAILED:5,CANCELED:6,EXPIRED:7})}),null);
__d("P2PTransferStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18,CANCELED_SENDER_CANCEL:19,PENDING_SENDER_IDV_REVIEW:20,PENDING_RECEIVER_IDV_REVIEW:21})}),null);
__d("PaymentModulesClient",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DONATION_P4P:"donation_p4p",MOR_DONATIONS:"mor_donations",INSTANT_EXPERIENCES:"instant_experiences",BUSINESS_PLATFORM_COMMERCE:"business_platform_commerce",MESSENGER_OMNIM:"messenger_omnim",MESSENGER_PLATFORM:"messenger_platform",PAGES_COMMERCE:"pages_commerce",SHIPPING_LABEL:"shipping_label",SYNCHRONOUS_COMPONENT_FLOW:"synchronous_component_flow",PAGES_SOLUTION:"pages_solution",CHECKOUT_EXPERIENCES:"checkout_experiences",MOBILE_TOP_UP:"mobile_top_up",MOCK:"mock"})}),null);
__d("ServicesCalendarSyncType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLIENT_ONLY:"client_only",NO_CALENDAR_SYNC:"no_calendar_sync",SERVER_CONTINUOUS:"server_continuous",SERVER_SINGLE:"server_single"})}),null);
__d("MessengerStoryAttachmentTransformer.bs",["fbt","URI","bs_array","Utils.bs","bs_string","bs_caml_array","bs_caml_format","CurrentUser","bs_js_primitive","FundsAvailability","bs_js_null_undefined","P2PTransferStatus","MNCommerceBubbleType","PaymentModulesClient","MercuryAttachmentType","bs_caml_builtin_exceptions","P2PPaymentRequestStatus","ServicesCalendarSyncType","MNCommerceCallToActionType","LeadGenInfoFieldTypes"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){return b("bs_array").map(function(a){var c=a.user_confirmation;c=c==null?[null,null,null,null,!1]:[c.cancel_button_label,c.continue_button_label,c.confirmation_message,c.confirmation_title,!0];var d=a.payment_metadata;return{action_link:a.action_link,action_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceCallToActionType")[a.action_open_type])),action_objects:a.action_objects,title:a.title,confirmation_cancel_label:c[0],confirmation_continue_label:c[1],confirmation_message:c[2],confirmation_title:c[3],id:a.id,is_disabled:a.is_disabled,is_mutable_by_server:a.is_mutable_by_server,payment_metadata:d==null?{payment_module_config:null,total_price:null}:{payment_module_config:d.payment_module_config,total_price:d.total_price},render_style:a.render_style,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button},should_show_user_confirmation:c[4],page_id:a.page_id}},a)}function i(a){return b("bs_array").map(function(a){var c=a.url;c=c==null?null:new(b("URI"))(c).getUnqualifiedURI().toString();return{title:a.title,uri:c}},a)}function a(a){if(!(a==null)&&a!=="")return"#"+b("bs_string").sub(a,2,a.length-2|0);else return null}function c(a){if(a==null)return null;else return{url:a.uri,src:a.uri,width:a.width,height:a.height}}function j(a,b){__p&&__p();var c=b.cover_photo,d;if(c==null)d=[null,null,null];else{var e=c.photo.image;e=e==null?[null,null]:[e.uri,{height:e.height,width:e.width}];d=[c.photo.id,e[0],e[1]]}c=b.location;e=c==null?[null,null]:[c.latitude,c.longitude];c=b.overall_star_rating;return{address:b.address.single_line_full_address,category:b.top_category_name,coverPhotoID:d[0],coverPhotoURL:d[1],coverPhotoDimensions:d[2],latitude:e[0],longitude:e[1],name:b.name,rating:c==null?null:c.value,pageID:b.id,priceRange:b.price_range_description,viewerID:a}}function k(a){var b=a.group_commerce_item_seller,c=a.primary_photo,d;if(c==null)d=null;else{c=c.image;d=c==null?null:c.uri}return{caption:a.group_commerce_item_description.text,desc:a.group_commerce_item_description.text,owner_id:b==null?null:b.id,price:a.formatted_price.text,text:a.group_commerce_item_description.text,title:a.group_commerce_item_title,thumb_url:d,url:a.url}}function l(a){return{app_name:a.application_name,artists:a.artist_names,audio_url:a.audio_url,duration_ms:a.duration_ms,title:a.music_title}}function m(a){var c=a.payment;return{id:a.id,desc:a.desc,display_total_cost:a.total_cost,merchant_name:a.merchant_name,target_url:a.target_url,thumb_url:a.thumb_url,raw_amount:a.raw_amount,payment_id:c==null?null:c.id,total_cost:{amount:b("bs_caml_format").caml_float_of_string(a.price_amount),currency:a.price_currency},name:a.name}}function n(a){return{fundraiserID:a.fundraiserID,canDonate:a.canDonate,hasViewerDonated:a.hasViewerDonated,fundraiserDetailedProgressText:a.fundraiserDetailedProgressText,fundraiserSubtitleText:a.fundraiserSubtitleText,focusedCoverPhoto:a.focusedCoverPhoto}}function o(a){return{id:a.id,name:a.name,desc:a.desc,thumb_url:a.thumb_url,item_url:a.item_url,title:a.name,text:a.desc,source:a.source,image_aspect_ratio:a.image_aspect_ratio,metalines:{metaline_1:a.first_metaline,metaline_2:a.second_metaline,metaline_3:a.third_metaline},default_action:a.default_action,call_to_actions:h(a.call_to_actions)}}function p(a){__p&&__p();var c=function(a){a=a.page_call_to_action;if(a==null)return undefined;else return a.id},d=function(a){a=a.page_call_to_action;if(a==null)return!1;else{a=a.component_flow_service_config;return!(a==null)}},e=a.page;c=e==null?[undefined,undefined,undefined,!1]:[e.id,b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("ServicesCalendarSyncType")[e.calendar_sync_type])),c(e),d(e)];d=a.native_component_flow_request;if(d==null)e=null;else{var f=d.page,h=d.page,i=d.page,j;if(i==null)j=undefined;else{i=i.profile_picture;j=i==null?undefined:i.uri}i=d.suggested_time_range;var k=d.product_item,l=d.product_item,m=d.product_item,n=d.product_item,o;if(n==null)o=undefined;else{n=n.profile_picture;o=n==null?undefined:n.uri}n=d.user;var p=d.user,q=d.job_application,r=d.user,s;if(r==null)s=undefined;else{r=r.profile_picture;s=r==null?undefined:r.uri}e={additionalInfo:d.additional_info,archivedStatus:d.archived_status,availability:d.availability,hasSavedToCalendar:d.has_saved_to_calendar,requestFlowType:d.request_flow_type,generalInfo:d.service_general_info,id:d.id,pageID:f==null?undefined:f.id,pageName:h==null?undefined:h.name,pageProfilePic:j,preferredTimeRange:i==null?null:{end:i.end,start:i.start},price:k==null?null:k.experimental_freeform_price,duration:l==null?null:l.duration_in_seconds,reminderBubbleText:d.reminder_bubble_text,requestAdminApprovalType:d.request_admin_approval_type,requestedTime:d.requested_time,serviceName:m==null?null:m.name,serviceProfilePic:o,specialRequest:d.special_request,status:d.booking_status_value,statusLabel:d.status,userID:n==null?undefined:n.id,username:p==null?undefined:p.short_name,jobApplicationID:q==null?undefined:q.id,userProfilePic:s}}r=a.message_bubble_type;var t;switch(r){case"CANCELLED":t=["Cancelled",g._("Cancelled")];break;case"DECLINED":t=["Declined",g._("Declined")];break;case"REQUESTED":t=["Requested",g._("Requested")];break;case"SCHEDULEED":t=["Scheduled",g._("Scheduled")];break;default:throw[b("bs_caml_builtin_exceptions").invalid_argument,"Erroneous target status"]}return{id:a.id,pageID:c[0],calendarSyncType:c[1],ctaID:c[2],hasServiceConfig:c[3],userID:a.user.id,status:t[0],statusLabel:t[1],viewerID:b("CurrentUser").getAccountID(),requestMetadata:e}}function q(a){return{id:a.id,page_id:a.page.id,user_id:a.consumer.id,time_ranges:b("bs_array").map(function(a){return{start:a.start,end:a.end}},a.formatted_available_time_ranges),has_booking_request_created:a.has_booking_request_created}}function r(a){return{live_location_id:a.live_location_id,is_expired:a.is_expired,expiration_time:a.expiration_time,sender:a.sender,coordinate:a.coordinate,location_title:a.location_title,sender_destination:a.sender_destination,stop_reason:a.stop_reason}}function s(a){var b=a.first_metaline;return{desc:a.description,id:a.id,image_aspect_ratio:a.image_aspect_ratio,item_url:a.target_url,metalines:b==null?{}:{metaline_1:b},name:a.name,source:a.source_name,text:a.description,thumb_url:a.image_url,title:a.name,default_action:a.default_action,call_to_actions:h(a.call_to_actions),media_blob_attachments:a.media_blob_attachments}}function t(a){var c=b("bs_array").map(s,a.business_items.nodes),d=h(a.call_to_actions);return{message:a.message,call_to_actions:d,items:c}}function u(a){return{message:a.message,call_to_actions:h(a.call_to_actions),items:b("bs_array").map(s,a.promotion_items.nodes)}}function v(a){var c=a.structured_address.streets,d=a.partner_logo;return{account_holder_name:a.account_holder_name,adjustments:b("bs_array").map(function(a){return{adjustment_type:a.adjustment_type,display_adjustment_amount:a.adjustment_amount}},a.adjustments),cancellation_url:a.cancellation_url,items:b("bs_array").map(s,a.items.nodes),merchant_name:a.merchant_name,messenger_commerce_bubble_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceBubbleType")[a.messenger_commerce_bubble_type])),order_id:a.order_id,order_time:a.order_time,order_url:a.order_url,payment_method:a.payment_method,receipt_id:a.receipt_id,recipient_name:a.recipient_name,shipping_cost:a.shipping_cost,shipping_method:a.shipping_method,status:a.status,structured_address:{city:a.structured_address.city,state:a.structured_address.state,country:a.structured_address.country,postal_code:a.structured_address.postal_code,street_1:b("bs_caml_array").caml_array_get(c,0),street_2:b("bs_caml_array").caml_array_get(c,1)},subtotal:a.subtotal,total_cost:a.total_cost,total_tax:a.total_tax,partner_logo:d==null?undefined:d.uri}}function w(a,c){return{payment_modules_client:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("PaymentModulesClient")[c.payment_modules_client])),is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:b("bs_array").map(function(a){return{item_id:a.item_id,name:a.name,subtitle:a.subtitle,description:a.description,unit_price:a.unit_price,image_urls:b("bs_array").map(function(a){return a.uri},a.images),quantity:a.quantity}},c.item_list),components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,actor_id:a,invoicer_id:c.invoicer_id}}var x=function(a){__p&&__p();var c=b("LeadGenInfoFieldTypes"),d={},e=[];for(var a=a.field_data_list,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;var i=h.field_type,j=h.label;h=h.values;i===c.CUSTOM||i===c.ZIP?e.push({label:j,values:h}):d[i]={label:j,values:h}}d.questions=e;return d};function y(a,b){var c=b.invite_recipient;c=c==null?null:c.id;var d=b.invite_sender;d=d==null?null:d.id;return{quick_invite_id:b.id,recipient_id:c,sender_id:d,is_viewer_recipient:a===c}}function z(a){var b=function(a){if(a==null)return null;else return a.uri},c=a.listing_category;c=c==null?[null,null]:[c.offer_image,c.request_image];return{listingType:a.listing_type,mapURI:b(a.map_image),offerURI:b(c[0]),requestURI:b(c[1])}}function A(a){return{sender:a.sender,receiver:a.receiver,transfer_id:a.transfer_id,bubbleView:a.bubble_view}}function B(a){__p&&__p();var c=a.receiver_profile,d;if(c==null)d=null;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.sender;if(e==null)c={};else{var f=e.profile_picture;c={id:e.id,name:e.name,full_name:e.full_name,picture:f==null?null:f.uri,profile_uri:e.url}}f=a.transfer_context;if(f==null)e=[null,null,null];else{var g=f.transfer_theme;e=[f.memoText,b("bs_array").map(function(a){a=a.image;if(a==null)return null;else return a.uri},f.memo_images),g==null?null:g.id]}f=a.platform_item;g=f==null?null:{name:f.name,description:f.description,image:b("bs_array").map(function(a){a=a.image;if(a==null)return null;else return a.uri},f.photos),refURL:f.url};return{sender:c,amountWithSymbol:a.transaction_amount.formatted_amount,status:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PTransferStatus")[a.transfer_status])),receiver:d,transfer_id:a.transfer_id,completedTime:a.completedTime,updatedTime:a.updatedTime,creationTime:a.creationTime,amount:a.transaction_amount.amount,memoText:e[0],memoPhotoURLs:e[1],themeID:e[2],discountAmount:a.amount_fb_discount.formatted,fundsAvailability:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("FundsAvailability")[a.funds_availability])),groupThreadFBID:a.group_thread_fbid,platform_item:g,statusDescription:{markup:a.status_description},bubbleView:a.bubble_view,currencyCode:a.currency_amount.currency}}function C(a){__p&&__p();var c=a.requester,d;if(c==null)d=undefined;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.requestee;if(e==null)c=undefined;else{var f=e.profile_picture;c={id:e.id,name:e.short_name,full_name:e.name,picture:f==null?null:f.uri,profile_url:e.url}}f=b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PPaymentRequestStatus")[a.request_status]));e=a.transfer;e=e==null?[null,""]:[B(e),e.id];var g=a.request_theme;return{amount:a.transaction_amount.amount,amountWithSymbol:a.amount.formatted,requestee:c,requester:d,currentStatus:f,currency:a.amount.currency,creationTime:a.creation_time,groupThreadFBID:a.group_thread_fbid,id:a.id,memoText:a.memo_text,themeID:g==null?null:g.id,transfer:e[0],transferID:e[1],updatedTime:a.updated_time,bubbleView:a.bubble_view,statusDescription:{markup:a.status_description}}}function D(a){var c=C({amount:a.amount,transaction_amount:a.transaction_amount,requester:a.requester,requestee:a.requestee,request_status:a.request_status,request_theme:a.request_theme,id:a.id,memo_text:a.memo_text,transfer:a.transfer,creation_time:a.creation_time,group_thread_fbid:a.group_thread_fbid,updated_time:a.updated_time,bubble_view:a.bubble_view,status_description:a.status_description});a={individualRequests:b("bs_array").map(C,a.individual_requests)};return Object.assign(c,a)}function E(a,c){__p&&__p();var d=c.media,e=d==null?null:d.animated_image,f=d==null?null:d.image,g={};b("bs_array").iter(function(b){var a=b.value;g[b.key]=a==null?null:a.text;return 0},c.properties);var h=c.target,s;if(h==null)s=null;else switch(h.tag|0){case 0:s=z(h[0]);break;case 1:s=A(h[0]);break;case 2:s=B(h[0]);break;case 3:s=D(h[0]);break;case 4:s=w(a,h[0]);break;case 7:s=u(h[0]);break;case 8:s=t(h[0]);break;case 10:s=x(h[0]);break;case 11:s=r(h[0]);break;case 12:s=y(a,h[0]);break;case 13:s=p(h[0]);break;case 14:s=q(h[0]);break;case 15:var C=h[0],E=C.genie_sender;E=E==null?[null,null]:[E.messaging_actor.id,E.messaging_actor.name];var G=E[0];C=C.story_attachment;C=C==null?null:F(a,{legacy_attachment_id:G,story_attachment:{action_links:C.action_links,messaging_attribution:C.messaging_attribution,messenger_call_to_actions:C.messenger_call_to_actions,deduplication_key:C.deduplication_key,description:C.description,media:C.media,properties:C.properties,source:C.source,style_list:C.style_list,title_with_entities:C.title_with_entities,url:C.url,subattachments:[],target:null}});s={genie_id:G,genie_name:E[1],attachment:C};break;case 17:s=l(h[0]);break;case 19:s=o(h[0]);break;case 20:s=m(h[0]);break;case 21:s=n(h[0]);break;case 22:s=v(h[0]);break;case 24:s=k(h[0]);break;case 25:s=j(a,h[0]);break;default:s=h[0]}G=c.target;E=!(G==null)&&G.tag===7?0:null;C=c.description;a=c.source;h=c.title_with_entities;return{description:C==null?null:C.text,media:{animated_image:e==null?null:e.uri,animated_image_size:e==null?{height:null,width:null}:{height:e.height,width:e.width},image:f==null?null:f.uri,image_size:f==null?{height:null,width:null}:{height:f.height,width:f.width},duration:d==null?null:d.playable_duration,playable:d==null?null:d.is_playable,source:d==null?null:d.playable_url},source:a==null?null:a.text,style_list:c.style_list,title:h==null?null:h.text,action_links:i(c.action_links),messaging_attribution:c.messaging_attribution,messenger_ctas:b("bs_array").map(function(a){return{id:a.id,page_id:b("Utils.bs").$pipe$unknown(b("bs_js_primitive").null_undefined_to_opt(a.page_id),""),action_title:a.title,action_url:a.action_link,action_open_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceCallToActionType")[a.action_open_type])),is_high_confidence:b("Utils.bs").$pipe$unknown(b("bs_js_primitive").null_undefined_to_opt(a.is_high_confidence),!1),is_mutable_by_server:a.is_mutable_by_server,native_url:a.native_url,is_disabled:a.is_disabled,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button}}},c.messenger_call_to_actions),properties:g,uri:c.url,deduplication_key:c.deduplication_key,target:s,label:E}}function F(a,c){var d=c.story_attachment,e;if(d==null)e=null;else{c={share_id:c.legacy_attachment_id,subattachments:b("bs_array").map(function(b){return E(a,b)},d.subattachments)};d={description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,target:d.target};e=Object.assign(c,E(a,d))}return{app_attribution:null,attach_type:b("MercuryAttachmentType").SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:e,thumbnail_url:null}}f._getCallToActions=h;f._getActionLinks=i;f._getColor=a;f._getLogo=c;f._getPageTarget=j;f._getGroupCommerceProductItemTarget=k;f._getExternalSongTarget=l;f._getAgentSuggestionItemTarget=m;f._getFundraiserTarget=n;f._getRetailItemTarget=o;f._getPagesPlatformBookingMessageTarget=p;f._getServicesAppointmentAvailabilityTarget=q;f._getMessageLiveLocationTarget=r;f._getBusinessRetailItem=s;f._getMessengerBusinessMessageTarget=t;f._getMessengerRetailPromotionTarget=u;f._getMessengerRetailReceiptTarget=v;f._getPagesPlatformAttachmentTarget=w;f._getPagesPlatformLeadGenInfoTarget=x;f._getQuickInviteTarget=y;f._getCrisisListingTarget=z;f._getMoneyTransferTarget=A;f._getP2PTransferTarget=B;f._getP2PTransferRequestTarget=C;f._getP2PTransferRequestWithIndividualRequests=D;f.transformStoryAttachment=E;f.getExtensibleAttachmentPayload=F}),null);
__d("MessengerAttachmentTransformer.bs",["fbt","bs_array","bs_caml_primitive","MercuryAttachmentType","MercuryAttachmentContentType","MessengerStoryAttachmentTransformer.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){__p&&__p();if(a.is_malicious)return{app_attribution:null,icon_type:b("MercuryAttachmentContentType").UNKNOWN,metadata:null,name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:null,thumbnail_url:null,url:null,attach_type:b("MercuryAttachmentType").ERROR,error_msg:g._("This attachment has been marked as malicious."),message_file_fbid:null,url_shimhash:null,url_skipshim:null};else{var c=a.attribution_app,d;if(c==null)d=null;else{var e=c.square_logo;d={id:c.id,icon_url:e==null?null:e.uri,metadata:a.attribution_metadata,name:c.name}}e=a.url;return{app_attribution:d,icon_type:a.content_type,metadata:null,name:a.filename,preview_height:null,preview_url:null,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:e==null?null:e,attach_type:b("MercuryAttachmentType").FILE,error_msg:undefined,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}}}function i(a,c,d){__p&&__p();var e=a.chat_image;e=e==null?[null,null,null]:[e.uri,e.width,e.height];var f=e[0],g=a.chat_image;g=g==null?null:{width:g.width,height:g.height};var h=a.large_image;h=h==null?[null,null]:[h.uri,{width:h.width,height:h.height}];var i=a.inbox_image;i=i==null?[null,null]:[i.uri,{width:i.width,height:i.height}];var j=a.attribution_app,k;if(j==null)k=null;else{var l=j.square_logo;k={id:j.id,icon_url:l==null?null:l.uri,metadata:a.attribution_metadata,name:j.name}}return{app_attribution:k,attach_type:b("MercuryAttachmentType").VIDEO,name:a.filename,url:a.playable_url,rel:"async",preview_url:f,preview_width:e[1],preview_height:e[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").VIDEO,metadata:{fbid:a.legacy_attachment_id,render_as_sticker:a.video_type==="SPEAKING_STICKER",dimensions:{width:a.original_dimensions.x,height:a.original_dimensions.y},duration:a.playable_duration_in_ms,large_size:h[1],large_preview:h[0],chat_size:g,chat_preview:f,inbox_size:i[1],inbox_preview:i[0],pageid:d?c:undefined},thumbnail_url:f,share:null}}function j(a){var c=a.attribution_app,d;if(c==null)d=null;else{var e=c.square_logo;d={id:c.id,icon_url:e==null?null:e.uri,metadata:a.attribution_metadata,name:c.name}}return{app_attribution:d,attach_type:b("MercuryAttachmentType").FILE,name:a.filename,url:a.playable_url,rel:"ignore",preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").MUSIC,metadata:{duration:a.playable_duration_in_ms,isVoicemail:a.is_voicemail?"1":"0",type:a.audio_type==="VOICE_MESSAGE"?"fb_voice_message":a.audio_type==="VOICE_MESSAGE_WITH_TRANSCRIPT"?"fb_voice_message_with_transcript":"file_attachment"},thumbnail_url:null,share:null,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}}function k(a,c,d){__p&&__p();var e=a.preview_image;e=e==null?[null,null,null]:[e.uri,e.width,e.height];var f=a.animated_image;f=f==null?null:f.uri;var g=a.attribution_app,h;if(g==null)h=null;else{var i=g.square_logo;h={id:g.id,icon_url:i==null?null:i.uri,metadata:a.attribution_metadata,name:g.name}}return{app_attribution:h,attach_type:b("MercuryAttachmentType").ANIMATED_IMAGE,name:a.filename,url:f,rel:"async",preview_url:e[0],preview_width:e[1],preview_height:e[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").PHOTO,metadata:{fbid:a.legacy_attachment_id,image:f,dimensions:String(a.original_dimensions.x)+(","+String(a.original_dimensions.y)),pageid:d?c:undefined},thumbnail_url:f,share:null}}function l(a){__p&&__p();var c=a.original_extension==="gif"?b("MercuryAttachmentType").ANIMATED_IMAGE:a.render_as_sticker?b("MercuryAttachmentType").THIRDPARTYSTICKER:b("MercuryAttachmentType").PHOTO,d=a.preview;d=d==null?[null,null,null]:[d.uri,d.width,d.height];if(c===b("MercuryAttachmentType").PHOTO){var e=a.large_preview;e=e==null?[null,null,null]:[e.uri,e.width,e.height]}else e=[null,null,null];var f=a.attribution_app,g;if(f==null)g=null;else{var h=f.square_logo;g={id:f.id,icon_url:h==null?null:h.uri,metadata:a.attribution_metadata,name:f.name}}h=a.thumbnail;return{app_attribution:g,attach_type:c,name:a.filename,url:null,rel:"async",preview_url:d[0],preview_width:d[1],preview_height:d[2],large_preview_url:e[0],large_preview_width:e[1],large_preview_height:e[2],icon_type:b("MercuryAttachmentContentType").PHOTO,metadata:{fbid:a.legacy_attachment_id,dimensions:String(a.original_dimensions.x)+(","+String(a.original_dimensions.y))},thumbnail_url:h==null?null:h.uri,share:null,photo_encodings:a.photo_encodings}}function m(a,c){__p&&__p();var d=a,e=c;if(a>=c){a=b("bs_caml_primitive").caml_float_min(120,d/2);c=a/(d/2);return[a|0,e/2*c|0]}else{a=b("bs_caml_primitive").caml_float_min(120,e/2);c=a/(e/2);return[d/2*c|0,a|0]}}function n(a){var c=m(a.width,a.height),d=a.pack,e=a.sprite_image,f=a.sprite_image_2x,g=a.padded_sprite_image,h=a.padded_sprite_image_2x;return{app_attribution:null,attach_type:b("MercuryAttachmentType").STICKER,name:null,url:a.url,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").UNKNOWN,metadata:{accessibilityLabel:a.label,stickerID:a.id,packID:d==null?null:d.id,frameCount:a.frame_count,frameRate:a.frame_rate,framesPerRow:a.frame_count>1?a.frames_per_row:1,framesPerCol:a.frame_count>1?a.frames_per_column:1,height:c[1],width:c[0],spriteURI:e==null?null:e.uri,spriteURI2x:f==null?null:f.uri,paddedSpriteURI:g==null?null:g.uri,paddedSpriteURI2x:h==null?null:h.uri,thumbnail_url:null,share:null}}}function a(a,c,d){__p&&__p();var e=[],f=c.extensible_attachment;f==null||e.push(b("MessengerStoryAttachmentTransformer.bs").getExtensibleAttachmentPayload(a,f));f=c.sticker;f==null||e.push(n(f));f=c.blob_attachments;f==null||b("bs_array").iter(function(b){__p&&__p();switch(b.tag|0){case 0:e.push(l(b[0]));return 0;case 1:e.push(k(b[0],a,d));return 0;case 2:e.push(j(b[0]));return 0;case 3:e.push(i(b[0],a,d));return 0;case 4:e.push(h(b[0]));return 0}},f);return e}f._getFilePayload=h;f._getVideoPayload=i;f._getAudioPayload=j;f._getAnimatedImagePayload=k;f._getImagePayload=l;f._getStickerDimensions=m;f._getStickerPayload=n;f.transformAttachment=a}),null);
__d("MessengerGroupsSyncStatus.bs",["MessengerGroupsSyncStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"OPT_IN":return b("MessengerGroupsSyncStatus").OPT_IN;case"OPT_OUT":return b("MessengerGroupsSyncStatus").OPT_OUT;case"PENDING_OPT_IN":return b("MessengerGroupsSyncStatus").PENDING_OPT_IN;case"PENDING_OPT_OUT":return b("MessengerGroupsSyncStatus").PENDING_OPT_OUT;case"UNSET":return b("MessengerGroupsSyncStatus").UNSET;case"UNSUPPORTED":return b("MessengerGroupsSyncStatus").UNSUPPORTED;default:return null}}f.fromNullableString=a}),null);
__d("InstantGameUpdateXMATUpdateType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"unknown",GAME_SCORE:"game_score",CUSTOM_MESSAGE:"custom_message"})}),null);
__d("MNCommerceMessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_CHECKIN:"airline_checkin",AIRLINE_BOARDINGPASS:"airline_boardingpass",AIRLINE_UPDATE:"airline_update",AIRLINE_ITINERARY:"airline_itinerary",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",OPEN_GRAPH:"open_graph",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",ICE_BREAKER:"ice_breaker",FALLBACK:"fallback",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",INSTANT_GAMES_LIVE_STREAM:"instant_games_live_stream",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list",FEEDBACK:"feedback",MEDIA:"media",PLACE_CARD:"place_card"})}),null);
__d("MessagingGenericAdminTextType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ALOHA_AUTOCONNECT_INVITED:"aloha_autoconnect_invited",ALOHA_CONTACT_ADDED:"aloha_contact_added",ALOHA_CONTACT_ADDED_TO_ALOHA_PROXY_USER:"aloha_contact_added_to_aloha_proxy_user",ALOHA_CONTACT_REMOVED:"aloha_contact_removed",ALOHA_INVITE_OWNER_ACCEPT:"aloha_invite_owner_accept",ALOHA_INVITE_OWNER_DECLINE:"aloha_invite_owner_decline",ALOHA_MEDIA_ADDED:"aloha_media_added",ALOHA_MEDIA_SENT:"aloha_media_sent",ALOHA_VISUAL_MEDIA_SENT:"aloha_visual_media_sent",ALOHA_OWNER_INVITED:"aloha_owner_invited",ALOHA_PROXY_USER_NAME_SET:"aloha_proxy_user_name_set",ALOHA_PROXY_USER_PROFILE_PHOTO_SET:"aloha_proxy_user_profile_photo_set",ALOHA_WIFI_CREDENTIALS_SET:"aloha_wifi_credentials_set",ALOHA_USER_JOINED_CALL_ON_ALOHA:"aloha_user_joined_call_on_aloha",ALOHA_CALL_ENDED_ON_ALOHA:"aloha_call_ended_on_aloha",ALOHA_CALL_INVITE:"aloha_call_invite",MADE_POLL_VOTE:"made_poll_vote",GROUP_POLL:"group_poll",GENERIC_NEW_CONNECTION:"generic_new_connection",CONFIRM_FRIEND_REQUEST:"confirm_friend_request",THREAD_CUSTOMIZATION_UPSELL:"thread_customization_upsell",PHONE_CONTACT_UPLOAD:"phone_contact_upload",RELATIONSHIP_CREATED:"relationship_created",ACCEPT_PENDING_THREAD:"accept_pending_thread",RAMP_UP_WELCOME_MESSAGE:"ramp_up_welcome_message",CHANGE_THREAD_THEME:"change_thread_theme",CHANGE_THREAD_ICON:"change_thread_icon",GROUP_THREAD_CREATED:"group_thread_created",THREAD_EPHEMERAL_SEND_MODE:"thread_ephemeral_send_mode",INVITE_ACCEPTED:"invite_accepted",MESSENGER_INVITE_SENT:"messenger_invite_sent",TURN_ON_PUSH:"turn_on_push",JOURNEY_PROMPT_COLOR:"journey_prompt_color",JOURNEY_PROMPT_LIKE:"journey_prompt_like",JOURNEY_PROMPT_NICKNAME:"journey_prompt_nickname",JOURNEY_PROMPT_SETUP:"journey_prompt_setup",CHANGE_THREAD_NICKNAME:"change_thread_nickname",NOTIFY_GROUP_MAYORSHIP:"notify_group_mayorship",PROMPT_GROUP_MAYORSHIP_CUSTOMIZATION:"prompt_group_mayorship_customization",MESSAGE_COUNT_MILESTONE_MESSAGE:"message_count_milestone_message",BOT_THREAD_SUBSCRIPTION:"bot_thread_subscription",RTC_CALL_LOG:"rtc_call_log",RTC_INSTANT_VIDEO_LIFECYCLE:"rtc_instant_video_lifecycle",JOURNEY_PROMPT_BOT:"journey_prompt_bot",RIDE_ORDERED_MESSAGE:"ride_ordered_message",DESTINATION_ETA_MESSAGE:"destination_eta_message",RIDE_ARRIVED_MESSAGE:"ride_arrived_message",JOURNEY_PROMPT_NEW_SETUP:"journey_prompt_new_setup",LIGHTWEIGHT_EVENT_CREATE:"lightweight_event_create",LIGHTWEIGHT_EVENT_DELETE:"lightweight_event_delete",LIGHTWEIGHT_EVENT_NOTIFY:"lightweight_event_notify",LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:"lightweight_event_notify_before_event",LIGHTWEIGHT_EVENT_RSVP:"lightweight_event_rsvp",LIGHTWEIGHT_EVENT_UPDATE:"lightweight_event_update",LIGHTWEIGHT_EVENT_UPDATE_LOCATION:"lightweight_event_update_location",LIGHTWEIGHT_EVENT_UPDATE_TIME:"lightweight_event_update_time",LIGHTWEIGHT_EVENT_UPDATE_TITLE:"lightweight_event_update_title",SAFETY_LOCATION_REQUEST_SENT:"safety_location_request_sent",SAFETY_LOCATION_REQUEST_RESPONDED:"safety_location_request_responded",SAFETY_LOCATION_REQUEST_DENIED:"safety_location_request_denied",AD_MANAGE_MESSAGE:"ad_manage_message",AD_REPLY_MESSAGE:"ad_reply_message",TAGGED_PHOTO:"tagged_photo",GAME_SCORE:"game_score",INSTANT_GAME_UPDATE:"instant_game_update",INSTANT_GAME_BOT_INTRO:"instant_game_bot_intro",INSTANT_GAME_WORLD_CUP_INTRO:"intant_games_world_cup_intro",INSTANT_GAME_CUSTOM_UPDATE_NUX_ADMIN_MESSAGE:"instant_game_custom_update_nux_admin_message",MEDIA_SUBSCRIPTION_MANAGE:"media_subscription_manage",M_AI_SURVEY:"m_ai_survey",PHONE_NUMBER_LOOKUP_NOTICE:"phone_number_lookup_notice",MESSENGER_PRECHECKED_PLUGIN:"messenger_prechecked_plugin",ADD_CONTACT:"add_contact",PRODUCT_INVOICE_RECEIPT_REJECTED:"product_invoice_receipt_rejected",PRODUCT_INVOICE_PAID:"product_invoice_paid",PRODUCT_INVOICE_VOIDED:"product_invoice_voided",PRODUCT_INVOICE_SHIPPED:"product_invoice_shipped",PRODUCT_INVOICE_PAYMENT_EXPIRED:"product_invoice_payment_expired",PRODUCT_INVOICE_RECEIPT_UPLOADED:"product_invoice_receipt_uploaded",CHANGE_JOINABLE_SETTING:"change_joinable_setting",CHANGE_THREAD_ADMINS:"change_thread_admins",CHANGE_THREAD_APPROVAL_MODE:"change_thread_approval_mode",CAPY_SESSION_BEGIN:"capy_session_begin",CAPY_SESSION_BOT_BEGIN:"capy_session_bot_begin",CAPY_SESSION_END:"capy_session_end",CAPY_AGENT_JOIN:"capy_agent_join",CAPY_AGENT_DUMPED:"capy_agent_dumped",CAPY_SESSION_WAIT_TIME:"capy_session_wait_time",GROUP_SMS_PARTICIPANT_JOINED:"group_sms_participant_joined",GROUP_SMS_PARTICIPANT_CAPPED:"group_sms_participant_capped",SMS_PHONE_NUMBER_CHECK:"sms_phone_number_check",MESSENGER_BOT_REVIEW_SENT:"messenger_bot_review_sent",MESSENGER_CODE_SCAN:"messenger_code_scan",MESSENGER_LIVECHAT_PLUGIN_OPEN:"messenger_livechat_plugin_open",MINGLE_MATCH_SUCCESS:"mingle_match_success",MINGLE_PARTICIPANT_MATCHED:"mingle_participant_matched",MN_ACCOUNT_LINKING_TEXT:"mn_account_linking_text",MN_ACCOUNT_UNLINKING_TEXT:"mn_account_unlinking_text",MN_ACCOUNT_FORCED_UNLINKING_TEXT:"mn_account_forced_unlinking_text",MN_REF_SEND_TEXT:"mn_ref_send_text",ADS_WELCOME_MSG:"ads_welcome_msg",THREAD_JOINABLE_PROMOTION_TEXT:"thread_joinable_promotion_text",PAGES_PLATFORM_REQUEST_TEXT:"pages_platform_request_text",MESSENGER_NEW_USER_GET_STARTED:"messenger_new_user_get_started",SMS_PHONE_NUMBER_TOGGLE:"sms_phone_number_toggle",PAGES_PLATFORM_CREATE_APPOINTMENT:"Pages_Platform_create_appointment",INTERNAL_CAREER_JOBSY_REACHOUT_CONNECTED:"internal_career_jobsy_reachout_connected",JOINABLE_GROUP_THREAD_CREATED:"joinable_group_thread_created",JOINABLE_ROOM_CREATED_WITH_CO_CREATORS:"joinable_room_created_with_co_creators",PAGES_PLATFORM_ACCEPT_APPOINTMENT:"pages_platform_accept_appointment",PAGES_PLATFORM_REFERRAL_CONFIRMED_APPOINTMENT:"pages_platform_referral_confirmed_appointment",PAGES_PLATFORM_DECLINE_APPOINTMENT:"pages_platform_decline_appointment",PAGES_PLATFORM_USER_CANCEL:"pages_platform_user_cancel",PAGES_PLATFORM_ADMIN_CANCEL:"pages_platform_admin_cancel",MESSENGER_OMNIM_CREATE_FLOW:"messenger_omnim_create_flow",MESSENGER_OMNIM_UPDATE_FLOW:"messenger_omnim_update_flow",MESSENGER_OMNIM_UPDATE_FLOW_STATE:"messenger_omnim_update_flow_state",MESSENGER_GROUP_DESCRITPION_UPDATE:"messenger_group_description_update",MESSENGER_GROUP_DESCRIPTION_UPDATE_V2:"messenger_group_description_update_v2",MESSENGER_EXTENSION_ADD_CART:"messenger_extension_add_cart",MESSENGER_EXTENSION_ADD_FAVORITE:"messenger_extension_add_favorite",MESSENGER_AD_CONTEXT:"messenger_ad_context",PAGES_PLATFORM_APPOINTMENT_REMINDER:"pages_platform_appointment_reminder",PAGES_PLATFORM_ADMIN_DECLINE:"pages_platform_admin_decline",POKE_RECEIVED:"poke_received",MESSENGER_STATION_SUBSCRIPTION:"messenger_station_subscription",MESSENGER_USER_ALSO_ON_MESSENGER:"messenger_user_also_on_messenger",MESSENGER_INBOX2_BIRTHDAY_BUMP:"messenger_inbox2_birthday_bump",MESSENGER_RESPOND_REMINDER_CONFIRMATION:"messenger_respond_reminder_confirmation",MESSENGER_RESPOND_REMINDER:"messenger_respond_reminder",MESSENGER_RESPOND_REMINDER_USER_CANCEL:"messenger_respond_reminder_user_cancel",MESSENGER_RESPOND_REMINDER_CANCEL_SUGGESTION:"messenger_respond_reminder_cancel_suggestion",STARTED_SHARING_VIDEO:"started_sharing_video",LIVE_VIDEO_CHAT:"live_video_chat",PARTICIPANT_JOINED_GROUP_CALL:"participant_joined_group_call",MESSENGER_ONLY_PHONE_JOINED_WITH_NEW_ACCOUNT:"messenger_only_phone_joined_with_new_account",PAGES_COMMERCE_PAYMENT_ENABLED:"pages_commerce_payment_enabled",GROUP_PAYMENT_REQUEST:"group_payment_request",P2P_CALL_ESCALATED_TO_GROUP_CALL:"p2p_call_escalated_to_group_call",INVITED_TO_ESCALATED_P2P_CALL:"invited_to_escalated_p2p_call",EVENT_UPCOMING:"event_upcoming",PAGES_VISITOR_POST_SEND_MESSAGE_UPSELL:"pages_visitor_post_send_message_upsell",PAGES_LOW_MESSAGE_RESPONSE_RATE:"pages_low_message_response_rate",PAGES_START_CALL:"pages_start_call",PARTIES_INVITE:"parties_invite",PAGES_JOIN_LOYALTY_PROGRAM:"pages_join_loyalty_program",WORK_INVITE_CLAIMED:"work_invite_claimed",P2P_PAYMENT_REQUEST_REMINDER:"p2p_payment_request_reminder",PHOTO_TAG_BUMP:"photo_tag_bump",MESSENGER_CALL_UPGRADE_LEGACY_CLIENT:"messenger_call_upgrade_legacy_client",DIRECTED_WALL_POST:"directed_wall_post",MESSENGER_CALL_LOG:"messenger_call_log",P2P_PAYMENT_MONEY_RAIN_GAME_ENTRY_POINT:"p2p_payment_money_rain_game_entry_point",MESSENGER_MONTAGE_MENTIONS:"messenger_montage_mentions",PAGES_MESSAGING_BLOCK_WORDS:"pages_messaging_block_words",SHIPPO_TRACKING_UPDATES:"shippo_tracking_updates",NEO_APPROVED_CONNECTION_ADDED:"neo_approved_connection_added",CHANGE_FAVORITE_COLOR:"change_favorite_color",MARKETPLACE_ITEM_CHANGED:"marketplace_item_changed",MARKETPLACE_SERVICES_INITIAL_MESSAGE_CONTEXT:"marketplace_services_initial_message_context",LINK_CTA:"link_cta",SERVICES_VERTICAL_REDEEMED_REFERRAL:"services_vertical_redeemed_referral",SERVICES_VERTICAL_OPT_OUT_REQUESTS:"services_vertical_opt_out_requests",SERVICES_VERTICAL_OPT_OUT_REQUESTS_SUCCESS:"services_vertical_opt_out_requests_success",SERVICES_VERTICAL_LEAD_GEN_SURVEY:"services_vertical_lead_gen_survey",SERVICES_VERTICAL_LEAD_GEN_SURVEY_EDIT:"services_vertical_lead_gen_survey_edit",PAGES_MARK_AS_PAID:"pages_mark_as_paid",MIGRATED_TO_WORKPLACE:"migrated_to_workplace",MESSENGER_GROUP_EVENT_STATUS_UPDATE:"messenger_group_event_status_update",NEO_APPROVED_USER_REMOVED_FROM_GROUP:"neo_approved_user_removed_from_group",LIVE_CHAT_SUPPORT_AGENT_JOIN:"live_chat_support_agent_join",LIVE_CHAT_SUPPORT_SESSION_BEGIN:"live_chat_support_session_begin",LIVE_CHAT_SUPPORT_SESSION_END:"live_chat_support_session_end",MONTAGE_DIRECT_KEEP:"montage_direct_keep",MONTAGE_DIRECT_EXPIRE:"montage_direct_expire",CHSBOT_CONVERSATION_ENDED:"chsbot_conversation_ended",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_BEGIN:"chsbot_live_chat_support_agent_begin",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_END:"chsbot_live_chat_support_agent_end",CHSBOT_LIVE_PHONE_SUPPORT_AGENT_CALLING:"chsbot_live_phone_support_agent_calling",CHSBOT_SUPPORT_REQUESTED:"chsbot_support_requested",MESSENGER_SUBSCRIBE_TO_UPDATES:"messenger_subscribe_to_updates",MESSENGER_UNSUBSCRIBE_FROM_UPDATES:"messenger_unsubscribe_from_updates",MESSENGER_BLOCK_MESSAGES:"messenger_block_messages",MESSENGER_UNBLOCK_MESSAGES:"messenger_unblock_messages",MESSENGER_TURN_ON_MESSAGES:"messenger_turn_on_messages",MESSENGER_TURN_OFF_MESSAGES:"messenger_turn_off_messages",THANKS_FOR_SHARING_MESSAGE_CONTEXT:"thanks_for_sharing_message_context",GROUP_ADMIN_MODEL_NUX:"group_admin_model_nux",MESSENGER_PAYMENT_INCENTIVE_INFO:"messenger_payment_incentive_info",MESSENGER_PLATFORM_PERSONA:"messenger_platform_persona",MESSENGER_GROUP_SYNC_OPT_IN:"messenger_group_sync_opt_in",MESSENGER_GROUP_SYNC_OPT_OUT:"messenger_group_sync_opt_out",MENTORSHIP_MATCH:"mentorship_match",PAGES_CALL_DEFLECTION_UPSELL:"pages_call_deflection_upsell",RTC_PHOTOBOOTH:"rtc_photobooth",DELAYED_PHONE_NUMBER_MATCH:"delayed_phone_number_match",AUTOMATIC_TRANSLATION_ENABLED:"automatic_translation_enabled",AUTOMATIC_TRANSLATION_DISABLED:"automatic_translation_disabled",MESSENGER_ROOM_MIGRATION:"messenger_room_migration",PAGE_ADMIN_RESPONSIVENESS_REMINDER:"page_admin_responsiveness_reminder",MESSENGER_GROWTH_GENERIC_ADMIN_TEXT:"messenger_growth_generic_admin_text",MESSENGER_TALK_TO_YOUR_MOM_REMINDER:"messenger_talk_to_your_mom_reminder",PAYMENT_INCENTIVE_RECEIVED:"payment_incentive_received",PAGES_THREAD_REMINDER:"pages_thread_reminder",MESSENGER_PLATFORM_PERSONA_LEAVE_THREAD:"messenger_platform_persona_leave_thread",STORY_REPLY_CONTEXT:"story_reply_context",PAGES_AUTOMATED_RESPONSE_RECOMMENDATION:"pages_automated_response_recommendation",MESSENGER_ICEBREAKER_VOTE_CAST:"messenger_icebreaker_vote_cast",PARTIES_PRESENCE:"parties_presence"})}),null);
__d("MessagingSourceEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT_ORCA:"source:chat:orca",CHAT_LIGHT_SPEED:"source:chat:light_speed",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT:"source:chat",CONTACT_ADD_MUTATION:"source:contact_add:graphql_mutation",CONTACT_ADD_CYMK:"source:contact_add:cymk_suggestion",CUSTOMER_CHAT_PLUGIN:"source:discovery:customer_chat_plugin",EMAIL:"source:email",EVENT_MESSAGE_BLAST:"source:event_message_blast",EVENT_TICKETING:"source:event_ticket",EVENT_REMINDERS:"source:event_reminders",FUNDRAISER_MESSAGE_BLAST:"source:fundraiser_message_blast",GENERIC_ADMIN_TEXT:"source:generic_admin_text",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",INVITE:"source:invite",LEIA:"source:leia",MESSENGER_WEB:"source:messenger:web",MESSENGER_WEB_SEARCH:"source:messenger:web_search",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",PAGE_UNIFIED_INBOX:"source:page_unified_inbox",UNKNOWN:"source:unknown",WEB:"source:web",HELPCENTER:"source:helpcenter",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot",MESSENGER_EMPLOYEE_ONLY_BOT:"source:bot:employee_only",MESSENGER_OMNIM:"source:messenger:omnim",PAGES_PRIVATE_REPLY:"source:pages:private_reply",MESSENGER_FORWARD_DIALOG:"source:messenger:forward",MESSENGER_AD:"source:messenger:ad",MARKETPLACE:"source:marketplace",MARKETPLACE_BOT:"source:marketplace:bot",MESSENGER_LEAD_GEN:"source:messenger:lead_gen",PAGES_MESSAGE_SHORTLINK:"source:pages:message_shortlink",STICKER_SUBSCRIBE:"source:messenger:sticker_subscribe",PHOTO_TAG:"source:messenger:photo_tag",INTERNAL_TEST_PENDING:"source:internal:test_pending",JOB_SEARCH_APPLICATION:"source:job_search:application",MESSENGER_JOINABLE_LINK:"source:messenger:joinable_link",MESSENGER_ADD_WITH_APPROVAL:"source:messenger:add_with_approval",MESSENGER_SMS_BRIDGE_CONVERT:"source:messenger:sms_bridge_conversion",TINCAN_ORCA:"source:tincan:orca",TINCAN_IOS:"source:tincan:ios",TINCAN_UNKNOWN:"source:tincan:unknown",FACEBOOK_GROUPS_CHANNELS:"source:groups:channels",GROUP_COMMERCE:"source:group_commerce",INTERNAL_TOOL:"source:internal:tool",PAGES_PLATFORM:"source:pages:platform",PAGES_RECOMMENDATION:"source:pages:recommendation",PAGES_ORDER_MANAGEMENT:"source:pages:order_management",PAGE_AUTO_RESPONSE:"source:pages:auto_response",PAGES_INVITE:"source:pages:invite",PAGES_CHAT_EXTENSION:"source:pages:chat_extension",PAGES_COMPOSER:"source:pages:composer",SAVED_CHAT_EXTENSION:"source:saved:chat_extension",CREATOR_PAGE_INITIATE_TO_CREATOR_PAGE:"source:pages:creator_page_initiate_to_creator_page",LIVE_VIDEO_CHAT:"source:live_video_chat",GEMSTONE:"source:gemstone",WATCH_PARTY:"source:watch_party",FRIENDING_ADMIN_BUMP:"source:messenger_growth:friending_admin_bump",NEW_MESSENGER_USER_ADMIN_BUMP:"source:messenger_growth:new_messenger_user_admin_bump",EVENT_UPCOMING_BUMP:"source:messenger_growth:event_upcoming_bump",PHOTO_TAG_BUMP:"source:messenger_growth:photo_tag_bump",WALL_POST_BUMP:"source:messenger_growth:wall_post_bump",FRIENDVERSARY_BUMP:"source:messenger_growth:friendversary_bump",CUSTOMIZATION_UPSELL_BUMP:"source:messenger_growth:customization_upsell_bump",MESSENGER_BROADCASTFLOW:"source:messenger:broadcastflow",PAGE_COMMENT_MSG:"source:pages:question_triggered_convo",COMMENT_PIVOT:"source:messenger_growth:comment_pivot",PAGE_HOVERCARD:"source:pages:hovercard",INSTANT_GAMES:"source:instant_games",PAGE_EMAIL_REPLY:"source:pages:email_reply",PAGE_HOME_PAGE_PANEL:"source:page_home_page_panel",GROUPSYNC_MESSENGER_GROUP_CREATE:"source:groupsync:messenger_group_create",GROUPSYNC_SYNC_FROM_FB:"source:groupsync:sync_from_fb",GROUPSYNC_NAMING:"source:groupsync:naming",GROUPSYNC_THREAD_INFO_SYNC_FROM_FB:"source:groupsync:thread_info_sync",WORK_GROUP_SYNCED_CHAT_CREATION:"source:work:groupchat:creation",WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC:"source:work:groupchat:member_sync",WORK_GROUP_SYNCED_CHAT_NAME_SYNC:"source:work:groupchat:name_sync",PAGE_PQI_MESSAGE:"source:pages:pqi_message",PAGE_PLUGIN_MESSAGE:"source:pages:page_plugin_message",WORKPLACE_CHAT_DESKTOP:"source:workchat:desktop",CREATOR_STUDIO:"source:creator_studio"})}),null);
__d("MercuryMessageSourceTags",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT:"source:chat",EMAIL:"source:email",MESSENGER:"source:messenger",MOBILE:"source:mobile",WORK_DESKTOP:"source:workchat:desktop"})}),null);
__d("MessagingTagUtils",["MercuryMessageSourceTags","MessagingSourceEnum","MessagingTagConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Set(Object.values(b("MessagingSourceEnum")));function a(a){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(g.has(e))return e}return b("MessagingSourceEnum").UNKNOWN}function h(a){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.split(b("MessagingTagConstants").app_id_root);if(e.length>1)return e[1].trim()}return null}function c(a,c){var d=[],e=h(a);e&&b("MessagingTagConstants").orca_app_ids.indexOf(e)!==-1&&d.push(b("MercuryMessageSourceTags").MESSENGER);b("MessagingTagConstants").chat_sources.indexOf(c)!==-1&&d.push(b("MercuryMessageSourceTags").CHAT);b("MessagingTagConstants").email_source===c&&d.push(b("MercuryMessageSourceTags").EMAIL);b("MessagingTagConstants").mobile_sources.indexOf(c)!==-1&&d.push(b("MercuryMessageSourceTags").MOBILE);a.indexOf(b("MessagingSourceEnum").WORKPLACE_CHAT_DESKTOP)!==-1&&d.push(b("MercuryMessageSourceTags").WORK_DESKTOP);return d}e.exports={getSourceFromTags:a,getSourceTags:c}}),null);
__d("P2PPaymentLogMessageSubtype",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired",REQUEST_REMINDER:"request_reminder",MONEY_RAIN_GAME_ENTRY_POINT:"money_rain_game_entry_point"})}),null);
__d("StoryAttachmentStyle",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",INSPIRATION_PHOTO:"inspiration_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",CANCELED_EVENT:"canceled_event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",TOPIC_FOLLOWING_TOPIC:"topic_following_topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",VIDEO_SHOP:"video_shop",INSPIRATION_VIDEO:"inspiration_video",MULTI_VIDEOS_STITCHED:"multi_videos_stitched",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_NON_LINK_VIDEO:"multi_share_non_link_video",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",MULTI_SHARE_FIXED_TEXT:"multi_share_fixed_text",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",BIRTHDAY_PERCEPTICONS:"birthday_percepticons",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_LEAGUE:"gametime_league",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",POST_CHANNEL:"post_channel",TEXT_FOR_COLLAGE:"text_for_collage",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",P2P_PAYMENT:"p2p_payment",P2P_SERVER_BUBBLE:"p2p_server_bubble",INSTANT_ARTICLE:"instant_article",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",GROUP_ADD_MEMBERS:"group_add_memebers",GROUP_MEMBER_ADDED:"group_member_added",RTC_CALL_LOG:"rtc_call_log",EVENTS_PENDING_POST_QUEUE:"events_pending_post_queue",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",RICH_MEDIA_COLLECTION:"rich_media_collection",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",GROUPSMASH_MEDIA:"groupsmash_media",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET_DEPRECATED:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",WELCOME_CARD_IMAGE:"welcome_card_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card",GOODWILL_THROWBACK_ANNIVERSARY_COLLAGE_CARD:"goodwill_throwback_anniversary_collage_card",MESSAGE_EVENT:"message_event",MESSAGE_THREAD:"message_thread",QUOTE:"quote",VOTER_REGISTRATION_SHARE:"voter_registration_share",ELECTION_BALLOT_CONFIG:"election_ballot_config",AIRLINE_ITINERARY:"airline_itinerary",AIRLINE_UPDATE:"airline_update",PLACE_LIST:"place_list",IMPLICIT_PLACE_LIST_CONVERSION:"implicit_place_list_conversion",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",MINUTIAE_UNIT:"minutiae_unit",INSTANT_ARTICLE_PHOTO:"instant_article_photo",INSTANT_ARTICLE_VIDEO:"instant_article_video",PHOTO_LINK_SHARE:"photo_link_share",PHOTO_LINK_SHARE_WITH_INSTAGRAM_CONTEXT:"photo_link_share_with_instagram_context",BUSINESS_LOCATION:"business_location",GOODWILL_WEATHER:"goodwill_weather",CULTURAL_MOMENT_HOLIDAY_CARD:"cultural_moment_holiday_card",TRANSACTION_INVOICE:"transaction_invoice",GROUP:"group",COMMENT_PLACE_INFO:"comment_place_info",COMMENT_PRODUCT_INFO:"comment_product_info",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD_IPB:"goodwill_throwback_friendversary_polaroids_card_ipb",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD_IPB:"goodwill_throwback_friendversary_collage_card_ipb",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",FUNDRAISER_FOR_STORY:"fundraiser_for_story",MESSAGE_LIVE_LOCATION:"message_live_location",MESSENGER_INVITE:"messenger_invite",MESSENGER_NATIVE_TEMPLATES:"messenger_native_templates",GAMES_INSTANT_PLAY:"games_instant_play",PROFILE_MEDIA:"profile_media",NATIVE_TEMPLATES:"native_templates",NATIVE_TEMPLATES_FOX:"native_templates_fox",NATIVE_TEMPLATES_KEEP_ATTACHED:"native_templates_keep_attached",GOODWILL_THROWBACK_VIDEO_BASIC:"goodwill_throwback_video_basic",COMMERCE_PRODUCT_MINI:"commerce_product_mini",COMMERCE_PRODUCT_MINI_LIST:"commerce_product_mini_list",COMMENT:"comment",MESSENGER_TEAM_BOT_SHARE:"messenger_team_bot_share",LIVE_VIDEO_SCHEDULE:"live_video_schedule",PRODUCT_ITEM:"product_item",PLATFORM_INSTANT_APP:"platform_instant_app",YEAR_OVERVIEW:"year_overview",NATIVE_COMPONENT_FLOW_BOOKING_REQUEST:"native_component_flow_booking_request",FRIEND_REQUEST:"friend_request",MESSENGER_GROUP_JOINABLE_LINK:"messenger_group_joinable_link",SOCIAL_SEARCH_CONVERSION_PROMPT:"social_search_conversion_prompt",MDOTME_USER_LINK:"mdotme_user_link",DYNAMIC_MULTI_SHARE_ITEMS:"dynamic_multi_share_items",EVENT_REMINDER:"event_reminder",INSTANT_GAMES_SHARE_MESSAGE:"instant_games_share_message",MESSENGER_PLATFORM_COMPACT_ITEM:"messenger_platform_compact_item",MESSENGER_PLATFORM_COVER_ITEM:"messenger_platform_cover_item",MULTI_SHARE_NON_LINK_VIDEO_AUTO_SCROLL:"multi_share_non_link_video_auto_scroll",ENDORSEMENT:"endorsement",OFFER_VIEW_LIVE_COUNTDOWN:"offer_view_live_countdown",ENHANCED_LINK_REDDIT_POST:"enhanced_link_reddit_post",MESSENGER_COMMERCE_COVER_ITEM:"messenger_commerce_cover_item",ENHANCED_LINK_YELP_BUSINESS:"enhanced_link_yelp_business",PAGES_PLATFORM_LEAD_GEN:"pages_platform_lead_gen",NATIVE_STORY:"native_story",MFS_BILL_PAY_CREATION_UPDATE:"mfs_bill_pay_creation_update",MFS_BILL_PAY_REFERENCE_CODE_UPDATE:"mfs_bill_pay_reference_code_update",MFS_BILL_PAY_AGENT_CASH_IN_UPDATE:"mfs_bill_pay_agent_cash_in_update",ISSUE_POSITION:"issue_position",PAGES_PLATFORM_BOOKING_MESSAGE:"pages_platform_booking_message",EXTERNAL_GALLERY:"external_gallery",MEME_SHARE:"meme_share",MESSENGER_PLATFORM_ELEMENT:"messenger_platform_element",INSTANT_GAMES_SHARE_SCORE_MESSAGE:"instant_games_share_score_message",MESSENGER_PLATFORM_BUTTON_LIST:"messenger_platform_button_list",BALLOT:"ballot",LIGHTWEIGHT_ACTION:"lightweight_action",TAROT_DIGEST:"tarot_digest",EVENT_TOUR:"event_tour",ADAPTIVE_MEDIA:"adaptive_media",DYNAMIC_GAME_BOARD:"dynamic_game_board",PAYMENT_PLATFORM:"payment_platform",OMNI_M_FLOW:"omni_m_flow",GROUP_QUIZ:"group_quiz",TRIAL_AD:"trial_ad",TEEM_COLLECTIONS:"teem_collections",CRISIS_DONATION:"crisis_donation",CRISIS_STATUS:"crisis_status",CRISIS_SHARE:"crisis_share",CRISIS_MARK_SAFE:"crisis_mark_safe",CRISIS_LISTING:"crisis_listing",VR_CONTENT:"vr_content",VIDEO_RECOMMENDATION_HSCROLL:"video_recommendation_hscroll",VIDEO_TRAILER:"video_trailer",SHOW_PAGE_SHARE:"show_page_share",MFS_ATTACHMENT:"mfs_attachment",GROUP_TASK:"group_task",CHECKLIST:"checklist",VIDEO_RECOMMENDATION_SINGLETON:"video_recommendation_singleton",PAGE_REVIEW_PROMPT:"page_review_prompt",VIDEO_SHOW:"video_show",UNCONNECTED_VIDEO:"unconnected_video",SHOW_SHARE:"show_share",JOB_SEARCH_JOB_APPLICATION:"job_search_job_application",PAGE_MESSENGER_ATTACHMENT:"page_messenger_attachment",CONTACT_YOUR_REP:"contact_your_rep",LIVE_ELECTION_RESULTS:"live_election_results",LOCATION_EXTENSION:"location_extension",PLACE_RECOMMENDATION:"place_recommendation",JOB_SEARCH_JOB_OPENING:"job_search_job_opening",PAGE_MESSAGE_ONLINE_INDICATOR:"page_message_online_indicator",LOCAL_PIVOT:"local_pivot",ORION_REQUEST_NEW:"orion_request_new",PHOTO_WITH_SHIELD:"photo_with_shield",PLAYABLE_AD:"playable_ad",FUN_FACT_PROMPT:"fun_fact_prompt",FUN_FACT_STACK:"fun_fact_stack",FATIGUED_SHARE:"fatigued_share",DISCUSSION_QUESTION:"discussion_question",PARTIES_INVITE:"parties_invite",PROFILE_INTRO_CARD_BIO:"profile_intro_card_bio",PAGES_SHARE:"pages_share",PRODUCT_RECOMMENDATION_LIST:"product_recommendation_list",VISUAL_POLL:"visual_poll",MULTI_PLACE_RECOMMENDATION:"multi_place_recommendation",PAGE_IN_COMMENT:"page_in_comment",PAGE_ANNOUNCEMENT:"page_announcement",MESSENGER_PLATFORM_MEDIA_ATTACHMENT:"messenger_platform_media_attachment",SCHEDULED_VIDEO_ANNOUNCEMENT:"scheduled_video_announcement",HSCROLL_ITEM:"hscroll_item",MESSENGER_CALL_LOG:"messenger_call_log",PAGE_REVIEW_UPDATE:"page_review_update",LOYALTY_CARD_OFFER:"loyalty_card_offer",GOODWILL_GRID:"goodwill_grid",TRAVEL_PLAN:"travel_plan",FIND_PLAYERS:"find_players",ASSET3D:"asset3d",MESSENGER_GROUP_PERSONAL_LINK:"messenger_group_personal_link",FREQUENTLY_ASKED_QUESTION:"frequently_asked_question",STORY_LIST:"story_list",GOODWILL_SHARED_CARD:"goodwill_shared_card",PAYMENT_BUBBLE_VIEW:"PAYMENT_BUBBLE_VIEW",POST_TO_EVENT_CREATE:"post_to_event_create",MONTAGE_DIRECT:"montage_direct",NEO_INVITATION:"NEO_INVITATION",NATIVE_TEMPLATES_LINK_SHARE_TEST:"native_templates_link_share_test",GOODWILL_HSCROLL:"goodwill_hscroll",NEO_KID_INITIATE_FRIENDING:"NEO_KID_INITIATE_FRIENDING",EVENT_MICRO_ATTACHMENT:"event_micro_attachment",SAVED_LIST:"saved_list",LOCAL_GUIDE:"local_guide",MEET_UP_EVENT:"meet_up_event",DONATION:"donation",FUNDRAISER_FB_SEEDING_GIFT:"fundraiser_fb_seeding_gift",BREAKING_NEWS:"breaking_news",VIDEO_REQUEST:"video_request",GOODWILL_COLLAGE:"goodwill_collage",LEAD_FORM:"lead_form",LEAD_FORM_USER_INFO:"lead_form_user_info",EVENT_TICKET_ORDER:"event_ticket_order",PROFILE_CHANNEL:"profile_channel",ICE_BREAKER:"ICE_BREAKER",MOVIE:"movie",ALOHA_CALL:"aloha_call",TIP_JAR_PAYMENT:"tip_jar_payment",COMMENT_MESSAGE_INFO:"comment_message_info",CASH_ON_DELIVERY_ORDER:"cash_on_delivery_order",VOTER_REGISTRATION_DRIVE:"voter_registration_drive",LIVING_ROOM:"living_room",ACHIEVEMENT_POST:"achievement_post",M_BIRTHDAY_REMINDER:"m_birthday_reminder",INSIGHTS_CHART:"insights_chart",GROUP_PROACTIVE_FLAGGED_POST_QUEUE:"group_proactive_flagged_post_queue",GROUP_ACCEPT_RULE_TO_UNMUTE:"group_accept_rule_to_unmute",PYI_ATTACHMENTS:"pyi_attachments",SHOW_CLICK_TO_WATCH_TAB:"show_click_to_watch_tab",SHOW_CLICK_TO_WATCH_TAB_V2:"show_click_to_watch_tab_v2",SHOW_CLICK_TO_WATCH_TAB_V3:"show_click_to_watch_tab_v3",SHOW_CLICK_TO_WATCH_TAB_V4:"show_click_to_watch_tab_v4",SHOW_MASKED:"show_masked",SHOW_CONTINUE_WATCHING:"show_continue_watching",WATCH_CLICK_STORY_HEADER_TO_WATCH_TAB:"watch_click_story_header_to_watch_tab",FOX_ALBUM:"fox_album",TOOL_SHARE:"tool_share",PHONE_REMOVED_ACTION_LIST:"phone_removed_action_list",AMP:"amp",LDP_APP_INSTANCE:"ldp_app_instance",PAGE_RECOMMENDATION_V2:"page_recommendation_v2",PLAY_WITH_FRIENDS:"play_with_friends",BLOOD_REQUEST:"blood_request",HIGH_SCHOOL_COMMUNITY_INVITE:"high_school_community_invite",CIVIC_ACTION_POST:"civic_action_post",SCHEDULED_LIVE_VIDEO:"scheduled_live_video",GAMESHOW:"gameshow",MK_FRIEND_REQUEST:"mk_friend_request",GOODWILL_PHOTO_CIRCLE:"goodwill_photo_circle",SERVICES_APPOINTMENT_AVAILABILITY:"services_appointment_availability",NEO_SOCIAL_INVITATION:"neo_social_invitation",NEO_KID_INVITATION:"neo_kid_invitation",GROUP_SELL_PRODUCT_ITEM_CONDENSED:"group_sell_product_item_condensed",GROUP_SELL_PRODUCT_ITEM_MARK_AS_PENDING:"group_sell_product_item_mark_as_pending",GAMES_VIDEO:"games_video",MOVIE_WITH_SHOWTIMES:"movie_with_showtimes",VERTICAL_MULTI_ATTACHMENT:"vertical_multi_attachment",GROUP_SAFETY_HUB:"group_safety_hub",NEWS_STORYLINE:"news_storyline",EVENT_TICKET_REQUEST:"event_ticket_request",GROUP_APPLICATION:"group_application",MESSAGE_MULTIPLE_LOCATIONS:"message_multiple_locations",TODO_LIST:"todo_list"})}),null);
__d("MessengerMessageTransformer.bs",["bs_array","bs_block","bs_string","FBIDCheck","getByPath","MercuryIDs","bs_caml_format","CurrentUser","bs_js_primitive","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","MessagingSourceEnum","StoryAttachmentStyle","MNCommerceMessageType","MercuryLogMessageType","P2PPaymentLogMessageSubtype","MessagingGenericAdminTextType","MessengerAttachmentTransformer.bs","InstantGameUpdateXMATUpdateType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){__p&&__p();if(a.__typename==="GroupPollExtensibleMessageAdminText"){var e=a.question,f;if(e==null)f=[{},null];else{var g=Object.assign({},e);Object.assign(g,{total_count:a.total_count,options:b("bs_array").map(function(a){var c=Object.assign({},a);return Object.assign(c,{total_count:a.voters.nodes.length,voters:b("bs_array").map(function(a){return a.id},a.voters.nodes)})},e.options.nodes)});f=[g,e.id]}g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{event_type:b("bs_string").lowercase(a.event_type),question_id:f[1],question_json:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(JSON.stringify(f[0])))}}}else if(a.__typename==="InstantGameUpdateExtensibleMessageAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{game_id:b("getByPath")(a,["game","id"]),update_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("InstantGameUpdateXMATUpdateType")[a.update_type])),collapsed_text:a.collapsed_text,expanded_text:a.expanded_text,leaderboard_json:a.leaderboard_json,cta_url:b("getByPath")(a,["instant_game_update_data","cta_url"]),cta_title:b("getByPath")(a,["instant_game_update_data","cta_title"]),custom_image_url:b("getByPath")(a,["instant_game_update_data","photo","image","uri"]),template:b("getByPath")(a,["instant_game_update_data","template"])}};else if(a.__typename==="MessengerAdContextAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{ad_url:a.ad_url}};else if(a.__typename==="AdExtensibleMessageAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{ad_client_token:a.ad_client_token,ad_id:a.ad_id,ad_preferences_link:a.ad_preferences_link,ad_properties:a.ad_properties}};else if(a.__typename==="ThemeColorExtensibleMessageAdminText"||a.__typename==="ThreadIconExtensibleMessageAdminText"||a.__typename==="ThreadNicknameExtensibleMessageAdminText"||a.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||a.__typename==="AddContactExtensibleMessageAdminText"||a.__typename==="RtcCallLogExtensibleMessageAdminText"||a.__typename==="GameScoreExtensibleMessageAdminText"||a.__typename==="MessengerCallLogExtensibleMessageAdminText"||a.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||a.__typename==="MessengerGrowthGenericExtensibleMessageAdminText"||a.__typename==="PartiesInviteExtensibleMessageAdminText"||a.__typename==="AppointmentReminderExtensibleMessageAdminText"||a.__typename==="LinkCTAExtensibleMessageAdminText"||a.__typename==="GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText"||a.__typename==="ServicesLeadGenSurveyExtensibleMessageAdminText"||a.__typename==="ServicesLeadGenSurveyEditExtensibleMessageAdminText"||a.__typename==="MessengerIcebreakerVoteCastExtensibleMessageAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:Object.assign({},a)};else if(a.__typename==="LightweightEventCreateExtensibleMessageAdminText"||a.__typename==="LightweightEventDeleteExtensibleMessageAdminText"||a.__typename==="LightweightEventNotifyBeforeEventExtensibleMessageAdminText"||a.__typename==="LightweightEventNotifyExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateLocationExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateTimeExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateTitleExtensibleMessageAdminText"||a.__typename==="LightweightEventRSVPExtensibleMessageAdminText"){e=undefined;f=a.event_reminder;var h;if(f==null)h=e;else{var i=f.lightweight_event_creator;i=i==null?e:i.id;var j=f.location_page;j=j==null?e:j.id;var k=f.timezone_id;k=k==null?e:k.timezone;var l=f.location_coordinates;l=l==null?{latitude:e,longitude:e}:l;var m=f.event_reminder_members;e=m==null?e:m.edges;h={event_creator_id:i,event_id:f.id,event_location_id:j,event_location_name:f.location_name,event_seconds_to_notify_before:f.seconds_to_notify_before,event_time:f.time,event_end_time:f.end_time,event_timezone:k,event_title:f.event_title,event_type:f.lightweight_event_type,event_track_rsvp:f.allows_rsvp,latitude:l.latitude,longitude:l.longitude,guest_state_list:e,guest_id:a.guest_id,guest_status:a.guest_status}}g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:h}}else g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:undefined};return{log_message_body:d,log_message_data:g,log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}}function h(a){return b("bs_array").map(function(a){if(a==="p2p_transfer")return b("StoryAttachmentStyle").ORION;else if(a==="p2p_payment_request")return b("StoryAttachmentStyle").ORION_REQUEST;else return a},a)}function i(a){__p&&__p();var c=a.target,d;if(c==null)d=null;else if(c.__typename==="CrisisListing")d=b("bs_block").__(0,[{listing_type:c.listing_type,listing_category:c.listing_category,map_image:c.map_image}]);else if(c.__typename==="MoneyTransfer")d=b("bs_block").__(1,[{sender:c.sender,receiver:c.receiver,transfer_id:c.transfer_id,bubble_view:c.bubble_view}]);else if(c.__typename==="PeerToPeerTransfer")d=b("bs_block").__(2,[{sender:c.sender,receiver_profile:c.receiver_profile,transaction_amount:c.transaction_amount,transfer_status:c.transfer_status,transfer_id:c.transfer_id,completedTime:c.completedTime,updatedTime:c.updatedTime,creationTime:c.creationTime,transfer_context:c.transfer_context,amount_fb_discount:c.amount_fb_discount,funds_availability:c.funds_availability,group_thread_fbid:c.group_thread_fbid,platform_item:c.platform_item,id:c.id,status_description:c.status_description,bubble_view:c.bubble_view,currency_amount:c.currency_amount}]);else if(c.__typename==="PeerToPeerPaymentRequest")d=b("bs_block").__(3,[{amount:c.amount,transaction_amount:c.transaction_amount,requester:c.requester,requestee:c.requestee,request_status:c.request_status,request_theme:c.request_theme,id:c.id,memo_text:c.memo_text,transfer:c.transfer,creation_time:c.creation_time,group_thread_fbid:c.group_thread_fbid,updated_time:c.updated_time,status_description:c.status_description,bubble_view:c.bubble_view,individual_requests:c.individual_requests}]);else if(c.__typename==="PaymentPlatformAttachment")d=b("bs_block").__(4,[{payment_modules_client:c.payment_modules_client,is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:c.item_list,components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,invoicer_id:c.invoicer_id}]);else if(c.__typename==="MomentsAppMessengerInvitation")d=b("bs_block").__(5,[{snippet:c.snippet}]);else if(c.__typename==="MomentsAppMessengerPhotoRequest")d=b("bs_block").__(6,[{snippet:c.snippet}]);else if(c.__typename==="MessengerRetailPromotion")d=b("bs_block").__(7,[{message:c.message,call_to_actions:c.call_to_actions,promotion_items:c.promotion_items}]);else if(c.__typename==="MessengerBusinessMessage")d=b("bs_block").__(8,[{message:c.message,call_to_actions:c.call_to_actions,business_items:c.business_items}]);else if(c.__typename==="Video")d=b("bs_block").__(9,[{video_id:c.video_id}]);else if(c.__typename==="PagesPlatformLeadGenInfo")d=b("bs_block").__(10,[{field_data_list:c.field_data_list}]);else if(c.__typename==="MessageLiveLocation")d=b("bs_block").__(11,[{live_location_id:c.live_location_id,is_expired:c.is_expired,expiration_time:c.expiration_time,sender:c.sender,coordinate:c.coordinate,location_title:c.location_title,sender_destination:c.sender_destination,stop_reason:c.stop_reason}]);else if(c.__typename==="QuickInvite")d=b("bs_block").__(12,[{id:c.id,invite_sender:c.invite_sender,invite_recipient:c.invite_recipient}]);else if(c.__typename==="PagesPlatformBookingMessage")d=b("bs_block").__(13,[{id:c.id,page:c.page,message_bubble_type:c.message_bubble_type,user:c.user,native_component_flow_request:c.native_component_flow_request}]);else if(c.__typename==="ServicesAppointmentAvailability")d=b("bs_block").__(14,[{id:c.id,page:c.page,consumer:c.consumer,formatted_available_time_ranges:c.formatted_available_time_ranges,has_booking_request_created:c.has_booking_request_created}]);else if(c.__typename==="GenieMessage")d=b("bs_block").__(15,[{genie_sender:c.genie_sender,story_attachment:c.story_attachment}]);else if(c.__typename==="Event")d=b("bs_block").__(16,[{eventID:c.eventID,guestStatus:c.guestStatus,canViewerJoin:c.canViewerJoin,timeString:c.timeString,event_place:c.event_place,social_context:c.social_context,watchStatus:c.watchStatus,connection_style:c.connection_style,canViewerWatch:c.canViewerWatch}]);else if(c.__typename==="ExternalSong")d=b("bs_block").__(17,[{application_name:c.application_name,artist_names:c.artist_names,audio_url:c.audio_url,duration_ms:c.duration_ms,music_title:c.music_title}]);else if(c.__typename==="LightweightAction")d=b("bs_block").__(18,[{lwa_state:c.lwa_state,lwa_type:c.lwa_type}]);else if(c.__typename==="MessengerRetailItem")d=b("bs_block").__(19,[{id:c.id,name:c.name,desc:c.desc,thumb_url:c.thumb_url,item_url:c.item_url,source:c.source,image_aspect_ratio:c.image_aspect_ratio,first_metaline:c.first_metaline,second_metaline:c.second_metaline,third_metaline:c.third_metaline,default_action:c.default_action,call_to_actions:c.call_to_actions}]);else if(c.__typename==="AgentItemSuggestion")d=b("bs_block").__(20,[{id:c.id,desc:c.desc,total_cost:c.total_cost,merchant_name:c.merchant_name,target_url:c.target_url,thumb_url:c.thumb_url,raw_amount:c.raw_amount,payment:c.payment,price_amount:c.price_amount,price_currency:c.price_currency,name:c.name}]);else if(c.__typename==="FundraiserPersonToCharity"||c.__typename==="FundraiserPersonForPerson"){var e=c.fundraiser_detailed_progress_text,f=c.fundraiser_subtitle_text,g=c.focused_cover_photo;d=b("bs_block").__(21,[{fundraiserID:c.id,canDonate:c.can_donate,hasViewerDonated:c.has_viewer_donated,fundraiserDetailedProgressText:e==null?null:e.text,fundraiserSubtitleText:f==null?null:f.text,focusedCoverPhoto:g==null?null:{src:g.photo.image.uri,data:{height:g.photo.image.height,width:g.photo.image.width}}}])}else d=c.__typename==="MessengerRetailReceipt"?b("bs_block").__(22,[{account_holder_name:c.account_holder_name,adjustments:c.retail_adjustments,cancellation_url:c.cancellation_url,items:c.retail_items,merchant_name:c.merchant_name,messenger_commerce_bubble_type:c.bubble_type,order_id:c.receipt_id,order_time:c.order_time_for_display,order_url:c.receipt_url,payment_method:c.order_payment_method,receipt_id:c.id,recipient_name:c.recipient_name,shipping_cost:c.shipping_cost,shipping_method:c.shipping_method,status:c.status,structured_address:c.structured_address,subtotal:c.subtotal,total_cost:c.total,total_tax:c.tax,partner_logo:c.partner_log}]):c.__typename==="JobApplication"?b("bs_block").__(23,[{id:c.id}]):c.__typename==="GroupCommerceProductItem"?b("bs_block").__(24,[{group_commerce_item_description:c.group_commerce_item_description,group_commerce_item_seller:c.group_commerce_item_seller,formatted_price:c.formatted_price,group_commerce_item_title:c.group_commerce_item_title,primary_photo:c.primary_photo,url:c.url}]):c.__typename==="Page"?b("bs_block").__(25,[{address:c.address,top_category_name:c.top_category_name,cover_photo:c.cover_photo,location:c.location,name:c.name,overall_star_rating:c.overall_star_rating,id:c.id,price_range_description:c.price_range_description}]):c.__typename==="MessengerEventReminder"?b("bs_block").__(26,[{is_active:c.is_active}]):c.__typename==="AirlineBoardingPassCollectionMessageAttachment"?b("bs_block").__(27,[{tint_color:c.tint_color,logo:c.logo,flight_label:c.flight_label,boarding_time_label:c.boarding_time_label,departure_label:c.departure_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,flight_terminal_label:c.flight_terminal_label,flight_gate_label:c.flight_gate_label,view_boarding_pass_cta_label:c.view_boarding_pass_cta_label,boarding_passes:c.boarding_passes,share_cta_label:c.share_cta_label,message_cta_label:c.message_cta_label,boarding_pass_title_label:c.boarding_pass_title_label,boarding_pass_error_title_label:c.boarding_pass_error_title_label}]):c.__typename==="AirlineCheckInReminderMessageAttachment"?b("bs_block").__(28,[{pnr_number:c.pnr_number,tint_color:c.tint_color,checkin_url:c.checkin_url,booking_number_label:c.booking_number_label,flight_label:c.flight_label,arrival_time_label:c.arrival_time_label,departure_time_label:c.departure_time_label,checkin_cta_label:c.checkin_cta_label,logo:c.logo,flight_infos:c.flight_infos}]):c.__typename==="AirlineUpdateMessageAttachment"?b("bs_block").__(29,[{pnr_number:c.pnr_number,tint_color:c.tint_color,update_type:c.update_type,departure_time_label:c.departure_time_label,arrival_time_label:c.arrival_time_label,booking_number_label:c.booking_number_label,flight_gate_label:c.flight_gate_label,flight_label:c.flight_label,flight_status_label:c.flight_status_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,logo:c.logo,flight_info:c.flight_info,hightlighted_labels:c.hightlighted_labels}]):c.__typename==="AirlineItineraryMessageAttachment"?b("bs_block").__(30,[{confirmation_number:c.confirmation_number,pnr_number:c.pnr_number,tint_color:c.tint_color,formatted_total:c.formatted_total,itemized_price_infos:c.itemized_price_infos,formatted_tax:c.formatted_tax,formatted_base_price:c.formatted_base_price,passenger_infos:c.passenger_infos,logo:c.logo,aircraft_type_label:c.aircraft_type_label,arrival_time_label:c.arrival_time_label,base_price_label:c.base_price_label,booking_number_label:c.booking_number_label,cabin_type_label:c.cabin_type_label,departure_time_label:c.departure_time_label,flight_confirmation_label:c.flight_confirmation_label,flight_date_label:c.flight_date_label,flight_label:c.flight_label,flight_terminal_label:c.flight_terminal_label,itinerary_error_title_label:c.itinerary_error_title_label,itinerary_title_label:c.itinerary_title_label,passenger_name_label:c.passenger_name_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,purchase_summary_label:c.purchase_summary_label,taxes_label:c.taxes_label,total_label:c.total_label,view_details_cta_label:c.view_details_cta_label,itinerary_legs:c.itinerary_legs}]):c.__typename==="MessengerRetailShipmentTrackingEvent"?b("bs_block").__(31,[{id:c.id,shipment:c.shipment,tracking_event_time_for_display:c.tracking_event_time_for_display,shipment_tracking_event_type:c.shipment_tracking_event_type,messenger_commerce_location:c.messenger_commerce_location,tracking_event_description:c.tracking_event_description,bubble_type:c.bubble_type}]):c.__typename==="MessengerRetailShipment"?b("bs_block").__(32,[{id:c.id,tracking_number:c.tracking_number,shipdate_for_display:c.shipdate_for_display,estimated_delivery_time_for_display:c.estimated_delivery_time_for_display,commerce_origin:c.commerce_origin,commerce_destination:c.commerce_destination,retail_carrier:c.retail_carrier,shipment_tracking_events:c.shipment_tracking_events,receipt:c.receipt,recipient:c.recipient,retail_shipment_items:c.retail_shipment_items,bubble_type:c.bubble_type}]):c.__typename==="TicketOrderAttachment"?b("bs_block").__(34,[{ticket_order_id:c.ticket_order_id,ticket_order:c.ticket_order,event:c.event}]):c.__typename==="EventTicketRequest"?b("bs_block").__(35,[{id:c.id,event:c.event}]):c.__typename==="LeadGenDeepLinkData"?b("bs_block").__(33,[{id:c.id,cover_image:c.cover_image,headline:c.headline,name:c.name,page:c.page}]):c.__typename==="UserLeadGenInfo"?b("bs_block").__(36,[{id:c.id,field_data:c.field_data}]):c.__typename==="IceBreakerMessageAttachment"?b("bs_block").__(37,[{ice_breaker_title:c.ice_breaker_title,ice_breaker_messages:c.ice_breaker_messages,ad_id:c.ad_id}]):c.__typename==="MontageDirect"?b("bs_block").__(38,[{message_state:c.message_state,is_keep_disabled:c.is_keep_disabled,blob_media_type:c.blob_media_type,blob_media:c.blob_media,image:c.image}]):c.__typename==="MBirthdayReminderAttachment"?b("bs_block").__(39,[{friend_id:c.friend_id,confidence:c.confidence,birthday_date:c.birthday_date}]):c.__typename==="Story"?b("bs_block").__(40,[{description:c.description,actors:c.actors,to:c.to,attachments:c.attachments,attached_story:c.attached_story}]):null;return{description:a.description,media:a.media,source:a.source,style_list:h(a.style_list),title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,target:d}}function j(a){var c=i({description:a.description,media:a.media,source:a.source,style_list:a.style_list,title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,target:a.target});if(c==null)return null;else{a=b("bs_array").map(i,a.subattachments);return Object.assign({subattachments:a},c)}}function k(a){__p&&__p();a=a.blob_attachments;var c=[];a==null||b("bs_array").iter(function(a){__p&&__p();if(a.__typename==="MessageImage"){c.push(b("bs_block").__(0,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,preview:a.preview,large_preview:a.large_preview,thumbnail:a.thumbnail,legacy_attachment_id:a.legacy_attachment_id,original_dimensions:a.original_dimensions,original_extension:a.original_extension,render_as_sticker:a.render_as_sticker,photo_encodings:a.photo_encodings}]));return 0}else if(a.__typename==="MessageAnimatedImage"){c.push(b("bs_block").__(1,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,animated_image:a.animated_image,legacy_attachment_id:a.legacy_attachment_id,preview_image:a.preview_image,original_dimensions:a.original_dimensions}]));return 0}else if(a.__typename==="MessageAudio"){c.push(b("bs_block").__(2,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,is_voicemail:a.is_voicemail,audio_type:a.audio_type,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else if(a.__typename==="MessageVideo"){c.push(b("bs_block").__(3,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,legacy_attachment_id:a.legacy_attachment_id,chat_image:a.chat_image,video_type:a.video_type,original_dimensions:a.original_dimensions,large_image:a.large_image,inbox_image:a.inbox_image}]));return 0}else if(a.__typename==="MessageFile"){c.push(b("bs_block").__(4,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,url:a.url,content_type:a.content_type,is_malicious:a.is_malicious,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else return 0},a);return c}function l(a){__p&&__p();a=a.message;if(a==null)return[];else{var c=[];b("bs_array").iter(function(a){__p&&__p();var b=a.entity;if(b==null)return 0;else{var d=b.id;b=b.thread_key;if(d==null)if(b==null)return 0;else{b=b.thread_fbid;if(b==null)return 0;else{c.push({id:b,offset:a.offset,length:a.length,type:a.__typename});return 0}}else{c.push({id:d,offset:a.offset,length:a.length,type:a.__typename});return 0}}},a.ranges);return c}}function m(a,c,d,e){__p&&__p();var f={};b("bs_array").iter(function(a){f[a.user.id]=a.reaction;return 0},c.message_reactions);var h=b("FBIDCheck").isUser_deprecated(c.message_sender.id),i=h?b("MessagingTagUtils").getSourceFromTags(c.tags_list):b("MessagingSourceEnum").UNKNOWN;h=h?b("MessagingTagUtils").getSourceTags(c.tags_list,i):[];var n=c.commerce_message_type,o=c.customizations,p=c.replied_to_message,q;if(p==null)q=null;else{p=p.message;q=p==null?null:b("bs_js_null_undefined").fromOption([m(a,p,d,e)])}p={thread_id:d.thread_id,thread_fbid:d.thread_fbid,other_user_fbid:d.other_user_fbid,action_type:c.__typename==="UserMessage"?b("MercuryActionType").USER_GENERATED_MESSAGE:b("MercuryActionType").LOG_MESSAGE,message_id:c.message_id,threading_id:null,offline_threading_id:c.offline_threading_id,author:b("MercuryIDs").getParticipantIDFromUserID(c.message_sender.id),author_email:c.message_sender.email,ephemeral_ttl_mode:c.ttl,timestamp:b("bs_caml_format").caml_float_of_string(c.timestamp_precise),is_unread:c.unread,is_filtered_content:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT)!==-1,is_filtered_content_bh:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_BH)!==-1,is_filtered_content_account:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_ACCOUNT)!==-1,is_filtered_content_quasar:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_QUASAR)!==-1,is_filtered_content_invalid_app:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_INVALID_APP)!==-1,is_sponsored:c.is_sponsored,ad_id:c.ad_id,ad_client_token:c.ad_client_token,commerce_message_type:n==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceMessageType")[n])),customizations:o==null?[]:o,source:i,source_tags:h,tags:c.tags_list,is_spoof_warning:c.tags_list.indexOf(b("MessagingTag").DOMAIN_AUTH_FAIL)!==-1||c.tags_list.indexOf(b("MessagingTag").SPAM_SPOOFING)!==-1||c.tags_list.indexOf(b("MessagingTag").SPOOF_WARNING)!==-1,folder:d.folder,platform_xmd:c.platform_xmd_encoded,message_source:c.message_source_data,montage_reply_data:c.montage_reply_data,replied_to_message:q,skip_bump_thread:!1,profile_ranges:l(c),reactions:f,has_attachment:null,attachments:null,raw_attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,body:null,subject:null,creator_info:null};if(c.__typename==="UserMessage"){n=k(c);o=c.extensible_attachment;if(o==null)i=null;else{h=o.story_attachment;i={legacy_attachment_id:o.legacy_attachment_id,story_attachment:h==null?null:j(h)}}q=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:i,blob_attachments:n,sticker:c.sticker},e);o=c.message;h=c.page_admin_sender;Object.assign(p,{body:o==null?null:o.text,creator_info:h==null?null:{creatorID:h.admin_id,creatorName:h.name,creatorType:h.sender_type,labelType:h.label_type,pageID:h.page_id,profileURI:h.profile_uri},subject:null,has_attachment:q.length>0,attachments:q,raw_attachments:null,ranges:undefined,meta_ranges:c.meta_ranges.map(function(a){return babelHelpers["extends"]({},a,{data:JSON.parse(a.data)})})})}else if(c.__typename==="VoiceCallMessage"||c.__typename==="VideoCallMessage"){a=c.__typename;i=a==="VoiceCallMessage"?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL;n=c.message_sender.id;e=d.other_user_fbid;o=e==null?null:b("MercuryIDs").getParticipantIDFromUserID(n===e?b("CurrentUser").getID():e);h=c.answered;Object.assign(p,{log_message_type:i,log_message_data:{answered:h==null?!1:h,caller:b("MercuryIDs").getParticipantIDFromUserID(n),callee:o},log_message_body:c.snippet})}else if(c.__typename==="ThreadNameMessage")Object.assign(p,{log_message_type:b("MercuryLogMessageType").THREAD_NAME,log_message_data:{name:c.thread_name},log_message_body:c.snippet});else if(c.__typename==="ThreadImageMessage"){q=c.image_with_metadata;if(q==null)a=null;else{d=q.preview;a={preview_url:d==null?null:d.uri,metadata:{fbid:q.legacy_attachment_id,dimensions:String(q.original_dimensions.x)+(","+String(q.original_dimensions.y))}}}Object.assign(p,{log_message_type:b("MercuryLogMessageType").THREAD_IMAGE,log_message_data:{image:a},log_message_body:c.snippet})}else if(c.__typename==="ParticipantsAddedMessage"){e=c.participants_added;Object.assign(p,{log_message_type:b("MercuryLogMessageType").SUBSCRIBE,log_message_data:{added_participants:e==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)},e)},log_message_body:c.snippet})}else if(c.__typename==="ParticipantLeftMessage"){i=c.participants_removed;Object.assign(p,{log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE,log_message_data:{removed_participants:i==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)},i)},log_message_body:c.snippet})}else if(c.__typename==="GenericAdminTextMessage"){h=c.extensible_message_admin_text;n=c.extensible_message_admin_text_type;h==null?n==null||Object.assign(p,{log_message_body:c.snippet,log_message_data:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[n])),untypedData:undefined},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}):n==null||Object.assign(p,g(h,n,c.snippet))}else if(c.__typename==="P2PPaymentRequestMessage"){o=c.p2p_sender;d=c.p2p_receiver;q=c.amount;a=c.message_type;Object.assign(p,{log_message_body:c.snippet,log_message_data:{transfer_id:c.transfer_id,senderId:o==null?null:b("MercuryIDs").getParticipantIDFromUserID(o.id),receiverId:d==null?null:b("MercuryIDs").getParticipantIDFromUserID(d.id),formattedAmount:q==null?null:q.formatted,subtype:a==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PPaymentLogMessageSubtype")[a]))},log_message_type:b("MercuryLogMessageType").ORION})}return p}f._getGenericAdminTextMessage=g;f._getStyleList=h;f.unsafeCastExtensibleAttachmentWithoutSubattachments=i;f.unsafeCastExtensibleAttachment=j;f.unsafeCastBlobAttachments=k;f._getProfileRanges=l;f.transformMessage=m}),null);
__d("MessengerObjectAssociationType",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({REGULAR_CHAT:null,GENERAL_CHAT:null})}),null);
__d("MessengerThreadCannotReplyReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BLOCKED:"blocked",COMPOSER_DISABLED_BOT:"composer_disabled_bot",HAS_EMAIL_PARTICIPANT:"has_email_participant",OBJECT_ORIGINATED:"object_originated",READ_ONLY:"read_only",VIEWER_NOT_SUBSCRIBED:"viewer_not_subscribed",RECIPIENTS_NOT_LOADABLE:"recipients_not_loadable",RECIPIENTS_UNAVAILABLE:"recipients_unavailable",RECIPIENTS_INVALID:"recipients_invalid",RECIPIENTS_INACTIVE_WORK_ACC:"recipients_inactive_work_account",MONTAGE_NOT_AUTHOR:"montage_not_author"})}),null);
__d("WorkForeignEntityType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FOREIGN:"FOREIGN",NOT_FOREIGN:"NOT_FOREIGN"})}),null);
__d("MessengerServerPayloadTransformer.bs",["fbt","URI","FBID.bs","bs_array","Utils.bs","bs_string","gkx","getByPath","bs_caml_array","MercuryIDs","bs_caml_format","GenderConst","bs_js_primitive","WorkModeConfig","bs_js_null_undefined","DisplayGenderConst","MessagingThreadType","WorkForeignEntityType","MercuryParticipantTypes","MessengerGroupsSyncStatus.bs","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs","MessengerObjectAssociationType","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){__p&&__p();var c=a.location_coordinates;c=c==null?[null,null]:[c.latitude,c.longitude];var d=a.location_page,e;if(d==null)e=null;else{d=d.address;e=d==null?null:d.full_address}d=a.allows_rsvp;d=d?1:0;var f=b("bs_array").fold_left(function(a,b){a[b.node.id]=b.guest_list_state;return a},{},a.event_reminder_members.edges),g=a.lightweight_event_creator;return{creator_id:g==null?null:g.id,event_members:f,event_time:a.time,event_type:a.lightweight_event_type,latitude:c[0],longitude:c[1],location_address:e,location_name:a.location_name,note:a.note,oid:a.id,related_event:a.related_event,repeat_mode:a.repeat_mode,seconds_to_notify_before:a.seconds_to_notify_before,status:a.lightweight_event_status,title:a.event_title,track_rsvp:d}}function i(a){__p&&__p();a=a.associated_object;if(a==null)return null;else{var c=a.action_link,d;if(c==null)d=null;else{var e=b("WorkModeConfig").is_work_user;e=e?b("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";d=new(b("URI"))(c).setDomain(e)}c=a.profile_picture;e=a.group_general_chat;return{id:a.id,name:a.name,action_link:d,profile_picture:c==null?null:{uri:c.uri},group_general_chat:e==null?null:{id:e.id},room_type:a.room_type,privacy_mode:a.privacy_mode,approval_mode_toggleable:a.approval_mode_toggleable,start_timestamp:a.start_timestamp,event_place:a.event_place,mentorship_program:a.mentorship_program}}}function j(a){a=a.related_page_thread;if(a==null)return null;else{var c=b("bs_array").map(function(a){return a.name},a.custom_thread_tags.nodes),d=a.page;d=d==null?null:d.id;return{flagged:a.is_flagged,pageID:d,customTagNames:c}}}function k(a){__p&&__p();var c=a.thread_key.other_user_id;if(c==null)return!1;else{a=a.all_participants.nodes;return b("bs_array").fold_left(function(a,b){b=b.messaging_actor;if(b.id===c)return b.__typename==="User";else return a},!1,a)}}function l(a){__p&&__p();if(a.length===0)return null;else{var c={};b("bs_array").iter(function(a){var b=a.nickname;if(b==null)return 0;else{c[a.participant_id]=b;return 0}},a);return c}}function m(a){return"#"+b("bs_string").sub(a,2,a.length-2|0)}function n(a){if(!(a==null)&&a!=="")return m(a);else return null}function a(a){return a.thread_key.thread_fbid}function c(a){return a.thread_key.other_user_id}function d(a){return b("bs_js_primitive").null_undefined_to_opt(b("getByPath")(a,["messages","page_info"]))}function e(a){var c=g._("Facebook User");return{id:"fbid:"+a,fbid:b("FBID.bs").ofStringExn(a),gender:b("GenderConst").UNKNOWN_SINGULAR,href:null,image_src:null,big_image_src:null,name:c,short_name:c,type:null,vanity:null,accepts_messenger_user_feedback:!1,is_friend:!1,is_messenger_user:!1,is_business_enabled:!1,is_verified:!1,is_messenger_platform_bot:!1,is_messenger_ignored:null,is_messenger_blocked:!1,is_facebook_blocked:!0,is_subscribed_to_page_updates:!1,title:null,availability_status:null,employee:!1,instant_game_channel:null,work_foreign_entity_info:null,timezone:null,wa_group_admins:[],wa_group_creation_time:null,wa_group_participant_count:null,wa_group_participants:[]}}function o(a){__p&&__p();var c=a.profile_picture_url;if(c==null){var d=a.big_image_src;d=d==null?null:d.uri}else d=c;c=a.gender;var e=a.url,f;if(e==null)f=null;else{var g=b("WorkModeConfig").is_work_user;g=g?b("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";f=new(b("URI"))(e).getUnqualifiedURI().setDomain(g).setProtocol("https").toString()}e=a.__typename;var h;switch(e){case"Page":h=b("MercuryParticipantTypes").PAGE;break;case"User":h=b("MercuryParticipantTypes").USER;break;default:h=null}g=a.accepts_messenger_user_feedback;e=a.is_viewer_friend;var i=a.is_messenger_user,j=a.is_verified,k=a.is_messenger_platform_bot,l=a.is_message_blocked_by_viewer,m=a.is_blocked_by_viewer,n=a.is_viewer_subscribed_to_message_updates,o=a.scim_company_user,p;if(o==null)p=null;else{o=o.company_title;if(o==="")p=null;else{var q=b("bs_js_null_undefined").bind(a.work_info,function(a){return b("bs_js_null_undefined").bind(a.work_community,function(a){return a.name})}),r=a.work_foreign_entity_info;p=!(q==null)&&!(r==null)&&r.type===b("WorkForeignEntityType").NOT_FOREIGN?""+(String(o)+(" \u2022 "+(String(q)+""))):o}}r=a.work_info;q=a.is_employee;o=a.work_foreign_entity_info;var s=a.wa_group_creation_time,t=a.wa_group_participants,u=a.wa_group_participants,v=a.wa_group_admins;return{id:"fbid:"+a.id,fbid:a.id,gender:c==null?b("GenderConst").NOT_A_PERSON:c===b("DisplayGenderConst").MALE?b("GenderConst").MALE_SINGULAR:c===b("DisplayGenderConst").FEMALE?b("GenderConst").FEMALE_SINGULAR:b("GenderConst").NOT_A_PERSON,href:f,image_src:d,big_image_src:d,name:a.name,short_name:b("Utils.bs").$pipe$unknown(b("bs_js_primitive").null_undefined_to_opt(a.short_name),a.name),type:h,vanity:a.username,accepts_messenger_user_feedback:g==null?!1:g,is_friend:e==null?!1:e,is_messenger_user:i==null?!1:i,is_business_enabled:a.__typename==="Page",is_verified:j==null?!1:j,is_messenger_platform_bot:k==null?!1:k,is_messenger_ignored:null,is_messenger_blocked:l==null?!1:l,is_facebook_blocked:m==null?!1:m,is_subscribed_to_page_updates:n==null?!0:n,title:p,availability_status:r==null?null:r.availability_status,employee:q==null?!1:q,instant_game_channel:a.__typename==="Page"?a.instant_game_channel:null,work_foreign_entity_info:o==null?null:o,timezone:null,wa_group_creation_time:s==null?null:s,wa_group_participant_count:t==null?null:t.count,wa_group_participants:u==null?[]:b("bs_array").map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}},u.nodes),wa_group_admins:v==null?[]:b("bs_array").map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}},v.nodes)}}function p(a){return b("bs_array").map(function(a){return o(a.messaging_actor)},a.all_participants.nodes)}function q(a,c){__p&&__p();c=c.read_receipts;if(c==null)return 0;else{var d={};b("bs_array").iter(function(c){var e=c.actor;if(!(e==null)&&a!==e.id){d[e.id]={action:b("bs_caml_format").caml_float_of_string(c.action),watermark:b("bs_caml_format").caml_float_of_string(c.watermark)};return 0}else return 0},c.nodes);return[d]}}function r(a){__p&&__p();a=a.delivery_receipts;if(a==null)return[];else return a.nodes.sort(function(a,c){a=b("bs_caml_format").caml_float_of_string(a.timestamp_precise);c=b("bs_caml_format").caml_float_of_string(c.timestamp_precise);if(a>c)return-1;else if(a===c)return 0;else return 1})}function s(a,c,d){var e=c.messages;if(e==null)return 0;else return[b("bs_array").map(function(e){return b("MessengerMessageTransformer.bs").transformMessage(a,e,{thread_id:null,thread_fbid:c.thread_key.thread_fbid,other_user_fbid:c.thread_key.other_user_id,folder:b("bs_string").lowercase(c.folder)},d)},e.nodes)]}function t(a,c,d){__p&&__p();var e=b("bs_array").map(function(c){var d=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),e=c.extensible_attachment,f;if(e==null)f=null;else{var a=e.story_attachment;f={legacy_attachment_id:e.legacy_attachment_id,story_attachment:a==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(a)}}return{snippet:c.snippet,message_sender:c.message_sender,timestamp_precise:c.timestamp_precise,commerce_message_type:c.commerce_message_type,extensible_attachment:f,blob_attachments:d,sticker:c.sticker,extensible_message_admin_text:c.extensible_message_admin_text}},c.last_message.nodes);e={thread_key:c.thread_key,name:c.name,all_participants:c.all_participants,last_message:{nodes:e},unread_count:c.unread_count,message_count:c.messages_count,image:c.image,updated_time_precise:c.updated_time_precise,mute_until:c.mute_until,is_pinned:c.is_pinned,is_pin_protected:c.is_pin_protected,is_viewer_subscribed:c.is_viewer_subscribed,is_canonical_neo_user:c.is_canonical_neo_user,thread_queue_enabled:c.thread_queue_enabled,folder:c.folder,has_viewer_archived:c.has_viewer_archived,is_page_follow_up:c.is_page_follow_up,cannot_reply_reason:c.cannot_reply_reason,ephemeral_ttl_mode:c.ephemeral_ttl_mode,customization_info:c.customization_info,thread_admins:c.thread_admins,approval_mode:c.approval_mode,joinable_mode:c.joinable_mode,thread_queue_metadata:c.thread_queue_metadata,event_reminders:c.event_reminders,montage_thread:c.montage_thread,last_read_receipt:c.last_read_receipt,related_page_thread:c.related_page_thread,rtc_call_data:c.rtc_call_data,associated_object:c.associated_object,reactions_mute_mode:c.reactions_mute_mode,mentions_mute_mode:c.mentions_mute_mode,privacy_mode:c.privacy_mode,customization_enabled:c.customization_enabled,thread_type:c.thread_type,participant_add_mode_as_string:c.participant_add_mode_as_string,participants_event_status:c.participants_event_status,marketplace_thread_data:c.marketplace_thread_data,page_comm_item:c.page_comm_item,group_approval_queue:c.group_approval_queue,admin_model_status_string:c.admin_model_status_string,groups_sync_status_string:c.groups_sync_status_string,groups_sync_metadata:c.groups_sync_metadata,description:c.description,joinable_link:c.joinable_link,theme:c.thread_theme};c=e.customization_info;var f;if(c==null)f=[null,null,null];else{var g=c.emoji;f=[n(c.outgoing_bubble_color),g==null?null:{emoji:g},l(c.participant_customizations)]}g=f[0];c=e.theme;if(c==null)g=[g,g,g,[],null];else{var o=c.gradient_colors.length,p=m(c.fallback_color),q=b("FBID.bs").ofString(c.id);q=q?q[0]:null;if(o>0&&b("gkx")("AT4vZBWyiZL1KZrir2lJt4vVNMIYu8sDbA3PtNwJWZh5seJSYZeYdmCgqH3wgiUS4PfslnEPm3wz9jSsjDINBCSy")){c=b("bs_array").map(m,c.gradient_colors);g=[p,b("bs_caml_array").caml_array_get(c,0),b("bs_caml_array").caml_array_get(c,o-1|0),c,q]}else g=[p,p,p,[],q]}o=e.page_comm_item;c=o==null?[null,null,null,null,null]:[o.comm_status,o.comm_source_id,o.id,o.subtitle,o.comm_item_owners];p=e.last_message.nodes.length!==0?[b("bs_caml_array").caml_array_get(e.last_message.nodes,0)]:0;q=e.last_read_receipt.nodes.length!==0?[b("bs_caml_array").caml_array_get(e.last_read_receipt.nodes,0)]:0;if(p){o=p[0];a=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:o.extensible_attachment,blob_attachments:o.blob_attachments,sticker:o.sticker},d)}else a=[];if(p){o=p[0].extensible_message_admin_text;if(o==null)d=null;else{o=o.game;d=o==null?null:o.id}}else d=null;o=e.cannot_reply_reason;var r=e.thread_key.other_user_id;if(r==null){var s=e.thread_key.thread_fbid;s=s==null?null:s}else s=r;r=e.thread_queue_metadata;var t=e.thread_type,u=e.montage_thread,v=e.image,w=e.thread_key.other_user_id,x=e.thread_queue_metadata,y=e.name,z=e.associated_object,A;if(z==null)A=null;else{z=z.group_general_chat;if(z==null||s==null)A=null;else{z=z.id===s;A=z?b("MessengerObjectAssociationType").GENERAL_CHAT:b("MessengerObjectAssociationType").REGULAR_CHAT}}z=e.rtc_call_data;var B;if(z==null)B=null;else{var C=z.initiator;B={call_state:z.call_state,server_info_data:z.server_info_data,initiator_fbid:C==null?null:b("bs_js_null_undefined").fromOption(b("FBID.bs").ofString(C.id))}}z=e.marketplace_thread_data;if(z==null)C=null;else{var D=z.for_sale_item,E;if(D==null)E=null;else{var F=D.id,G=D.formatted_price,H=D.location,I;if(H==null)I=null;else{H=H.reverse_geocode;I={reverse_geocode:H==null?null:{city:H.city,state:H.state}}}H=D.primary_photo;var J;if(H==null)J=null;else{H=H.image;J=H==null?null:H.uri}E={id:F==null?0:b("bs_caml_format").caml_float_of_string(F),story_id:D.story_id,title:D.group_commerce_item_title,price:G==null?null:G.text,location:I,is_sold:D.is_sold,image_uri:J,url:D.url}}H=z.buyer;F=z.seller;C={for_sale_item:E,buyer_fbid:H==null?0:b("bs_caml_format").caml_float_of_string(H.id),seller_fbid:F==null?0:b("bs_caml_format").caml_float_of_string(F.id)}}G=e.group_approval_queue;I=e.groups_sync_metadata;if(I==null)J=null;else{D=I.fb_group;J=D==null?null:D.url}return{admin_ids:b("bs_array").map(function(a){return a.id},e.thread_admins),approval_mode:e.approval_mode,approval_queue_ids:r==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(a.id))},r.approval_requests.nodes),can_reply:o==null,cannot_reply_reason:e.cannot_reply_reason,solid_color:g[0],header_color:g[1],footer_color:g[2],gradient_colors:g[3],theme_id:g[4],custom_like_icon:f[1],custom_nickname:f[2],customization_enabled:e.customization_enabled,thread_type:t==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingThreadType")[t])),participant_add_mode:e.participant_add_mode_as_string,ephemeral_ttl_mode:e.ephemeral_ttl_mode,folder:b("bs_string").lowercase(e.folder),has_email_participant:o==null?!1:o===b("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT,has_montage:!(u==null),image_src:v==null?null:v.uri,is_archived:e.has_viewer_archived,is_pinned:e.is_pinned,is_page_follow_up:e.is_page_follow_up,is_canonical_user:k(e),is_canonical:!(w==null),is_pin_protected:e.is_pin_protected,is_subscribed:e.is_viewer_subscribed,is_canonical_neo_user:e.is_canonical_neo_user,is_thread_queue_enabled:!(x==null),joinable_mode:{mode:b("bs_caml_format").caml_int_of_string(e.joinable_mode.mode),link:e.joinable_mode.link},last_message_timestamp:p?b("bs_caml_format").caml_float_of_string(p[0].timestamp_precise):0,last_message_type:p?p[0].commerce_message_type:null,last_read_timestamp:q?b("bs_caml_format").caml_float_of_string(q[0].timestamp_precise):0,lightweight_event:e.event_reminders.nodes.length===0?null:h(b("bs_caml_array").caml_array_get(e.event_reminders.nodes,0)),lightweight_events:b("bs_array").fold_left(function(a,b){a[b.id]=h(b);return a},{},e.event_reminders.nodes),message_count:e.message_count,mute_until:e.mute_until,name:y==null?"":y,object_association_type:A,other_user_fbid:e.thread_key.other_user_id,page_thread_info:j(e),participants:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id)},e.all_participants.nodes),participants_event_status:e.participants_event_status,read_only:o==null?!1:o===b("MessengerThreadCannotReplyReason").READ_ONLY,recipients_loadable:o==null?!0:o!==b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE,server_timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),snippet_attachments:a,snippet_sender:p?b("MercuryIDs").getParticipantIDFromUserID(p[0].message_sender.messaging_actor.id):null,snippet:p?p[0].snippet:null,thread_fbid:s,thread_id:"",timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),unread_count:e.unread_count,rtc_call_data:B,marketplace_thread_data:C,associated_object:i(e),reactions_mute_mode:e.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:e.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:c[0],page_comm_item_id:c[2],comm_source_id:c[1],subtitle:c[3],comm_item_owners:c[4],group_approval_queue:G==null?null:G.nodes,game_id:d,admin_model_status:e.admin_model_status_string,groups_sync_status:b("MessengerGroupsSyncStatus.bs").fromNullableString(e.groups_sync_status_string),groups_sync_fb_url:J,description:e.description,joinable_link:e.joinable_link}}f.getThreadFBID=a;f.getOtherUserID=c;f.getMessagePageInfo=d;f.getBlockedParticipant=e;f.transformParticipant=o;f.transformParticipants=p;f.transformReadReceipts=q;f.transformDeliveryReceipts=r;f.transformMessages=s;f.transformThread=t}),null);
__d("MessengerParticipantsFetcher.bs",["Promise","bs_array","BanzaiODS","WebGraphQL","MessengerServerPayloadTransformer.bs","MessengerParticipantsWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=new(b("MessengerParticipantsWebGraphQLQuery"))(a);return b("WebGraphQL").exec(c,{actorID:null,batchName:"MessengerParticipantsFetcher"})["catch"](function(a){b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participants.failure");return b("Promise").reject(a)}).then(function(c){__p&&__p();b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participants.success");var d=[],e=new Set();b("bs_array").iter(function(a){if(a==null)return 0;else{a=b("MessengerServerPayloadTransformer.bs").transformParticipant(a);e.add(a.fbid);d.push(a);return 0}},c.messaging_actors);c=a.ids.filter(function(a){return!e.has(a)});c.length>0&&c.forEach(function(a){d.push(b("MessengerServerPayloadTransformer.bs").getBlockedParticipant(a));return 0});return d})}f.fetch=a}),null);
__d("MessengerParticipants.bs",["fbt","Promise","FBID.bs","bs_curry","bs_caml_obj","BanzaiODS","MercuryIDs","bs_js_primitive","MercuryAssert","ImageSourceType","ImmutableObject","bs_js_null_undefined","ImageSourceRequest","MercuryVanityIDMap.bs","PhotoResizeModeConst","MercuryParticipantTypes","MercuryParticipantsConstants","MessengerParticipantsFetcher.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=[1],i={},j=new Set(),k={},l=function(b,a){delete b[a];return 0},m=function(b,a){delete b[a];return 0};function n(){return g._("Facebook User")}function o(a){__p&&__p();var c=a.type;if(c==null||!(b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").USER)||b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").FRIEND)))return a;else{c=a.href;var d=a.vanity;if(c==null&&d==null){c=n(0);return Object.assign(a,{name:c,short_name:c})}else return a}}function a(){Object.keys(i).forEach(function(a){return b("bs_curry")._2(m,i,a)});return 0}function c(a){__p&&__p();a=a.participants;if(a==null)return 0;else{a.map(function(a){__p&&__p();var c=a.id,d=a.vanity;d==null||b("MercuryVanityIDMap.bs").set(d,c);d=i[c];if(d!==undefined){i[c]=b("ImmutableObject").set(d,a);return 0}else{i[c]=new(b("ImmutableObject"))(o(a));return 0}});return 0}}function p(a,c){__p&&__p();var d={},e=[];a.forEach(function(a){var b=i[a];if(b!==undefined){d[a]=b;return 0}else{e.push(a);return 0}});if(e.length===0){b("bs_curry")._1(c,d);return null}else{var f=[];e.forEach(function(a){__p&&__p();if(j.has(a))return 0;else{var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c==null)return 0;else{f.push(c);j.add(a);return 0}}});var g=h[0].toString();k[g]=[a,c];h[0]=h[0]+1|0;f.length>0&&b("MessengerParticipantsFetcher.bs").fetch({ids:f}).then(function(a){__p&&__p();a.forEach(function(a){i[a.id]=new(b("ImmutableObject"))(a);var c=a.id;a=a.vanity;a==null||b("MercuryVanityIDMap.bs").set(a,c);j["delete"](c);return 0});Object.keys(k).forEach(function(a){__p&&__p();var d=k[a];if(d!==undefined){var e=d[0],c={};e.forEach(function(b){var a=i[b];if(a!==undefined){c[b]=a;return 0}else return 0});if(Object.keys(c).length===e.length){b("bs_curry")._2(l,k,a);return b("bs_curry")._1(d[1],c)}else return 0}else return 0});b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participant.success");return b("Promise").resolve(0)})["catch"](function(){b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participant.failure");return b("Promise").resolve(0)});return g}}function d(a,c){b("MercuryAssert").isParticipantID(a);return p([a],function(d){d=d[a];if(d!==undefined)return b("bs_curry")._1(c,d);else return 0})}function e(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(i[a]))}function q(a){return b("bs_curry")._2(l,k,a)}function r(a,c,d){new(b("ImageSourceRequest"))().setFBID(b("bs_js_null_undefined").fromOption(b("bs_js_primitive").null_undefined_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a)))).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(c,c).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(function(c){return b("bs_curry")._2(d,a,c)}).send();return 0}function s(a,c,d,e){__p&&__p();b("MercuryAssert").allParticipantIDs(a);var f=[!1],g=p(a,function(e){__p&&__p();var g={},h=function(d,e){g[d]=e;if(!f[0]&&a.length===Object.keys(g).length)return b("bs_curry")._1(c,g);else return 0},j=function(a,c){var d=e[a];d!==undefined&&(e[a]=b("ImmutableObject").set(d,{big_image_src:c.uri}));return h(a,c.uri)};Object.keys(e).forEach(function(a){var c=e[a];if(c!==undefined){var f=d===b("MercuryParticipantsConstants").BIG_IMAGE_SIZE;f=f?b("bs_js_primitive").null_undefined_to_opt(c.big_image_src):0;if(f)return h(c.id,f[0]);else return r(a,d,j)}else return r(a,d,j)});return 0});return{remove:function(){f[0]=!0;if(g==null)return 0;else return q(g)}}}function t(a,c,d){return s(a,c,b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,0)}function u(a,c){return t(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(d[a]))}))},0)}function v(a){__p&&__p();if(a==null)return null;else if(b("MercuryVanityIDMap.bs").hasVanity(a)){var c=b("MercuryVanityIDMap.bs").getID(a);if(c==null)return null;else return c}else{c=/^\d+$/;if(c.test(a)){c=b("FBID.bs").ofString(a);if(c)return b("MercuryIDs").getParticipantIDFromUserID(c[0]);else return null}else return null}}f.reset=a;f.addParticipants=c;f.getDefaultName=n;f.get=d;f.getNow=e;f.getMulti=p;f.removeCallback=q;f.getBigImageMultiWithSize=s;f.getBigImageMulti=t;f.getOrderedBigImageMulti=u;f.getIDFromVanityOrFBID=v}),null);
__d("MessengerThreadThemeUpdateWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1727493033983591"};c.getQueryID=function(){"use strict";return"643682629309288"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("XChatRemoveParticipantAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/remove_participants/",{elem_id:{type:"String"},uid:{type:"Int"},tid:{type:"String"}})}),null);
__d("XGroupsJoinChatController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/join_chat/",{link_hash:{type:"String"}})}),null);
__d("XMercuryThreadLikeIconController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/like_icon/",{emoji:{type:"String",defaultValue:""}})}),null);
__d("XMessagingBlockMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/block_messages/",{})}),null);
__d("XMessagingGroupJoinThroughHashController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/join_through_hash/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinThroughPrivateLinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/join_through_invite/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinableAcceptController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_accept/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupJoinableInviteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_invite/",{thread_fbid:{type:"String"},user_ids:{type:"IntSet"}})}),null);
__d("XMessagingGroupJoinableRejectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_reject/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupSetApprovalController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_approval_mode/",{set_mode:{type:"Enum",enumType:0},thread_fbid:{type:"String"}})}),null);
__d("XMessagingJoinableLinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_link_action/",{action:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveAdminsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_admins/",{elem_id:{type:"String"},parent_elem_id:{type:"String"},thread_fbid:{type:"String"},admin_ids:{type:"FBIDSet"},add:{type:"Bool",defaultValue:!1}})}),null);
__d("XMessagingSaveGroupThreadDescriptionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_group_thread_description/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveNicknameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_nickname/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveThreadColorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_color/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveThreadEmojiController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_emoji/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingUnblockMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/unblock_messages/",{})}),null);
__d("XNFXIgnoreMessagesActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/ignore_messages/",{thread_fbid:{type:"Int",required:!0},location:{type:"Enum",required:!0,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("XNFXMessengerBlockActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/block_messages/",{thread_fbid:{type:"Int",required:!0},location:{type:"Enum",required:!0,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("MercuryThreadActions",["cssVar","invariant","AsyncDialog","AsyncRequest","Bootloader","CurrentUser","EmojiLikeConstants","IgnoreMessagesTypedLogger","MercuryActionType","MercuryAPIArgsSource","MercuryDispatcher","MercuryIDs","MercuryLogMessageType","MercuryMessengerBlockingUtils","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonMixin","MercurySourceType","MessengerGroupLinkActionType","MessengerParticipants.bs","MessengerState.bs","MercuryThreadIDMap","MercuryViewer","MercuryMessageActions","MessengerActions","MercuryMessageObject","MessagingTag","MessengerEmojiTransitionMapping.bs","MessengerGroupsSyncStatus","MessengerGroupsSyncStatusChangeMutationWebGraphQLMutation","MessengerThreadThemeUpdateWebGraphQLMutation","PageCommItemStatus","ReloadPage","URI","WebGraphQL","XChatRemoveParticipantAsyncController","XGroupsJoinChatController","XMercuryThreadLikeIconController","XMessagingGroupJoinableAcceptController","XMessagingGroupJoinableInviteController","XMessagingGroupJoinableRejectController","XMessagingGroupJoinThroughHashController","XMessagingGroupJoinThroughPrivateLinkController","XMessagingGroupSetApprovalController","XMessagingJoinableLinkController","XMessagingSaveAdminsController","XMessagingSaveGroupThreadDescriptionController","XMessagingSaveNicknameController","XMessagingSaveThreadColorController","XMessagingSaveThreadEmojiController","XNFXMessengerBlockActionController","XMessagingBlockMessagesController","XMessagingUnblockMessagesController","XNFXIgnoreMessagesActionController","ex","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadIDMap").get(),j=b("MercuryMessageActions").get(),k=b("MercuryMessageObject").get();function a(a){this.$1=a,this.__serverRequests=b("MercuryServerRequests").getForFBID(this.$1),this.__dispatcher=b("MercuryDispatcher").getForFBID(this.$1),this.__payloadPreprocessor=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1)}a.prototype.markRead=function(a,b){this.batchMarkRead([a],b)};a.prototype.batchMarkRead=function(a,b){this.__dispatcher.handleUpdate(this.$2(a,!0,b))};a.prototype.markUnread=function(a,b){this.batchMarkUnread([a],b)};a.prototype.batchMarkUnread=function(a,b){this.__dispatcher.handleUpdate(this.$2(a,!1,b))};a.prototype.markSeen=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").MARK_THREAD_SEEN,b("MercuryPayloadSource").CLIENT_MARK_THREAD_SEEN,{persistent:c}))};a.prototype.archive=function(a,b){this.batchArchive([a],b),this.batchUnpin([a],b)};a.prototype.batchArchive=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadArchivedStatus(a,!0,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$3(a,!0))};a.prototype.unarchive=function(a,b){this.batchUnarchive([a],b)};a.prototype.batchUnarchive=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadArchivedStatus(a,!1,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$3(a,!1))};a.prototype.pin=function(a,b,c){this.batchPin([a],c),this.$4(a,!0,b)};a.prototype.batchPin=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadPinnedStatus(a,!0,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$5(a,!0))};a.prototype.unpin=function(a,b,c){this.batchUnpin([a],c),this.$4(a,!1,b)};a.prototype.batchUnpin=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadPinnedStatus(a,!1,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$5(a,!1))};a.prototype.markPageFollowUp=function(a,b){this.batchMarkPageFollowUp([a],b)};a.prototype.batchMarkPageFollowUp=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadPageFollowUpStatus(a,!0,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$6(a,!0))};a.prototype.unmarkPageFollowUp=function(a,b){this.batchUnmarkPageFollowUp([a],b)};a.prototype.batchUnmarkPageFollowUp=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadPageFollowUpStatus(a,!1,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$6(a,!1))};a.prototype.markSpam=function(a,b){this.batchMarkSpam([a],b)};a.prototype.batchMarkSpam=function(a,c){a.forEach(function(a){this.__serverRequests.markThreadSpam(a,c)}.bind(this)),this.__dispatcher.handleUpdate(this.$7(a,b("MessagingTag").SPAM))};a.prototype.unmarkSpam=function(a,b){this.batchUnmarkSpam([a],b)};a.prototype.batchUnmarkSpam=function(a,c){a.forEach(function(a){this.__serverRequests.unmarkThreadSpam(a,c)}.bind(this)),this.__dispatcher.handleUpdate(this.$7(a,b("MessagingTag").INBOX))};a.prototype.changeFolder=function(a,b){this.batchChangeFolder([a],b)};a.prototype.batchChangeFolder=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadFolder(a,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$7(a,b))};a.prototype["delete"]=function(a,b){this.batchDelete([a],b),this.batchUnpin([a],b)};a.prototype.batchDelete=function(a,c){this.__serverRequests.deleteThreads(a,c),this.__dispatcher.handleUpdate(this.__constructClientPayload(a,b("MercuryActionType").DELETE_THREAD,b("MercuryPayloadSource").CLIENT_DELETE_THREAD))};a.prototype.unmute=function(a){this.updateMuteSetting(a,0)};a.prototype.updateMuteSetting=function(a,c){this.__serverRequests.changeMutingOnThread(a,c),this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").CHANGE_MUTE_SETTINGS,b("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{mute_until:c}))};a.prototype.updateMentionsMuteSetting=function(a,c){c=c?1:0;this.__serverRequests.changeMentionsMutingOnThread(a,c);this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").CHANGE_MUTE_SETTINGS,b("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{mentions_mute_mode:c}))};a.prototype.updateReactionsMuteSetting=function(a,c){c=c?1:0;this.__serverRequests.changeReactionsMutingOnThread(a,c);this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").CHANGE_MUTE_SETTINGS,b("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{reactions_mute_mode:c}))};a.prototype.blockMessages=function(a,c){var d="",e=b("MercuryIDs").getUserIDFromThreadID(a);e!==null||h(0);var f=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(e));d=f&&f.short_name;f=b("XNFXMessengerBlockActionController").getURIBuilder().setInt("thread_fbid",e).setEnum("location","www_chat_head").getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(f),function(e){e.subscribe("confirm",function(){e.hide(),c&&c(d),this.changeFolder(a,b("MessagingTag").OTHER)}.bind(this))}.bind(this))};a.prototype.unblockMessages=function(a){var c=b("MercuryIDs").getUserIDFromThreadID(a);if(c===null)throw new Error(b("ex")("Expected user ID to unblock messages for, got null"));c=JSON.stringify({reportable_ent_token:c,initial_action_name:b("MercuryMessengerBlockingUtils").block_messages});new(b("AsyncRequest"))(new(b("URI"))("/ajax/nfx/messenger_undo_block").addQueryData({story_location:"messenger",context:c})).send();this.changeFolder(a,b("MessagingTag").INBOX)};a.prototype.ignoreMessages=function(a,c){c=b("XNFXIgnoreMessagesActionController").getURIBuilder().setInt("thread_fbid",a).setEnum("location","www_chat_head").getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(c))};a.prototype.blockOnMessengerDotCom=function(a){var c=b("XMessagingBlockMessagesController").getURIBuilder().getURI();new(b("IgnoreMessagesTypedLogger"))().setEvent("block_confirmed").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a)).setPlatform("messengerdotcom").log();new(b("AsyncRequest"))(c).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(a)}).send()};a.prototype.blockIgnoreOnMessengerDotCom=function(a,c,d){a&&b("MessengerActions").selectThread(null),this.changeFolder(c,b("MessagingTag").OTHER),this.blockOnMessengerDotCom(c),d&&d()};a.prototype.unblockOnMessengerDotCom=function(a){var c=b("XMessagingUnblockMessagesController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(a)}).send();this.changeFolder(a,b("MessagingTag").INBOX)};a.prototype.leaveGroup=function(a){j.send(k.constructLogMessageObject(b("MercurySourceType").TITAN_WEB,a,b("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[b("MercuryViewer").getID()]}),null,b("MercuryAPIArgsSource").WEBMESSENGER)};a.prototype.deleteSyncedGroup=function(a){if(!a)return;if(a.groups_sync_status!=b("MessengerGroupsSyncStatus").OPT_IN)return;i.getServerIDFromClientID(a.thread_id,function(a){a={client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:a,groups_sync_status:b("MessengerGroupsSyncStatus").OPT_OUT};b("WebGraphQL").exec(new(b("MessengerGroupsSyncStatusChangeMutationWebGraphQLMutation"))({data:a}))})};a.prototype.removeFromGroup=function(a,c){var d=b("XChatRemoveParticipantAsyncController").getURIBuilder().getURI();a={tid:a,uid:c};new(b("AsyncRequest"))(d).setMethod("POST").setData(a).send()};a.prototype.changeThreadTheme=function(a,c,d){i.getServerIDFromClientID(a,function(a){b("WebGraphQL").exec(new(b("MessengerThreadThemeUpdateWebGraphQLMutation"))({data:{client_mutation_id:0,actor_id:b("CurrentUser").getID(),thread_id:a,theme_id:c,source:d}}))})};a.prototype.changeThreadColor=function(a,c,d){i.getServerIDFromClientID(a,function(a){var e={};c!="#0084ff"&&(e.color_choice=c);e.thread_or_other_fbid=a;a=b("XMessagingSaveThreadColorController").getURIBuilder().setEnum("source",d).getURI();new(b("AsyncRequest"))(a).setMethod("POST").setData(e).send()})};a.prototype.changeThreadEmoji=function(a,c,d){i.getServerIDFromClientID(a,function(a){var e={},f=String.fromCodePoint.apply(String,c);b("MessengerEmojiTransitionMapping.bs").hasGender(c)&&(f=String.fromCodePoint.apply(String,b("MessengerEmojiTransitionMapping.bs").removeAllModifiers(c)));f!==String.fromCodePoint(b("EmojiLikeConstants").FB_THUMBS_UP_EMOJI)&&f!==String.fromCodePoint(b("EmojiLikeConstants").THUMBS_UP_EMOJI_CODES)&&(e.emoji_choice=f);e.thread_or_other_fbid=a;f=b("XMessagingSaveThreadEmojiController").getURIBuilder().setEnum("source",d).getURI();new(b("AsyncRequest"))(f).setMethod("POST").setData(e).send()})};a.prototype.changeThreadNicknames=function(a,c,d,e){i.getServerIDFromClientID(a,function(a){a={thread_or_other_fbid:a,participant_id:c,nickname:d};var f=b("XMessagingSaveNicknameController").getURIBuilder().setEnum("source",e).getURI();new(b("AsyncRequest"))(f).setMethod("POST").setData(a).send()})};a.prototype.changeGroupThreadDescription=function(a,c,d){i.getServerIDFromClientID(a,function(a){a={thread_fbid:a,description:c};var e=b("XMessagingSaveGroupThreadDescriptionController").getURIBuilder().setEnum("source",d).getURI();new(b("AsyncRequest"))(e).setMethod("POST").setData(a).send()})};a.prototype.setApprovalMode=function(a,c){var d=b("XMessagingGroupSetApprovalController").getURIBuilder().getURI();new(b("AsyncRequest"))(d).setMethod("POST").setData({set_mode:a,thread_fbid:c.thread_fbid}).send()};a.prototype.changeGroupAdmins=function(a,c,d){a={thread_fbid:a,admin_ids:c,add:d};c=b("XMessagingSaveAdminsController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};a.prototype.joinThroughHash=function(a){a={link_hash:a};var c=b("XMessagingGroupJoinThroughHashController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};a.prototype.joinThroughPrivateLink=function(a){a={link_hash:a};var c=b("XMessagingGroupJoinThroughPrivateLinkController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};a.prototype.chatJoinThroughHash=function(a){a={link_hash:a};var c=b("XGroupsJoinChatController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).setHandler(function(a){return b("ReloadPage").now()}).send()};a.prototype.createJoinableLink=function(a,c){if(b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a))return;i.getServerIDFromClientID(a,function(a){a={thread_fbid:a};var d=b("XMessagingJoinableLinkController").getURIBuilder().setEnum("action",b("MessengerGroupLinkActionType").CREATE_LINK).getURI();new(b("AsyncRequest"))(d).setMethod("POST").setData(a).setHandler(function(a){a=a.getPayload();a&&c(a)}).send()})};a.prototype.revokeAndRegenerateJoinableLink=function(a,c){if(b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a))return;i.getServerIDFromClientID(a,function(d){d={thread_fbid:d};var e=b("XMessagingJoinableLinkController").getURIBuilder().setEnum("action",b("MessengerGroupLinkActionType").REVOKE_LINK).getURI();new(b("AsyncRequest"))(e).setMethod("POST").setData(d).setHandler(function(b){return this.createJoinableLink(a,c)}.bind(this)).send()}.bind(this))};a.prototype.inviteToJoinableGroup=function(a,c){a={thread_fbid:a,user_ids:c};c=b("XMessagingGroupJoinableInviteController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};a.prototype.acceptToJoinableGroup=function(a,c){a={thread_fbid:a,user_id:c};c=b("XMessagingGroupJoinableAcceptController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};a.prototype.rejectToJoinableGroup=function(a,c){a={thread_fbid:a,user_id:c};c=b("XMessagingGroupJoinableRejectController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};a.prototype.addParticipants=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").ADD_PARTICIPANTS,b("MercuryPayloadSource").CLIENT_ADD_PARTICIPANTS,{participants:c}))};a.prototype.updateCustomLike=function(a,c){c=b("XMercuryThreadLikeIconController").getURIBuilder().setString("emoji",c).getURI();new(b("AsyncRequest"))().setURI(c).setHandler(function(c){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").UPDATE_CUSTOM_LIKE,b("MercuryPayloadSource").CLIENT_CHANGE_CUSTOM_LIKE,{custom_like:c.getPayload()}))}.bind(this)).send()};a.prototype.movePendingToInbox=function(a){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").MOVE_PENDING_TO_INBOX,b("MercuryPayloadSource").CLIENT_MOVE_PENDING_TO_INBOX))};a.prototype.updateSnippet=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").UPDATE_SNIPPET,b("MercuryPayloadSource").CLIENT_UPDATE_SNIPPET,{deleted_ids:c}))};a.prototype.updateCommStatus=function(a,c){this.__dispatcher.handleUpdate(this.$8(a,c));c=c===b("PageCommItemStatus").DONE;this.__dispatcher.handleUpdate(this.$3(a,c))};a.prototype.updateCommItemOwner=function(a,b,c,d){this.__dispatcher.handleUpdate(this.$9(a,b,c,d))};a.prototype.$2=function(a,c,d){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_READ_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS,{mark_as_read:c,source:d,timestamp:0})};a.prototype.$9=function(a,c,d,e){return this.__constructClientPayload(a,b("MercuryActionType").UPDATE_COMM_ITEM_OWNER,b("MercuryPayloadSource").UPDATE_COMM_ITEM_OWNER,{id:d,name:c,profile_pic_uri:e})};a.prototype.$3=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_ARCHIVED_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS,{archived:c})};a.prototype.$5=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_PINNED_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_PINNED_STATUS,{is_pinned:c})};a.prototype.$6=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_PAGE_FOLLOW_UP_STATUS,{is_page_follow_up:c})};a.prototype.$8=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").UPDATE_COMM_STATUS,b("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS,{comm_status:c})};a.prototype.$7=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_FOLDER,b("MercuryPayloadSource").CLIENT_CHANGE_FOLDER,{new_folder:c})};a.prototype.__constructClientPayload=function(a,b,c,d){return{actions:a.map(function(a){return babelHelpers["extends"]({action_type:b,thread_id:a},d)}),from_client:!0,payload_source:c}};a.prototype.$4=function(a,c,d){b("Bootloader").loadModules(["ChatPinnedThreadsTypedLogger","ChatPinnedThreadsEvent"],function(e,f){new e().setEvent(c?f.PIN_THREAD:f.UNPIN_THREAD).setIsWorkplace(b("CurrentUser").isWorkUser()).setThreadID(a).setEntryPoint(d).log()},"MercuryThreadActions")};Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MercuryTypeaheadConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMPOSER_FRIENDS_MAX:4,COMPOSER_FB4C_MAX:8,COMPOSER_NON_FRIENDS_MAX:2,COMPOSER_MESSENGER_ONLY_CONTACT_MAX:4,COMPOSER_SHOW_MORE_LIMIT:2,COMPOSER_THREADS_INITIAL_LIMIT:2,COMPOSER_CHATTAB_MAX:5,COMPOSER_PAGES_MAX:5,COMPOSER_USERS_MAX:10,COMPOSER_WM_MAX:23,USER_TYPE:"user",PAGE_TYPE:"page",THREAD_TYPE:"thread",HEADER_TYPE:"header",SEARCH_TYPE:"search",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game",WORKPLACE_BOT_CATEGORY_TYPE:"WORKPLACE_BOT",VALID_EMAIL:"^([A-Z0-9._%+-]+@((?!facebook\\.com))[A-Z0-9.-]+\\.[A-Z]{2,4}|(([A-Z._%+-]+[A-Z0-9._%+-]*)|([A-Z0-9._%+-]+[A-Z._%+-]+[A-Z0-9._%+-]*))@(?:facebook\\.com))$"})}),null);
__d("MessengerDispatcher",["Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("Dispatcher_DEPRECATED"))()}),null);
__d("MessengerActions",["invariant","Bootloader","EventProfiler","LogHistory","MercuryIDs","MercuryTypeaheadConstants","MessengerDispatcher","MessengerURISerializer","MessengerView","URI","goURI","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("keyMirror")({CANCEL_FILE_UPLOAD:null,EMPTY_FILES:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,REMOVE_SHARE_PREVIEW:null,PREPARE_FILES_FOR_SEND:null,REPLACE_STATE:null,SELECT_THREAD:null,UPDATE_MDOT_ME:null,UPDATE_THREAD_TAG:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null}),i=b("LogHistory").getInstance("messenger_actions"),j={Types:h,changeDetailView:function(a){l(function(b){return b.detailView!==a?{detailView:a}:null})},changeMasterView:function(a){l(function(c){if(c.masterView!==a){var d={masterView:a};c.masterView===b("MessengerView").MASTER.SEARCH&&(d.query=undefined,b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(a,b){a&&a.endFunnel(b.FUNNEL_LOGGER_TAGS.END_WITH_BACK_BUTTON)},"MessengerActions"));return d}return null})},selectAggregation:function(a){l(function(c){return{detailView:b("MessengerView").MASTER.RECENT,threadIDs:a,mid:null}})},selectThread:function(a,c){__p&&__p();if(c===b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE){!a&&g(0);c=b("MercuryIDs").getUserIDFromThreadID(a);!c&&g(0);var d=new(b("URI"))(),e=d.getQualifiedURI().getSubdomain();d.setDomain("facebook.com").setSubdomain(e).setPath("/"+c).setProtocol("https");window.open(d,"_blank");return}b("EventProfiler").tagCurrentActiveInteractionsAs("MessengerThreadSwitch");b("MessengerDispatcher").dispatch({type:h.SELECT_THREAD,threadID:a});l(function(c){return c.activeThreadID!==a?{activeThreadID:a,detailView:b("MessengerView").DETAIL.THREAD,mid:null}:null})},changeState:function(a){b("MessengerDispatcher").dispatch({type:h.REPLACE_STATE,nextState:a})},changeMDotMeReferral:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:j.Types.UPDATE_MDOT_ME,refCode:a,refThreadID:c})},changeThreadTag:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:j.Types.UPDATE_THREAD_TAG,messagingTags:a,threadID:c})},changeFolder:function(a){l(function(b){return b.folder!==a?{folder:a}:null})},changeFilter:function(a){l(function(b){return b.filter!==a?{filter:a}:null})},changeQuery:function(a){l(function(b){return b.query!==a?{query:a}:null})},changeQueryAll:function(a){l(function(c){return c.queryAll!==a?{query:a,masterView:b("MessengerView").MASTER.SEARCH}:null})},changeMid:function(a){l(function(b){return b.mid!==a?{mid:a}:null})},changeID:function(a){l(function(b){return b.extraQueryParams.id!==a?{extraQueryParams:babelHelpers["extends"]({},b.extraQueryParams,{id:a})}:null})},prepareFilesForSend:function(a,c,d){i.debug("Add files from "+d,a);if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.PREPARE_FILES_FOR_SEND,threadID:a,files:c})},uploadedFile:function(a,c,d){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.UPLOADED_FILE,threadID:a,uploadID:c,payload:d})},cancelFileUpload:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.CANCEL_FILE_UPLOAD,threadID:a,uploadID:c})},uploadFileFailed:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.UPLOAD_FILE_FAILED,threadID:a,uploadID:c})},cleanFiles:function(a){i.debug("clean files",a);if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.EMPTY_FILES,threadID:a})},loadingPreview:function(a,c){b("MessengerDispatcher").dispatch({type:j.Types.LINK_PREVIEW,threadID:a,match:c})},loadingShareData:function(a){b("MessengerDispatcher").dispatch({type:j.Types.LOADING_SHARE_DATA,threadID:a})},loadedShareData:function(a,c){b("MessengerDispatcher").dispatch({type:j.Types.LOADED_SHARE_DATA,threadID:a,attachmentData:c})},removeSharePreview:function(a){b("MessengerDispatcher").dispatch({type:j.Types.REMOVE_SHARE_PREVIEW,threadID:a})}};function k(a,b){return a.detailView==null}function l(a){var c=b("MessengerURISerializer").deserialize(new(b("URI"))(window.location.href));a=a(c);var d=k(c,a);a&&b("goURI")(b("MessengerURISerializer").serialize(Object.assign(c,a)),!1,d)}e.exports=j}),null);
__d("MercuryTagHelper",[],(function(a,b,c,d,e,f){"use strict";a={get:function(a,b){a=a.find(function(a){return a.startsWith(b)});return a&&a.substr(a.indexOf(":")+1)}};e.exports=a}),null);
__d("EmojiLikeUtils",["EmojiLikeConstants","MercuryTagHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){!a.tags?a.tags=[g(b)]:a.tags.push(g(b));return a}function g(a){var c=b("EmojiLikeConstants").TAG_PREFIX_NEW;return c+":"+a}function c(a,b){!a.tags?a.tags=[h(b)]:a.tags.push(h(b));return a}function h(a){return b("EmojiLikeConstants").SOURCE_TAG_PREFIX+":"+a}function d(a){return i(a)!=null}function i(a){if(!a.tags)return null;var c=b("MercuryTagHelper").get(a.tags,b("EmojiLikeConstants").TAG_PREFIX_NEW);return c?c:b("MercuryTagHelper").get(a.tags,b("EmojiLikeConstants").TAG_PREFIX_OLD)}e.exports={getEmojiSize:i,isEmojiLike:d,setEmojiSize:a,setEmojiSource:c}}),null);
__d("MercuryAttachment",["cx","EmojiLikeUtils","MercuryAttachmentContentType","MercuryAttachmentType","MercuryAudioType","StoryAttachmentStyle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=function(a){return a===Object(a)},i="_1c_u",j=new Set([b("MercuryAttachmentType").ANIMATED_IMAGE,b("MercuryAttachmentType").PHOTO,b("MercuryAttachmentType").VIDEO,b("MercuryAttachmentType").THIRDPARTYSTICKER]),k={getAttachIconClass:function(a){__p&&__p();switch(a){case b("MercuryAttachmentContentType").PHOTO:return"_y2-";case b("MercuryAttachmentContentType").VIDEO:return"_y2_";case b("MercuryAttachmentContentType").MUSIC:return"_y30";case b("MercuryAttachmentContentType").VOICE:return"_y31";case b("MercuryAttachmentContentType").TEXT:return"_y32";case b("MercuryAttachmentContentType").PDF:return"_1k9k";case b("MercuryAttachmentContentType").RICHTEXT:return"_1k9l";case b("MercuryAttachmentContentType").SPREADSHEET:return"_1k9p";case b("MercuryAttachmentContentType").PRESENTATION:return"_1k9r";case b("MercuryAttachmentContentType").ARCHIVE:return"_1k9s";case b("MercuryAttachmentContentType").MSWORD:return"_y33";case b("MercuryAttachmentContentType").MSXLS:return"_y34";case b("MercuryAttachmentContentType").MSPPT:return"_y35"}return"_y36"},getAttachIconClassByMime:function(a){return this.getAttachIconClass(this.getAttachTypeByMime(a))},getAttachTypeByMime:function(a){__p&&__p();if(a.startsWith("image"))return b("MercuryAttachmentContentType").PHOTO;else if(a.startsWith("video"))return b("MercuryAttachmentContentType").VIDEO;else if(a.startsWith("audio"))return b("MercuryAttachmentContentType").MUSIC;else if(a.startsWith("text/plain"))return b("MercuryAttachmentContentType").TEXT;else if(a=="text/pdf"||a=="application/pdf"||a=="application/vnd.pdf"||a=="application/x-pdf")return b("MercuryAttachmentContentType").PDF;else if(a=="text/richtext"||a=="application/rtf"||a=="application/x-iwork-pages-sffkey")return b("MercuryAttachmentContentType").RICHTEXT;else if(a=="text/csv"||a=="application/x-iwork-numbers-sffkey")return b("MercuryAttachmentContentType").SPREADSHEET;else if(a=="application/x-iwork-keynote-sffkey")return b("MercuryAttachmentContentType").PRESENTATION;else if(a=="application/vnd.ms-cab-compressed"||a=="application/x-7z-compressed"||a=="application/x-ace-compressed"||a=="application/x-apple-diskimage"||a=="application/x-compress"||a=="application/x-compressed"||a=="application/x-gzip"||a=="application/x-rar-compressed"||a=="application/x-tar"||a=="application/x-zip-compressed"||a=="application/zip")return b("MercuryAttachmentContentType").ARCHIVE;else if(a=="application/msword"||a.startsWith("application/vnd.ms-word")||a.startsWith("application/vnd.openxmlformats-officedocument.wordprocessingml"))return b("MercuryAttachmentContentType").MSWORD;else if(a.startsWith("application/vnd.ms-excel")||a.startsWith("application/vnd.openxmlformats-officedocument.spreadsheetml"))return b("MercuryAttachmentContentType").MSXLS;else if(a.startsWith("application/vnd.ms-powerpoint")||a.startsWith("application/vnd.openxmlformats-officedocument.presentationml"))return b("MercuryAttachmentContentType").MSPPT;else return b("MercuryAttachmentContentType").UNKNOWN},convertRaw:function(a){__p&&__p();var c=[];for(var d=0;d<a.length;d++){var e=a[d];if(e.attach_type===b("MercuryAttachmentType").PHOTO)c.push(e);else if(e.filename){var f=k.getAttachTypeByMime(e.filetype),g={};g.attach_type=b("MercuryAttachmentType").FILE;g.name=e.filename;g.icon_type=f;g.url="";c.push(g)}}return c},get:function(a){__p&&__p();var c=[];a.attachments?c=a.attachments:a.raw_attachments&&(c=this.convertRaw(a.raw_attachments));var d=b("EmojiLikeUtils").getEmojiSize(a);d&&(c=c.concat([{attach_type:b("MercuryAttachmentType").EMOJI_LIKE,size:d}]));if(!(a.attachments&&a.attachments.length>0)){if(a.sticker_id)return c.concat([{attach_type:b("MercuryAttachmentType").STICKER}]);if(a.preview_attachments&&a.preview_attachments.length>0)return c.concat(a.preview_attachments)}return c},resizeContain:function(a,b){var c=a.width/a.height,d=b.width/b.height;if(d<c)return{width:Math.ceil(Math.min(a.height*d,b.width)),height:Math.ceil(Math.min(a.height,b.height))};else return{width:Math.ceil(Math.min(a.width,b.width)),height:Math.ceil(Math.min(a.width/d,b.height))}},isBubblePreferred:function(a){return this.isFileAttachment(a)},isPhotoAttachment:function(a){return!!(a.attach_type==b("MercuryAttachmentType").PHOTO||a.attach_type==b("MercuryAttachmentType").ANIMATED_IMAGE||a.attach_type==b("MercuryAttachmentType").THIRDPARTYSTICKER||a.attach_type==b("MercuryAttachmentType").FILE&&a.preview_url)},isPhotoGroupAttachment:function(a){return j.has(a.attach_type)},isSinglePhotoGroupAttachment:function(a){return!!(a.attachments&&a.attachments.length===1&&a.attachments[0]&&this.isPhotoGroupAttachment(a.attachments[0]))},isVideoAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").VIDEO},isShareAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").SHARE},isFileAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").FILE},isErrorAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").ERROR},isStickerAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").STICKER},isEmojiLikeAttachment:function(a){return a.attach_type===b("MercuryAttachmentType").EMOJI_LIKE},isVoiceAttachment:function(a){return!a.metadata?!1:a.metadata.type===b("MercuryAudioType").AudioClip||a.metadata.type===b("MercuryAudioType").VoiceMessageWithTranscript},hasAttribution:function(a){return!!a.app_attribution},isLightweightActionAttachment:function(a){return!!(k.isShareAttachment(a)&&a.share&&a.share.target!=null&&a.share.target.lwa_type!=null)},isSingleVideoAttachment:function(a){a=this.get(a).filter(h).filter(function(a){return this.isVideoAttachment(a)}.bind(this));return a.length===1},isSharedVideoAttachment:function(a){a=a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.subattachments&&a.share.subattachments[0];return!!(a&&a.target&&a.target.video_id)},isGenieSharedVideoAttachment:function(a){return!!(a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.style_list.indexOf(b("StoryAttachmentStyle").GENIE_MESSAGE)>-1&&a.share.target&&a.share.target.attachment&&this.isSharedVideoAttachment(a.share.target.attachment))},isSharedVideoAttachmentMessage:function(a){a=this.get(a).filter(h).filter(function(a){return this.isSharedVideoAttachment(a)||this.isGenieSharedVideoAttachment(a)}.bind(this));return a.length===1},getVideoElem:function(a,b){b=b.getMessageElement(a);if(!b)return null;a=b.getElementsByClassName(i);return a&&a.length?a[0]:b}};e.exports=k}),null);
__d("MercuryDisplayTimeFilterMessageRenderer",["fbt"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={renderFilteredContent:function(a){if(a.is_filtered_content_bh)return g._("This message was removed because it contains blocked or harmful links.");if(a.is_filtered_content_account)return g._("This message has been temporarily removed because the sender's account requires verification.");if(a.is_filtered_content_quasar)return g._("This message was removed because it contains blocked or harmful content.");return a.is_filtered_content_invalid_app?g._("This message was removed because the app it's being sent from is blocked from sending messages."):g._("This message has been temporarily removed because the sender's account requires verification, or it was identified as abusive.")}};e.exports=a}),null);
__d("MercuryGlobalActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MARK_ALL_READ:"mga-type:mark-all-read",MARK_ALL_SEEN:"mga-type:mark-all-seen"})}),null);
__d("MercuryLocalIDs",["PresenceUtil","randomInt"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={generateMessageID:function(a){a=a||Date.now();var c=b("randomInt")(0,4294967295),d=b("PresenceUtil").getSessionID();return"<"+a+":"+c+"-"+d+"@mail.projektitan.com>"},generateThreadID:function(a){return"root:"+g.generateOfflineThreadingID(a)},generateOfflineThreadingID:function(a){a=a||Date.now();var c=b("randomInt")(0,4294967295);c=("0000000000000000000000"+c.toString(2)).slice(-22);a=a.toString(2)+c;return h(a.slice(-63))}};function h(a){var b="";while(a!="0"){var c=0,d="";for(var e=0;e<a.length;e++)c=2*c+parseInt(a[e],10),c>=10?(d+="1",c-=10):d+="0";b=c.toString()+b;a=d.slice(d.indexOf("1"))}return b}e.exports=g}),null);
__d("MercurySingletonProvider",["CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1={},this.$2=a}a.prototype.getForFBID=function(a){this.$1[a]||(this.$1[a]=new this.$2(a));return this.$1[a]};a.prototype.get=function(){return this.getForFBID(b("CurrentUser").getID())};a.mock=function(a){throw new Error("MercurySingletonProvider.mock() must only be used in tests.")};e.exports=a}),null);
__d("MessengerMQTTConnectionEvents",[],(function(a,b,c,d,e,f){"use strict";e.exports={DELTA_EVENT:"messenger-mqtt-delta",STREAM_DISCONNECT:"messenger-mqtt-stream-disconnect",STREAM_CONNECTING:"messenger-mqtt-stream-connecting",STREAM_CONNECT:"messenger-mqtt-stream-connect",STATE_CONNECTED:"Connected",STATE_DISCONNECTED:"Disconnected",STATE_CONNECTING:"Connecting",TYP:"messenger-mqtt-typ"}}),null);
__d("MessengerMQTTGating",["gkx"],(function(a,b,c,d,e,f){"use strict";var g={_forcedOff:!1,isEnabled:function(){return b("gkx")("AT4L8DlAE0WEKOKYkeJWzHDsRi3-ZWFYr4agMbkLtMUBERlxiBLblqdrc15ka2y0CqeZkLHc9yfq9QS1H3akL6e9")&&!g._forcedOff},turnOff:function(){g._forcedOff=!0}};e.exports=g}),null);
__d("MercurySyncEventsProxy",["Arbiter","Bootloader","ChannelConstants","MercurySingletonProvider","MessengerMQTTConnectionEvents","MessengerMQTTGating","ifRequired","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={DELTA:"DELTA",FAKE_DFF:"FAKE_DFF",FLOW:"FLOW",FLOW_REJECT:"FLOW_REJECT",INIT:"MercurySyncDeltaHandler/initSeqID",CONNECTED:"CONNECTED",RECONNECTING:"RECONNECTING",SHUTDOWN:"SHUTDOWN",TYP:"TYP"};h.getArbiterTypeForFBID=function(a,event){return a+"/"+event};h.getForFBID=function(a){return i.getForFBID(a)};h.get=function(){return i.get()};function h(a){this.$2=[],this.$3=[],this.$1=a,this.init()}h.prototype.getArbiterType=function(event){return h.getArbiterTypeForFBID(this.$1,event)};h.prototype.init=function(){__p&&__p();this.$2.forEach(function(a){return b("Arbiter").unsubscribe(a)});this.$3.forEach(function(a){return b("ifRequired")("ChannelConnection",function(b){return b.unsubscribe(a)})});var a=[],c=[],d=b("MessengerMQTTGating").isEnabled(),e=d?b("MessengerMQTTConnectionEvents").DELTA_EVENT:b("ChannelConstants").getArbiterType("delta");a.push(b("Arbiter").subscribe(e,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.DELTA)].concat(d))}.bind(this)),b("Arbiter").subscribe("messenger-mqtt-drop-down-to-channel",function(){return this.init()}.bind(this)));!d?(a.push(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("deltaflow"),function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.FLOW)].concat(d))}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("deltaflowreject"),function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.FLOW_REJECT)].concat(d))}.bind(this))),b("Bootloader").loadModules(["ChannelConnection","ChannelConnectionEvents"],function(a,d){__p&&__p();c.push(a.subscribe(d.CONNECTED,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.CONNECTED)].concat(d))}.bind(this)),a.subscribe(d.RECONNECTING,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.RECONNECTING)].concat(d))}.bind(this)),a.subscribe(d.SHUTDOWN,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.SHUTDOWN)].concat(d))}.bind(this)))}.bind(this),"MercurySyncEventsProxy")):a.push(b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").STREAM_CONNECT,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.CONNECTED)].concat(d))}.bind(this)),b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").STREAM_DISCONNECT,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.SHUTDOWN)].concat(d))}.bind(this)),b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").STREAM_CONNECTING,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.RECONNECTING)].concat(d))}.bind(this)));a.push(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType(b("ChannelConstants").FAKE_DFF),function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.FAKE_DFF)].concat(d))}.bind(this)));d&&b("gkx")("AT7KYLPJG-7HMR3OV17P-J93Y-4H-lvVA1U7hnkCV5WMAPoQljZmU4Y0vUCOCIcHzjjDZsHhOFrVW-1H0YcHEUMQ")?a.push(b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").TYP,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.TYP)].concat(d))}.bind(this))):a.push(b("Arbiter").subscribe([b("ChannelConstants").getArbiterType("typ"),b("ChannelConstants").getArbiterType("ttyp")],function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(g.TYP)].concat(d))}.bind(this)));this.$2=a;this.$3=c};h.Events=g;var i=new(b("MercurySingletonProvider"))(h);e.exports=h}),null);
__d("MercurySyncDeltaTypes",[],(function(a,b,c,d,e,f){"use strict";a={AdminAddedToGroupThread:"AdminAddedToGroupThread",AdminRemovedFromGroupThread:"AdminRemovedFromGroupThread",AdminTextMessage:"AdminTextMessage",ChangeViewerStatus:"ChangeViewerStatus",DeliveryReceipt:"DeliveryReceipt",ForcedFetch:"ForcedFetch",MarkRead:"MarkRead",MarkUnread:"MarkUnread",MarkFolderSeen:"MarkFolderSeen",MessageDelete:"MessageDelete",NewMessage:"NewMessage",NoOp:"NoOp",PagesManagerEvent:"PagesManagerEvent",ParticipantLeftGroupThread:"ParticipantLeftGroupThread",ParticipantsAddedToGroupThread:"ParticipantsAddedToGroupThread",ReadReceipt:"ReadReceipt",ReplaceMessage:"ReplaceMessage",RTCEventLog:"RTCEventLog",ThreadAction:"ThreadAction",ThreadDelete:"ThreadDelete",ThreadFolder:"ThreadFolder",ThreadMuteSettings:"ThreadMuteSettings",ThreadName:"ThreadName",JoinableMode:"JoinableMode",ApprovalMode:"ApprovalMode",ApprovalQueue:"ApprovalQueue",ClientPayload:"ClientPayload",GenieMessage:"GenieMessage",MontageMessage:"MontageMessage",RtcCallData:"RtcCallData"};e.exports=a}),null);
__d("MercurySyncFakeDFFSender",["Arbiter","ChannelConstants","MercurySingletonProvider","MercurySyncDeltaTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ChannelConstants").getArbiterType(b("ChannelConstants").FAKE_DFF);a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$1=a}a.prototype.sendGlobalDFF=function(){b("Arbiter").inform(g,{obj:{delta:{"class":b("MercurySyncDeltaTypes").ForcedFetch},queue:this.$1}})};a.prototype.sendThreadDFF=function(a,c){b("Arbiter").inform(g,{obj:{delta:{"class":b("MercurySyncDeltaTypes").ForcedFetch,threadKey:{otherUserFbId:a,threadFbId:c}},queue:this.$1}})};a.prototype.sendMessageDFF=function(a,c,d){b("Arbiter").inform(g,{obj:{delta:{"class":b("MercurySyncDeltaTypes").ForcedFetch,threadKey:{otherUserFbId:a,threadFbId:c},messageId:d},queue:this.$1}})};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryThreadInfo",["MercuryIDs","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={canReply:function(a){return!!(a.is_subscribed&&(a.can_reply===undefined||a.can_reply)&&!a.has_email_participant&&!a.read_only)},getMuteSetting:function(a){return a.mute_until?a.mute_until:undefined},isEmptyLocalThread:function(a){return b("MercuryIDs").tokenize(a.thread_id).type==="root"&&!a.timestamp},isMuted:function(a){return g.getMuteSetting(a)!==undefined},areMentionsMuted:function(a){return a.mentions_mute_mode===1},areReactionsMuted:function(a){return a.reactions_mute_mode===1},isNewEmptyLocalThread:function(a){return!!(g.isEmptyLocalThread(a)&&a.participants&&a.participants.length===0)},showComposer:function(a){return!!(a.is_subscribed&&(a.can_reply||!a.cannot_reply_reason||a.cannot_reply_reason===b("MessengerThreadCannotReplyReason").BLOCKED)&&!a.has_email_participant&&!a.read_only)},isColdOpen:function(a){return!!(a.is_canonical_user&&(a.message_count===0||!a.timestamp))}};e.exports=g}),null);
__d("MercuryThreadInformer",["ArbiterMixin","LogHistory","MercuryAssert","MercurySingletonProvider","mixin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("LogHistory").getInstance("mercury_informer");c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;a.get=function(){return i.get()};a.getForFBID=function(a){return i.getForFBID(a)};function a(a){g.constructor.call(this),this.$MercuryThreadInformer1=a,this.$MercuryThreadInformer2={},this.$MercuryThreadInformer3={},this.$MercuryThreadInformer4={},this.$MercuryThreadInformer5={},this.$MercuryThreadInformer6=!1,this.$MercuryThreadInformer7=!1,this.$MercuryThreadInformer8=!1,this.$MercuryThreadInformer9={},this.$MercuryThreadInformer10={},this.$MercuryThreadInformer11={},this.$MercuryThreadInformer12=0}a.prototype.updatedThread=function(a){this.$MercuryThreadInformer3[a]=!0,this.$MercuryThreadInformer13()};a.prototype.invalidatedThread=function(a){this.$MercuryThreadInformer4[a]=!0,this.$MercuryThreadInformer13()};a.prototype.deletedThread=function(a){this.$MercuryThreadInformer2[a]=!0,this.$MercuryThreadInformer13()};a.prototype.updatedThreadlist=function(){this.$MercuryThreadInformer6=!0,this.$MercuryThreadInformer13()};a.prototype.updatedUnseenState=function(){this.$MercuryThreadInformer7=!0,this.$MercuryThreadInformer13()};a.prototype.updatedUnreadState=function(){this.$MercuryThreadInformer8=!0,this.$MercuryThreadInformer13()};a.prototype.changedThreadReadState=function(a,b,c){(!this.$MercuryThreadInformer5[a]||this.$MercuryThreadInformer5[a].timestamp<c)&&(this.$MercuryThreadInformer5[a]={mark_as_read:b,timestamp:c}),this.$MercuryThreadInformer13()};a.prototype.receivedMessage=function(a){b("MercuryAssert").isThreadID(a.thread_id);var c=a.thread_id;this.$MercuryThreadInformer9[c]||(this.$MercuryThreadInformer9[c]=[]);this.$MercuryThreadInformer9[c].push(a);this.updatedThread(c)};a.prototype.reorderedMessages=function(a,b){this.$MercuryThreadInformer10[a]={source:b},this.$MercuryThreadInformer13()};a.prototype.updatedMessage=function(a,b,c){this.$MercuryThreadInformer11[a]||(this.$MercuryThreadInformer11[a]={}),this.$MercuryThreadInformer11[a][b]={source:c},this.updatedThread(a)};a.prototype.synchronizeInforms=function(a){this.$MercuryThreadInformer12++;try{a()}catch(a){throw a}finally{this.$MercuryThreadInformer12--,this.$MercuryThreadInformer13()}};a.prototype.listen=function(a,b){return this.subscribe("threads-updated",function(c,d){d[a]&&b(a)})};a.prototype.$MercuryThreadInformer13=function(){__p&&__p();if(!this.$MercuryThreadInformer12){var a=this.$MercuryThreadInformer2,b=this.$MercuryThreadInformer3,c=this.$MercuryThreadInformer4,d=this.$MercuryThreadInformer5,e=this.$MercuryThreadInformer6,f=this.$MercuryThreadInformer7,g=this.$MercuryThreadInformer8,h=this.$MercuryThreadInformer9,i=this.$MercuryThreadInformer10,j=this.$MercuryThreadInformer11;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=!1;this.$MercuryThreadInformer7=!1;this.$MercuryThreadInformer8=!1;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};var k=Object.keys(b);(k.length||e)&&this.inform("threadlist-updated",k);k.length&&this.$MercuryThreadInformer14("threads-updated",b);for(var e in c){this.$MercuryThreadInformer14("thread-invalidated",c);break}for(var e in d){this.$MercuryThreadInformer14("thread-read-changed",d);break}for(e in a){this.$MercuryThreadInformer14("threads-deleted",a);break}f&&this.$MercuryThreadInformer14("unseen-updated",null);g&&this.$MercuryThreadInformer14("unread-updated",null);for(e in h){this.$MercuryThreadInformer14("messages-received",h);break}for(e in i){this.$MercuryThreadInformer14("messages-reordered",i);break}for(e in j){this.$MercuryThreadInformer14("messages-updated",j);break}}};a.prototype.$MercuryThreadInformer14=function(a,b){a==="threads-updated"&&h.debug(a,JSON.stringify(b)),this.inform(a,b)};var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerPersonas.bs",["bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){if(a==null)return 0;else{var b=g[a.id];if(b!==undefined)return 0;else{g[a.id]=a;return 0}}}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(g[a]))}f.personas=g;f.addPersona=a;f.getNow=c}),null);
__d("MessengerJoinableModeType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRIVATE:0,JOINABLE:1})}),null);
__d("MessengerThreadUtils.bs",["FBID.bs","bs_caml_obj","MercuryIDs","MessagingTag","ImmutableObject","MessengerJoinableModeType","MessengerObjectAssociationType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){return c.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a)}).length<=1}function h(a,c,d,e){var f=b("MercuryIDs").tokenize(c),h=f.type;f=f.value;var i=h==="user";return new(b("ImmutableObject"))({thread_id:c,participants:Array.from(d),admin_ids:[],name:"",snippet:"",snippet_sender:null,unread_count:e==null?0:e,message_count:0,image_src:null,timestamp:0,other_user_fbid:i?b("FBID.bs").ofStringExn(f):null,is_canonical_user:h==="user",is_canonical:g(a,d),is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:undefined,cannot_reply_reason:null,comm_item_owners:null,comm_source_id:null,comm_status:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,group_approval_queue:null,groups_sync_fb_url:null,groups_sync_status:null,has_email_participant:!1,has_montage:!1,header_color:null,is_canonical_neo_user:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{mode:0,link:""},last_message_timestamp:0,last_message_type:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,object_association_type:null,page_comm_item_id:null,page_thread_info:null,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!1,rtc_call_data:null,server_timestamp:0,snippet_attachments:[],solid_color:null,subtitle:null,theme_id:null,thread_fbid:null,thread_type:null,gradient_colors:[],joinable_link:null})}function a(a,c,d,e){a=h(a,c,d,null);return b("ImmutableObject").set(a,{associated_object:e,name:e.name,joinable_mode:{mode:b("MessengerJoinableModeType").JOINABLE,link:""},object_association_type:b("MessengerObjectAssociationType").GENERAL_CHAT})}f.isCanonicalFromInitialParticipants=g;f.createNewLocalThread=h;f.createNewLocalGroupGeneralThread=a}),null);
__d("ReasonReact.bs",["bs_curry","React","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){a=[a,c].concat(d);return b("React").createElement.apply(null,a)}function g(){return 0}function h(){return 0}function i(){return!0}function j(){return"RenderNotImplemented"}function k(){return 0}function l(a){return a}function m(a,b){return 0}function n(a,c,d){var e=a.reasonProps;if(e==null)if(c)return[b("bs_curry")._1(c[0],a)];else throw[b("bs_caml_builtin_exceptions").invalid_argument,"A JS component called the Reason component "+(d+" which didn't implement the JS->Reason React props conversion.")];else return e}function o(a){__p&&__p();return b("React").createClass({displayName:a,subscriptions:null,statics:{jsPropsToReason:0,getDerivedStateFromProps:function(c,d){__p&&__p();var e=this;e=e==null?0:e.jsPropsToReason;c=n(c,e,a);e=c[0];if(e[3]!==l){c=d.reasonState;e=b("bs_curry")._1(e[3],c);if(e===c)return null;else return{reasonState:e,reasonStateVersion:d.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:d.reasonStateVersionUsedToComputeSubelements}}else return null}},self:function(a,b){var c=this;return[c.handleMethod,a,b,c.sendMethod,c.onUnmountMethod]},getInitialState:function(){var c=this;c=n(c.props,c.jsPropsToReason,a);return{reasonState:b("bs_curry")._1(c[0][9],0)}},componentDidMount:function(){var c=this,d=this,e=n(d.props,d.jsPropsToReason,a);e=e[0];if(e[4]!==h){d=d.state;d=d.reasonState;return b("bs_curry")._1(e[4],c.self(d,e[10]))}else return 0},componentDidUpdate:function(c,d){__p&&__p();var e=this,f=this,h=f.state;h=h.reasonState;var i=f.props,j=n(i,f.jsPropsToReason,a),k=j[0];if(k[5]!==g){i=c===i;i=i?j:n(c,f.jsPropsToReason,a);j=d.reasonState;c=e.self(h,k[10]);f=c[0];d=i[0][10];e=c[3];h=c[4];i=[f,j,d,e,h];return b("bs_curry")._1(k[5],[i,c])}else return 0},componentWillUnmount:function(){__p&&__p();var c=this,d=this,e=n(d.props,d.jsPropsToReason,a);e=e[0];d=d.state;d=d.reasonState;e[6]!==h&&b("bs_curry")._1(e[6],c.self(d,e[10]));d=c.subscriptions;if(d!==null){d.forEach(function(a){return b("bs_curry")._1(a,0)});return 0}else return 0},shouldComponentUpdate:function(c,d,e){__p&&__p();e=this;var f=this,g=f.props,h=n(f.props,f.jsPropsToReason,a);g=c===g;g=g?h:n(c,f.jsPropsToReason,a);c=g[0];g=d.reasonState;d=e.self(g,c[10]);if(c[7]!==i){e=f.state;g=e.reasonState;f=d[0];e=h[0][10];h=d[3];var j=d[4];f=[f,g,e,h,j];return b("bs_curry")._1(c[7],[f,d])}else return!0},onUnmountMethod:function(a){var b=this,c=b.subscriptions;if(c!==null){c.push(a);return 0}else{b.subscriptions=[a];return 0}},handleMethod:function(c){var d=this,e=this;return function(f){var g=e.state;g=g.reasonState;var h=n(e.props,e.jsPropsToReason,a);return b("bs_curry")._2(c,f,d.self(g,h[0][10]))}},sendMethod:function(c){__p&&__p();var d=this,e=this,f=n(e.props,e.jsPropsToReason,a);f=f[0];if(f[11]!==m){var g=[function(){return 0}],h=b("bs_curry")._1(f[11],c);return e.setState(function(a,c){__p&&__p();c=a.reasonState;c=b("bs_curry")._1(h,c);if(c===0)return null;else{var d;if(typeof c==="number")d=a;else switch(c.tag|0){case 0:d={reasonState:c[0]};break;case 1:g[0]=c[0];d=a;break;case 2:g[0]=c[1];d={reasonState:c[0]};break}if(d!==a)return d;else return null}},d.handleMethod(function(a,c){return b("bs_curry")._1(g[0],c)}))}else return 0},render:function(){var c=this,d=this,e=n(d.props,d.jsPropsToReason,a);e=e[0];d=d.state;d=d.reasonState;return b("bs_curry")._1(e[8],c.self(d,e[10]))}})}function c(a){return[a,o(a),[0],l,h,g,h,i,j,k,0,m,0]}var p=c,q=c,r=c,s=c;function d(a,c,d){a=a?a[0]:undefined;c=c?c[0]:undefined;var e=[d],f=d[12];if(f)return b("bs_curry")._2(f[0],a,c);else return b("React").createElement(d[1],{key:a,ref:c,reasonProps:e})}function e(a,b){var c=a[1].prototype;c.jsPropsToReason=[b];c=a[1];c.getDerivedStateFromProps=a[1].getDerivedStateFromProps.bind({jsPropsToReason:[b]});return a[1]}function t(a,c){var d=function(a){return b("bs_curry")._2(c,a,a.children)};d=[d];var e=a[1].prototype;e.jsPropsToReason=d;return a[1]}var u=c("interop");function v(a,c,d){var e=[function(e,f){var g=a,h=c,i=d;e=e;f=f;h=Object.assign(Object.assign({},h),{ref:f,key:e});f=[g,h].concat(i);return b("React").createElement.apply(null,f)}];return[u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],e]}function w(a){if(typeof Event==="function")return new Event(a);else{var b=document.createEvent("Event");b.initEvent(a,!0,!0);return b}}function x(){__p&&__p();var a=typeof window==="undefined"?undefined:window;if(a!==undefined){a=a.location.pathname;switch(a){case"":case"/":return 0;default:a=a.slice(1);var b=a[a.length-1|0];b=b==="/"?a.slice(0,-1):a;a=b.split("/");b=a.length-1|0;var c=0;while(!0){var d=c,e=b;if(e<0)return d;else{c=[a[e],d];b=e-1|0;continue}}}}else return 0}function y(){var a=typeof window==="undefined"?undefined:window;if(a!==undefined){a=a.location.hash;switch(a){case"":case"#":return"";default:return a.slice(1)}}else return""}function z(){var a=typeof window==="undefined"?undefined:window;if(a!==undefined){a=a.location.search;switch(a){case"":case"?":return"";default:return a.slice(1)}}else return""}function A(a){var b=typeof history==="undefined"?undefined:history,c=typeof window==="undefined"?undefined:window;if(b!==undefined&&c!==undefined){b.pushState(null,"",a);c.dispatchEvent(w("popstate"));return 0}else return 0}function B(){return[x(0),y(0),z(0)]}function C(a){var c=typeof window==="undefined"?undefined:window;if(c!==undefined){var d=function(){return b("bs_curry")._1(a,B(0))};c.addEventListener("popstate",d);return d}else return function(){return 0}}function D(a){var b=typeof window==="undefined"?undefined:window;if(b!==undefined){b.removeEventListener("popstate",a);return 0}else return 0}function E(){return 0}function F(){return[E]}function G(a,b){if(b[0]===E){b[0]=a;return[b]}else return 0}function H(a){a[0]=E;return 0}function I(a,c){return b("bs_curry")._1(a[0],c)}c=[A,C,D,B];A=[F,G,H,I];f.statelessComponent=p;f.statelessComponentWithRetainedProps=q;f.reducerComponent=r;f.reducerComponentWithRetainedProps=s;f.element=d;f.wrapReasonForJs=e;f.wrapReasonForJsWithChildren=t;f.createDomElement=a;f.wrapJsForReason=v;f.Router=c;f.RemoteAction=A}),null);
__d("XGroupsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/{idorvanity}/{?view}/{?post_id}/",{idorvanity:{type:"String",required:!0},view:{type:"Enum",enumType:1},post_id:{type:"Int"},rule_id:{type:"Int"},ref:{type:"String"},source_id:{type:"String"},notif_t:{type:"String"},nux:{type:"Enum",enumType:1},tip_id:{type:"Int"},feedback_id:{type:"FBID"},member_tag_id:{type:"FBID"},inner_tab:{type:"String"},section:{type:"Enum",enumType:1},thread_id:{type:"String"},autopopup_create_chat_dialog:{type:"Bool",defaultValue:!1},sorting_setting:{type:"String"},multi_events:{type:"String"},stories:{type:"Exists",defaultValue:!1},highlight_sections:{type:"Exists",defaultValue:!1},highlight_groupapps:{type:"Exists",defaultValue:!1},queue:{type:"Enum",enumType:1},composer_prefill:{type:"String"},hide_workplace_pagelet:{type:"Bool",defaultValue:!1},permalink_add_comment_nux_shown:{type:"Bool",defaultValue:!1},comment_id:{type:"Int"},reply_comment_id:{type:"Int"}})}),null);
__d("bs_js_dict",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){delete a[b];return 0};function a(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e){var f=b[e];d[e]=[f,a[f]]}return d}function b(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=a[b[e]];return d}function c(a){__p&&__p();var b={};a=a;while(!0){var c=a;if(c){var d=c[0];b[d[0]]=d[1];a=c[1];continue}else return b}}function d(a){var b={},c=a.length;for(var d=0,c=c-1|0;d<=c;++d){var e=a[d];b[e[0]]=e[1]}return b}function e(a,b){var c={},d=Object.keys(b),e=d.length;for(var f=0,e=e-1|0;f<=e;++f){var g=d[f];c[g]=a(b[g])}return c}f.unsafeDeleteKey=g;f.entries=a;f.values=b;f.fromList=c;f.fromArray=d;f.map=e}),null);
__d("MessengerState.bs",["invariant","URI","FBID.bs","bs_list","bs_array","bs_block","bs_curry","Utils.bs","Arbiter","gkx","bs_js_dict","bs_caml_obj","JSLogger","FBIDCheck","immutable","bs_caml_array","MercuryIDs","CurrentUser","ReasonReact.bs","bs_js_primitive","MessagingTag","TypingStates","MercuryAssert","MercuryViewer","bs_caml_primitive","ImmutableObject","MercuryLocalIDs","ChannelConstants","bs_js_null_undefined","MercuryActionType","MercuryAttachment","MercuryThreadInfo","MessengerPersonas.bs","XGroupsController","MercuryThreadIDMap","PageCommItemStatus","MercuryPayloadSource","MercuryThreadActions","MessengerThreadUtils.bs","MercuryLogMessageType","MercuryServerRequests","MercuryThreadInformer","MercurySyncEventsProxy","bs_caml_builtin_exceptions","MercuryGlobalActionType","MercurySyncFakeDFFSender","MessengerGroupsSyncStatus","setTimeoutAcrossTransitions","MessagingGenericAdminTextType","MercuryDisplayTimeFilterMessageRenderer"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){return a[0]}function c(a){return a[1]}function d(a){return a[2]}function e(a){return a[3]}function h(a){return a[4]}function i(a){return a[5]}function j(a){return a[6]}function k(a){return a[7]}function l(a){return a[8]}function m(a){return a[9]}function n(a){var b=new Set();a.forEach(function(a){b.add(a);return 0});return b}function o(a){return a.reduce(function(a,c){if(a)return!0;else if(b("bs_caml_obj").caml_equal(c.action_type,b("MercuryGlobalActionType").MARK_ALL_SEEN))return c.folder===b("MessagingTag").PENDING;else return!1},!1)}function p(a,c){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&a.folder===b("MessagingTag").PENDING)return b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE);else return!1}var q=function(a,b){delete a[b];return 0};function r(a,c,d){a=a[c];if(a!==undefined){c=a[d];if(c!==undefined)return b("bs_curry")._2(q,a,d);else return 0}else return 0}function s(a,c){__p&&__p();var d=c.thread_fbid;if(d==null)if(c.type==="typ"||c.type==="page_typing"){c=b("FBID.bs").ofString(c.from.toString());if(c)return b("MercuryIDs").getThreadIDFromUserID(c[0]);else return null}else return null;else{c=b("MercuryThreadIDMap").getForFBID(a);return c.getClientIDFromServerIDNow(d.toString())}}var t=function(a,b){delete a[b];return 0},u=function(a,b){delete a[b];return 0};function v(a,c){__p&&__p();Object.keys(c).forEach(function(d){__p&&__p();var e={},f=c[d];if(f!==undefined){var g=f[0];g.forEach(function(c){var b=a[c];if(b!==undefined){e[c]=b;return 0}else return 0});if(Object.keys(e).length===g.length){b("bs_curry")._2(u,c,d);return b("bs_curry")._1(f[1],e)}else return 0}else return 0});return 0}function w(a,c,d){c=c.specific_to_list;if(c==null){d=b("MercuryIDs").tokenize(d);if(d.type!=="user"||d.value.length===0)return[a];else return[b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(d.value)),a]}else return c}function x(a,c,d){var e=b("MercuryIDs").tokenize(d),f=e.type==="user",g=c.specific_to_list;g=f?!0:g==null?!1:b("MessengerThreadUtils.bs").isCanonicalFromInitialParticipants(a,g);if(g||f)a=w(a,c,d);else{var h=c.specific_to_list;a=h==null?[]:h}return new(b("ImmutableObject"))({admin_ids:[],admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:undefined,cannot_reply_reason:null,comm_item_owners:null,comm_source_id:null,comm_status:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,gradient_colors:[],group_approval_queue:null,groups_sync_fb_url:null,groups_sync_status:null,has_email_participant:!1,has_montage:!1,header_color:null,is_canonical_neo_user:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{link:"",mode:0},last_message_timestamp:0,last_message_type:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,page_comm_item_id:null,page_thread_info:null,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!0,rtc_call_data:null,server_timestamp:0,solid_color:null,subtitle:null,theme_id:null,thread_fbid:null,thread_type:null,thread_id:d,participants:a,name:"",snippet:c.body,snippet_attachments:[],snippet_sender:c.author,unread_count:0,message_count:0,image_src:null,timestamp:c.timestamp,other_user_fbid:f?b("FBID.bs").ofStringExn(e.value):null,is_canonical_user:f,is_canonical:g,is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,object_association_type:null,joinable_link:null})}function y(a){var c=a.log_message_type;if(!(c==null)&&b("bs_caml_obj").caml_equal(c,b("MercuryLogMessageType").SERVER_ERROR))return b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE);else return!1}function z(a,b){var c=a.thread_fbid,d=a.other_user_fbid;a=a.is_from_iris;if(b==null||!b)b=1;else return!1;if(b===1)if(!(c==null)||!(d==null)||a)return!0;else return!1}function A(a,c,d,e){__p&&__p();e=z(d,e);var f=d.thread_id;if(f==null)return 0;else{b("MercuryAssert").isThreadID(f);var g=c[f];if(g!==undefined)return[g];else if(b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&!e){g=x(b("MercuryIDs").getParticipantIDFromUserID(a),d,f);c[f]=g;return[g]}else return 0}}function B(a,c,d){d=b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").LOG_MESSAGE)||b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)?d==null?!0:!d:z(c,d);if(a.server_timestamp!==0&&c.timestamp<a.server_timestamp)return d;else return!1}function aa(a,c,d,e){var f=d.offline_threading_id;if(!(f==null)&&c.server_timestamp!==0&&b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&f.length>0&&b("bs_caml_obj").caml_notequal(d.author,b("MercuryIDs").getParticipantIDFromUserID(a)))if(e.has(f))return!0;else{e.add(f);return!1}else return!1}function C(a,c,d,e){__p&&__p();var f=new Set(d.participants);Object.assign(d,{participants:Array.from(d.participants)});var g=b("MercurySyncFakeDFFSender").getForFBID(a);e.forEach(function(a){__p&&__p();if(f.has(a))return 0;else{d.participants.push(a);if(b("bs_caml_obj").caml_equal(a,c)){Object.assign(d,{is_subscribed:!0,can_reply:!0,cannot_reply_reason:null});g.sendThreadDFF(null,d.thread_fbid);return 0}else return 0}});return 0}function D(a,c,d,e){var f=new Set(e);Object.assign(d,{participants:d.participants.filter(function(a){return!f.has(a)})});Object.assign(d,{admin_ids:d.admin_ids.filter(function(a){return!f.has(a)})});f.has(a)&&Object.assign(d,{is_subscribed:!1});e=b("MercuryServerRequests").getForFBID(c);e.fetchThreadData([d.thread_id],null);return 0}function E(a,b,c){var d=a.event_title,e=a.event_time;a=a.event_location_name;return{creator_id:null,latitude:null,location_address:null,longitude:null,note:"",related_event:{id:""},repeat_mode:null,seconds_to_notify_before:0,status:null,track_rsvp:b.track_rsvp,title:d==null?b.title:d,event_time:e==null?b.event_time:parseInt(e,10),location_name:a==null?b.location_name:a,event_members:c?c[0]:b.event_members,oid:b.oid,event_type:b.event_type}}function F(a,b){var c={};Object.keys(a).forEach(function(b){c[b]=a[b];return 0});c[b.guest_id]=b.guest_status;return c}function G(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.updatedThread(c);return 0}function H(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.deletedThread(c);return 0}function I(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.changedThreadReadState(c,d,e);return 0}var J=function(a,b){delete a[b];return 0};function K(a){__p&&__p();var c=[-1],d=[null],e=Math.floor(Date.now()/1e3);b("bs_js_dict").entries(a).forEach(function(a){a=a[1];var b=a.event_time;if(b>e&&(c[0]<0||c[0]>b)){c[0]=b;d[0]=a;return 0}else return 0});return d[0]}var L=function(a,b){delete a[b];return 0};function M(a,b,c,d,e){__p&&__p();c.timestamp!==0&&I(a,b.thread_id,e,c.timestamp);if(b.timestamp===0){d.add(b.thread_id);return!1}else{c=b.unread_count===0;if(c===e)return!1;else{Object.assign(b,{unread_count:e?0:1});G(a,b.thread_id);return!0}}}function ba(c,d,e,f,a,g){__p&&__p();var h=e.action_type,i=g==null?!1:g;(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(h,b("MercuryActionType").LOG_MESSAGE))&&((e.is_unread||e.skip_bump_thread)&&(d.unread_count===0&&e.skip_bump_thread||e.timestamp<=d.server_timestamp||Object.assign(d,{unread_count:d.unread_count+1|0})),Object.assign(d,{message_count:d.message_count+1|0,is_archived:!1}));var j=b("MercuryIDs").getParticipantIDFromUserID(c);if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").DELETE_THREAD)){Object.assign(d,{message_count:0});H(c,f);return 0}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").USER_GENERATED_MESSAGE)){d.unread_count===0&&b("bs_caml_obj").caml_equal(e.author,j)&&e.timestamp>=d.last_read_timestamp&&Object.assign(d,{last_read_timestamp:e.timestamp});var k=e.offline_threading_id;if(!(k==null)&&b("bs_caml_obj").caml_notequal(k,e.message_id)){Object.assign(d,{last_message_timestamp:e.timestamp});k=e.comm_status;k==null||Object.assign(d,{last_message_id:e.message_id})}k=e.comm_status;var m=d.comm_status;k==null||!(m==null)&&m.toUpperCase()!==b("PageCommItemStatus").FOLLOW_UP&&Object.assign(d,{comm_status:k});m=e.creator_info;m==null||b("bs_caml_obj").caml_equal(m.pageID,c)&&Object.assign(d,{folder:e.folder});k=d;m=e.author;var n=k.participants.indexOf(m);if(n>0){Object.assign(k,{participants:[m].concat(k.participants.slice(0,n),k.participants.slice(n+1|0))});return 0}else return 0}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").SEND_MESSAGE)){m=e.log_message_type;if(m==null){Object.assign(d,{snippet_attachments:e.attachments});return 0}else{if(b("bs_caml_obj").caml_equal(m,b("MercuryLogMessageType").THREAD_IMAGE)){k=e.log_message_data;n=k==null?null:k.image.preview_url;Object.assign(d,{image_src:n});G(c,f)}if(b("bs_caml_obj").caml_notequal(m,b("MercuryLogMessageType").SUBSCRIBE)&&b("bs_caml_obj").caml_notequal(m,b("MercuryLogMessageType").UNSUBSCRIBE)){Object.assign(d,{snippet_attachments:e.attachments});return 0}else return 0}}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").LOG_MESSAGE)){k=e.log_message_type;if(k==null)return 0;else if(b("bs_caml_obj").caml_equal(k,b("MercuryLogMessageType").SUBSCRIBE)&&!i){n=e.log_message_data;if(n==null)m=[];else{n=n.added_participants;m=n==null?[]:n}C(c,j,d,m);return G(c,f)}else if(b("bs_caml_obj").caml_equal(k,b("MercuryLogMessageType").UNSUBSCRIBE)&&!i){n=e.log_message_data;if(n==null)m=[];else{n=n.removed_participants;m=n==null?[]:n}D(j,c,d,m);return G(c,f)}else if(b("bs_caml_obj").caml_equal(k,b("MercuryLogMessageType").THREAD_IMAGE))if(i)return 0;else{n=e.log_message_data;m=n==null?null:n.image.preview_url;Object.assign(d,{image_src:m});return 0}else if(b("bs_caml_obj").caml_equal(k,b("MercuryLogMessageType").THREAD_NAME)){n=e.log_message_data;if(n==null)return 0;else{m=n.name;!(m==null)&&d.name===m||G(c,f);Object.assign(d,{name:n.name});return 0}}else if(b("bs_caml_obj").caml_equal(k,b("MercuryLogMessageType").GENERIC_ADMIN_TEXT)){m=c;n=d;k=e;var o=f;k=k.log_message_data;if(k==null)return 0;else{var p=k.untypedData;if(k.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_NICKNAME){var q=n.custom_nickname;if(!(q==null)){q=b("bs_js_dict").fromArray(b("bs_js_dict").entries(q));var r=p.nickname;r.trim().length>0?q[p.participant_id]=r:b("bs_curry")._2(L,q,p.participant_id);Object.assign(n,{custom_nickname:q})}G(m,o)}else if(k.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_ICON)b("MercuryThreadActions").getForFBID(m).updateCustomLike(o,p.thread_icon);else if(k.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_THEME){if(!b("gkx")("AT4vZBWyiZL1KZrir2lJt4vVNMIYu8sDbA3PtNwJWZh5seJSYZeYdmCgqH3wgiUS4PfslnEPm3wz9jSsjDINBCSy")){r=p.theme_color;if(r==null)Object.assign(n,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});else if(r.length>0){q="#"+r.slice(2);Object.assign(n,{solid_color:q,header_color:q,footer_color:q,gradient_colors:[q]})}else Object.assign(n,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});G(m,o)}}else if(k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE){var s={},t=p.event_creator_id;n.participants.forEach(function(c){c=b("MercuryIDs").getUserIDFromParticipantID(c);if(c==null)return 0;else{var a=b("bs_caml_obj").caml_equal(c,t);s[c]=a?"GOING":"INVITED";return 0}});r=b("bs_js_dict").fromArray(b("bs_js_dict").entries(n.lightweight_events));q=p.event_time;q={track_rsvp:p.event_track_rsvp,title:p.event_title,event_time:q==null?0:parseInt(q,10),location_name:p.event_location_name,event_members:s,oid:p.event_id,event_type:p.event_type};Object.assign(n,{lightweight_event:q});r[p.event_id]=Object.assign({},q);Object.assign(n,{lightweight_events:r});G(m,o)}else if(k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE||k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME||k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE||k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION){q=n.lightweight_event;if(!(q==null)){r=b("bs_js_dict").fromArray(b("bs_js_dict").entries(n.lightweight_events));q.oid===p.event_id&&Object.assign(n,{lightweight_event:E(p,q,[q.event_members])});q=r[p.event_id];q!==undefined&&(r[p.event_id]=E(p,q,0),Object.assign(n,{lightweight_events:r}))}G(m,o)}else if(k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP){q=b("bs_js_dict").fromArray(b("bs_js_dict").entries(n.lightweight_events));r=n.lightweight_event;if(!(r==null)&&r.oid===p.event_id){var u=F(r.event_members,p);Object.assign(n,{lightweight_event:E(p,r,[u])})}r=q[p.event_id];if(r!==undefined){u=F(r.event_members,p);q[p.event_id]=E(p,r,[u]);Object.assign(n,{lightweight_events:q})}G(m,o)}else if(k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE||k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY){r=b("bs_js_dict").fromArray(b("bs_js_dict").entries(n.lightweight_events));b("bs_curry")._2(J,r,p.event_id);Object.assign(n,{lightweight_event:K(r),lightweight_events:r});G(m,o)}return 0}}else return 0}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").CHANGE_READ_STATUS)){u=M(c,d,e,a,e.mark_as_read);u&&Object.assign(d,{last_read_timestamp:d.last_message_timestamp});q=!d.read_only&&d.folder===b("MessagingTag").INBOX;if(u&&i){k=b("MercuryServerRequests").getForFBID(c);k.changeThreadReadStatus(d.thread_id,e.mark_as_read,e.source,d.last_read_timestamp,q,d.last_message_type)}return 0}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").CHANGE_ARCHIVED_STATUS))if(d.is_archived!==e.archived){p=d.comm_status;if(p==null)Object.assign(d,{is_archived:e.archived});else{n=e.archived;Object.assign(d,{is_archived:e.archived,comm_status:n?b("PageCommItemStatus").DONE:b("PageCommItemStatus").TODO})}return G(c,f)}else return 0;else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").CHANGE_PINNED_STATUS))if(d.is_pinned!==e.is_pinned){Object.assign(d,{is_pinned:e.is_pinned});return G(c,f)}else return 0;else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS))if(d.is_page_follow_up!==e.is_page_follow_up){Object.assign(d,{is_page_follow_up:e.is_page_follow_up});return G(c,f)}else return 0;else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").CHANGE_FOLDER)){r=e.new_folder;if(r==null||d.folder===r)return 0;else{m=d.comm_status;m==null?Object.assign(d,{folder:e.new_folder}):r===b("MessagingTag").OTHER?Object.assign(d,{folder:e.new_folder,comm_status:b("PageCommItemStatus").SPAM}):r===b("MessagingTag").INBOX?Object.assign(d,{folder:e.new_folder,comm_status:b("PageCommItemStatus").TODO}):Object.assign(d,{folder:e.new_folder});return G(c,f)}}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").DELETE_MESSAGES)){if(g==null||!g)o=1;else{Object.assign(d,{snippet:"...",snippet_attachments:null,snippet_sender:null});return G(c,f)}if(o===1){a=e.message_ids;if(a==null)return 0;else{Object.assign(d,{message_count:d.message_count-a.length|0});return 0}}}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").CHANGE_MUTE_SETTINGS)){u=e.reactions_mute_mode;i=e.mentions_mute_mode;if(u==null)if(i==null){k=e.mute_until;Object.assign(d,{mute_until:k==null?undefined:k})}else Object.assign(d,{mentions_mute_mode:i});else Object.assign(d,{reactions_mute_mode:u});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").BLOCK_STATUS_CHANGED)){Object.assign(d,{can_reply:e.canViewerReply});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").ADD_PARTICIPANTS)){C(c,j,d,e.participants);return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").CHANGE_FLAG)){q=d.page_thread_info;Object.assign(d,{page_thread_info:Object.assign(q==null?{}:q,{flagged:e.mark_as_flag})});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").MOVE_PENDING_TO_INBOX)){d.folder===b("MessagingTag").PENDING&&Object.assign(d,{folder:b("MessagingTag").INBOX});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").UPDATE_CUSTOM_LIKE)){Object.assign(d,{custom_like_icon:e.custom_like});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").ADD_GROUP_ADMINS)){p=e.added_admin_ids;p==null||Object.assign(d,{admin_ids:d.admin_ids.concat(p.filter(function(a){return d.admin_ids.indexOf(a)===-1}))});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").REMOVE_GROUP_ADMINS)){var v=e.removed_admin_ids;v==null||Object.assign(d,{admin_ids:d.admin_ids.filter(function(a){return v.indexOf(a)===-1})});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").JOINABLE_MODE)){Object.assign(d,{joinable_mode:e.joinable_mode});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").APPROVAL_MODE)){Object.assign(d,{approval_mode:e.approval_mode});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").APPROVAL_QUEUE)){n=e.added_id;n==null||d.approval_queue_ids.indexOf(n)===-1&&Object.assign(d,{approval_queue_ids:d.approval_queue_ids.concat([n])});var w=e.removed_id;w==null||Object.assign(d,{approval_queue_ids:d.approval_queue_ids.filter(function(a){return b("bs_caml_obj").caml_notequal(a,w)})});var x=e.removed_group_id;if(!(x==null)){m=d.group_approval_queue;Object.assign(d,{group_approval_queue:(m==null?[]:m).filter(function(a){return a.requester.id!==x})})}return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").IS_PIN_PROTECTED)){Object.assign(d,{is_pin_protected:e.is_pin_protected});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").UPDATE_RTC_CALL_DATA)){r=e.initiator_fbid;if(r==null){g=d.rtc_call_data;o=g==null?undefined:g.initiator_fbid}else o=r;Object.assign(d,{rtc_call_data:new(b("ImmutableObject"))({call_state:e.call_state,server_info_data:e.server_info_data,initiator_fbid:o})});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").UPDATE_COMM_STATUS)){Object.assign(d,{comm_status:e.comm_status});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").UPDATE_COMM_ITEM_OWNER)){a=e.id;k=a==null?{nodes:[]}:{nodes:[{admin:{id:a,name:e.name,profile_picture:{uri:e.profile_pic_uri}}}]};Object.assign(d,{comm_item_owners:k});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").EVENT_RSVP_CHANGED)){i=d.participants_event_status;u=(i==null?[]:i).filter(function(a){return a.participant_id!==e.actor_fbid});u.push({participant_id:e.actor_fbid,event_status:e.rsvp_status});Object.assign(d,{participants_event_status:u});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED)){j=e.groups_sync_action;q=0;!(j==null)&&b("bs_caml_obj").caml_equal(j,b("MessengerGroupsSyncStatus").OPT_IN)?Object.assign(d,{groups_sync_status:e.groups_sync_status_string}):q=1;q===1&&Object.assign(d,{groups_sync_status:e.groups_sync_status_string,groups_sync_fb_url:null});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE)){p=e.groups_sync_action;if(p==null)Object.assign(d,{groups_sync_fb_url:null});else if(b("bs_caml_obj").caml_equal(p,b("MessengerGroupsSyncStatus").OPT_IN)){n=new(b("URI"))(document.URL);m=n.getDomain();g=b("XGroupsController").getURIBuilder().setString("idorvanity",e.fb_group_id).getURI().setDomain(m==null?"":m.replace("messenger.com","facebook.com")).setPort(n.getPort()).setProtocol("https");Object.assign(d,{groups_sync_fb_url:g.toString()})}else Object.assign(d,{groups_sync_fb_url:null});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").DESCRIPTION_CHANGED)){Object.assign(d,{description:e.group_thread_description_string});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").UPDATE_THREAD_THEME)){Object.assign(d,{solid_color:e.solid_color,header_color:e.header_color,footer_color:e.footer_color,gradient_colors:e.gradient_colors,theme_id:e.theme_id});return G(c,f)}else if(b("bs_caml_obj").caml_equal(h,b("MercuryActionType").UPDATE_JOINABLE_LINK)){Object.assign(d,{joinable_link:e.joinable_link});return G(c,f)}else return 0}function N(a,c,d){d=c.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(c):d?d[0]:c.body;var e=c.raw_attachments;e=!(e==null)&&e.length>0?b("MercuryAttachment").convertRaw(e):c.attachments;var f=c.log_message_type;return Object.assign(a,{snippet:d,snippet_attachments:e,snippet_sender:f==null?c.author:null})}function ca(a,c){a=a[c];if(a!==undefined)return b("MercuryThreadInfo").isEmptyLocalThread(a);else return!1}function O(a,c,d){__p&&__p();return b("bs_array").fold_left(function(c,e){__p&&__p();if(e.tag){var f=e[0];if(typeof f==="number"){var g=c,h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(g[6])),i=[];b("bs_js_dict").entries(h).forEach(function(a){var c=a[0];b("bs_js_dict").entries(a[1]).forEach(function(a){if(a[1]<Date.now()-3e4){i.push([c,a[0]]);return 0}else return 0});return 0});if(i.length===0)return g;else{i.forEach(function(a){return r(h,a[0],a[1])});return[g[0],g[1],g[2],g[3],g[4],g[5],h,g[7],g[8],g[9]]}}else switch(f.tag|0){case 0:b("bs_curry")._1(f[0],{blocked_ids:c[4]});return c;case 1:var j=c,l=d;g=f[0];var m=f[1],o=f[2],p=f[3],a=j[7],q={},w=[];g.forEach(function(c){var b=a[c];if(b!==undefined){q[c]=b;return 0}else{w.push(c);return 0}});if(w.length===0){b("bs_curry")._1(o,q);return j}else{var x=l[1],z=x[0].toString();l[1][0]=x[0]+1|0;l[0][0][z]=[g,o];x=b("MercuryServerRequests").getForFBID(j[0]);w.forEach(function(c){__p&&__p();var d=b("MercuryIDs").tokenize(c),e=d.type;d=d.value;if(e==="user"){e=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(d));d=b("MercuryIDs").getParticipantIDFromUserID(j[0]);var a=b("bs_caml_obj").caml_equal(e,d);a=b("MessengerThreadUtils.bs").createNewLocalThread(d,c,a?[d]:[d,e],null);j[7][c]=a;return v(j[7],l[0][0])}else return 0});x.fetchThreadData(w,p);b("bs_curry")._1(m,z);return j}case 2:b("bs_curry")._1(f[1],b("bs_js_primitive").undefined_to_opt(c[7][f[0]]));return c;case 3:c[7][f[0]]=f[1];return c;case 4:g=d[0][0];b("bs_curry")._2(u,g,f[0]);d[0][0]=g;return c}}else{o=e[0];if(typeof o==="number")switch(o){case 0:x=c;return[x[0],x[1],x[2],x[3],x[4],0,x[6],x[7],x[8],x[9]];case 1:p=c;return[p[0],p[1],p[2],p[3],p[4],p[5]+1|0,p[6],p[7],p[8],p[9]];case 2:m=c;z=d;z[0][0]={};z[1][0]=z[1][0];return[m[0],m[1],{},m[3],m[4],m[5],m[6],{},new Set(),m[9]]}else switch(o.tag|0){case 0:f=c;var C=o[0],D=b("bs_js_dict").fromArray(b("bs_js_dict").entries(f[1]));Object.keys(C).forEach(function(a){var c=C[a],d=b("Utils.bs").$pipe$unknown(b("bs_js_primitive").undefined_to_opt(D[a]),0);if(c>d){D[a]=c;return 0}else return 0});return[f[0],D,f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9]];case 1:g=c;e=o[0];var E=n(g[3]);b("bs_array").iter(function(a){E.add(a);return 0},e);return[g[0],g[1],g[2],E,g[4],g[5],g[6],g[7],g[8],g[9]];case 2:x=c;p=o[0];z=o[1];var F=n(x[4]);b("bs_array").iter(function(a){F.add(a);return 0},p);b("bs_array").iter(function(a){F["delete"](a);return 0},z);return[x[0],x[1],x[2],x[3],F,x[5],x[6],x[7],x[8],x[9]];case 3:m=c;f=o[0];var H=n(m[4]);b("bs_array").iter(function(a){if(H.has(a)){H["delete"](a);return 0}else{H.add(a);return 0}},f);return[m[0],m[1],m[2],m[3],H,m[5],m[6],m[7],m[8],m[9]];case 4:e=c;g=o[0];var I=n(e[3]);g.forEach(function(c){__p&&__p();var a=c.is_messenger_ignored;if(a==null)return 0;else if(a){I.add(b("MercuryIDs").getParticipantIDFromUserID(c.fbid));return 0}else{I["delete"](b("MercuryIDs").getParticipantIDFromUserID(c.fbid));return 0}});return[e[0],e[1],e[2],I,e[4],e[5],e[6],e[7],e[8],e[9]];case 5:p=c;z=o[0];return[p[0],p[1],p[2],p[3],p[4],z,p[6],p[7],p[8],p[9]];case 6:x=c;f=o[0];var J=b("bs_js_dict").fromArray(b("bs_js_dict").entries(x[6]));f.forEach(function(a){var c=a.author;if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&b("bs_caml_obj").caml_notequal(c,b("MercuryViewer").getID())){a=a.thread_id;return r(J,a,c)}else return 0});return[x[0],x[1],x[2],x[3],x[4],x[5],J,x[7],x[8],x[9]];case 7:m=c;g=o[0];e=s(m[0],g);if(e==null)return m;else{z=b("FBID.bs").ofString(g.from.toString());if(z){b("MessengerPersonas.bs").addPersona(g.persona);p=g.persona;f=p==null?b("MercuryIDs").getParticipantIDFromUserID(z[0]):b("MercuryIDs").getParticipantIDFromUserID(p.id);if(g.st===b("TypingStates").TYPING){x=m[6][e];if(x!==undefined){x[f]=Date.now();return[m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9]]}else{z=b("bs_js_dict").fromArray(b("bs_js_dict").entries(m[6]));p={};p[f]=Date.now();z[e]=p;return[m[0],m[1],m[2],m[3],m[4],m[5],z,m[7],m[8],m[9]]}}else if(g.st===b("TypingStates").INACTIVE){x=b("bs_js_dict").fromArray(b("bs_js_dict").entries(m[6]));r(x,e,f);return[m[0],m[1],m[2],m[3],m[4],m[5],x,m[7],m[8],m[9]]}else return m}else return m}case 8:p=c;var K=o[0],L=b("bs_js_dict").fromArray(b("bs_js_dict").entries(p[2]));Object.keys(K).forEach(function(c){__p&&__p();Object.keys(K[c]).forEach(function(d){__p&&__p();var a=L[c];a=a!==undefined?a:b("immutable").OrderedMap();var e=a.get(d),f=K[c][d];if(e==null||f.watermark>e.watermark)e=1;else return 0;if(e===1){L[c]=a.set(d,f);return 0}});var a=L[c];if(a!==undefined){L[c]=a.sort(function(a,c){return b("bs_caml_primitive").caml_float_compare(a.watermark,c.watermark)});return 0}else return 0});return[p[0],p[1],L,p[3],p[4],p[5],p[6],p[7],p[8],p[9]];case 9:z=c;g=d;e=o[0];if(e.length===0)return z;else{var M=z[7];e.forEach(function(a){M[a.thread_id]=new(b("ImmutableObject"))(a);return 0});v(M,g[0][0]);return[z[0],z[1],z[2],z[3],z[4],z[5],z[6],M,z[8],z[9]]}case 10:f=c;x=o[0];if(x.length===0)return f;else{var O=f[8],P=b("MercuryServerRequests").getForFBID(f[0]);x.forEach(function(a){__p&&__p();var b=a.thread_id;if(O.has(b)){O["delete"](b);if(a.unread_count>0){P.changeThreadReadStatus(b,!0,null,null,null,null);return 0}else return 0}else return 0});return[f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],O,f[9]]}case 11:var Q=c;m=d;p=o[0];e=o[1];var R=o[2];if(p.length===0){e.forEach(function(a){return G(Q[0],a.thread_id)});return Q}else{var S=b("bs_js_dict").fromArray(b("bs_js_dict").entries(Q[7])),T=new Set(),U={},V={},W={};p.forEach(function(c){__p&&__p();if(y(c))return 0;else{var a=A(Q[0],S,c,R);if(a){a=a[0];if(B(a,c,R)||aa(Q[0],a,c,T))return 0;else{var d=c.thread_id;if(d==null)throw b("bs_caml_builtin_exceptions").not_found;else d=d;var e=U[d];e===undefined&&(U[d]=Object.assign({},a));e=U[d];ba(Q[0],e,c,d,Q[8],R);if(b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)){a=V[d];a!==undefined?c.timestamp>a.timestamp&&(V[d]=c):V[d]=c}if(b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").LOG_MESSAGE)){e=W[d];e!==undefined?c.timestamp>e.timestamp&&(W[d]=c):W[d]=c}return 0}}else return 0}});b("bs_js_dict").entries(U).forEach(function(a){__p&&__p();var c=a[1];a=a[0];var d=W[a],e=V[a];if(e!==undefined)N(c,e,0);else if(d!==undefined){e=d.log_message_body;e==null||N(c,d,[e])}if(d!==undefined&&!d.skip_bump_thread){d.timestamp>c.timestamp&&Object.assign(c,{timestamp:d.timestamp});e=0;R==null?e=1:R||(e=1);e===1&&(d.timestamp>c.server_timestamp&&Object.assign(c,{server_timestamp:d.timestamp}))}e=new(b("ImmutableObject"))(c);if(e.participants.length===0&&!ca(S,e.thread_id))return 0;else{S[a]=e;return 0}});v(S,m[0][0]);e.forEach(function(a){return G(Q[0],a.thread_id)});return[Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],S,Q[8],Q[9]]}case 12:var X=c,Y=o[0],Z=X[7];b("bs_js_dict").entries(Z).forEach(function(a){var c=a[1];a=a[0];if(c.folder===Y){Z[a]=b("ImmutableObject").set(c,{unread_count:0});return G(X[0],a)}else return 0});return[X[0],X[1],X[2],X[3],X[4],X[5],X[6],Z,X[8],X[9]];case 13:g=c;z=o[0];b("bs_curry")._2(t,g[7],z);return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9]];case 14:x=c;f=o[0];p=x[9];p.push(f);return[x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],p]}}},c,a)}function P(a){var c=[b("MercurySyncEventsProxy").getArbiterTypeForFBID(a,"TYP")];b("FBIDCheck").isUser_deprecated(a)||c.push(b("ChannelConstants").getArbiterType("page_typing"));return c}var Q={},R=b("ReasonReact.bs").reducerComponent("MessengerStateProvider");function S(a,c){b("ReasonReact.bs").RemoteAction[3](a,[b("bs_block").__(0,[b("bs_block").__(7,[c])])]);b("setTimeoutAcrossTransitions")(function(){return b("ReasonReact.bs").RemoteAction[3](a,[b("bs_block").__(1,[0])])},3e4);return 0}function T(a,c,d){__p&&__p();var e=c?c[0]:b("ReasonReact.bs").RemoteAction[0](0),f=[0],g=[[a,{},{},new Set(),new Set(),0,{},{},new Set(),[]]];d=[{}];c=[0];var h=[d,c];b("ReasonReact.bs").RemoteAction[1](function(a){var c=g[0];g[0]=O(a,c,h);if(g[0]!==c)return b("bs_list").iter(function(a){return b("bs_curry")._1(a,g[0])},f[0]);else return 0},e);b("Arbiter").subscribe(P(a),function(b,c){b=c.obj;c=b.to;if(!(c==null)&&c.toString()!==a)return 0;else{S(e,b);return 0}});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(c,d){__p&&__p();var e={};b("bs_js_dict").entries(g[0][2]).forEach(function(a){var b={};a[1].forEach(function(c,d,a){b[d]=c.watermark;return 0});e[a[0]]=b;return 0});c="read_receipts:"+a;d[c]=e;return 0});d=function(a){return[R[0],R[1],R[2],R[3],function(a){f[0]=[a[3],f[0]];return b("bs_curry")._1(a[4],function(){f[0]=b("bs_list").filter(function(b){return b!==a[3]})(f[0]);return 0})},R[5],R[6],R[7],function(c){return b("bs_curry")._1(a,c[1])},function(){return g[0]},R[10],function(c,a){return b("bs_block").__(0,[c])},R[12]]};c=[e,d];Q[a]=c;return c}function U(a,c){c=c?c[0]:b("CurrentUser").getID();var d=Q[c];if(d!==undefined)return d[1];else return T(c,a,0)[1]}function V(a,c){a=a?a[0]:b("CurrentUser").getID();var d=Q[a];if(d!==undefined)return b("ReasonReact.bs").RemoteAction[3](d[0],c);else{d=T(a,0,0);return b("ReasonReact.bs").RemoteAction[3](d[0],c)}}function W(a){var b=Q[a];if(b!==undefined)return b[0];else return T(a,0,0)[0]}function X(a,c){return b("ReasonReact.bs").RemoteAction[3](W(a),[b("bs_block").__(1,[b("bs_block").__(0,[c])])])}function Y(a,c){b("MercuryAssert").isThreadID(c);var d=[0],e=function(a){d[0]=a;return 0};b("ReasonReact.bs").RemoteAction[3](W(a),[b("bs_block").__(1,[b("bs_block").__(2,[c,e])])]);return b("bs_js_null_undefined").fromOption(d[0])}function Z(a,c,d,e){__p&&__p();if(c.length===0){b("bs_curry")._1(d,{});return null}else{b("MercuryAssert").allThreadID(c);var f=[null],g=function(a){f[0]=a;return 0};a=W(a);b("ReasonReact.bs").RemoteAction[3](a,[b("bs_block").__(1,[b("bs_block").__(1,[c,g,d,e])])]);return f[0]}}function da(a,c,d,e){return Z(a,[c],function(a){return b("bs_curry")._1(d,a[c])},e)}function $(a,c,d,e){__p&&__p();var f=[0],g=function(a){f[0]=a;return 0};b("ReasonReact.bs").RemoteAction[3](W(a),[b("bs_block").__(1,[b("bs_block").__(2,[c,g])])]);g=f[0];if(g)return g[0];else{g=b("MessengerThreadUtils.bs").createNewLocalThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);b("ReasonReact.bs").RemoteAction[3](W(a),[b("bs_block").__(1,[b("bs_block").__(3,[c,g])])]);return g}}function ea(a){var c=b("MercuryLocalIDs").generateThreadID(null);$(a,c,[],null);return c}function fa(a,c,d,e){__p&&__p();var f=[0],g=function(a){f[0]=a;return 0};b("ReasonReact.bs").RemoteAction[3](W(a),[b("bs_block").__(1,[b("bs_block").__(2,[c,g])])]);g=f[0];if(g)return g[0];else{g=b("MessengerThreadUtils.bs").createNewLocalGroupGeneralThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);b("ReasonReact.bs").RemoteAction[3](W(a),[b("bs_block").__(1,[b("bs_block").__(3,[c,g])])]);return g}}function ga(a,c,d){var e=b("MercuryLocalIDs").generateThreadID(null);fa(a,e,c,d);return e}function ha(a,c){var d=[0],e=function(a){d[0]=a;return 0};b("ReasonReact.bs").RemoteAction[3](W(a),[b("bs_block").__(1,[b("bs_block").__(2,[c,e])])]);a=d[0];if(a)return b("MercuryThreadInfo").isEmptyLocalThread(a[0]);else return!1}function ia(a,c){var d=[0],e=function(a){d[0]=a;return 0};b("ReasonReact.bs").RemoteAction[3](W(a),[b("bs_block").__(1,[b("bs_block").__(2,[c,e])])]);a=d[0];if(a)return b("MercuryThreadInfo").isNewEmptyLocalThread(a[0]);else return!1}function ja(a,c,d,e){__p&&__p();var f=b("MercuryIDs").getThreadIDFromParticipantID(c);if(f==null){g(0);throw b("bs_caml_builtin_exceptions").not_found}else f=f;var h=[0],i=function(a){h[0]=a;return 0};b("ReasonReact.bs").RemoteAction[3](W(a),[b("bs_block").__(1,[b("bs_block").__(2,[f,i])])]);i=b("MercuryIDs").getParticipantIDFromUserID(a);var j=h[0];if(j)return j[0];else{j=b("bs_caml_obj").caml_equal(i,c);j=$(a,f,j?[i]:[i,c],d);i=b("MercuryServerRequests").getForFBID(a);i.fetchThreadData([f],e);return j}}function ka(a,c){return b("ReasonReact.bs").RemoteAction[3](W(a),[b("bs_block").__(1,[b("bs_block").__(4,[c])])])}function la(a,b){return V(a==null?0:[a],b)}function ma(a){__p&&__p();var c=[];if(!(a==null)){var d=a.payload_source;d==null||b("bs_caml_obj").caml_equal(d,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)&&c.push(b("bs_block").__(0,[2]));d=a.delivery_receipts;d==null||c.push(b("bs_block").__(0,[b("bs_block").__(0,[d])]));d=a.message_ignored_ids;d==null||c.push(b("bs_block").__(0,[b("bs_block").__(1,[d])]));d=a.threads;if(!(d==null)){var e=a.payload_source;e==null?c.push(b("bs_block").__(0,[b("bs_block").__(9,[d])])):(b("bs_caml_obj").caml_equal(e,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO)&&c.push(b("bs_block").__(0,[b("bs_block").__(10,[d])])),b("bs_caml_obj").caml_equal(e,b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE)?d.length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(13,[b("bs_caml_array").caml_array_get(d,0).thread_id])])):c.push(b("bs_block").__(0,[b("bs_block").__(9,[d])])))}e=a.actions;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(3,[e.reduce(function(a,b){b=b.message_blocked_ids;if(b==null)return a;else return b.concat(a)},[])])]));d=a.participants;if(!(d==null)){c.push(b("bs_block").__(0,[b("bs_block").__(4,[d])]));var f=[],g=[];d.forEach(function(a){if(a.is_messenger_blocked){f.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}else{g.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}});(f.length>0||g.length>0)&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[f,g])]))}e=a.message_blocked_ids;e==null||e.length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[e,[]])]));d=a.pending_folder_unseen_count;d==null||c.push(b("bs_block").__(0,[b("bs_block").__(5,[d])]));e=a.actions;var h=a.payload_source;e==null||(h==null||e.forEach(function(a){if(p(a,h)){c.push(b("bs_block").__(0,[1]));return 0}else return 0}));d=a.global_actions;if(!(d==null)){e=o(d);e&&c.push(b("bs_block").__(0,[0]));d.forEach(function(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryGlobalActionType").MARK_ALL_READ)){c.push(b("bs_block").__(0,[b("bs_block").__(12,[a.folder])]));return 0}else return 0})}e=a.actions;d=a.payload_source;e==null||!(d==null)&&b("bs_caml_obj").caml_equal(d,b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)&&e.length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(6,[b("bs_array").map(function(c){var a=c.thread_id;if(a==null)throw b("bs_caml_builtin_exceptions").not_found;else a=a;return{action_type:c.action_type,author:c.author,thread_id:a}},e)])]));d=a.actions;e=a.threads;d==null?e==null||c.push(b("bs_block").__(0,[b("bs_block").__(11,[[],e,a.from_client])])):e==null?c.push(b("bs_block").__(0,[b("bs_block").__(11,[d,[],a.from_client])])):c.push(b("bs_block").__(0,[b("bs_block").__(11,[d,e,a.from_client])]));d=a.roger;d==null||c.push(b("bs_block").__(0,[b("bs_block").__(8,[d])]));e=a.current_montage_thread;if(!(e==null)){d=e.user.messenger_montage_thread;d==null||d.montage_messages.edges.forEach(function(a){c.push(b("bs_block").__(0,[b("bs_block").__(14,[a.node])]));return 0})}}return c}var na=b("ReasonReact.bs").wrapReasonForJs(R,function(a){return b("bs_curry")._1(U(0,b("bs_js_primitive").null_undefined_to_opt(a.fbid)),a.children)}),oa=[U];f.fbid=a;f.deliveryReceipts=c;f.readReceiptsPerThread=d;f.ignoredIds=e;f.blockedIds=h;f.pendingFolderUnseenCount=i;f.typing=j;f.threads=k;f.pendingReadStatusThreads=l;f.montage=m;f.send=V;f.compute=X;f.getThreadMetaNow=Y;f.getMultiThreadMeta=Z;f.getThreadMeta=da;f.createNewLocalThread=$;f.createNewLocalThreadGenerateID=ea;f.createNewLocalGroupGeneralThreadGenerateID=ga;f.isEmptyLocalThread=ha;f.isNewEmptyLocalThread=ia;f.getCanonicalThreadToParticipant=ja;f.unsubscribeThread=ka;f.sendJS=la;f.processJSActions=ma;f.Provider=oa;f.jsComponent=na}),null);
__d("MessengerStateProcessor",["CurrentUser","MercuryAPIArgsSource","MercuryIDs","MercuryParticipantTypes","MercuryThreadIDMap","MercuryVanityIDMap.bs","MessengerParticipants.bs","MessengerState.bs","MessengerURIConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={preprocess:function(a){__p&&__p();var c=a.activeThreadID;if(c){var d=b("MercuryIDs").getUserIDFromThreadID(c),e=d&&b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(d));if(e&&e.type!==b("MercuryParticipantTypes").EVENT)a.threadKey=e.vanity||d;else if(d&&!e){e=b("MercuryIDs").getParticipantIDFromUserID(d);a.threadKey=b("MercuryVanityIDMap.bs").hasID(e)?b("MercuryVanityIDMap.bs").getVanity(e):d}else{e=b("MercuryThreadIDMap").get();d=e.getServerIDFromClientIDNow(c);a.threadKey=d||b("MercuryIDs").tokenize(c).value}}delete a.activeThreadID;return a},postprocess:function(a){__p&&__p();var c=b("MercuryThreadIDMap").get(),d=g(a.threadKey),e;e=b("MercuryIDs").isValid(d)?d:c.getClientIDFromServerIDNow(d);if(!e){d=b("MessengerParticipants.bs").getIDFromVanityOrFBID(d);d=d&&b("MessengerState.bs").getCanonicalThreadToParticipant(b("CurrentUser").getID(),d,null,b("MercuryAPIArgsSource").MESSENGER);d&&(e=d.thread_id)}e&&(a.activeThreadID=e,a.serverThreadID=c.getServerIDFromClientIDNow(e));delete a.threadKey;return a},supportInboxPostprocess:function(a){a.threadKey&&(a.activeThreadID=b("MercuryIDs").getThreadIDFromSupportInboxItemID(a.threadKey));delete a.threadKey;return a}};function g(a){return!a?null:a.startsWith(b("MessengerURIConstants").GROUP_PREFIX)?a.substr(b("MessengerURIConstants").GROUP_PREFIX.length):a}e.exports=a}),null);
__d("MercuryFilters.bs",["MessagingTag"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessagingTag").UNREAD;function a(){return[g]}function c(a){return a===g}d="all";f.all=d;f.unread=g;f.getSupportedFilters=a;f.isSupportedFilter=c}),null);
__d("MessengerURISerializer",["CurrentEnvironment","MercuryFilters.bs","MercuryIDs","MessagingTag","MessengerStateProcessor","MessengerURIConstants","MessengerView","URI","WWWBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/?$",h=function(a,c){a.setPath(b("CurrentEnvironment").facebookdotcom?b("MessengerURIConstants").FACEBOOK_PREFIX+c:c)},i=function(a,c){var d=a.getPath();b("CurrentEnvironment").facebookdotcom&&!d.startsWith(b("MessengerURIConstants").FACEBOOK_PREFIX)&&(c=b("MessengerURIConstants").FACEBOOK_PREFIX+c);a.setPath(a.getPath()+c)};a={serialize:function(a){__p&&__p();var c=new(b("URI"))(b("WWWBase").uri);a=b("MessengerStateProcessor").preprocess(a);switch(a.masterView){case b("MessengerView").MASTER.PAYMENT:h(c,b("MessengerURIConstants").PAYMENT_PATH);break;case b("MessengerView").MASTER.PEOPLE:h(c,b("MessengerURIConstants").PEOPLE_PATH);break;case b("MessengerView").MASTER.SUPPORT:h(c,b("MessengerURIConstants").SUPPORT_PATH);break}switch(a.folder){case b("MessagingTag").OTHER:h(c,b("MessengerURIConstants").FILTERED_REQUESTS_PATH);break;case b("MessagingTag").ACTION_ARCHIVED:h(c,b("MessengerURIConstants").ARCHIVED_PATH);break;case b("MessagingTag").PENDING:h(c,b("MessengerURIConstants").MESSAGE_REQUESTS_PATH);break}a.detailView===b("MessengerView").DETAIL.PAYTHREAD?(i(c,b("MessengerURIConstants").PAYMENT_PAY_PATH),a.threadKey&&c.addQueryData("id",a.threadKey)):a.detailView===b("MessengerView").DETAIL.PAYFRIENDPICKER?i(c,b("MessengerURIConstants").PAYMENT_PAY_PATH):a.detailView===b("MessengerView").DETAIL.COMPOSE?i(c,b("MessengerURIConstants").COMPOSE_SUBPATH):a.threadKey?a.masterView===b("MessengerView").MASTER.PAYMENT?(h(c,b("MessengerURIConstants").THREAD_PREFIX+a.threadKey),delete a.extraQueryParams.id,delete a.extraQueryParams.a,delete a.extraQueryParams.m):i(c,b("MessengerURIConstants").THREAD_PREFIX+a.threadKey):a.masterView===b("MessengerView").MASTER.PAYMENT?(h(c,""),delete a.extraQueryParams.id,delete a.extraQueryParams.a,delete a.extraQueryParams.m):i(c,"");a.extraQueryParams&&c.addQueryData(a.extraQueryParams);b("MercuryFilters.bs").isSupportedFilter(a.filter)&&c.addQueryData({filter:a.filter});if(a.query!=null){var d;c.addQueryData((d={},d[a.masterView===b("MessengerView").MASTER.SEARCH?"qa":"q"]=a.query,d))}a.threadIDs&&c.addQueryData({threadIDs:JSON.stringify(a.threadIDs)});a.mid&&c.addQueryData({mid:a.mid});return c},deserialize:function(a){__p&&__p();var c={},d=a.getPath();b("CurrentEnvironment").facebookdotcom&&!d.startsWith(b("MessengerURIConstants").FACEBOOK_PREFIX)&&(c.notMessenger=!0);d=d.replace(b("MessengerURIConstants").FACEBOOK_PREFIX,"");var e;a=a.getQueryData();var f=a.filter,h=a.mid,i=a.q,k=a.qa,l=a.threadIDs;a=babelHelpers.objectWithoutProperties(a,["filter","mid","q","qa","threadIDs"]);if(l)try{e=JSON.parse(l)}catch(a){}e?c.threadIDs=e.filter(function(a){return b("MercuryIDs").isValidThreadID(a)}):c.threadIDs=null;d.match("^"+b("MessengerURIConstants").PEOPLE_PATH)?c.masterView=b("MessengerView").MASTER.PEOPLE:d.match("^"+b("MessengerURIConstants").SUPPORT_PATH)?c.masterView=b("MessengerView").MASTER.SUPPORT:d.match("^"+b("MessengerURIConstants").PAYMENT_PATH)?c.masterView=b("MessengerView").MASTER.PAYMENT:k?c.masterView=b("MessengerView").MASTER.SEARCH:c.masterView=b("MessengerView").MASTER.RECENT;d.match("^"+b("MessengerURIConstants").FILTERED_REQUESTS_PATH)?c.folder=b("MessagingTag").OTHER:d.match("^"+b("MessengerURIConstants").ARCHIVED_PATH)?c.folder=b("MessagingTag").ACTION_ARCHIVED:d.match("^"+b("MessengerURIConstants").MESSAGE_REQUESTS_PATH)?c.folder=b("MessagingTag").PENDING:c.folder=b("MessagingTag").INBOX;if(d.match(b("MessengerURIConstants").COMPOSE_SUBPATH+g))c.detailView=b("MessengerView").DETAIL.COMPOSE;else if(d.match("^"+b("MessengerURIConstants").PAYMENT_PATH+b("MessengerURIConstants").PAYMENT_PAY_PATH))a&&a.id?(c.threadKey=a.id,c.detailView=b("MessengerView").DETAIL.PAYTHREAD):c.detailView=b("MessengerView").DETAIL.PAYFRIENDPICKER;else{l=j(d);l&&(c.threadKey=l,c.detailView=b("MessengerView").DETAIL.THREAD)}b("MercuryFilters.bs").isSupportedFilter(f)?c.filter=f:c.filter=b("MercuryFilters.bs").all;c.mid=h;c.query=k||i;c.extraQueryParams=a;return c.masterView===b("MessengerView").MASTER.SUPPORT?b("MessengerStateProcessor").supportInboxPostprocess(c):b("MessengerStateProcessor").postprocess(c)}};function j(a){a=a.match(b("MessengerURIConstants").THREAD_PREFIX+"([^/]+)"+g);return a&&decodeURIComponent(a[1])}e.exports=a}),null);
__d("MercuryDelayedDispatcher",["MercuryDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=[],this.$3=b("MercuryThreadIDMap").getForFBID(this.$1),this.$4=b("MercuryDispatcher").getForFBID(this.$1),this.$5=b("MercuryServerRequests").getForFBID(this.$1),this.$6=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.$4.subscribe("model-update-completed",function(a,b){return this.$7()}.bind(this))}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.handleUpdateWaitForThread=function(a,b){var c=this.$3.getClientIDFromServerIDNow(b);if(c){this.$8(a);return}this.$3.getClientIDFromServerID(b,function(){return this.$2.push({thread_fbid:b,payload:a})}.bind(this));this.$5.ensureThreadIsFetched(b)};a.prototype.$7=function(){if(this.$2&&this.$2.length){var a=this.$2.shift(),b=a.thread_fbid;a=a.payload;this.handleUpdateWaitForThread(a,b)}};a.prototype.$8=function(a){a.from_client?this.$4.handleUpdate(a):this.$6.handleUpdate(a)};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryDispatcher",["invariant","ArbiterMixin","LogHistory","MercuryActionType","MercuryPayloadSource","MercurySingletonProvider","MercuryThreadInformer","MessengerParticipants.bs","MessengerState.bs","isEmpty","mixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("LogHistory").getInstance("mercury_dispatcher");c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));h=c&&c.prototype;a.getForFBID=function(a){return j.getForFBID(a)};a.get=function(){return j.get()};function a(a){h.constructor.call(this),this.$MercuryDispatcher1=a}a.prototype.handleUpdate=function(a){__p&&__p();this.$MercuryDispatcher2(a),!!a.from_client!==!!a.preprocessed||g(0),delete a.preprocessed,b("isEmpty")(a)||b("MercuryThreadInformer").getForFBID(this.$MercuryDispatcher1).synchronizeInforms(function(){__p&&__p();a.payload_source===b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE&&(this.inform("invalidate-global-state",{}),b("MessengerParticipants.bs").reset());if(a.payload_source===b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE){var c=a.threads&&a.threads.length>0&&a.threads[0]&&a.threads[0].thread_id;c&&this.inform("invalidate-thread-state",c)}this.inform("update-thread-ids",a.newlyAddedClientIDs);b("MessengerParticipants.bs").addParticipants(a);b("MessengerState.bs").sendJS(this.$MercuryDispatcher1,b("MessengerState.bs").processJSActions(a));this.inform("update-unread",a);this.inform("update-threadlist",a);this.inform("update-messages",a);this.inform("update-unseen",a);this.inform("model-update-completed",null)}.bind(this))};a.prototype.$MercuryDispatcher2=function(a){__p&&__p();var c=a.payload_source;if(c===b("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS||c===b("MercuryPayloadSource").CLIENT_MARK_THREAD_SEEN)return;var d={from_client:a.from_client,messages:null};if(a.actions){a=a.actions.filter(function(a){return a.action_type===b("MercuryActionType").USER_GENERATED_MESSAGE||a.action_type===b("MercuryActionType").LOG_MESSAGE}).map(function(a){return{action_type:a.action_type,other_user_fbid:a.other_user_fbid,thread_fbid:a.thread_fbid,message_id:a.message_id}});a.length&&(d.messages=a)}i.debug("update:"+c,JSON.stringify(d))};var j=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryMessageClientState",[],(function(a,b,c,d,e,f){a=Object.freeze({DO_NOT_SEND_TO_SERVER:"do_not_send_to_server",SEND_TO_SERVER:"send_to_server"});e.exports=a}),null);
__d("MercurySendMessageFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTO_RETRY_CNT:"auto_retry_cnt",MANUAL_RETRY_CNT:"manual_retry_cnt"})}),null);
__d("MercuryMessageObject",["BanzaiODS","MercuryActionStatus","MercuryActionType","MercuryIDs","MercuryLocalIDs","MercuryMessageClientState","MercuryMessageSourceTags","MercurySendMessageFields","MercurySingletonProvider","MercurySourceType","MessengerObjectAssociationType","MessengerState.bs"],(function(a,b,c,d,e,f){__p&&__p();a.getForFBID=function(a){"use strict";return i.getForFBID(a)};a.get=function(){"use strict";return i.get()};function a(a){"use strict";this.$1=a}a.prototype.constructUserGeneratedMessageObject=function(a,c,d,e,f,h){__p&&__p();h===void 0&&(h=null);c=g(this.$1,b("MercuryActionType").USER_GENERATED_MESSAGE,c,d);typeof a==="string"&&(a=a.replace(/^\s+/,"").replace(/\s+$/,""));c.body=a;c.has_attachment=!1;c.html_body=!1;c.attachments=[];c.specific_to_list=e||[];c.creator_info=f;h&&h.length>0&&(c.tags=h);return c};a.prototype.constructStickerMessageObject=function(a,c,d,e){e===void 0&&(e=null);c=g(this.$1,b("MercuryActionType").USER_GENERATED_MESSAGE,c,d);c.has_attachment=!0;c.html_body=!1;c.attachments=[];c.sticker_id=a;c.specific_to_list=[];e&&e.length>0&&(c.tags=e);return c};a.prototype.constructAttachmentMessageObject=function(a,c){"use strict";a=g(this.$1,b("MercuryActionType").USER_GENERATED_MESSAGE,a,c);a.attachments=[];a.specific_to_list=[];return a};a.prototype.constructLogMessageObject=function(a,c,d,e){"use strict";a=g(this.$1,b("MercuryActionType").LOG_MESSAGE,a,c);a.log_message_type=d;a.log_message_data=e;e&&e.untypedData&&e.untypedData.ttl&&(a.ephemeral_ttl_mode=e.untypedData.ttl);return a};a.prototype.constructCTAConfirmationMessageObject=function(a,b,c,d,e){e===void 0&&(e=null);a=this.constructUserGeneratedMessageObject(a,b,c,null,null);({});d?b={quick_replies:d,ignore_for_webhook:!1}:b={ignore_for_webhook:!0};a.platform_xmd=JSON.stringify(b);e&&e.length>0&&(a.tags=e);return a};a.prototype.normalizeNewMessage=function(a){"use strict";__p&&__p();a.status===undefined&&(a.status=b("MercuryActionStatus").UNSENT);a.offline_threading_id=a.offline_threading_id||b("MercuryLocalIDs").generateOfflineThreadingID(a.timestamp);a.offline_threading_id||b("BanzaiODS").bumpEntityKey("chat.web","invalid_otid_generated");a.message_id=a.message_id||a.offline_threading_id;var c=b("MercuryIDs").getParticipantIDFromUserID(this.$1);a.specific_to_list=a.specific_to_list||[];a.specific_to_list.length&&a.specific_to_list.indexOf(c)===-1&&a.specific_to_list.push(c);var d=!1;if(!a.thread_id)a.thread_id="root:"+a.offline_threading_id;else{var e,f=b("MessengerState.bs").getThreadMetaNow(this.$1,a.thread_id);f&&f.ephemeral_ttl_mode!==null&&a.ephemeral_ttl_mode===undefined&&(a.ephemeral_ttl_mode=f.ephemeral_ttl_mode);((e=f)!=null?(e=e.associated_object)!=null?e.name:e:e)&&((e=f)!=null?e.object_association_type:e)===b("MessengerObjectAssociationType").GENERAL_CHAT&&(d=!0)}if(!d)if(a.specific_to_list.length==1)a.thread_id="user:"+this.$1;else if(a.specific_to_list.length==2){f=a.specific_to_list[0]==c?a.specific_to_list[1]:a.specific_to_list[0];a.thread_id=b("MercuryIDs").getThreadIDFromParticipantID(f)}if(!a.specific_to_list.length){e=b("MercuryIDs").tokenize(a.thread_id);d=e.type;f=e.value;d=="user"&&(a.specific_to_list=["fbid:"+f,c])}a[b("MercurySendMessageFields").MANUAL_RETRY_CNT]||(a[b("MercurySendMessageFields").MANUAL_RETRY_CNT]=0)};a.prototype.normalizeResendMessage=function(a){"use strict";a.status=b("MercuryActionStatus").RESENDING,a.timestamp=Date.now(),a[b("MercurySendMessageFields").MANUAL_RETRY_CNT]+=1};a.prototype.normalizeAddAttachmentPlaceholder=function(a,c,d){"use strict";d.preview_attachments.length>0&&(a.has_attachment=!0,a.preview_attachments=d.preview_attachments),a.client_state=b("MercuryMessageClientState").DO_NOT_SEND_TO_SERVER,a.status=b("MercuryActionStatus").RESENDING,a.upload_id=c};function g(a,c,d,e){var f=h(d)?[b("MercuryMessageSourceTags").CHAT]:[],g=Date.now();c={action_type:c,thread_id:e,author:b("MercuryIDs").getParticipantIDFromUserID(a),author_email:null,timestamp:g,is_unread:!1,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_spoof_warning:!1,source:d,source_tags:f};return c}function h(a){switch(a){case b("MercurySourceType").CHAT_WEB:case b("MercurySourceType").CHAT_JABBER:case b("MercurySourceType").CHAT_IPHONE:case b("MercurySourceType").CHAT_MEEBO:case b("MercurySourceType").CHAT_ORCA:case b("MercurySourceType").CHAT_TEST:case b("MercurySourceType").CHAT:return!0;default:return!1}}var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryMessageIDs.bs",["bs_curry","KeyedCallbackManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("KeyedCallbackManager"))();function a(a,c){var d=a.filter(function(a){return a.indexOf("id")===-1}),e=function(d){return b("bs_curry")._1(c,a.map(function(a){var b=d[a];if(b!==undefined)return b;else return a}))};return g.executeOrEnqueue(d,e)}function c(a,b){g.setResource(a,b);return 0}f.getServerIDs=a;f.addServerID=c}),null);
__d("MessengerFluxReduceDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!1})}),null);
__d("MessengerSharedMediaActions",["MessengerFluxReduceDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CURRENT_LOADED:null,DELETE_PHOTOS:null,LATEST_LOADED:null,LOAD_CURRENT:null,LOAD_MORE_LATEST:null,LOAD_MORE_PREVIOUS:null,PREVIOUS_LOADED:null}),h="MessengerSharedMedia";a={Types:g,Namespace:h,currentLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.CURRENT_LOADED,namespace:h,data:a})},deletePhotos:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:g.DELETE_PHOTOS,namespace:h,threadFBID:a,photoFBIDs:c})},loadCurrent:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_CURRENT,namespace:h,threadFBID:a,photoID:c})},loadMorePrevious:function(a,c,d){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_MORE_PREVIOUS,namespace:h,threadFBID:a,afterCursor:c,first:d})},loadMoreLatest:function(a,c,d){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_MORE_LATEST,namespace:h,threadFBID:a,beforeCursor:c,last:d})},previousLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.PREVIOUS_LOADED,namespace:h,data:a})},latestLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.LATEST_LOADED,namespace:h,data:a})}};e.exports=a}),null);
__d("arrayStableSort",[],(function(a,b,c,d,e,f){function a(a,b){return a.map(function(a,b){return{data:a,index:b}}).sort(function(a,c){return b(a.data,c.data)||a.index-c.index}).map(function(a){return a.data})}e.exports=a}),null);
__d("RangedCallbackManager",["CallbackManagerController","arrayStableSort","createObjectFrom"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d){"use strict";this.$1=[],this.$2=!1,this.$3=!1,this.$4={},this.$5=new(b("CallbackManagerController"))(this.$6.bind(this)),this.$7=a,this.$8=c,this.$9=d}a.prototype.executeOrEnqueue=function(a,b,c,d,e){"use strict";return this.$5.executeOrEnqueue({start:a,limit:b},c,{strict:!!d,skipOnStrictHandler:e})};a.prototype.unsubscribe=function(a){"use strict";this.$5.unsubscribe(a)};a.prototype.getUnavailableResources=function(a){"use strict";__p&&__p();a=this.$5.getRequest(a);var b=[];if(a&&!this.$2){var c=a.request;a=this.$10(a.options);c=c.start+c.limit;for(var a=a.length;a<c;a++)b.push(a)}return b};a.prototype.addResources=function(a){"use strict";a.forEach(function(a){this.$4[a]||(this.$4[a]=!0,this.$1.push(a),this.$3=null)}.bind(this)),this.resortResources(),this.$5.runPossibleCallbacks()};a.prototype.addResourcesWithoutSorting=function(a,c){"use strict";var d=this.$1.slice(0,c);d=d.concat(a);d=d.concat(this.$1.slice(c));this.$1=d;Object.assign(this.$4,b("createObjectFrom")(a,!0));this.$3=null;this.$5.runPossibleCallbacks()};a.prototype.removeResources=function(a){"use strict";a.forEach(function(a){if(this.$4[a]){this.$4[a]=!1;a=this.$1.indexOf(a);a!=-1&&this.$1.splice(a,1)}}.bind(this))};a.prototype.removeAllResources=function(){"use strict";this.$1=[],this.$4={}};a.prototype.resortResources=function(){"use strict";this.$1=b("arrayStableSort")(this.$1,function(a,b){return this.$8(this.$7(a),this.$7(b))}.bind(this))};a.prototype.setReachedEndOfArray=function(){"use strict";this.$2||(this.$2=!0,this.$3=null,this.$5.runPossibleCallbacks())};a.prototype.hasReachedEndOfArray=function(){"use strict";return this.$2};a.prototype.forceRunCallbacks=function(){"use strict";this.$5.runPossibleCallbacks({force:!0})};a.prototype.setError=function(a){"use strict";this.$3!==a&&(this.$3=a,this.$5.runPossibleCallbacks())};a.prototype.getError=function(a,b,c){"use strict";c=this.$10({strict:c});return a+b>c.length?this.$3:null};a.prototype.hasResource=function(a){"use strict";return this.$4[a]};a.prototype.getResourceAtIndex=function(a){"use strict";return this.$1[a]};a.prototype.getAllResources=function(){"use strict";return this.$1.concat()};a.prototype.getCurrentArraySize=function(a){"use strict";return this.$10(a).length};a.prototype.$10=function(a){"use strict";var b=this.$1;if(a&&a.strict){a=a.skipOnStrictHandler||this.$9;a&&(b=b.filter(a))}return b};a.prototype.$6=function(a,b){"use strict";__p&&__p();var c=this.$10(b),d=a.start;a=a.start+a.limit;b=!!(b&&b.force);if(!b&&!this.$2&&!this.$3&&a>c.length)return!1;else{b=c.slice(d,a);d=a>c.length?this.$3:null;return[b,d]}};a.prototype.getElementsUntil=function(a){"use strict";var b=[];for(var c=0;c<this.$1.length;c++){var d=this.$7(this.$1[c]);if(this.$8(d,a)>0)break;b.push(this.$1[c])}return b};e.exports=a}),null);
__d("MercuryMessages",["invariant","BanzaiODS","ChatReliabilityInstrumentation","EventEmitter","FBJSON","ImmutableObject","LogHistory","MercuryActionStatus","MercuryActionType","MercuryAssert","MercuryAttachment","MercuryDispatcher","MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageClientState","MercuryMessageIDs.bs","MercuryPayloadSource","MercurySendMessageFields","MercuryServerRequests","MercurySingletonProvider","MercuryThreadActions","MercuryThreadInformer","MessengerMessage.bs","MessengerSharedMediaActions","MessengerState.bs","RangedCallbackManager","gkx","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=new(b("EventEmitter"))(),i=b("LogHistory").getInstance("mercury_messages");a.getForFBID=function(a){return j.getForFBID(a)};a.get=function(){return j.get()};function a(a){__p&&__p();this.$1=a,this.$2=b("MercuryMessageActions").getForFBID(this.$1),this.$3=b("MercuryServerRequests").getForFBID(this.$1),this.$4=b("MercuryThreadInformer").getForFBID(this.$1),this.$5=b("MercuryThreadActions").getForFBID(this.$1),this.$6=b("MercuryDispatcher").getForFBID(this.$1),this.$7=!1,this.$8={},this.$9={},this.$10={},this.$11=new Map(),this.$12={},this.$13={},this.$6.subscribe("update-messages",function(a,c){a=(c.actions||[]).filter(function(a){var c=a.action_type,d=a.thread_id&&(c==b("MercuryActionType").LOG_MESSAGE||c==b("MercuryActionType").USER_GENERATED_MESSAGE||c==b("MercuryActionType").SEND_MESSAGE||c==b("MercuryActionType").DELETE_THREAD||c==b("MercuryActionType").DELETE_MESSAGES),e=a.upload_id&&a.upload_data&&(c==b("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER||c==b("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER),f=c==b("MercuryActionType").REACTION_UPDATE,g=c==b("MercuryActionType").MONTAGE_DIRECT_EXPIRE,h=c==b("MercuryActionType").LIVE_LOCATION_UPDATE;a=a.replaced_message_id&&c==b("MercuryActionType").REPLACE_MESSAGE;return d||e||f||h||a||g});var d=b("MessengerMessage.bs").shouldSortForPayloadSource(c.payload_source);this.handleUpdates(a,d,c.payload_source,c.from_client);c.end_of_history&&this.$14(c.end_of_history,c.payload_source);this.$7&&(this.$7=!1,h.emit("change"))}.bind(this)),this.$6.subscribe("invalidate-thread-state",function(a,b){this.$15(b)}.bind(this)),this.$6.subscribe("invalidate-global-state",function(){return this.invalidateGlobalState()}.bind(this)),i.debug("constructed",JSON.stringify({fbid:this.$1}))}a.prototype.getMessagesFromIDs=function(a){return(a||[]).map(function(a){return this.$16(a)}.bind(this)).filter(function(a){return a})};a.prototype.getServerMessageID=function(a){var b=a;this.$12[a]&&(b=this.$12[a]);return b};a.prototype.hasLoadedNMessages=function(a,b){a=this.$17(a);return a.hasReachedEndOfArray()||a.getCurrentArraySize()>=b};a.prototype.hasLoadedExactlyNMessages=function(a,b){a=this.$17(a);return a.getCurrentArraySize()==b};a.prototype.invalidateGlobalState=function(){var a=Object.keys(this.$9);this.$8={};this.$9={};this.$10={};this.$11=new Map();this.$12={};a.map(function(a){return this.$4.invalidatedThread(a)}.bind(this))};a.prototype.invalidateSearchedMessages=function(a){a.map(function(a){var b=this.$16(a),c=undefined;b&&(c=b.offline_threading_id);c&&(this.$12[c]||this.$11["delete"](a))}.bind(this))};a.prototype.getThreadMessagesRange=function(a,b,c,d,e,f){__p&&__p();var g=this.$17(a),h=function(a){d(this.$18(a))}.bind(this);b=g.executeOrEnqueue(b,c,h);c=g.getUnavailableResources(b);h=this.$8[a];if(c.length&&!h){h=g.getCurrentArraySize();g=this.$10[a]||0;h=h-g;c=c.length+g;g=this.getCurrentlyLoadedMessages(a);g=g.length?g[0].timestamp:null;this.$3.fetchThreadMessages(a,h,c,g,e,f)}else this.$8[a]=!1;return b};a.prototype.getThreadMessagesRangeNow=function(a,b,c){a=this.$17(a);var d=[];for(var e=b;e<b+c;e++){var f=a.getResourceAtIndex(e);f=f&&this.$16(f);f&&d.push(f)}return d};a.prototype.getThreadMessagesSinceTimestamp=function(a,b){a=this.$17(a);a=a.getElementsUntil(b);return this.$18(a)};a.prototype.hasLoadedAllMessages=function(a){return this.$17(a).hasReachedEndOfArray()};a.prototype.getCurrentlyLoadedMessages=function(a){a=this.$17(a).getAllResources();return this.$18(a)};a.prototype.unsubscribe=function(a,c){b("MercuryAssert").isThreadID(c);c=this.$17(c);c.unsubscribe(a)};a.prototype.$19=function(a,c){b("MessengerMessage.bs").finalizeRanges(c),this.$11.set(a,new(b("ImmutableObject"))(c))};a.prototype.$20=function(a,c,d){c=b("ImmutableObject").set(c,d);this.$11.set(a,c);return c};a.prototype.$21=function(a,c,d){__p&&__p();if(a==b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE){c=this.getThreadMessagesSinceTimestamp(c,d);if(c.length>0){b("BanzaiODS").bumpEntityKey("chat.web","channel.messages_reordered");return!0}}else if(a===b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE||a===b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)return!0;return!1};a.prototype.$22=function(a,c){var d=a.action_type;c==b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE&&d==b("MercuryActionType").USER_GENERATED_MESSAGE&&a.offline_threading_id&&this.$12[a.offline_threading_id]===a.offline_threading_id&&(a.client_message_id=a.offline_threading_id,a.status=b("MercuryActionStatus").SUCCESS,a.action_type=b("MercuryActionType").SEND_MESSAGE,d=a.action_type);if(c===b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE&&d==b("MercuryActionType").USER_GENERATED_MESSAGE){c=b("MessengerState.bs").getThreadMetaNow(this.$1,a.thread_id);c&&c.folder&&(a.folder=c.folder);b("ChatReliabilityInstrumentation").logMESSAGE_RECEIVED(b("FBJSON").stringify({otid:a.offline_threading_id,message_id:a.message_id,other_user_fbid:a.other_user_fbid,viewer_page_fbid:!c||!c.page_thread_info?null:c.page_thread_info.pageID}))}return a};a.prototype.handleUpdates=function(a,c,d,e){__p&&__p();var f={};for(var g=0;g<a.length;g++){var h=this.$22(a[g],d),i=h.action_type,j=h.message_id?this.$16(h.message_id):null;if(i==b("MercuryActionType").LOG_MESSAGE&&b("MessengerMessage.bs").isLocalMessage(h))continue;if(d==b("MercuryPayloadSource").SERVER_SEARCH){this.$11.has(h.message_id)||this.$19(h.message_id,h);continue}else if(h.client_state===b("MercuryMessageClientState").SEND_TO_SERVER){this.$19(h.message_id,h);continue}else if(i==b("MercuryActionType").SEND_MESSAGE){var k=h.client_message_id,l=this.$16(k);if(k&&l&&h.status){l.status;if(l.status==b("MercuryActionStatus").SUCCESS)continue;f[h.thread_id]||(f[h.thread_id]=[]);this.$23(h);l=this.$16(k);l&&this.$24(h.thread_id,l.message_id,d)}continue}else if(i==b("MercuryActionType").DELETE_THREAD){this.$17(h.thread_id).removeAllResources();continue}else if(i==b("MercuryActionType").DELETE_MESSAGES){this.$25(h.thread_id,h.message_ids,d);b("setImmediate")(function(){this.$5.updateSnippet(h.thread_id,h.message_ids)}.bind(this));continue}else if(i===b("MercuryActionType").REACTION_UPDATE){this.$26(h)&&this.$27(f,h,d);continue}else if(i===b("MercuryActionType").MONTAGE_DIRECT_EXPIRE){this.$28(h)&&this.$27(f,h,d);continue}else if(i===b("MercuryActionType").LIVE_LOCATION_UPDATE){this.$29(h)&&this.$27(f,h,d);continue}else if(i==b("MercuryActionType").REPLACE_MESSAGE){this.$30(h)&&(this.$27(f,h,d),c=!0);continue}else if(h.offline_threading_id&&this.$12[h.offline_threading_id]&&(d!=b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO||this.$12[h.offline_threading_id]===h.message_id)||j){if(j&&h.ranges&&h.ranges.length>0){k=j.message_id;this.$20(this.$12[k]||k,j,{ranges:h.ranges});this.$24(j.thread_id,j.message_id,"link_shim")}continue}else if(i===b("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER){this.$31(h.upload_id,h.upload_data);continue}else if(i===b("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER){this.$32(h.upload_id,h.upload_data);continue}else{d===b("MercuryPayloadSource").CLIENT_SEND_MESSAGE&&(this.$12[h.message_id]=h.message_id,h.thread_id=="root:"+h.offline_threading_id&&this.$17(h.thread_id).setReachedEndOfArray());i==b("MercuryActionType").LOG_MESSAGE&&h.log_message_type==b("MercuryLogMessageType").SERVER_ERROR&&(this.$8[h.thread_id]=!0);h.client_state===b("MercuryMessageClientState").DO_NOT_SEND_TO_SERVER&&h.upload_id&&(this.$13[h.upload_id]=h);f[h.thread_id]||(f[h.thread_id]=[]);f[h.thread_id].push(h.message_id);this.$19(h.message_id,h);h.offline_threading_id&&h.offline_threading_id!=h.message_id&&(this.$12[h.offline_threading_id]=h.message_id,b("MercuryMessageIDs.bs").addServerID(h.offline_threading_id,h.message_id),h.threading_id&&b("MercuryMessageIDs.bs").addServerID(h.threading_id,h.message_id));h[b("MercurySendMessageFields").MANUAL_RETRY_CNT]>0&&(l=this.$17(h.thread_id),l.resortResources([h.message_id]),this.$33(h.thread_id,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE));c=c||this.$21(d,h.thread_id,h.timestamp);if(!c){k=this.$16(h.message_id);k&&this.$34(k)}continue}}for(var m in f){l=this.$17(m);j=l.getAllResources();i=j.filter(function(a){a=this.$11.get(a);return!a?!0:a.action_type==b("MercuryActionType").LOG_MESSAGE&&a.log_message_type==b("MercuryLogMessageType").SERVER_ERROR}.bind(this));l.removeResources(i);e&&this.$35(m,f[m]);c?(l.addResources(f[m]),this.$33(m,d)):l.addResourcesWithoutSorting(f[m].reverse(),0);this.$4.updatedThread(m)}};a.prototype.$27=function(a,c,d){var e=c.message_id||c.messageId;a[c.thread_id]||(a[c.thread_id]=[]);this.$17(c.thread_id).removeResources([c.replaced_message_id,c.offline_threading_id]);c.action_type!==b("MercuryActionType").REACTION_UPDATE&&c.action_type!==b("MercuryActionType").LIVE_LOCATION_UPDATE&&c.action_type!==b("MercuryActionType").MONTAGE_DIRECT_EXPIRE&&a[c.thread_id].push(e);c.replaced_message_id&&this.$24(c.thread_id,c.replaced_message_id,d);this.$24(c.thread_id,e,d)};a.prototype.isFirstMessage=function(a){var b=this.$17(a.thread_id);if(b.getCurrentArraySize()===0)return!1;var c=b.getResourceAtIndex(b.getCurrentArraySize()-1);c=this.$16(c);c=c&&c.message_id;a=this.$16(a.message_id);a=a&&a.message_id;return!c||!a?!1:b.hasReachedEndOfArray()&&c==a};a.prototype.$25=function(a,c,d){__p&&__p();if(!c.length)return;this.$36(a,c,d);d!==b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE&&this.$3.deleteMessages(a,c);d=this.$18(c);for(var a=0;a<d.length;a++){c=d[a];if(c&&c.has_attachment){var e=c.attachments.map(function(a){return b("MercuryAttachment").isPhotoAttachment(a)||b("MercuryAttachment").isVideoAttachment(a)?a.metadata.fbid:null}).filter(function(a){return a!==null});b("MessengerSharedMediaActions").deletePhotos(b("MercuryIDs").getThreadFBIDFromThreadID(c.thread_id),e)}}};a.prototype.$36=function(a,b,c){b=b.map(function(a){a=this.$16(a);return a&&a.message_id}.bind(this)).filter(function(a){return!!a});var d=this.$17(a);d.removeResources(b);this.$33(a,c)};a.prototype.$23=function(a){__p&&__p();var c=a.client_message_id;if(!c)return!1;var d=this.$16(c);if(!d)return!1;var e={};e.status=a.status;(a.status===b("MercuryActionStatus").SUCCESS||a.error_data)&&(e.error_data=a.error_data);var f=a.message_id;if(this.$11.has(f)){d&&this.$20(f,d,e);return!1}a.threading_id&&(e.threading_id=a.threading_id);a.timestamp&&(e.timestamp=a.timestamp);a.log_message_data&&(e.log_message_data=a.log_message_data);a.ranges&&a.ranges.length&&(b("MessengerMessage.bs").finalizeRanges(a),e.ranges=a.ranges);a.attachments&&a.attachments.length&&(e.raw_attachments=null,e.attachments=a.attachments);this.$12[c]=f;b("MercuryMessageIDs.bs").addServerID(c,f);if(d){a=this.$20(f,d,e);this.$11.set(c,new(b("ImmutableObject"))());b("MessengerMessage.bs").isTitanMessage(a)&&this.$10[a.thread_id]--}return!0};a.prototype.$26=function(a){var b,c=a.messageId,d=a.reaction;a=a.userId;var e=this.$16(c);if(!e)return!1;b=babelHelpers["extends"]({},e.reactions,(b={},b[a]=d,b));d||delete b[a];this.$20(c,e,{reactions:b});return!0};a.prototype.$28=function(a){__p&&__p();if(!b("gkx")("AT5MAotH6BG7mXo4DyZnW3seA7_jf32c8tGX1llmkbXJ5ui_oKs0jpz-iYum9Gkv1o7pv5ZMvW9WlaNx_vA1ZSmAhi0Rjb62jJA5vu2Oz81AxQ"))return!1;a=a.messageId;var c=this.$16(a);if(!c||!c.attachments||c.attachments.length!==1)return!1;var d=c.attachments[0];if(!d||!d.share)return!1;var e=d.share.media;if(!e)return!1;var f=d.share.target;if(!f||!f.message_state)return!1;d=babelHelpers["extends"]({},d,{share:babelHelpers["extends"]({},d.share,{media:babelHelpers["extends"]({},e,{image:null,source:null}),target:babelHelpers["extends"]({},f,{message_state:"EXPIRED",blob_media:null,image:null})})});this.$20(a,c,{attachments:[d]});return!0};a.prototype.$29=function(a){__p&&__p();var b=a.messageId;a=a.liveLocation;var c=this.$16(b);if(!c||!c.attachments||c.attachments.length!==1)return!1;var d=c.attachments[0];if(!d||!d.share)return!1;var e=d.share.target;if(!e||!e.live_location_id)return!1;d=babelHelpers["extends"]({},d,{share:babelHelpers["extends"]({},d.share,{target:babelHelpers["extends"]({},a,{live_location_id:e.live_location_id})})});this.$20(b,c,{attachments:[d]});return!0};a.prototype.$30=function(a){__p&&__p();var c=a.replaced_message_id;if(!c)return!1;var d=this.$16(c);if(!d)return!1;var e=a.message_id,f={};a.status&&(f.status=a.status);a.timestamp&&e!==c&&(f.timestamp=a.timestamp);a.log_message_data&&(f.log_message_data=a.log_message_data);a.ranges&&a.ranges.length&&(b("MessengerMessage.bs").finalizeRanges(a),f.ranges=a.ranges);a.meta_ranges&&(f.meta_ranges=a.meta_ranges);a.attachments&&a.attachments.length&&(f.raw_attachments=null,f.attachments=a.attachments);a.body&&a.body!==d.body&&(f.body=a.body);a.platform_xmd&&a.platform_xmd!==d.platform_xmd&&(f.platform_xmd=a.platform_xmd);a.profile_ranges&&a.profile_ranges!==d.profile_ranges&&(f.profile_ranges=a.profile_ranges);if(Object.keys(f).length===0)return!1;b("MercuryMessageIDs.bs").addServerID(e,e);this.$20(e,d,f);c!==e&&(this.$11["delete"](c),d.message_id&&this.$11.has(d.message_id)&&this.$11["delete"](d.message_id));return!0};a.prototype.getNumberLocalMessages=function(a){return this.$10[a]||0};a.prototype.$31=function(a,b){a=this.$37(a,b);delete a.preview_attachments;this.$3.sendNewMessage(a)};a.prototype.$32=function(a,b){a=this.$37(a,b);this.$36(a.thread_id,[a.message_id]);this.$10[a.thread_id]&&this.$10[a.thread_id]--};a.prototype.$37=function(a,c){__p&&__p();var d=this.$13[a];d||g(0);d.image_ids=c.image_ids;d.file_ids=c.file_ids;d.audio_ids=c.audio_ids;d.gif_ids=c.gif_ids;d.video_ids=c.video_ids;d.client_state=b("MercuryMessageClientState").SEND_TO_SERVER;delete this.$13[a];return d};a.prototype.$24=function(a,b,c){this.$7=!0,this.$4.updatedMessage(a,b,c)};a.prototype.$34=function(a){this.$7=!0,this.$4.receivedMessage(a)};a.prototype.$33=function(a,b){this.$7=!0,this.$4.reorderedMessages(a,b)};a.prototype.$15=function(a){__p&&__p();if(!this.$9[a])return;var b=this.$9[a].getAllResources();b.forEach(function(a){var b=this.$16(a),c=undefined;b&&(c=b.offline_threading_id);this.$11["delete"](a);if(c){b=this.$12[c];b&&this.$11["delete"](b);delete this.$12[c]}delete this.$12[a]}.bind(this));delete this.$9[a]};a.addListener=function(a,b){return h.addListener(a,b)};a.prototype.$16=function(a){var b=a;this.$12[a]&&(b=this.$12[a]);return this.$11.get(b)};a.prototype.$17=function(a){this.$9[a]||(this.$9[a]=new(b("RangedCallbackManager"))(function(a){a=this.$16(a);return a&&a.timestamp}.bind(this),function(a,b){return b-a}));return this.$9[a]};a.prototype.$14=function(a,b){a.forEach(function(a){var c=this.$17(a);c.setReachedEndOfArray();this.$33(a,b)}.bind(this))};a.prototype.$18=function(a){a=a.reduce(function(a,b){b=this.$16(b);b&&a.push(b);return a}.bind(this),[]);return a.reverse()};a.prototype.$35=function(a,c){c=c.filter(function(a){return b("MessengerMessage.bs").isTitanMessage(this.$16(a))}.bind(this));this.$10[a]||(this.$10[a]=0);this.$10[a]+=c.length};var j=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySendErrorLogger",["Banzai","BanzaiLogger"],(function(a,b,c,d,e,f){var g=b("BanzaiLogger").create({retry:!0}),h=b("Banzai").isEnabled("mercury_send_error_logging");a={log:function(a){if(!h)return;a={message_id:a.message_id,timestamp_client:Date.now(),error_type:a.error_data.type,error_code:a.error_data.code,error_description:a.error_data.description,is_transient:a.error_data.is_transient};g.log("MercurySendErrorLoggerConfig",a)}};e.exports=a}),null);
__d("MercuryServerPayloadPreprocessor",["invariant","MercuryActionStatus","MercuryActionType","MercuryAttachment","MercuryDispatcher","MercuryIDs","MercurySendErrorLogger","MercurySingletonProvider","MercuryThreadIDMap","MessengerEnvironment","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=b("MercuryThreadIDMap").getForFBID(this.$1),this.$3=b("MercuryDispatcher").getForFBID(this.$1)}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};a.prototype.handleUpdate=function(a){__p&&__p();var c={};a.from_client&&g(0);(a.threads||[]).forEach(function(a){this.$4(a,c);var b=this.$2.getServerIDFromClientIDNow(a.thread_id);d(["MercuryServerRequests"],function(c){c=c.getForFBID(this.$1);c.markThreadFetched(a.thread_id);b&&c.markThreadFetched(b);c.updateLastActionTimestamp(a.timestamp)}.bind(this))}.bind(this));a.pinned_thread_ids=(a.pinned_thread_ids||[]).map(function(a){return this.$2.getClientIDFromServerIDNow(a)}.bind(this));(a.ordered_threadlists||[]).forEach(function(a){var b=a.thread_fbids||[];b=b.concat(a.other_user_fbids||[]);a.thread_ids=b.map(function(a){return this.$2.getClientIDFromServerIDNow(a.toString())}.bind(this))}.bind(this));if(a.delivery_receipts){var e={};for(var f=a.delivery_receipts,h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;var k=j.other_user_fbid?b("MercuryIDs").getThreadIDFromUserID(j.other_user_fbid):this.$2.getClientIDFromServerIDNow(j.thread_fbid);k&&(e[k]=j.time)}a.delivery_receipts=e}a.actions=a.actions||[];a.actions.forEach(function(e){e.action_type===b("MercuryActionType").SEND_MESSAGE&&e.status===b("MercuryActionStatus").ERROR&&b("MercurySendErrorLogger").log(e);var f=null,h=null;e.other_user_fbid?(h=b("MercuryIDs").getThreadIDFromUserID(e.other_user_fbid),f=e.other_user_fbid):e.thread_fbid?(h=b("MercuryIDs").getThreadIDFromThreadFBID(e.thread_fbid),f=e.thread_fbid):e.thread_id?(h=b("MercuryIDs").getThreadIDFromThreadFBID(e.thread_id),f=e.thread_id):e.status&&e.status!=b("MercuryActionStatus").SUCCESS&&e.client_thread_id?h=e.client_thread_id:g(0);f=f&&f.toString();e.thread_id=this.$2.hasClientIDForServerID(f)?this.$2.getClientIDFromServerIDNow(f):h;e.action_type==b("MercuryActionType").SEND_MESSAGE&&e.client_thread_id&&f&&(e.thread_id=e.client_thread_id,this.$2.forceSetServerIDToClientID(f,e.client_thread_id),c[f]=e.client_thread_id);e.thread_id||g(0);(!a.payload_source||!a.payload_source.startsWith("server"))&&d(["MercuryServerRequests"],function(a){a.getForFBID(this.$1).updateLastActionTimestamp(e.timestamp)}.bind(this))}.bind(this));this.$5(a);this.$6(a);if(a.end_of_history){k=[];for(var j=0;j<a.end_of_history.length;j++){i=a.end_of_history[j];i.type=="user"?k.push("user:"+i.fbid):i.type=="thread"&&this.$2.hasClientIDForServerID(i.fbid)&&k.push(this.$2.getClientIDFromServerIDNow(i.fbid))}a.end_of_history=k}if(a.roger){var l={};Object.keys(a.roger).forEach(function(c){__p&&__p();var d=Object.keys(a.roger[c]),e;c?e=this.$2.getClientIDFromServerIDNow(c):d.length===1&&(e=b("MercuryIDs").getThreadIDFromUserID(d[0]));if(e){d=a.roger[c];l[e]={};for(var f in d)if(Object.prototype.hasOwnProperty.call(d,f)){c=b("MercuryIDs").getParticipantIDFromUserID(f);l[e][c]=d[f]}}}.bind(this));a.roger=l}a.newlyAddedClientIDs=c;a.preprocessed=!0;this.$3.handleUpdate(a)};a.prototype.$4=function(a,c){var d=a.other_user_fbid?a.other_user_fbid:a.thread_fbid;d||g(0);var e=this.$2.getClientIDFromServerIDNow(d);e||(e=a.other_user_fbid?b("MercuryIDs").getThreadIDFromUserID(a.other_user_fbid):b("MercuryIDs").getThreadIDFromThreadFBID(a.thread_fbid),this.$2.setServerIDToClientID(d,e),this.$2.setDeprecatedServerIDToClientID(a.thread_id,e),c[d]=e);a.thread_id=e};a.prototype.$5=function(a){a.actions.forEach(function(a){a.action_type===b("MercuryActionType").USER_GENERATED_MESSAGE&&(a.attachments=a.attachments||[],a.attachments.forEach(function(a){if(b("MercuryAttachment").isShareAttachment(a)&&a.share&&b("MessengerEnvironment").messengerui){var c=new(b("URI"))(a.share.uri);c.getDomain()||(a.share.uri=c.setDomain("facebook.com").setSubdomain(b("URI").getRequestURI().getSubdomain()).setProtocol("https").toString())}}))})};a.prototype.$6=function(a){__p&&__p();a.actions.forEach(function(a){__p&&__p();if(a.action_type!==b("MercuryActionType").USER_GENERATED_MESSAGE)return;a=a;if(!a.has_attachment||!a.attachments)return;for(var c=a.attachments.length-1;c>=0;c-=1){var d=a.attachments[c];if(!d.share||!d.share.style_list||d.share.style_list[0]!="genie_message")continue;d.share.target.genie_id&&(a.author=b("MercuryIDs").getParticipantIDFromUserID(d.share.target.genie_id));d.share.target&&!d.share.target.attachment&&(a.attachments.splice(c,1),a.has_attachment=a.attachments.length>0)}})};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryServerSendMessageQueueOptions",[],(function(a,b,c,d,e,f){function a(a,b,c,d,e,f){"use strict";this.success_handler=a,this.error_handler=b,this.transport_error_handler=c,this.timeout_handler=d,this.timeout=e,this.connection_retries=f}e.exports=a}),null);
__d("MercurySyncConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({ARBITER_EVENT_INVALID_STATE:"SYNC:INVALID_STATE",ARBITER_EVENT_INVALID_STATE_RETRY:"SYNC:INVALID_STATE_RETRY",ARBITER_EVENT_INVALID_STATE_RECOVER:"SYNC:INVALID_STATE_RECOVER",ARBITER_EVENT_SERVER_REQUESTS_FAIL:"NET:SERVER_REQUESTS_FAIL",ARBITER_EVENT_SERVER_REQUESTS_RECOVER:"NET:SERVER_REQUESTS_RECOVER"});e.exports=a}),null);
__d("MercurySyncDeltaHolder",["MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$2=new Map(),this.$3=[],this.$1=0}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.peek=function(){this.$3=this.$3.sort(function(a,b){return a-b});return this.$3[0]};a.prototype.getTop=function(){this.$3=this.$3.sort(function(a,b){return a-b});return this.$3.reverse()[0]};a.prototype.pop=function(){this.$3=this.$3.sort(function(a,b){return a-b});if(this.$3.length===0)return undefined;var a=this.$3.shift(),b=this.$2.get(a);this.$2["delete"](a);return{seqID:a,delta:b}};a.prototype.push=function(a,b){if(this.$2.has(a))return;this.$2.set(a,b);this.$3.push(a)};a.prototype.getLastSeqID=function(){return this.$1};a.prototype.updateLastSeqID=function(a){this.$1=a};a.prototype.updateLastSeqIDAndClearHistory=function(a){this.$2=new Map(),this.$3=[],this.$1=a};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("XMercuryUnseenThreadIDsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/unseen_thread_ids/",{})}),null);
__d("XMessagingChangeMentionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_mentions_mute_thread/",{})}),null);
__d("XMessagingChangeReactionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_reactions_mute_thread/",{})}),null);
__d("MercuryServerRequests",["errorCode","invariant","Promise","Arbiter","AsyncResponse","BanzaiODS","ChannelConstants","ChatReliabilityInstrumentation","CurrentUser","EventProfiler","FBJSON","LogHistory","MercuryActionStatus","MercuryActionType","MercuryAPIArgsSource","MercuryAssert","MercuryConfig","MercuryDispatcher","MercuryErrorType","MercuryGlobalActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageClientState","MercuryMessageIDs.bs","MercuryPayloadSource","MercurySendErrorLogger","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequestsConfig","MercuryServerSendMessageQueueOptions","MercuryServerSendMessageQueueRouter","MercuryServerURIs","MercurySingletonProvider","MercurySourceType","MercurySyncConstants","MercurySyncDeltaHolder","MercuryThreadIDMap","MessagingConfig","MessagingTag","XMercuryUnseenThreadIDsController","XMessagingChangeMentionsMuteModeController","XMessagingChangeReactionsMuteModeController","createObjectFrom","gkx","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("LogHistory").getInstance("mercury_server"),j=b("MercuryAPIArgsSource").MERCURY,k=30*1e3,l=!0;function m(a){return a.getError()?"_"+a.getError():""}function n(a,c){__p&&__p();var d=babelHelpers["extends"]({},a),e;if(c.threads){d.threads||(d.threads={});for(e in c.threads)d.threads[e]=Object.keys(b("createObjectFrom")((d.threads[e]||[]).concat(c.threads[e]||[])))}if(c.messages){d.messages||(d.messages={});for(e in c.messages){d.messages[e]||(d.messages[e]={});for(var f in c.messages[e])d.messages[e][f]?d.messages[e][f]=r(d.messages[e][f],c.messages[e][f]):d.messages[e][f]=c.messages[e][f]}}d.client=a.client||c.client;return d}function o(a,c){var d=Object.assign(b("createObjectFrom")(a.folders,!0),b("createObjectFrom")(c.folders,!0));a=a.client||c.client;return{folders:Object.keys(d),client:a}}function p(a,b){for(var c in b)if(a[c]&&typeof a[c]==="object")a[c]=r(a[c],b[c]);else if(b[c]&&typeof b[c]==="object"){var d={};Object.assign(d,b[c]);a[c]=d}return a}function q(a,b){return b}function r(a,b){var c=a.offset<b.offset?a.offset:b.offset,d=a.offset+a.limit,e=b.offset+b.limit;d=d>e?d:e;e=d-c;d=a.timestamp>b.timestamp?a.timestamp:b.timestamp;return{offset:c,limit:e,timestamp:d}}function s(a,b){var c=a.client||b.client;c={ids:{},client:c};Object.assign(c.ids,a.ids,b.ids);return c}function t(a,c){__p&&__p();var d={},e,f=a.client||c.client;delete a.client;delete c.client;for(e in a)Object.assign(d,b("createObjectFrom")(a[e],e));for(e in c)Object.assign(d,b("createObjectFrom")(c[e],e));a={client:f};for(var g in d)e=d[g],a[e]||(a[e]=[]),a[e].push(g);return a}function u(a,c){var d=a.client||c.client;a=b("createObjectFrom")(a.ids,!0);c=b("createObjectFrom")(c.ids,!0);a=Object.assign(a,c);return{ids:Object.keys(a),client:d}}function v(a){this.$1=a,this.$2=0,this.$3={},this.$4={},this.$9=new Set(),this.__threadIDMap=b("MercuryThreadIDMap").getForFBID(this.$1),this.$5=b("MercuryDispatcher").getForFBID(this.$1),this.$6=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.$7=new(b("MercuryServerSendMessageQueueOptions"))(function(a,b){this.__handleUpdate(a,b)}.bind(this),function(a){return this.$10(a)}.bind(this),function(a){this.$11(a)}.bind(this),function(a){return this.$12(a)}.bind(this),b("MercuryServerRequestsConfig").sendMessageTimeout,b("MessagingConfig").SEND_CONNECTION_RETRIES),this.$8=b("MercurySyncDeltaHolder").getForFBID(this.$1),this.$13()}v.getForFBID=function(a){return w.getForFBID(a)};v.get=function(){return w.get()};v.prototype.fetchThreadlistInfo=function(a,c,d,e,f,g){d===void 0&&(d=b("MessagingTag").INBOX);f===void 0&&(f=j);l&&(l=!1,b("EventProfiler").tagCurrentActiveInteractionsAs("FirstMercuryThreadFetch"));var h=e?b("MercuryServerDispatcher").IMMEDIATE:null;b("MercuryConfig").MessengerInboxRequests&&!h&&(h=b("MercuryServerDispatcher").BATCH_DEFERRED_MULTI);f={client:f};f[d]={offset:a,limit:c,filter:e,before:g};this.__sendRequest(b("MercuryServerURIs").THREADLIST_INFO,f,h)};v.prototype.fetchPinnedThreadlistInfo=function(){var a={};a.onlyPinnedThreads=!0;this.__sendRequest(b("MercuryServerURIs").THREADLIST_INFO,a,null)};v.prototype.fetchUnseenThreadIDs=function(a,c){a===void 0&&b("MessagingTag").INBOX,c===void 0&&(c=j),this.__sendRequest(b("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString(),{})};v.prototype.fetchUnreadThreadIDs=function(a,c){c===void 0&&(c=j),this.__sendRequest(b("MercuryServerURIs").UNREAD_THREADS,{folders:[a],client:c})};v.prototype.fetchThreadData=function(a,c){__p&&__p();c===void 0&&(c=j);b("MercuryAssert").allThreadID(a);var d={threads:{},client:c},e=[],f=[];a.forEach(function(a){__p&&__p();if(this.$3[a])return;this.$3[a]=!0;var c=this.__threadIDMap.getServerIDFromClientIDNow(a);a=b("MercuryIDs").tokenize(a);if(a.type=="user")e.push(a.value),d.threads.user_ids=e;else if(a.type=="thread")c?f.push(c):f.push(a.value),d.threads.thread_fbids=f;else if(a.type=="root")c&&(f.push(c),d.threads.thread_fbids=f);else if(a.type!="pending")throw new Error("Unknown thread type",a)}.bind(this));this.$5.inform("fetch-thread-data",d);d.threads.user_ids&&d.threads.user_ids.forEach(function(a){a||(i.error("empty user id",JSON.stringify(e)),b("ChatReliabilityInstrumentation").logERROR("Invalid user ID sent to thread_info.php: "+JSON.stringify(e)))});d.threads.thread_fbids&&d.threads.thread_fbids.forEach(function(c){c||b("ChatReliabilityInstrumentation").logERROR("Invalid FBID sent to thread_info.php: "+JSON.stringify(a))});for(var g in d.threads){this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,d);break}};v.prototype.ensureThreadIsFetched=function(a,c){__p&&__p();c===void 0&&(c=j);if(!this.__threadIDMap.getClientIDFromServerIDNow(a)&&!this.$3[a]){if(!a){b("ChatReliabilityInstrumentation").logERROR("Ensure invalid FBID sent to thread_info.php");i.error("attempting to fetch empty thread_fbid. Bad idea!");return}this.$3[a]=!0;this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,{threads:{thread_fbids:[a]},client:c})}};v.prototype.fetchThreadMessages=function(a,c,d,e,f,g){__p&&__p();g===void 0&&(g=j);b("MercuryAssert").isThreadID(a);var h,i=b("MercuryIDs").tokenize(a),k=this.__threadIDMap.getServerIDFromClientIDNow(a),l=!1;if(k)k=k,h=i.type=="user"?"user_ids":"thread_fbids";else{k=i.value;switch(i.type){case"user":h="user_ids";l=!0;break;case"thread":h="thread_fbids";break}}var m={messages:{},threads:{},client:g};h?(m.messages[h]={},m.messages[h][k]={offset:c,timestamp:e,limit:d},l&&(m.threads[h]=[k]),this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,m,f)):this.__threadIDMap.getServerIDFromClientID(a,function(a){m.messages.thread_fbids={},m.messages.thread_fbids[a]={offset:c,timestamp:e,limit:d},this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,m,f)}.bind(this))};v.prototype.handleThreadInfoError=function(a,c){__p&&__p();var d=a.getData();a=[];if(d.messages){for(var e in d.messages.thread_fbids){var f=this.__threadIDMap.getClientIDFromServerIDNow(e);f&&a.push(this.$14(f))}for(var g in d.messages.user_ids)a.push(this.$14("user:"+g));for(var h in d.messages.group_ids)a.push(this.$14("group:"+h))}a.length&&this.$5.handleUpdate({actions:a,from_client:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});if(d.threads&&(d.threads.user_ids||d.threads.thread_fbids||d.threads.group_ids||d.threads.thread_ids)){f=5;a=!0;!d.retry_count?(d.retry_count=0,d.messages&&delete d.messages):d.retry_count>=f&&(!c||!b("gkx")("AT6272W7G37c2zZOpPDUPGXaehXUPvo7_ZqAqdSAoKzgP5DQ8Luz0w5hQkLZeaPa8UmuuAXTSUI8FctXnbHnbKTw"))&&(a=!1,(d.threads.thread_ids||[]).concat(d.threads.thread_fbids||[]).forEach(function(a){a in this.$3&&delete this.$3[a]},this));[].concat(d.threads.thread_ids||[],d.threads.thread_fbids||[],d.threads.user_ids||[],d.threads.group_ids||[]).forEach(function(a){a?this.$9.add(a):b("ChatReliabilityInstrumentation").logERROR("lost a thread id somehow")}.bind(this));if(a){c=Math.pow(2,Math.min(d.retry_count,f))*1e3;b("setTimeoutAcrossTransitions")(function(){i.log("retry_thread","{}"),this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,d)}.bind(this),c);d.retry_count++}if(this.$9.size){var j=[];this.$9.forEach(function(a){return j.push(a)});i.debug("failed threads",JSON.stringify(j));b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_SERVER_REQUESTS_FAIL,j)}}};v.prototype.markFolderAsRead=function(a){this.__sendRequest(b("MercuryServerURIs").MARK_FOLDER_READ,{folder:a});a=[{action_type:b("MercuryGlobalActionType").MARK_ALL_READ,folder:a}];this.$5.handleUpdate({global_actions:a,from_client:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS})};v.prototype.changeThreadReadStatus=function(a,c,d,e,f,g){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(h){var j;j={ids:(j={},j[h]=c,j),source:d,watermarkTimestamp:e,shouldSendReadReceipt:f,commerce_last_message_type:g};i.log("initiate_change_read_status",JSON.stringify({thread_id:a,thread_fbid:h,mark_as_read:c,watermarkTimestamp:e}));this.__sendRequest(b("MercuryServerURIs").CHANGE_READ_STATUS,j)}.bind(this))};v.prototype.changeThreadArchivedStatus=function(a,c,d){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){var e={ids:{},source:d};e.ids[a]=c;this.__sendRequest(b("MercuryServerURIs").CHANGE_ARCHIVED_STATUS,e)}.bind(this))};v.prototype.changeThreadPinnedStatus=function(a,c,d){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){var e={ids:{},source:d};e.ids[a]=c;this.__sendRequest(b("MercuryServerURIs").CHANGE_PINNED_STATUS,e)}.bind(this))};v.prototype.changeThreadPageFollowUpStatus=function(a,c,d){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){var e={ids:{},source:d};e.ids[a]=c;this.__sendRequest(b("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS,e)}.bind(this))};v.prototype.changeThreadFolder=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){var d={};d[c]=[a];this.__sendRequest(b("MercuryServerURIs").MOVE_THREAD,d)}.bind(this))};v.prototype.changeMutingOnThread=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){this.__sendRequest(b("MercuryServerURIs").CHANGE_MUTE_THREAD,{thread_fbid:a,mute_settings:c,payload_source:j})}.bind(this))};v.prototype.changeMentionsMutingOnThread=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){this.__sendRequest(b("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:a,mentions_mute_mode:c,payload_source:j})}.bind(this))};v.prototype.changeReactionsMutingOnThread=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){this.__sendRequest(b("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:a,reactions_mute_mode:c,payload_source:j})}.bind(this))};v.prototype.markThreadSpam=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){this.__sendRequest(b("MercuryServerURIs").MARK_SPAM,{id:a,source:c})}.bind(this))};v.prototype.unmarkThreadSpam=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){this.__sendRequest(b("MercuryServerURIs").UNMARK_SPAM,{id:a,source:c})}.bind(this))};v.prototype.deleteThread=function(a,b){this.deleteThreads([a],b)};v.prototype.deleteThreads=function(a,c){b("promiseDone")(b("Promise").all(a.map(function(a){b("MercuryAssert").isThreadID(a);return new(b("Promise"))(function(b){return this.__threadIDMap.getServerIDFromClientID(a,b)}.bind(this))}.bind(this))).then(function(a){this.__sendRequest(b("MercuryServerURIs").DELETE_THREAD,{ids:a,source:c})}.bind(this)))};v.prototype.deleteMessages=function(a,c){b("MercuryMessageIDs.bs").getServerIDs(c||[],function(a){this.__sendRequest(b("MercuryServerURIs").DELETE_MESSAGES,{message_ids:a})}.bind(this))};v.prototype.sendDeliveryReceipts=function(a,c){b("MercuryMessageIDs.bs").getServerIDs(a||[],function(a){this.__sendRequest(b("MercuryServerURIs").DELIVERY_RECEIPTS,{message_ids:a,thread_ids:c})}.bind(this))};v.prototype.sendNewMessage=function(a,c){c===void 0&&(c=j);a.offline_threading_id||b("BanzaiODS").bumpEntityKey("chat.web","missing_otid_on_send");if(a.client_state&&a.client_state!==b("MercuryMessageClientState").SEND_TO_SERVER)return;var d=b("MercuryIDs").tokenize(a.thread_id),e=d.type,f=babelHelpers["extends"]({},a);f.thread_id=null;e=="user"?(f.other_user_fbid=d.value,this.$15(f,c)):e=="thread"?(f.thread_fbid=d.value,this.$15(f,c)):e=="root"&&d.value==f.offline_threading_id?(f.client_thread_id=a.thread_id,this.$15(f,c)):(b("MercuryIDs").isLocalThread(a.thread_id)||h(0),this.__threadIDMap.getServerIDFromClientID(a.thread_id,function(a){f.thread_fbid=a,this.$15(f,c)}.bind(this)));b("ChatReliabilityInstrumentation").logMESSAGE_SEND_START(b("FBJSON").stringify({otid:f.offline_threading_id,message_id:f.message_id,other_user_fbid:f.other_user_fbid,viewer_page_fbid:f.creator_info?f.creator_info.pageID:null}))};v.prototype.$15=function(a,c){b("Arbiter").inform(b("ChannelConstants").ATTEMPT_RECONNECT),this.$4[a.message_id]=Date.now(),b("MercuryServerSendMessageQueueRouter").getForFBID(this.$1).enqueue(a.other_user_fbid||a.thread_fbid||a.client_thread_id,this.$7,c,a)};v.prototype.__getSendMessageQueueOptions=function(){return this.$7};v.prototype.markSeen=function(){var a=this.$2;this.__sendRequest(b("MercuryServerURIs").MARK_SEEN,{seen_timestamp:a})};v.prototype.$16=function(a,c,d,e){__p&&__p();a=a.getData();a=a.message_batch||[a];i.debug("handle_send_message_error_common",JSON.stringify({reliability_error_status:d,request_error_status:c,error_data:e,message_list:a}));d=a.map(function(a){a={action_type:b("MercuryActionType").SEND_MESSAGE,other_user_fbid:a.other_user_fbid,thread_fbid:a.thread_fbid,client_message_id:a.message_id,message_id:a.message_id,client_thread_id:a.client_thread_id,status:c,error_data:e};return a});d.forEach(function(a){a.action_type===b("MercuryActionType").SEND_MESSAGE&&a.status===b("MercuryActionStatus").ERROR&&this.__logMercurySendError(a)},this);a={actions:d,payload_source:b("MercuryPayloadSource").CLIENT_HANDLE_ERROR};this.$6.handleUpdate(a)};v.prototype.handleSendMessageError=function(a){var c=a.getPayload(),d=null,e=null;c&&c.error_payload?(d=b("MercuryActionStatus").UNCONFIRMED,e="send_error"):(d=b("MercuryActionStatus").ERROR,e="request_error"+m(a));c=a.error;c===1404102&&b("AsyncResponse").verboseErrorHandler(a);c=/<.*>/.test(a.getErrorDescription())?a.getErrorSummary():a.getErrorDescription();this.$16(a.getRequest(),d,e,{type:b("MercuryErrorType").SERVER,code:a.getError(),description:c,is_transient:a.isTransient()})};v.prototype.handleSendMessageTransportError=function(a){this.$16(a.getRequest(),b("MercuryActionStatus").ERROR,"transport_error"+m(a),{type:b("MercuryErrorType").TRANSPORT,code:a.getError(),is_transient:!0})};v.prototype.handleSendMessageTimeout=function(a){this.$16(a,b("MercuryActionStatus").ERROR,"transport_timeout",{type:b("MercuryErrorType").TIMEOUT,is_transient:!0})};v.prototype.getLastActionTimestamp=function(){return this.$2};v.prototype.__logMercurySendError=function(a){b("MercurySendErrorLogger").log(a)};v.prototype.updateLastActionTimestamp=function(a){var b=Date.now()-1e3*60*60*24;a&&a>b&&(this.$2=Math.max(this.$2,a))};v.prototype.markThreadFetched=function(a){delete this.$3[a],this.$9["delete"](a)&&!this.$9.size&&(i.debug("no_failed_threads","{}"),b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_SERVER_REQUESTS_RECOVER))};v.prototype.$14=function(a){return{action_type:b("MercuryActionType").LOG_MESSAGE,thread_id:a,message_id:a,timestamp:Date.now(),is_unread:!1,source:b("MercurySourceType").UNKNOWN,log_message_body:"",log_message_type:b("MercuryLogMessageType").SERVER_ERROR,log_message_data:{}}};v.prototype.__getForAsyncRequest=function(a){a=a.getData();a=a.request_user_id?a.request_user_id:b("CurrentUser").getID();return v.getForFBID(a)};v.prototype.__handleUpdate=function(a,b){this.__getForAsyncRequest(b).$6.handleUpdate(a)};v.prototype.$17=function(a){var b=this.__getForAsyncRequest(a);b.handleThreadInfoError(a)};v.prototype.$18=function(a){var b=this.__getForAsyncRequest(a);b.handleThreadInfoError(a,!0)};v.prototype.$10=function(a){var b=this.__getForAsyncRequest(a.getRequest());b.handleSendMessageError(a)};v.prototype.$11=function(a){var b=this.__getForAsyncRequest(a.getRequest());b.handleSendMessageTransportError(a)};v.prototype.$12=function(a){var b=this.__getForAsyncRequest(a);b.handleSendMessageTimeout(a)};v.prototype.$13=function(){__p&&__p();var a,c=null;b("MercuryServerRequestsConfig").msgrRegion&&(c={name:"X-MSGR-Region",value:b("MercuryServerRequestsConfig").msgrRegion});a=(a={},a[b("MercuryServerURIs").THREAD_INFO]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_DEFERRED_MULTI,customHeader:c,batch_function:n,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this),error_handler:function(a){return this.$17(a.getRequest())}.bind(this),timeout_handler:function(a){return this.$18(a)}.bind(this),timeout:k},a[b("MercuryServerURIs").MARK_FOLDER_READ]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").CHANGE_READ_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){this.__handleUpdate(a,b);b=(a.threads||[]).map(function(a){return a&&a.thread_id});i.log("response_change_read_status",JSON.stringify({threads:b}))}.bind(this)},a[b("MercuryServerURIs").MARK_SEEN]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:q,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").THREADLIST_INFO]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:c,batch_function:p,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").MARK_SPAM]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").UNMARK_SPAM]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").UNREAD_THREADS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:c,batch_function:o,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").CHANGE_ARCHIVED_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:s,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").CHANGE_PINNED_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:s,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:s,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").DELETE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:u,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").DELETE_MESSAGES]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").DELIVERY_RECEIPTS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").MOVE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:t,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").CHANGE_MUTE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a);var d=b("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString();a[d]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)};d=b("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI().toString();a[d]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)};d=b("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI().toString();a[d]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)};b("MercuryServerDispatcher").registerEndpoints(a)};v.prototype.__sendRequest=function(a,c,d){if(this.$8)switch(a){case b("MercuryServerURIs").THREADLIST_INFO:case b("MercuryServerURIs").THREAD_INFO:c.cachius_min_seq_id=this.$8.getLastSeqID();break;default:break}b("MercuryServerDispatcher").trySend(a,c,d,this.$1)};v.prototype.__getFBID=function(){return this.$1};var w=new(b("MercurySingletonProvider"))(v);e.exports=v}),null);
__d("MercuryThreadIDMap",["KeyedCallbackManager","MercuryAssert","MercuryIDs","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=new(b("KeyedCallbackManager"))(),this.$3=new(b("KeyedCallbackManager"))()}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.setServerIDToClientID=function(a,b){var c=this.getClientIDFromServerIDNow(a);if(c){c!==b;return}this.forceSetServerIDToClientID(a,b)};a.prototype.forceSetServerIDToClientID=function(a,b){this.$2.setResource(a,b),this.$3.setResource(b,a)};a.prototype.setDeprecatedServerIDToClientID=function(a,b){a&&this.$2.setResource(a,b)};a.prototype.getClientIDFromServerIDNow=function(a){return this.$2.getResource(a)};a.prototype.getClientIDFromServerID=function(a,b){this.$2.executeOrEnqueue(a,b),d(["MercuryServerRequests"],function(b){b.getForFBID(this.$1).ensureThreadIsFetched(a)}.bind(this))};a.prototype.getServerIDFromClientIDNow=function(a){return this.$3.getResource(a)};a.prototype.getServerIDFromClientID=function(a,c){b("MercuryAssert").isThreadID(a);var e=this.$3.executeOrEnqueue(a,c);d(["MercuryServerRequests"],function(c){var d=this.$3.getUnavailableResources(e),f=b("MercuryIDs").tokenize(a);d.length&&f.type!="root"&&c.getForFBID(this.$1).fetchThreadData(d)}.bind(this))};a.prototype.hasClientIDForServerID=function(a){return!!this.getClientIDFromServerIDNow(a)};a.prototype.convertThreadIDIfAvailable=function(a){var b=this.getClientIDFromServerIDNow(a);return b||a};a.prototype.canLinkExternally=function(a){b("MercuryAssert").isThreadID(a);var c=b("MercuryIDs").tokenize(a);return c.type=="user"||!!this.getServerIDFromClientIDNow(a)};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryServerSendMessageQueueSimulatedError",["AsyncRequest","AsyncResponse"],(function(a,b,c,d,e,f){var g=9999;a={create:function(a){a=new(b("AsyncRequest"))(this.endpoint_uri).setData({message_batch:[a],client:this.client});var c=new(b("AsyncResponse"))(a,{});Object.assign(c,{error:g,silentError:!1,transientError:!0,request:a});return c}};e.exports=a}),null);
__d("MessengerAttachmentTransformerForSend.bs",["bs_array","bs_caml_array","MercuryAttachmentType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){__p&&__p();c=c.node;if(c==null)return{attach_type:b("MercuryAttachmentType").ERROR};else{if(c.__typename==="ExtensibleMessageAttachment"){var e=c.story_attachment;e={legacy_attachment_id:c.legacy_attachment_id,story_attachment:e==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(e)}}else e=null;var f=c.__typename==="Sticker"?c:null,g=c.__typename,h;switch(g){case"MessageAnimatedImage":case"MessageAudio":case"MessageFile":case"MessageImage":case"MessageVideo":h=[c];break;default:h=null}g=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments({blob_attachments:h});c=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:e,blob_attachments:g,sticker:f},d);if(c.length!==0)return b("bs_caml_array").caml_array_get(c,0);else return{}}}function a(a,c,d){return b("bs_array").map(function(b){return g(a,b,d)},c)}f._transform=g;f.transform=a}),null);
__d("XMessagingSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/send/",{})}),null);
__d("MercuryServerSendMessageQueue",["fbt","BanzaiODS","ChatReliabilityInstrumentation","CurrentUser","LogHistory","MercuryIDs","MercuryLoggingHelper","MercuryMessages","MercuryServerDispatcher","MercuryServerRequestsConfig","MercuryServerSendMessageQueueSimulatedError","MercurySyncDeltaHandler","MessengerAttachmentTransformerForSend.bs","MessengerObjectAssociationType","MessengerState.bs","Run","XMessagingSendController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LogHistory").getInstance("mercury_server_send_message_queue");function a(a,c,d,e){__p&&__p();this.pending_message=null;this.queue=[];this.$6=function(){return this.queue.length||this.pending_message?g._("You haven't sent your message yet. Do you want to leave without sending?"):undefined}.bind(this);this.sender_id=a;this.queue_id=c;this.$2=d.success_handler;this.$1=d.error_handler;this.$4=d.transport_error_handler;this.$3=d.timeout_handler;this.$5=b("MercurySyncDeltaHandler").getForFBID(this.sender_id);this.client=e;b("Run").onBeforeUnload(this.$6,!1);a=null;b("MercuryServerRequestsConfig").msgrRegion&&(a={name:"X-MSGR-Region",value:b("MercuryServerRequestsConfig").msgrRegion});c=this.__getSendURI();c=(e={},e[c]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:a,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:d.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:d.connection_retries},e);b("MercuryServerDispatcher").registerEndpoints(c)}a.prototype.__getSendURI=function(){return b("XMessagingSendController").getURIBuilder().getURI().toString()};a.prototype.__preparePayload=function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.replied_to_message)!=null?c.message_id:c:c;var d=null,e=a.client_thread_id;if(b("MercuryIDs").isLocalThread(e)){e=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),e);if(e&&e.message_count===1&&e.object_association_type===b("MessengerObjectAssociationType").GENERAL_CHAT){d=(e=e)!=null?(e=e.associated_object)!=null?e.id:e:e}}e=c?b("MercuryMessages").get().getServerMessageID(c):null;return{client:this.client,action_type:a.action_type,app_id:a.app_id,audio_ids:a.audio_ids,body:a.body,client_thread_id:a.client_thread_id,content_attachment:a.content_attachment,ephemeral_ttl_mode:a.ephemeral_ttl_mode,file_ids:a.file_ids,gif_ids:a.gif_ids,has_attachment:a.has_attachment,image_ids:a.image_ids,location_attachment:a.location_attachment,lightweight_action_attachment:a.lightweight_action_attachment,log_message_data:a.log_message_data,log_message_type:a.log_message_type,message_id:a.message_id,message_source_data:a.message_source_data,montage_reply_data:a.montage_reply_data,offline_threading_id:a.offline_threading_id,other_user_fbid:a.other_user_fbid,photo_fbids:a.photo_fbids,shareable_attachment:a.shareable_attachment,signature_id:a.signatureID,source:a.source,specific_to_list:a.specific_to_list,sticker_id:a.sticker_id,tags:a.tags,thread_fbid:a.thread_fbid,timestamp:a.timestamp,ui_push_phase:a.ui_push_phase,video_ids:a.video_ids,platform_xmd:a.platform_xmd,profile_xmd:a.profile_xmd,replied_to_message_id:e,work_synced_group_id:d}};a.prototype.enqueue=function(a){this.queue.push(a),this.$7()};a.prototype.$7=function(){__p&&__p();if(this.pending_message||!this.queue.length){this.pending_message&&this.$8();return}this.pending_message=this.queue.shift();var a=this.__preparePayload(this.pending_message);for(var c in a)(a[c]===undefined||a[c]===null)&&delete a[c];if(!a.action_type){var d=b("MercuryLoggingHelper").obfuscateMessage(a);b("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller");h.debug("missing_action_type",JSON.stringify(d))}if(!a.message_id){d=b("MercuryLoggingHelper").obfuscateMessage(a);b("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller"+JSON.stringify(d));h.debug("missing_message_id",JSON.stringify(d))}this.$9();b("MercuryServerDispatcher").trySend(this.__getSendURI(),a,null,this.sender_id,this.queue_id)};a.prototype.$10=function(){while(this.queue.length)this.$11(this.queue.shift())};a.prototype.$11=function(a){this.$1(b("MercuryServerSendMessageQueueSimulatedError").create(a)),h.error("mark_as_failed",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,message:b("MercuryLoggingHelper").obfuscateMessage(a)}))};a.prototype.handleSuccess=function(a,c){__p&&__p();var d=(a.actions||[]).map(function(a){__p&&__p();var c=babelHelpers["extends"]({},a);if(a.graphql_payload&&a.graphql_payload.length>0){var d=b("MessengerAttachmentTransformerForSend.bs").transform(this.sender_id,a.graphql_payload,a.for_page);c=Object.assign(c,{attachments:d})}d=(d=a)!=null?(d=d.log_message_data)!=null?d.graphql_image:d:d;if(d){d=b("MessengerAttachmentTransformerForSend.bs").transform(this.sender_id,[d],a.for_page);c=Object.assign(c,{log_message_data:{image:d[0]}})}return c}.bind(this));a.actions=d;this.$2(a,c);this.$12();this.pending_message=null;this.$7()};a.prototype.handleError=function(a){this.$12(),this.$1(a),this.$10(),this.pending_message=null};a.prototype.handleTransportError=function(a){this.$12(),this.$4(a),this.$10(),this.pending_message=null};a.prototype.handleTimeout=function(a){this.$12(),this.$3(a),this.$10(),this.pending_message=null};a.prototype.$9=function(){this.$5.pause()};a.prototype.$12=function(){this.$5.resume()};a.prototype.$8=function(){h.debug("maybe_send_next_pending_message",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,pending_message:b("MercuryLoggingHelper").obfuscateMessage(this.pending_message),queue:this.queue.map(function(a){return b("MercuryLoggingHelper").obfuscateMessage(a)})}));var a="send_queue.delayed.queue_length."+this.queue.length.toString();b("BanzaiODS").bumpEntityKey("chat.web",a)};e.exports=a}),null);
__d("MercuryServerSendMessageQueueRouter",["BanzaiODS","LogHistory","MercuryServerSendMessageQueue","MercurySingletonMixin"],(function(a,b,c,d,e,f){__p&&__p();var g=b("LogHistory").getInstance("mercury_server_send_message_queue_router"),h="chat.web.send_queue_router";b("BanzaiODS").setEntitySample(h,.1);function a(a){"use strict";this.queues=new Map(),this.fbid=a}a.prototype.enqueue=function(a,c,d,e){"use strict";var f=this.queues.get(a);f===undefined&&(f=new(b("MercuryServerSendMessageQueue"))(this.fbid,a,c,d),this.queues.set(a,f),g.debug("added queue",JSON.stringify({fbid:this.fbid,queue_id:a})),b("BanzaiODS").bumpEntityKey(h,"new_queue"));f.enqueue(e)};Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MercurySyncDataFetcherImpl",["invariant","Promise","AsyncResponse","Bootloader","CurrentUser","FBIDCheck","MercuryConfig","MercuryPayloadSource","MercuryThreadlistConstants","MessagingConfig","QE2Logger","UserActivity","clearTimeout","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i=null,j=null,k={limit:b("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT+1,folder:"inbox",tags:["INBOX"],timestamp:null,offset:b("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,filter:null,includeDeliveryReceipts:!1,includeSeqID:!0},l={};function a(a){return new(b("Promise"))(function(b,c){m(a,b,c,0)})}function m(a,c,d,e){__p&&__p();if(!b("CurrentUser").isLoggedInNow()||e>b("MessagingConfig").syncFetchRetries){b("clearTimeout")(l[a]);d();return}var f=e===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,e);b("UserActivity").isOnTab()||(b("QE2Logger").logExposureForUser("mercury_dff_fetch_delay",a),f+=b("MercuryConfig").DFFD*Math.random());b("clearTimeout")(l[a]);l[a]=b("setTimeoutAcrossTransitions")(function(){__p&&__p();var f=!1,n=function(h){__p&&__p();if(f)return;if(h.errors&&h.errors.length>0){var k=h.errors[0].message;if(k){var l=function(){j&&i||g(0),new j().setErrorMessage(k).setEvent(i.DFF_FAILURE).setQueryParams(a).log()};b("gkx")("AT416ehE3mw1ywphqzeoc8-sSvcWOXWjwXQ3ibWkBpwpByhwGjdm9WHBt1oIZ43TE4bKo4d3LF402n5EQceIgzie")&&j&&i?l():b("Bootloader").loadModules(["MessengerWebGraphQLTypedLogger","MessengerWebGraphQLEvent"],function(a,b){j=a,i=b,l()},"MercurySyncDataFetcherImpl")}}f=!0;m(a,c,d,e+1)},o=function(){h||g(0);return h.fetchAll(a,[k],!b("FBIDCheck").isUser_deprecated(a),"dff").then(function(d){f=!0,c(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},d,{payload_source:b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE}))),b("clearTimeout")(l[a])},n)};b("gkx")("AT416ehE3mw1ywphqzeoc8-sSvcWOXWjwXQ3ibWkBpwpByhwGjdm9WHBt1oIZ43TE4bKo4d3LF402n5EQceIgzie")&&h?o():b("Bootloader").loadModules(["MessengerGraphQLThreadlistFetcher.bs"],function(a){h=a;return o()},"MercurySyncDataFetcherImpl")},f)}function c(a,c,d){return new(b("Promise"))(function(b,e){n(a,c,d,b,e,0)})}function n(a,c,d,e,f,g){__p&&__p();if(g>b("MessagingConfig").syncFetchRetries){f();return}var h=g===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,g);b("setTimeoutAcrossTransitions")(function(){var h=!1,i=function(b){if(h)return;h=!0;n(a,c,d,e,f,g+1)};b("Bootloader").loadModules(["MessengerThreadDFFFetcher.bs"],function(f){return f.fetch(a,{id:c,limit:d},!b("FBIDCheck").isUser_deprecated(a)).then(function(a){h=!0,e(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},a,{payload_source:b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE})))},i)},"MercurySyncDataFetcherImpl")},h)}function d(a,c,d){return new(b("Promise"))(function(b,e){o(a,c,d,b,e,0)})}function o(a,c,d,e,f,g){__p&&__p();if(g>b("MessagingConfig").syncFetchRetries){f();return}var h=g===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,g);b("setTimeoutAcrossTransitions")(function(){var h=!1,i=function(b){if(h)return;h=!0;o(a,c,d,e,f,g+1)};b("Bootloader").loadModules(["MessengerMessageDFFFetcher.bs"],function(f){return f.fetch(a,{thread_id:c,message_id:d},!b("FBIDCheck").isUser_deprecated(a)).then(function(a){h=!0,e(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},a)))},i)},"MercurySyncDataFetcherImpl")},h)}e.exports={fetchThreadlistFromGraphQL:a,fetchThreadFromGraphQL:c,fetchMessageFromGraphQL:d}}),null);
__d("MercurySyncDataFetcher",["Promise","LogHistory","MercurySyncDataFetcherImpl","MessagingConfig","WebGraphQLConfig","clearTimeout","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LogHistory").getInstance("mercury_sync_data_fetcher");function a(){var a=0;for(var c=0;c<b("MessagingConfig").syncFetchRetries;c++){var d=c===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,c);a+=d+b("MessagingConfig").syncFetchRequestTimeoutMs}return a}var h=a();function c(a){var c=null;return new(b("Promise"))(function(d,e){var f=function(a){g.error("fetch_threadlist_graphql_timeout",JSON.stringify({timeout:h})),b("clearTimeout")(c),e(a)};c=b("setTimeoutAcrossTransitions")(f,Math.max(h,b("WebGraphQLConfig").timeout*b("MessagingConfig").syncFetchRetries));b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchThreadlistFromGraphQL(a),function(a){b("clearTimeout")(c),d(a)},f)})}function d(a,c,d){return new(b("Promise"))(function(e,f){var i=function(a){g.error("fetch_thread_graphql_timeout",JSON.stringify({timeout:h})),f(a)},j=b("setTimeoutAcrossTransitions")(i,h);b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchThreadFromGraphQL(a,c,d),function(a){b("clearTimeout")(j),e(a)},i)})}function f(a,c,d){return new(b("Promise"))(function(e,f){var i=function(a){g.error("fetch_message_graphql_timeout",JSON.stringify({timeout:h})),f(a)},j=b("setTimeoutAcrossTransitions")(i,h);b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchMessageFromGraphQL(a,c,d),function(a){b("clearTimeout")(j),e(a)},i)})}e.exports={fetchThreadlistFromGraphQL:c,fetchThreadFromGraphQL:d,fetchMessageFromGraphQL:f,getMaxTimeoutMs:a}}),null);
__d("MercurySyncDFFDataFetcher",["Promise","CurrentUser","MercuryMessages","MercurySingletonProvider","MercurySyncDataFetcher","MercuryThreadIDMap"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a,this.__messages=b("MercuryMessages").getForFBID(this.$1),this.__threadIDMap=b("MercuryThreadIDMap").getForFBID(this.$1)}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.fetchInvalidateGlobalStateForGraphQL=function(){return this.$1&&this.$1!=="0"&&b("CurrentUser").isLoggedIn()?b("MercurySyncDataFetcher").fetchThreadlistFromGraphQL(this.$1):new(b("Promise"))(function(a,b){return b(!0)})};a.prototype.fetchInvalidateThreadState=function(a,c){var d=11,e=3;a=a||c;c=this.__threadIDMap.getClientIDFromServerIDNow(a);if(!c)return b("Promise").resolve({getPayload:function(){return{}}});e=e+this.__messages.getCurrentlyLoadedMessages(c).length;return!a?b("Promise").resolve({getPayload:function(){return{}}}):b("MercurySyncDataFetcher").fetchThreadFromGraphQL(this.$1,a,Math.max(e,d))};a.prototype.fetchInvalidateMessage=function(a,c,d){a=a||c;return!a?b("Promise").resolve({getPayload:function(){return{}}}):b("MercurySyncDataFetcher").fetchMessageFromGraphQL(this.$1,a,d)};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncChannelMonitor",["Arbiter","ChannelConstants","CurrentUser","MercurySingletonProvider","MercurySyncFakeDFFSender","MessengerMQTTGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.handleAwfulChannelEvent=function(){if(!b("CurrentUser").isLoggedInNow()){this.killSubscriptions();return}b("MercurySyncFakeDFFSender").getForFBID(this.$1).sendGlobalDFF()}.bind(this),this.$1=a,this.$2=!1}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.setupSubscriptions=function(){if(b("MessengerMQTTGating").isEnabled())return;this.$2||(this.$4=b("Arbiter").subscribe(b("ChannelConstants").JUMPSTART,this.handleAwfulChannelEvent),this.$3=b("Arbiter").subscribe(b("ChannelConstants").THROTTLED,this.handleAwfulChannelEvent),this.$2=!0)};a.prototype.killSubscriptions=function(){this.$2&&(b("Arbiter").unsubscribe(this.$4),b("Arbiter").unsubscribe(this.$3),this.$2=!1)};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncHolesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setDifference=function(a){this.$1.difference=a;return this};a.prototype.setSeqID=function(a){this.$1.seq_id=a;return this};a.prototype.setTopicType=function(a){this.$1.topic_type=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={difference:!0,seq_id:!0,topic_type:!0,vc:!0};e.exports=a}),null);
__d("MercurySyncTopicType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DELTA:"delta",DELTAFLOW:"deltaflow",DELTAFLOWREJECT:"deltaflowreject"})}),null);
__d("MercurySyncDeltaHandler",["invariant","Arbiter","Bootloader","ChatReliabilityInstrumentation","CurrentUser","LogHistory","MercuryDelayedDispatcher","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MercurySyncChannelMonitor","MercurySyncConstants","MercurySyncDeltaHolder","MercurySyncDeltaTypes","MercurySyncDispatcher","MercurySyncEventsProxy","MercurySyncForcedFetchHandler","MercurySyncHolesTypedLogger","MercurySyncTopicType","gkx","onAfterLoadSafe","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LogHistory").getInstance("mercury_sync_delta_handler");a.getForFBID=function(a){return i.getForFBID(a)};a.get=function(){return i.get()};function a(a){__p&&__p();this.$1=a,this.$2=b("MercurySyncDispatcher").getForFBID(this.$1),this.$3=b("MercurySyncForcedFetchHandler").getForFBID(this.$1),this.__payloadPreprocessor=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.__delayedDispatcher=b("MercuryDelayedDispatcher").getForFBID(this.$1),this.$4=b("MercurySyncDeltaHolder").getForFBID(this.$1),this.$5=0,this.$11=b("MercurySyncChannelMonitor").getForFBID(this.$1),this.$6=[],this.$14=b("MercurySyncEventsProxy").getForFBID(this.$1),h.debug("constructor",JSON.stringify({fbid:this.$1})),b("Arbiter").subscribe(b("MercurySyncEventsProxy").Events.INIT,function(a,c){__p&&__p();h.debug("initSeqID",JSON.stringify(c));a=c&&c.seqID;c=c&&c.fbid;if(!c)return;if(c!==this.$1)return;a?this.$4.updateLastSeqID(a):this.$4.updateLastSeqID(0);this.$16();this.$15=b("Arbiter").subscribe("messenger-mqtt-drop-down-to-channel",function(){this.$17(!0),this.$8&&b("Arbiter").unsubscribe(this.$8),this.$18(),this.$16()}.bind(this));b("gkx")("AT4t_FDItaR3AledkZV4lTqki4mdT1KiM3wuIPgdHHtRGiSPJhVwz6X6RsbWBWFJLIYs3x1lqdip6T1vFVAPKhvyBz-MzjRoKnUtmUSRznDdWQ")&&b("onAfterLoadSafe")(function(){b("Bootloader").loadModules(["MessengerSyncSeqIDSanityCheck"],function(a){a.getForFBID(this.$1).init()}.bind(this),"MercurySyncDeltaHandler")}.bind(this))}.bind(this))}a.prototype.$18=function(){this.$8=b("Arbiter").subscribe(this.$14.getArbiterType(b("MercurySyncEventsProxy").Events.FLOW),function(a,b){this.$13||this.$16()}.bind(this))};a.prototype.$16=function(){__p&&__p();h.debug("setUpSubscriptionsToRealTimeUpdates",JSON.stringify({fbid:this.$1})),this.$7=b("Arbiter").subscribe(this.$14.getArbiterType(b("MercurySyncEventsProxy").Events.DELTA),function(a,c){__p&&__p();a=c&&c.obj&&c.obj.queue;if(a&&a.toString()!==this.$1)return;a=c&&c.obj&&c.obj.delta;c=c&&c.obj&&c.obj.iseq;if(!a||!c)return;this.$19(c,b("MercurySyncTopicType").DELTA);this.$20(c,a);this.$4.push(c,a);this.$21()}.bind(this)),this.$12=b("Arbiter").subscribe(this.$14.getArbiterType(b("MercurySyncEventsProxy").Events.FLOW_REJECT),function(a,b){a=b&&b.obj&&b.obj.queue;if(a&&a.toString()!==this.$1)return;this.$13&&this.$17()}.bind(this)),this.$9=b("Arbiter").subscribe(this.$14.getArbiterType(b("MercurySyncEventsProxy").Events.FAKE_DFF),function(a,b){__p&&__p();a=b&&b.obj&&b.obj.queue;if(a&&a.toString()!==this.$1)return;a=b&&b.obj&&b.obj.delta;if(!a)return;if(this.$22(a))if(this.$6.some(function(a){return this.$22(a)}.bind(this)))return;else this.$6.push(a);else this.$6.push(a);this.$21()}.bind(this)),this.$11.setupSubscriptions(),this.$13=!0};a.prototype.$22=function(a){return a["class"]===b("MercurySyncDeltaTypes").ForcedFetch&&!a.threadKey&&!a.messageId};a.prototype.$21=function(){__p&&__p();if(this.$5>0)return;if(this.$6.length>0){var a=this.$6.shift();this.$23(this.$4.getLastSeqID(),a);this.$21()}a=this.$4.peek();if(!a)return;a=a-this.$4.getLastSeqID();if(a===1){var b=this.$4.pop();if(!b)return;var c=b.seqID;b=b.delta;this.$23(c,b);this.$21()}else a>1?this.$24():(this.$4.pop(),this.$21())};a.prototype.$23=function(a,c){this.$4.updateLastSeqID(a),c["class"]===b("MercurySyncDeltaTypes").ForcedFetch?(h.debug("DFF",JSON.stringify(c)),c.threadKey!==undefined&&c.messageId===undefined?this.$25(a,c):c.threadKey!==undefined&&c.messageId!==undefined?this.$26(a,c):(b("ChatReliabilityInstrumentation").logDFF_DELTA_INIT(JSON.stringify(c)),this.$27(a))):this.$2.process(c)};a.prototype.$24=function(){var a=JSON.stringify({$28:this.$4.getLastSeqID(),nextSeqID:this.$4.peek()});h.warn("hole",a);var c=this.$4.peek();!c&&g(0);c=c-1;b("ChatReliabilityInstrumentation").logDFF_HOLE_INIT(a);this.$27(c)};a.prototype.$29=function(a,c,d,e){this.$5&&g(0),this.$5++,h.debug("_scheduleDataFetch:start",JSON.stringify({seqID:a})),b("promiseDone")(c(),function(b){h.debug("_scheduleDataFetch:success",JSON.stringify({seqID:a})),this.$5--,d(a,b),this.$21()}.bind(this),function(b){h.error("_scheduleDataFetch:failure",JSON.stringify({seqID:a})),this.$5--,e(a,b),this.$21()}.bind(this))};a.prototype.$27=function(a){if(!b("CurrentUser").isLoggedInNow())return;this.$29(undefined,function(){return this.$3.processGlobalDFFForGraphQL()}.bind(this),function(a,c){a=c.getPayload();this.__payloadPreprocessor.handleUpdate(a);a.sequence_id&&(h.debug("_initiateGlobalDFF:success",JSON.stringify({seqID:a.sequence_id})),b("gkx")("AT4grcDiscEresqqeClxpO237YZ45cFruyvJopDLWV5VxCEacOqalxUvxpeiizJZHxd73ijS9yBBVXZDNpL60jLW")?this.$4.updateLastSeqIDAndClearHistory(a.sequence_id):this.$4.updateLastSeqID(a.sequence_id));b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER)}.bind(this),function(c,d){h.error("_initiateGlobalDFF:failure",""),d?this.$13&&this.$17():(b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY),h.debug("_initiateGlobalDFF:retry",""),this.$27(a))}.bind(this))};a.prototype.$25=function(a,b){this.$29(a,function(){return this.$3.processThreadDFF(a,b.threadKey,b.isLazy)}.bind(this),function(a,b){this.__payloadPreprocessor.handleUpdate(b.getPayload()),this.$4.updateLastSeqID(a)}.bind(this),function(){h.error("_initiateThreadDFF:failure",JSON.stringify(b));var c=babelHelpers["extends"]({},b);delete c.threadKey;this.$4.updateLastSeqID(a-1);this.$4.push(a,c)}.bind(this))};a.prototype.$26=function(a,c){__p&&__p();this.$29(a,function(){return this.$3.processMessageDFF(a,c.threadKey,c.messageId,c.isLazy)}.bind(this),function(a,c){c=c.getPayload();var d=c.other_user_fbid?c.other_user_fbid:c.thread_fbid;c=[babelHelpers["extends"]({},c)];var e=b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:c,payload_source:e},d);this.$4.updateLastSeqID(a)}.bind(this),function(){h.error("_initiateMessageDFF:failure",JSON.stringify(c));var b=babelHelpers["extends"]({},c);delete b.messageId;this.$4.updateLastSeqID(a-1);this.$4.push(a,b)}.bind(this))};a.prototype.$19=function(a,c){var d=a-this.$4.getLastSeqID();if(d!==1&&d!==0){if(!b("CurrentUser").isEmployee())return;new(b("MercurySyncHolesTypedLogger"))().setSeqID(a).setDifference(d).setTopicType(c).log()}};a.prototype.$20=function(a,c){switch(c["class"]){case b("MercurySyncDeltaTypes").NewMessage:h.debug("message_delta",JSON.stringify({seqID:a,threadKey:c.messageMetadata.threadKey,messageId:c.messageMetadata.messageId}));break;case b("MercurySyncDeltaTypes").ReadReceipt:h.debug("read_receipt_delta",JSON.stringify({seqID:a,threadKey:c.threadKey,actionTimestampMs:c.actionTimestampMs,watermarkTimestampMs:c.watermarkTimestampMs}));break;case b("MercurySyncDeltaTypes").DeliveryReceipt:h.debug("delivery_receipt_delta",JSON.stringify({seqID:a,deliveredWatermarkTimestampMs:c.deliveredWatermarkTimestampMs,messageIds:c.messageIds}));break}};a.prototype.pause=function(){this.$5++};a.prototype.resume=function(){this.$5--,this.$21()};a.prototype.$17=function(a){a===void 0&&(a=!1),this.$13=!1,b("Arbiter").unsubscribe(this.$7),b("Arbiter").unsubscribe(this.$9),b("Arbiter").unsubscribe(this.$12),this.$11.killSubscriptions(),a||b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE)};var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MSuggestionDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("MSuggestionActions",["MSuggestionDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SAVE_ALL_SUGGESTIONS:null,REMOVE_ALL_SUGGESTIONS:null});var g={Types:a,saveAllSuggestions:function(a,c){b("MSuggestionDispatcher").dispatch({type:g.Types.SAVE_ALL_SUGGESTIONS,threadFbId:a,suggestions:c})},removeAllSuggestions:function(a){b("MSuggestionDispatcher").dispatch({type:g.Types.REMOVE_ALL_SUGGESTIONS,threadFbId:a})}};e.exports=g}),null);
__d("MercuryMessageCustomizations",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=JSON.parse(a),c=[];Object.keys(b).forEach(function(a){c.push({customization_type:a,customization_value:b[a]})});return c}e.exports={parseCustomizations:a}}),null);
__d("MercuryProfileRanges",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return!a.id&&a.i?{id:a.i,offset:a.o,length:a.l}:a}e.exports={extractFromDelta:function(a){a=(a=a)!=null?(a=a.data)!=null?a.prng:a:a;if(!a)return undefined;var b=[];try{b=JSON.parse(a);if(b.length>0)return b.map(g)}catch(a){}return b}}}),null);
__d("MessageThreadReadStateEffect",[],(function(a,b,c,d,e,f){"use strict";var g={MARK_READ:1,MARK_UNREAD:2,KEEP_AS_IS:3};a=function(a,b){var c=b.messageMetadata.skipBumpThread;a=a!==b.messageMetadata.actorFbId?g.MARK_UNREAD:g.KEEP_AS_IS;c&&(a=g.KEEP_AS_IS);return b.messageMetadata.threadReadStateEffect?b.messageMetadata.threadReadStateEffect:a};e.exports={MessageThreadReadStateEffectType:g,extractThreadStateEffectFromDelta:a}}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){var e=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),f=c.extensible_attachment,g;if(f==null)g=null;else{var h=f.story_attachment;g={legacy_attachment_id:f.legacy_attachment_id,story_attachment:h==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(h)}}return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:e,sticker:c.sticker},d)}f.transform=a}),null);
__d("PagesCommsInboxTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setClientTime=function(a){this.$1.client_time=a;return this};a.prototype.setCustomerID=function(a){this.$1.customer_id=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setFunnel=function(a){this.$1.funnel=a;return this};a.prototype.setMessageID=function(a){this.$1.message_id=a;return this};a.prototype.setMessagingPlatform=function(a){this.$1.messaging_platform=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={client_time:!0,customer_id:!0,event:!0,funnel:!0,message_id:!0,messaging_platform:!0,page_id:!0,vc:!0};e.exports=a}),null);
__d("MercurySyncNewMessageTransformer",["Bootloader","FBIDCheck","IrisProtocolMessageLifetime","MercuryActionType","MercuryIDs","MercuryMessageCustomizations","MercuryProfileRanges","MessageThreadReadStateEffect","MessagingTag","MessengerRealtimeAttachmentTransformer.bs","PageCommItemStatus","PagesCommsInboxTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessageThreadReadStateEffect").MessageThreadReadStateEffectType,h=b("MessageThreadReadStateEffect").extractThreadStateEffectFromDelta,i=function(a){var b={};try{b=JSON.parse(a)}catch(a){}return b};function a(a,c){__p&&__p();var d=parseInt(c.messageMetadata.timestamp,10),e=c.messageMetadata.skipBumpThread,f=h(a,c),j=f===g.MARK_UNREAD&&a!==c.messageMetadata.actorFbId.toString(),k=[];c.attachments&&(k=c.attachments.map(function(c){__p&&__p();var d;c.mercury?d=c.mercury:d=i(c.mercuryJSON);if(!d)return null;c=d.extensible_attachment;var e=d.blob_attachment;d=d.sticker_attachment;if(!c&&!e&&!d)return null;var f=b("FBIDCheck").isUser_deprecated(a);[];c?c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:c},f):e?c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{blob_attachments:[e]},f):c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{sticker:d});return c.length>0?c[0]:null}));var l=!b("FBIDCheck").isUser_deprecated(a);if(l&&c.messageMetadata.actorFbId!=a){var m=b("PagesCommsInboxTypedLogger");b("Bootloader").loadModules(["PagesCommsInboxFunnel","PagesCommsInboxLoggerEvent","PagesCommsInboxLoggerPlatform"],function(b,e,f){new m().setFunnel(b.USER_SEND_TO_PAGE).setCustomerID(c.messageMetadata.threadKey.otherUserFbId).setMessageID(c.messageMetadata.messageId).setEvent(e.CLIENT_RECEIVED_NEW_DELTA).setClientTime(d).setPageID(a).setMessagingPlatform(f.MESSENGER).log()},"MercurySyncNewMessageTransformer")}k=k.filter(Boolean);var n=c.messageMetadata.tags?c.messageMetadata.tags[0]:undefined,o=null;if(c.data&&c.data.adminSignatureCreatorID){var p=c.data;o={creatorID:p.adminSignatureCreatorID||null,creatorName:p.adminSignatureCreatorName||null,creatorType:p.adminSignatureCreatorType||null,labelType:p.adminSignatureLabelType||null,pageID:p.adminSignaturePageID||null,profileURI:p.adminSignatureProfileURI||null}}return{message_id:c.messageMetadata.messageId,threading_id:null,offline_threading_id:c.messageMetadata.offlineThreadingId,author:b("MercuryIDs").getParticipantIDFromUserID(c.messageMetadata.actorFbId),author_email:c.messageMetadata.actorFbId+"@facebook.com",ephemeral_ttl_mode:c.ttl?b("IrisProtocolMessageLifetime")[c.ttl]:0,timestamp:d,is_unread:j,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,source:n,tags:c.messageMetadata.tags,is_spoof_warning:!1,folder:b("MessagingTag").INBOX,thread_fbid:c.messageMetadata.threadKey.threadFbId,other_user_fbid:c.messageMetadata.threadKey.otherUserFbId,body:c.body!==undefined?c.body:"",html_body:null,subject:null,has_attachment:k.length>0,attachments:k,ranges:undefined,thread_id:null,action_type:b("MercuryActionType").USER_GENERATED_MESSAGE,is_from_iris:!0,is_sponsored:!!(c.data&&c.data.is_sponsored&&c.data.is_sponsored==="true")||!!(c.untypedData&&c.untypedData.is_sponsored&&c.untypedData.is_sponsored==="true"),commerce_message_type:c.data?c.data.commerce_message_type:null,customizations:c.data&&c.data.customization?b("MercuryMessageCustomizations").parseCustomizations(c.data.customization):null,platform_xmd:c.data&&c.data.platform_xmd?c.data.platform_xmd:null,profile_ranges:b("MercuryProfileRanges").extractFromDelta(c),message_source:c.data&&c.data.message_source_data?i(c.data.message_source_data).message_source:null,skip_bump_thread:e,thread_read_state_effect:f,montage_reply_data:c.data&&c.data.montage_reply_data?i(c.data.montage_reply_data):null,meta_ranges:c.data&&c.data.meta_ranges?i(c.data.meta_ranges):null,creator_info:o,comm_status:l?b("PageCommItemStatus").TODO:null}}e.exports={transform:a}}),null);
__d("MercurySyncAdminTextMessageTransformer",["MercuryActionType","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=b("MercurySyncNewMessageTransformer").transform(a,c);a.action_type=b("MercuryActionType").LOG_MESSAGE;a.log_message_body=c.messageMetadata.adminText;a.log_message_data={message_type:c.type,untypedData:c.untypedData};a.log_message_type=b("MercuryLogMessageType").GENERIC_ADMIN_TEXT;return a}e.exports={transform:a}}),null);
__d("ClientSyncProtocol_GroupsSyncAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPT_IN:0,OPT_OUT:1})}),null);
__d("LiveLocationStopReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EXPIRED:1,CANCELED:2,ARRIVED:3})}),null);
__d("MercurySyncClientPayloadTransformer",["ClientSyncProtocol_GroupsSyncAction","DateConsts","LiveLocationStopReason","MercuryActionType","MercuryIDs","MercurySyncNewMessageTransformer","MessageLiveLocationClientSyncProtocolStopReason","MessengerGroupsSyncStatus","PageCommItemStatus","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")(b("LiveLocationStopReason")),h=8;function a(a,b){__p&&__p();a=a.payload;a=JSON.parse(String.fromCharCode.apply(null,a));a=a&&a.deltas;a=a[0];if(a.deltaMessageReaction)return s(a.deltaMessageReaction);else if(a.liveLocationData)return u(a.liveLocationData);else if(a.deltaUpdateGroupEventRSVPStatus){var c=a.deltaUpdateGroupEventRSVPStatus;return t(c)}else if(a.deltaPageThreadFollowUpData)return y(a.deltaPageThreadFollowUpData);else if(a.deltaChangeViewerStatus)return q(a.deltaChangeViewerStatus,b);else if(a.deltaMontageDirectExpire)return r(a.deltaMontageDirectExpire);else if(a.deltaMessageReply)return n(a.deltaMessageReply,b);else if(a.deltaUpdateGroupsSyncStatus)return o(a.deltaUpdateGroupsSyncStatus);else if(a.deltaUpdateGroupsSyncMetadata)return p(a.deltaUpdateGroupsSyncMetadata);else if(a.deltaGroupThreadDescription)return v(a.deltaGroupThreadDescription);else if(a.deltaUpdateThreadTheme)return m(a.deltaUpdateThreadTheme);else if(a.deltaUpdatePinnedThread)return w(a.deltaUpdatePinnedThread);else if(a.deltaUpdatePrivateGroupJoinableLink)return z(a.deltaUpdatePrivateGroupJoinableLink);else if(a.deltaOmniMDirectivesV2)return k(a.deltaOmniMDirectivesV2);else if(a.deltaMontageMessageDelete)return i(a.deltaMontageMessageDelete);else if(a.deltaNewMontageMessage)return j(a.deltaNewMontageMessage);else return x(a)}function i(a){var c=a.threadFbid;a=a.messageFbid;return{action_type:b("MercuryActionType").DELETE_MONTAGE_MESSAGES,message_ids:[a.toString()],thread_fbid:c.toString()}}function j(a){return{action_type:b("MercuryActionType").NEW_MONTAGE_MESSAGE,thread_fbid:a.messageMetadata.threadFbid}}function k(a){if(a.directives&&a.directives[0]){a=(a=a.directives[0])!=null?(a=a.data)!=null?(a=a.add_actions)!=null?a.actions:a:a:a;if(a&&a[0]){var c;c=((c=a[0])!=null?(c=c.thread_key)!=null?c.thread_fbid:c:c)||((c=a[0])!=null?(c=c.thread_key)!=null?c.other_user_fbid:c:c);return!c?null:{action_type:b("MercuryActionType").CREATE_OMNI_M_SUGGESTIONS,thread_fbid:c,suggestions:a}}}return null}function l(a){return"#"+a.slice(2)}function m(a){__p&&__p();var c=a.themeId,d=a.threadKey,e=a.fallbackColor;a=a.gradientColors;d=d.threadFbId||d.otherUserFbId;if(!d)return null;e=e&&l(e);var f=a&&a.length>0;if(f){f=a.map(l);return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),theme_id:c,solid_color:e,header_color:f[0],footer_color:f[f.length-1],gradient_colors:f}}else return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),theme_id:c,solid_color:e,header_color:e,footer_color:e,gradient_colors:[]}}function n(a,c){var d=a.message;a=a.repliedToMessage;d=b("MercurySyncNewMessageTransformer").transform(c,d);if(a){c=b("MercurySyncNewMessageTransformer").transform(c,a);d.replied_to_message=c}return d}function o(a){var c=a.threadKey,d=a.actorFbid;a=a.groupsSyncStatus;c=c.threadFbId||c.otherUserFbId;if(!c)return null;a=b("MessengerGroupsSyncStatus")[a];return{action_type:b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED,thread_fbid:c.toString(),actor_fbid:d.toString(),groups_sync_status_string:a}}function p(a){__p&&__p();var c=a.threadKey,d=a.actorFbid,e=a.syncAction,f=a.sourceSurface;a=a.syncedFbGroupId;c=c.threadFbId||c.otherUserFbId;if(!c)return null;var g;switch(e){case b("ClientSyncProtocol_GroupsSyncAction").OPT_IN:g=b("MessengerGroupsSyncStatus").OPT_IN;break;case b("ClientSyncProtocol_GroupsSyncAction").OPT_OUT:g=b("MessengerGroupsSyncStatus").OPT_OUT;break;default:return null}return{action_type:b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE,thread_fbid:c.toString(),actor_fbid:d.toString(),groups_sync_action:g,source_surface:f,fb_group_id:a.toString()}}function q(a,c){var d=a.actorFbid,e=a.canViewerReply,f=a.reason;a=a.threadKey;if(!d)return null;var g=d.toString();g=b("MercuryIDs").getParticipantIDFromUserID(g===c?a.otherUserFbId:c);return{action_type:b("MercuryActionType").BLOCK_STATUS_CHANGED,actorFbid:d,canViewerReply:e,reason:f,message_blocked_ids:[g],other_user_fbid:a.otherUserFbId.toString()}}function r(a){var c=a.threadKey.threadFbId||a.threadKey.otherUserFbId;return{action_type:b("MercuryActionType").MONTAGE_DIRECT_EXPIRE,messageId:a.messageId,timestamp:a.timestamp,thread_fbid:c.toString(),keep_expiry_timestamp:a.keepExpiryTimestamp}}function s(a){var c=a.messageId,d=a.offlineThreadingId,e=a.reaction,f=a.senderId,g=a.userId;a=a.threadKey.threadFbId||a.threadKey.otherUserFbId;return{action_type:b("MercuryActionType").REACTION_UPDATE,messageId:c,offlineThreadingId:d,reaction:e,senderId:f,thread_fbid:a.toString(),userId:g}}function t(a){var c=a.threadKey&&a.threadKey.threadFbId;if(!c)return null;var d=a.actorFbId;a=a.rsvpStatus;return!d?null:{action_type:b("MercuryActionType").EVENT_RSVP_CHANGED,thread_fbid:c.toString(),actor_fbid:d.toString(),rsvp_status:a}}function u(a){__p&&__p();var c=a.threadKey;if(!c)return null;c=c.threadFbId||c.otherUserFbId;if(!c)return null;if(!a.messageLiveLocations||a.messageLiveLocations.length!==1)return null;a=a.messageLiveLocations[0];var d=a.expirationTime,e=a.stopReason!=null||Date.now()/b("DateConsts").MS_PER_SEC>d,f=function(a){return a/Math.pow(10,h)},i=a.coordinate?{latitude:f(a.coordinate.latitude),longitude:f(a.coordinate.longitude)}:null,j=null;a.destination&&(j={latitude:f(a.destination.latitude),longitude:f(a.destination.longitude),label:a.destination.label});f=null;switch(a.stopReason){case b("MessageLiveLocationClientSyncProtocolStopReason").EXPIRED:f=g.EXPIRED;break;case b("MessageLiveLocationClientSyncProtocolStopReason").CANCELED:f=g.CANCELED;break;case b("MessageLiveLocationClientSyncProtocolStopReason").ARRIVED:f=g.ARRIVED;break}return{action_type:b("MercuryActionType").LIVE_LOCATION_UPDATE,thread_fbid:c.toString(),messageId:a.messageId,liveLocation:{live_location_id:a.id.toString(),is_expired:e,expiration_time:d,sender:{id:a.senderId.toString()},coordinate:i,location_title:a.locationTitle,sender_destination:j,stop_reason:f}}}function v(a){var c=a.threadKey;a=a.threadDescription;c=c.threadFbId;return!c?null:{action_type:b("MercuryActionType").DESCRIPTION_CHANGED,thread_fbid:c.toString(),group_thread_description_string:a}}function w(a){var c=a.threadKey;a=a.isPinned;c=c.threadFbId||c.otherUserFbId;return{action_type:b("MercuryActionType").CHANGE_PINNED_STATUS,thread_fbid:c.toString(),is_pinned:a}}function x(a){a=a&&a.deltaPaymentPinProtectionStatusData;var c=a&&a.threadKey&&a.threadKey.otherUserFbId;a=a&&a.isPinProtected;if(!c)return null;c=c.toString();return{action_type:b("MercuryActionType").IS_PIN_PROTECTED,thread_fbid:c,is_pin_protected:a}}function y(a){var c=a.threadKey.otherUserFbId;return{action_type:b("MercuryActionType").UPDATE_COMM_STATUS,comm_status:a.isFollowUp?b("PageCommItemStatus").FOLLOW_UP:b("PageCommItemStatus").TODO,thread_fbid:c.toString()}}function z(a){var c=a.threadKey;a=a.privateGroupLink;c=c.threadFbId;return{action_type:b("MercuryActionType").UPDATE_JOINABLE_LINK,joinable_link:a,thread_fbid:c.toString()}}e.exports={transform:a}}),null);
__d("MercurySyncDeliveryReceiptTransformer",[],(function(a,b,c,d,e,f){"use strict";function a(a){return{delivery_receipts:[{other_user_fbid:a.threadKey.otherUserFbId?a.threadKey.otherUserFbId:"",thread_fbid:a.threadKey.threadFbId?a.threadKey.threadFbId:"",time:parseInt(a.deliveredWatermarkTimestampMs,10)}]}}e.exports={transform:a}}),null);
__d("MercurySyncMarkFolderChangeTransformer",["MercuryActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").CHANGE_FOLDER,other_user_fbid:a.threadKey.otherUserFbId,new_folder:b("MessagingTag").IRIS_MAPPING[a.folder]}}e.exports={transform:a}}),null);
__d("MercurySyncMarkFolderSeenTransformer",["MercuryGlobalActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.folders.map(function(c){return{action_type:b("MercuryGlobalActionType").MARK_ALL_SEEN,folder:b("MessagingTag").IRIS_MAPPING[c],timestamp:parseInt(a.timestamp,10)}})}e.exports={transform:a}}),null);
__d("MercurySyncMarkReadTransformer",["MercuryActionType","MercuryGlobalActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.folders&&a.folders.length>0?a.folders.map(function(c){return{action_type:b("MercuryGlobalActionType").MARK_ALL_READ,action_id:null,folder:b("MessagingTag").IRIS_MAPPING[c],timestamp:parseInt(a.watermarkTimestamp,10)}}):a.threadKeys.map(function(c){return{action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!0,timestamp:parseInt(a.watermarkTimestamp,10),folder:b("MessagingTag").INBOX}})}e.exports={transform:a}}),null);
__d("MercurySyncMarkUnreadTransformer",["MercuryActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.threadKeys.map(function(c){return{action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!1,timestamp:parseInt(a.watermarkTimestamp,10),folder:b("MessagingTag").INBOX}})}e.exports={transform:a}}),null);
__d("MercurySyncMessageDeleteTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").DELETE_MESSAGES,message_ids:a.messageIds,other_user_fbid:a.threadKey.otherUserFbId,thread_fbid:a.threadKey.threadFbId}}e.exports={transform:a}}),null);
__d("PagesMessagingEventType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FLAG:1,CREATE_ADMIN_NOTE:2,PRIORITY_UPDATE:3})}),null);
__d("MercurySyncPagesManagerEventTransformer",["MercuryActionType","PagesMessagingEventType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=JSON.parse(a.jsonBlob),d=c&&c.type;if(!d)return undefined;switch(d){case b("PagesMessagingEventType").FLAG:d=!!(c&&c.flagData&&c.flagData.state);c={action_type:b("MercuryActionType").CHANGE_FLAG,mark_as_flag:d,other_user_fbid:a.threadKey.otherUserFbId,thread_fbid:a.threadKey.threadFbId};return c;default:return undefined}}e.exports={transform:a}}),null);
__d("MercurySyncParticipantLeftGroupThreadTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=b("MercurySyncNewMessageTransformer").transform(a,c);a.action_type=b("MercuryActionType").LOG_MESSAGE;a.log_message_body=c.messageMetadata.adminText;a.log_message_data={removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(c.leftParticipantFbId)]};a.log_message_type=b("MercuryLogMessageType").UNSUBSCRIBE;return a}e.exports={transform:a}}),null);
__d("MercurySyncParticipantsAddedToGroupThreadTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){a=b("MercurySyncNewMessageTransformer").transform(a,c);a.action_type=b("MercuryActionType").LOG_MESSAGE;a.log_message_body=c.messageMetadata.adminText;a.log_message_data={added_participants:c.addedParticipants.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.userFbId)})};a.log_message_type=b("MercuryLogMessageType").SUBSCRIBE;return a}e.exports={transform:a}}),null);
__d("MercurySyncRTCEventLogTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=b("MercurySyncNewMessageTransformer").transform(a,c),e=c.messageMetadata.actorFbId;a=e===a?c.messageMetadata.threadKey.otherUserFbId:a;var f=c.eventType==="VOICE_EVENT"?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL;d.action_type=b("MercuryActionType").LOG_MESSAGE;d.log_message_body=c.messageMetadata.adminText;d.log_message_data={answered:c.duration>0,callee:b("MercuryIDs").getParticipantIDFromUserID(a),caller:b("MercuryIDs").getParticipantIDFromUserID(e)};d.log_message_type=f;return d}e.exports={transform:a}}),null);
__d("MercurySyncReadReceiptTransformer",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b={watermark:parseInt(a.watermarkTimestampMs,10),action:parseInt(a.actionTimestampMs,10)},c=a.threadKey.otherUserFbId||a.actorFbId;a=a.threadKey.otherUserFbId||a.threadKey.threadFbId;var d={roger:{}};d.roger[a]={};d.roger[a][c]=b;return d}e.exports={transform:a}}),null);
__d("MercurySyncReplaceMessageTransformer",["MercuryActionType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";function a(a,c){c=Object.assign({},c.newMessage,c);return Object.assign(b("MercurySyncNewMessageTransformer").transform(a,c),{action_type:b("MercuryActionType").REPLACE_MESSAGE,replaced_message_id:c.replacedMessageId})}e.exports={transform:a}}),null);
__d("MercurySyncRtcCallDataTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.messageMetadata.threadKey&&a.messageMetadata.threadKey.threadFbId?a.messageMetadata.threadKey.threadFbId.toString():undefined,d=a.initiator&&a.initiator.userFbId?a.initiator.userFbId.toString():undefined;return{action_type:b("MercuryActionType").UPDATE_RTC_CALL_DATA,thread_fbid:c,call_state:a.callState,server_info_data:a.serverInfoData,initiator_fbid:d}}e.exports={transform:a}}),null);
__d("MessagingThreadAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTION_INVALID:"ACTION_INVALID",ACTION_ARCHIVED:"ACTION_ARCHIVED",ACTION_UNARCHIVED:"ACTION_UNARCHIVED"})}),null);
__d("MercurySyncThreadActionTransformer",["MercuryActionType","MessagingThreadAction"],(function(a,b,c,d,e,f){"use strict";function a(a){a={action_type:b("MercuryActionType").CHANGE_ARCHIVED_STATUS,thread_fbid:a.threadKey.threadFbId,other_user_fbid:a.threadKey.otherUserFbId,archived:a.action===b("MessagingThreadAction").ACTION_ARCHIVED};return a}e.exports={transform:a}}),null);
__d("MercurySyncThreadAdminsAddToGroupTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").ADD_GROUP_ADMINS,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,added_admin_ids:a.addedAdmins.map(function(a){return a.userFbId})}}e.exports={transform:a}}),null);
__d("MercurySyncThreadAdminsRemovedFromGroupTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,removed_admin_ids:a.removedAdminFbIds}}e.exports={transform:a}}),null);
__d("MessengerApprovalModeTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN:0,APPROVALS:1})}),null);
__d("MercurySyncThreadApprovalModeTransformer",["MercuryActionType","MessengerApprovalModeTypes"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").APPROVAL_MODE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,approval_mode:b("MessengerApprovalModeTypes")[a.mode]}}e.exports={transform:a}}),null);
__d("MessengerApprovalQueueTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUESTED:"REQUESTED",REMOVED:"REMOVED"})}),null);
__d("MessengerGroupRequestSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD:0,JOIN_THROUGH_LINK:1})}),null);
__d("MercurySyncThreadApprovalQueueTransformer",["MercuryActionType","MercuryIDs","MessengerApprovalQueueTypes","MessengerGroupRequestSource"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a===null||a===undefined)return null;switch(a){case"ADD":return b("MessengerGroupRequestSource").ADD;case"JOIN_THROUGH_LINK":return b("MessengerGroupRequestSource").JOIN_THROUGH_LINK;default:return null}}function a(a){if(a.inviterFbId)return{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,removed_group_id:a.action===b("MessengerApprovalQueueTypes").REMOVED?a.recipientFbId:null,added_group_id:a.action===b("MessengerApprovalQueueTypes").REQUESTED?{requester:{id:a.recipientFbId},inviter:{id:a.inviterFbId},request_source:g(a.requestSource),request_timestamp:a.requestTimestamp}:null};var c=b("MercuryIDs").getParticipantIDFromUserID(a.recipientFbId);return{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,removed_id:a.action===b("MessengerApprovalQueueTypes").REMOVED?c:null,added_id:a.action===b("MessengerApprovalQueueTypes").REQUESTED?c:null}}e.exports={transform:a}}),null);
__d("MercurySyncThreadDeleteTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.threadKeys.map(function(a){return{action_type:b("MercuryActionType").DELETE_THREAD,other_user_fbid:a.otherUserFbId,thread_fbid:a.threadFbId}})}e.exports={transform:a}}),null);
__d("MercurySyncThreadJoinableModeTransformer",["MercuryActionType","MessengerJoinableModeType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").JOINABLE_MODE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,joinable_mode:{mode:b("MessengerJoinableModeType")[a.mode],link:a.link}}}e.exports={transform:a}}),null);
__d("MercurySyncThreadMuteSettingsTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){a={action_type:b("MercuryActionType").CHANGE_MUTE_SETTINGS,thread_fbid:a.threadKey.threadFbId,other_user_fbid:a.threadKey.otherUserFbId,mute_until:parseInt(a.expireTime,10)};return a}e.exports={transform:a}}),null);
__d("MercurySyncThreadNameTransformer",["MercuryActionType","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=b("MercurySyncNewMessageTransformer").transform(a,c);a.action_type=b("MercuryActionType").LOG_MESSAGE;a.log_message_body=c.messageMetadata.adminText;a.log_message_data={name:c.name};a.log_message_type=b("MercuryLogMessageType").THREAD_NAME;return a}e.exports={transform:a}}),null);
__d("MontageDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!1})}),null);
__d("MontageActions",["MontageDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({REQUEST_UPDATE:null,HAS_UPDATED:null,HANDLE_ACTION:null});a={Types:g,requestUpdate:function(a){b("MontageDispatcher").dispatch({type:g.REQUEST_UPDATE,threadFBID:a})},montageThreadChanged:function(a,c){b("MontageDispatcher").dispatch({type:g.REQUEST_UPDATE,threadFBID:a})},hasUpdated:function(a){b("MontageDispatcher").dispatch({type:g.HAS_UPDATED,threadFBID:a})}};e.exports=a}),null);
__d("MercurySyncDispatcher",["MercuryActionType","MercuryDelayedDispatcher","MercuryGlobalActionType","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MercurySyncAdminTextMessageTransformer","MercurySyncClientPayloadTransformer","MercurySyncDeliveryReceiptTransformer","MercurySyncDeltaTypes","MercurySyncMarkFolderChangeTransformer","MercurySyncMarkFolderSeenTransformer","MercurySyncMarkReadTransformer","MercurySyncMarkUnreadTransformer","MercurySyncMessageDeleteTransformer","MercurySyncNewMessageTransformer","MercurySyncPagesManagerEventTransformer","MercurySyncParticipantLeftGroupThreadTransformer","MercurySyncParticipantsAddedToGroupThreadTransformer","MercurySyncReadReceiptTransformer","MercurySyncReplaceMessageTransformer","MercurySyncRtcCallDataTransformer","MercurySyncRTCEventLogTransformer","MercurySyncThreadActionTransformer","MercurySyncThreadAdminsAddToGroupTransformer","MercurySyncThreadAdminsRemovedFromGroupTransformer","MercurySyncThreadApprovalModeTransformer","MercurySyncThreadApprovalQueueTransformer","MercurySyncThreadDeleteTransformer","MercurySyncThreadJoinableModeTransformer","MercurySyncThreadMuteSettingsTransformer","MercurySyncThreadNameTransformer","MontageActions","MSuggestionActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="FOLDER_MONTAGE";a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$1=a,this.$2=b("MercuryDelayedDispatcher").getForFBID(this.$1),this.$3=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1)}a.prototype.process=function(a){__p&&__p();var c,d;switch(a["class"]){case b("MercurySyncDeltaTypes").NewMessage:c=b("MercurySyncNewMessageTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").ReplaceMessage:c=b("MercurySyncReplaceMessageTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").DeliveryReceipt:c=b("MercurySyncDeliveryReceiptTransformer").transform(a);this.$3.handleUpdate(c);break;case b("MercurySyncDeltaTypes").MarkRead:c=b("MercurySyncMarkReadTransformer").transform(a);var e=[],f=[];c.forEach(function(a){a.action_type===b("MercuryGlobalActionType").MARK_ALL_READ?e.push(a):f.push(a)});e.length&&this.$5(e);f.length&&this.$6(f);break;case b("MercurySyncDeltaTypes").MarkUnread:c=b("MercurySyncMarkUnreadTransformer").transform(a);this.$6(c);break;case b("MercurySyncDeltaTypes").ParticipantLeftGroupThread:c=b("MercurySyncParticipantLeftGroupThreadTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread:c=b("MercurySyncParticipantsAddedToGroupThreadTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").RTCEventLog:c=b("MercurySyncRTCEventLogTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").ThreadName:c=b("MercurySyncThreadNameTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").ReadReceipt:c=b("MercurySyncReadReceiptTransformer").transform(a);this.$3.handleUpdate(c);break;case b("MercurySyncDeltaTypes").AdminTextMessage:c=b("MercurySyncAdminTextMessageTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").MessageDelete:d=a.threadKey.threadFbId;c=b("MercurySyncMessageDeleteTransformer").transform(a);d&&a.folder&&a.folder===g?b("MontageActions").requestUpdate(d):this.$4(c);break;case b("MercurySyncDeltaTypes").ThreadAction:c=b("MercurySyncThreadActionTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").ThreadDelete:c=b("MercurySyncThreadDeleteTransformer").transform(a);this.$6(c);break;case b("MercurySyncDeltaTypes").AdminAddedToGroupThread:c=b("MercurySyncThreadAdminsAddToGroupTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").AdminRemovedFromGroupThread:c=b("MercurySyncThreadAdminsRemovedFromGroupTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").ThreadMuteSettings:c=b("MercurySyncThreadMuteSettingsTransformer").transform(a);this.$6([c]);break;case b("MercurySyncDeltaTypes").PagesManagerEvent:c=b("MercurySyncPagesManagerEventTransformer").transform(a);if(!c)return;this.$6([c]);break;case b("MercurySyncDeltaTypes").JoinableMode:c=b("MercurySyncThreadJoinableModeTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").ApprovalMode:c=b("MercurySyncThreadApprovalModeTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").ApprovalQueue:c=b("MercurySyncThreadApprovalQueueTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").ClientPayload:c=b("MercurySyncClientPayloadTransformer").transform(a,this.$1);if(!c)return;switch(c.action_type){case b("MercuryActionType").DELETE_MONTAGE_MESSAGES:b("MontageActions").requestUpdate(c.thread_fbid);break;case b("MercuryActionType").NEW_MONTAGE_MESSAGE:b("MontageActions").requestUpdate(this.$1);break;case b("MercuryActionType").CREATE_OMNI_M_SUGGESTIONS:b("MSuggestionActions").saveAllSuggestions(c.thread_fbid,c.suggestions);break;default:this.$4(c);break}break;case b("MercurySyncDeltaTypes").GenieMessage:c=b("MercurySyncNewMessageTransformer").transform(this.$1,a.deltaNewMessage);this.$4(c);break;case b("MercurySyncDeltaTypes").MontageMessage:d=a.newMessage.messageMetadata.actorFbId;d&&b("MontageActions").requestUpdate(d);break;case b("MercurySyncDeltaTypes").RtcCallData:c=b("MercurySyncRtcCallDataTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").MarkFolderSeen:c=b("MercurySyncMarkFolderSeenTransformer").transform(a);this.$5(c);break;case b("MercurySyncDeltaTypes").ThreadFolder:c=b("MercurySyncMarkFolderChangeTransformer").transform(a);this.$6([c]);break;default:break}};a.prototype.$4=function(a){var c=a.other_user_fbid||a.thread_fbid;this.$2.handleUpdateWaitForThread({actions:[a],payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE},c)};a.prototype.$5=function(a){this.$3.handleUpdate({global_actions:a,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE})};a.prototype.$6=function(a){this.$3.handleUpdate({actions:a,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE})};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncForcedFetchHandler",["Promise","MercuryMessages","MercurySingletonProvider","MercurySyncDFFDataFetcher","MercuryThreadIDMap"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return{getPayload:function(){return{sequence_id:a}}}}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$1=a,this.$2=b("MercuryMessages").getForFBID(this.$1),this.$3=b("MercuryThreadIDMap").getForFBID(this.$1),this.$4=b("MercurySyncDFFDataFetcher").getForFBID(this.$1)}a.prototype.processMessageDFF=function(a,c,d,e){__p&&__p();if(e){e=c.otherUserFbId!==undefined?c.otherUserFbId.toString():c.threadFbId.toString();e=this.$3.getClientIDFromServerIDNow(e);if(e===undefined)return b("Promise").resolve(g(a));e=this.$2.getMessagesFromIDs([d]);if(e.length===0)return b("Promise").resolve(g(a))}return this.$4.fetchInvalidateMessage(c.otherUserFbId,c.threadFbId,d)};a.prototype.processThreadDFF=function(a,c,d){if(d){d=c.otherUserFbId!==undefined?c.otherUserFbId.toString():c.threadFbId.toString();d=this.$3.getClientIDFromServerIDNow(d);if(d===undefined)return b("Promise").resolve(g(a))}return this.$4.fetchInvalidateThreadState(c.otherUserFbId,c.threadFbId)};a.prototype.processGlobalDFFForGraphQL=function(){return this.$4.fetchInvalidateGlobalStateForGraphQL()};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryMessageError.react",["cx","CurrentUser","Link.react","MercuryErrorInfo","MercuryMessageActions","React","ServerHTML.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.messageResend=function(a){a.preventDefault();a=this.props.message;a=a.error_data;b("MercuryErrorInfo").isTransient(a)&&b("MercuryMessageActions").getForFBID(this.props.authorFBID).resend(this.props.message)}.bind(this),c}a.prototype.render=function(){var a=this.props.message,c=a.error_data;return b("React").createElement(b("Link.react"),babelHelpers["extends"]({},this.props,{href:"#",className:b("joinClasses")(this.props.className,this.$1(a)),tabIndex:b("MercuryErrorInfo").isTransient(c)?0:null,onClick:this.messageResend}),b("React").createElement("i",{className:"_2fs1"}),b("React").createElement(b("ServerHTML.react"),{className:"_61ag",blob:this.$2(a)}))};a.prototype.$1=function(a){if(b("MercuryErrorInfo").hasErrorStatus(a))return"_2fs2 _2fs3"+(b("MercuryErrorInfo").isTransient(a.error_data)?" _2fs4":"")+(b("MercuryErrorInfo").isPermanent(a.error_data)?" _2fs5":"");else return"_2fs6 _2fs2"};a.prototype.$2=function(a){var c="",d=a.error_data;if(b("MercuryErrorInfo").hasErrorStatus(a)){a=b("MercuryErrorInfo").getMessage(d);a&&(c=a)}return c};a.propTypes={authorFBID:c.string,message:c.object.isRequired};a.defaultProps={authorFBID:b("CurrentUser").getID()};e.exports=a}),null);
__d("Dock",["csx","Arbiter","ArbiterMixin","BlueBar","ChatQuietLinks","CSS","DataStore","DOM","Event","Parent","Scroll","Style","Toggler","Vector","emptyFunction","isKeyActivation","shield"],(function(a,b,c,d,e,f,g){__p&&__p();function c(){}Object.assign(c,b("ArbiterMixin"),{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(a){__p&&__p();this.init=b("emptyFunction");this.rootEl=a;this.calculateViewportDimensions();b("ChatQuietLinks").removeEmptyHrefs(this.rootEl);b("Event").listen(a,"click",this._onClick.bind(this));var c=a.querySelector(".fbNubButton");c&&b("Event").listen(c,"keypress",this._onKeyPress.bind(this));b("Event").listen(window,"resize",this._onWindowResize.bind(this));b("Toggler").subscribe(["show","hide"],function(c,d){d=d.getActive();if(!b("DOM").contains(a,d))return;if(b("CSS").hasClass(d,"fbNub"))this.notifyNub(d,c),c==="show"&&this._resizeNubFlyout(d);else{d=b("Parent").byClass(d,"fbNubFlyout");d&&b("CSS").conditionClass(d,"menuOpened",c==="show")}}.bind(this));this.inform("init",{},b("Arbiter").BEHAVIOR_PERSISTENT)},calculateViewportDimensions:function(){return this.viewportDimensions=b("Vector").getViewportDimensions()},getFlyoutHeightOffset:function(){if(this.flyoutHeightOffset)return this.flyoutHeightOffset;this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+b("Vector").getElementDimensions(this.rootEl).y;var a=b("BlueBar").getBar();if(a){var c=b("Style").isFixed(a)?"viewport":"document";this.flyoutHeightOffset+=b("Vector").getElementPosition(a,c).y+b("Vector").getElementDimensions(a).y}return this.flyoutHeightOffset},toggle:function(a){var c=this._findFlyout(a);if(!c)return;this.subscribe("init",function(){b("Toggler").toggle(a)})},show:function(a){this.subscribe("init",function(){b("Toggler").show(a)})},showNub:function(a){b("CSS").show(a)},hide:function(a){this.subscribe("init",function(){var c=b("Toggler").getInstance(a);b("DOM").contains(a,c.getActive())&&c.hide()})},hideNub:function(a){b("CSS").hide(a),this.hide(a)},setUseMaxHeight:function(a,c){b("CSS").conditionClass(a,"maxHeight",c!==!1),this._resizeNubFlyout(a)},_resizeNubFlyout:function(a){__p&&__p();var c=this._findFlyout(a);if(!c||b("CSS").hasClass(a,"placeholder")||!(b("CSS").hasClass(a,"openToggler")||b("CSS").hasClass(a,"opened")))return;var d=b("DOM").find(c,"div.fbNubFlyoutOuter"),e=b("DOM").find(d,"div.fbNubFlyoutInner"),f=b("DOM").find(e,"div.fbNubFlyoutBody"),g=b("CSS").hasClass(a,"canBeCompactTab"),h=b("Scroll").getTop(f),i=f.offsetHeight;b("Style").set(f,"height","auto");var j=b("Vector").getElementDimensions(c),k=b("Vector").getElementDimensions(f),l=this.getMaxFlyoutHeight(a);b("Style").set(c,"max-height",l+"px");b("Style").set(d,"max-height",l+"px");j=b("Vector").getElementDimensions(c);d=b("Vector").getElementDimensions(e);l=d.y-k.y;e=j.y-l;d=parseInt(f.style.height||f.clientHeight,10);d=e!==d;j.y>l&&d&&!g&&b("Style").set(f,"height",e+"px");b("CSS").removeClass(c,"swapDirection");var m=b("Vector").getElementPosition(c).x;b("CSS").conditionClass(c,"swapDirection",function(){if(m<0)return!0;return!j||!this.viewportDimensions?!1:m+j.x>this.viewportDimensions.x}.bind(this)());d&&h+i>=k.y?b("Scroll").setTop(f,f.scrollHeight):b("Scroll").setTop(f,h);this.notifyNub(a,"resize")},getMaxFlyoutHeight:function(a){a=this._findFlyout(a);var c=b("Vector").getElementPosition(a,"viewport");a=b("Vector").getElementDimensions(a);if(!this.viewportDimensions||!c)return 0;c=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.getFlyoutHeightOffset())-(this.viewportDimensions.y-c.y-a.y);return Math.max(c,0)},resizeAllFlyouts:function(){var a=this._getAllNubs(),b=a.length;while(b--)this._resizeNubFlyout(a[b])},_getAllNubs:function(){var a=b("DOM").scry(this.rootEl,"div._50-v.openToggler:not(._s0f)");return a.concat(b("DOM").scry(this.rootEl,"div._50-v.opened:not(._s0f)"))},_onKeyPress:function(event){var a=event.getTarget();a=b("Parent").byClass(a,"fbNub");b("isKeyActivation")(event)&&a&&this.toggle(a)},_onClick:function(event){__p&&__p();var a=event.getTarget(),c=b("Parent").byClass(a,"fbNub");if(c){if(b("Parent").byClass(a,"fbNubFlyoutTitlebar")){var d=b("Parent").byTag(a,"a");a=a.nodeName=="INPUT"&&a.getAttribute("type")=="submit";if(!d&&!a){this.hide(c);return!1}}this.notifyNub(c,"click")}},_onWindowResize:function(event){this.calculateViewportDimensions(),this.resizeAllFlyouts()},_findFlyout:function(a){return b("CSS").hasClass(a,"fbNubFlyout")?a:b("DOM").scry(a,"div.fbNubFlyout")[0]||null},registerNubController:function(a,c){b("DataStore").set(a,"dock:nub:controller",c),c.subscribe("nub/button/content-changed",b("shield")(this.inform,this,"resize",a)),c.subscribe("nub/flyout/content-changed",b("shield")(this._resizeNubFlyout,this,a))},unregisterNubController:function(a){b("DataStore").remove(a,"dock:nub:controller")},notifyNub:function(a,c,d){a=b("DataStore").get(a,"dock:nub:controller");a&&a.inform(c,d)}});e.exports=a.Dock||c}),null);
__d("DockTabsViewportFantaTabUtils",["gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=284,h=260,i=9;b=b("gkx")("AT7HdSIkhS9TSQx6PWXopj-NxmSus9nuXkEu6XM1WdZJElXpLdnQNN92q5iZdzYJyRUbbjoWOgsBC8RH9ivzcfSt")?g:h;var j=b+i;function a(){return j+1}function c(a){return Math.floor(a/j)}function d(a){if(!a)return null;a=a.fantaTabModelStateGetter;return a?a():null}function f(a){return a?a.size:0}e.exports={getTabCountToFitWidth:c,getMinRequiredWidthForFirstFantaTab:a,getFantaTabModelFromCallbacks:d,getNumFantaTabsFromModel:f}}),null);
__d("DockTabsViewportPinnedConversationTabUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=496+9+2,h=210+9+2,i=52;function j(){return g}function k(){return h}function a(){return i}function b(a){return a.getIsRaised()?j():k()}function c(){return j()+i}function d(a){a=a||{};a=a.pinnedConvoTabStateGetter;return a?a():null}function f(a){return a?a.getTotalTabCount():0}e.exports={getRaisedPinnedConvoTabWidth:j,getLoweredPinnedConvoTabWidth:k,getPinnedConvoSelectorWidth:a,getPinnedConvoTabWidth:b,getMinRequiredWidthForFirstConvoTab:c,getPinnedConvoTabsStateFromCallbacks:d,getNumPinnedConvoTabsFromModel:f}}),null);
__d("FullScreen",["ArbiterMixin","CSS","Event","Keys","UserAgent","UserAgent_DEPRECATED","mixin","throttle"],(function(a,b,c,d,e,f){__p&&__p();var g,h={},i=!1,j=function(a){b("Event").getKeyCode(a)===b("Keys").ESC&&a.stopPropagation()},k=function(){i||(document.addEventListener("keydown",j,!0),i=!0)},l=function(){i&&(document.removeEventListener("keydown",j,!0),i=!1)};g=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g&&g.prototype;a.prototype.listenForEvent=function(a){"use strict";var c=b("throttle")(this.onChange,0,this);h[a.id]||(h[a.id]=!0,b("Event").listen(a,{webkitfullscreenchange:c,mozfullscreenchange:c,MSFullscreenChange:c,fullscreenchange:c}))};a.prototype.enableFullScreen=function(a){"use strict";__p&&__p();this.listenForEvent(a);if(a.webkitRequestFullScreen)b("UserAgent_DEPRECATED").chrome()?a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):a.webkitRequestFullScreen();else if(a.mozRequestFullScreen)a.mozRequestFullScreen();else if(a.msRequestFullscreen)k(),a.msRequestFullscreen();else if(a.requestFullScreen)a.requestFullScreen();else return!1;return!0};a.prototype.disableFullScreen=function(){"use strict";__p&&__p();if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else if(document.cancelFullScreen)document.cancelFullScreen();else if(document.exitFullScreen)document.exitFullScreen();else return!1;return!0};a.prototype.isFullScreen=function(){"use strict";return document.webkitIsFullScreen||document.fullScreen||document.mozFullScreen||document.msFullscreenElement};a.prototype.toggleFullScreen=function(a){"use strict";if(this.isFullScreen()){this.disableFullScreen();return!1}else return this.enableFullScreen(a)};a.prototype.onChange=function(){"use strict";var a=this.isFullScreen();b("CSS").conditionClass(document.body,"fullScreen",a);this.inform("changed");a||l()};a.prototype.isSupportedWithKeyboardInput=function(){"use strict";return this.isSupported()&&!b("UserAgent").isBrowser("Safari")};a.prototype.isSupported=function(){"use strict";var a=document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.fullscreenEnabled;return a||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.cancelFullScreen||document.exitFullScreen};function a(){"use strict";g.apply(this,arguments)}c=new a();d=b("throttle")(c.onChange,0,c);b("Event").listen(document,{webkitfullscreenchange:d,mozfullscreenchange:d,MSFullscreenChange:d,fullscreenchange:d});e.exports=c}),null);
__d("DockTabsViewportCalculator",["csx","Arbiter","DataStore","Dock","DockTabsViewportFantaTabUtils","DockTabsViewportPinnedConversationTabUtils","DOM","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","ge","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=50;a=35;var i=a,j="dock-tab-viewport-inst",k=b("DockTabsViewportFantaTabUtils").getMinRequiredWidthForFirstFantaTab,l=b("DockTabsViewportFantaTabUtils").getFantaTabModelFromCallbacks,m=b("DockTabsViewportFantaTabUtils").getNumFantaTabsFromModel,n=b("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab,o=b("DockTabsViewportPinnedConversationTabUtils").getNumPinnedConvoTabsFromModel,p=b("DockTabsViewportPinnedConversationTabUtils").getPinnedConvoTabsStateFromCallbacks;function q(a){return a?b("Vector").getElementDimensions(a).x:0}function r(a){this.$1=a,this.$3=0,this.$4=0,this.$5=null,this.$6=null,this.$7=!1,this.$8=!1,this.$9=!1,this.$2=new(b("SubscriptionsHandler"))(),this.$10(),this.$11()}r.prototype.$10=function(){var a=this.$12.bind(this);this.$2.addSubscriptions(b("Event").listen(window,"resize",a),b("Dock").subscribe("resize",a),b("Arbiter").subscribeOnce("sidebar/initialized",a,b("Arbiter").SUBSCRIBE_NEW),b("FullScreen").subscribe("changed",function(){b("FullScreen").isFullScreen()?(this.$7=!0,this.$8=!1):(this.$7=!1,this.$8&&(b("setImmediate")(function(){a()}),this.$8=!1))}.bind(this)))};r.prototype.registerFantaTabCallbacks=function(a){this.$5=a};r.prototype.registerPinnedConvoTabCallbacks=function(a){this.$6=a};r.prototype.forceRecalculateFBDockWidth=function(){this.$11(),this.$13({forceRecalculateChatTabs:!1,pinnedConvoUpdateData:null})};r.prototype.forceRecalculateChatTabs=function(){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:null})};r.prototype.forceRecalculatePinnedConvoTabs=function(a){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:a})};r.prototype.$12=function(){if(b("FullScreen").isFullScreen()||this.$7){this.$8=!0;return}this.forceRecalculateFBDockWidth()};r.prototype.$13=function(a){var b=a.forceRecalculateChatTabs;a=a.pinnedConvoUpdateData;var c=this.$14(),d=c.chatTabAvailableWidth;c=c.pinnedConvoTabAvailableWidth;this.$15(d,!!b);this.$16(c,a)};r.prototype.$16=function(a,b){var c=this.$6||{};c=c.onAvailableWidthChanged;c&&c(a,b)};r.prototype.$15=function(a,b){b=this.$5||{};b=b.onAvailableWidthChanged;b&&b(a)};r.prototype.$17=function(){var a=l(this.$5);return m(a)};r.prototype.$18=function(){return k()};r.prototype.$14=function(){__p&&__p();var a=this.$3,b={chatTabAvailableWidth:a,pinnedConvoTabAvailableWidth:0},c={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:a},d=this.$17(),e=p(this.$6),f=o(e);if(!e||f===0)return b;else if(d===0)return c;e=this.$18();if(a<=e)return b;f=n();d=a-e;if(d<f)return b;else c=f;d=c;b=Math.max(e,a-c);return{chatTabAvailableWidth:b,pinnedConvoTabAvailableWidth:d}};r.prototype.$11=function(){this.$3=this.$19(),this.$20("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};r.prototype.$21=function(){var a=this.$1;if(!a)return{buddyListNubWidth:0,employeeNubsWidth:0};var c=q(a),d=q(b("DOM").find(a,"._56ox")),e=q(b("DOM").scry(a,"._56oy")[0]);a=q(b("DOM").scry(a,"._ph1")[0]);c=Math.max(c-d-e-a,0);return{buddyListNubWidth:d,employeeNubsWidth:c}};r.prototype.$19=function(){__p&&__p();var a=b("getViewportDimensions").withoutScrollbars().width;a-=b("ViewportBounds").getLeft()+b("ViewportBounds").getRight();a-=h;var c=this.$21(),d=c.buddyListNubWidth;c=c.employeeNubsWidth;a-=d;this.$4=Math.max(this.$4,c);a-=this.$4;a-=i;return Math.max(a,0)};r.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$9=!0};r.prototype.$20=function(a){this.$9&&b("Arbiter").inform(a)};r.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().chatTabAvailableWidth};r.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().pinnedConvoTabAvailableWidth};r.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$3};e.exports={getInstance:function(a){__p&&__p();var c=b("ge")("pagelet_dock");if(!c||!b("DOM").contains(c,a))return null;a=b("DataStore").get(c,j);if(a instanceof r)return a;var d=b("DOM").scry(c,".fbDockWrapperRight .fbDock")[0];a=new r(d);b("DataStore").set(c,j,a);return a}}}),null);
__d("DragDropFileUpload",[],(function(a,b,c,d,e,f){f.isSupported=function(){return typeof FileList!=="undefined"}}),null);
__d("DocumentDragDrop",["Arbiter","CSS","DOMQuery","DragDropFileUpload","Event","emptyFunction","getObjectValues","getOrCreateDOMID"],(function(a,b,c,d,e,f){__p&&__p();var g={},h=0;function i(){h=0,b("getObjectValues")(g).forEach(function(a){b("CSS").removeClass(a.element,a.className),b("Arbiter").inform("dragleave",{element:a.element})})}var j=null;function k(){j&&clearTimeout(j),j=setTimeout(function(){i()},500)}var l=function(){__p&&__p();if(!b("DragDropFileUpload").isSupported())return;b("Event").listen(document,"dragenter",function(a){h===0&&b("getObjectValues")(g).forEach(function(c){b("CSS").addClass(c.element,c.className),b("Arbiter").inform("dragenter",{element:c.element,event:a})}),h++,k()});b("Event").listen(document,"dragleave",function(a){h--,h===0&&i(),k()});b("Event").listen(document,"drop",function(a){i();var c=a.getTarget();if(b("DOMQuery").isNodeOfType(a.getTarget(),"input")&&c.type==="file")return;a.prevent()});b("Event").listen(document,"dragover",b("Event").prevent);document.addEventListener("dragover",k,!0);l=b("emptyFunction")};a={init:function(){l()},registerStatusElement:function(a,c){l(),g[b("getOrCreateDOMID")(a)]={element:a,className:c},h>0&&b("CSS").addClass(a,c)},removeStatusElement:function(a){a=b("getOrCreateDOMID")(a);var c=g[a];c&&(b("CSS").removeClass(c.element,c.className),delete g[a])}};e.exports=a}),null);
__d("PhotosMimeType",[],(function(a,b,c,d,e,f){var g={isImage:function(a){return h(a)[0]==="image"},isJpeg:function(a){var b=h(a);return g.isImage(a)&&(b[1]==="jpeg"||b[1]==="pjpeg")}};function h(a){return a.split("/")}e.exports=g}),null);
__d("DataTransfer",["PhotosMimeType","createArrayFromMixed","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g=new RegExp("\r\n","g"),h="\n",i={"text/rtf":1,"text/html":1};function j(a){if(a.kind=="file")return a.getAsFile()}function a(a){"use strict";this.data=a,this.types=a.types?b("createArrayFromMixed")(a.types):[]}a.prototype.isRichText=function(){"use strict";if(this.getHTML()&&this.getText())return!0;return this.isImage()?!1:this.types.some(function(a){return i[a]})};a.prototype.getText=function(){"use strict";var a;this.data.getData&&(!this.types.length?a=this.data.getData("Text"):this.types.indexOf("text/plain")!=-1&&(a=this.data.getData("text/plain")));return a?a.replace(g,h):null};a.prototype.getHTML=function(){"use strict";if(this.data.getData)if(!this.types.length)return this.data.getData("Text");else if(this.types.indexOf("text/html")!=-1)return this.data.getData("text/html")};a.prototype.isLink=function(){"use strict";return this.types.some(function(a){return a.indexOf("Url")!=-1||a.indexOf("text/uri-list")!=-1||a.indexOf("text/x-moz-url")!=-1})};a.prototype.getLink=function(){"use strict";if(this.data.getData){if(this.types.indexOf("text/x-moz-url")!=-1){var a=this.data.getData("text/x-moz-url").split("\n");return a[0]}return this.types.indexOf("text/uri-list")!=-1?this.data.getData("text/uri-list"):this.data.getData("url")}return null};a.prototype.isImage=function(){"use strict";__p&&__p();var a=this.types.some(function(a){return a.indexOf("application/x-moz-file")!=-1});if(a)return!0;a=this.getFiles();for(var c=0;c<a.length;c++){var d=a[c].type;if(!b("PhotosMimeType").isImage(d))return!1}return!0};a.prototype.getCount=function(){"use strict";if(Object.prototype.hasOwnProperty.call(this.data,"items"))return this.data.items.length;else if(Object.prototype.hasOwnProperty.call(this.data,"mozItemCount"))return this.data.mozItemCount;else if(this.data.files)return this.data.files.length;return null};a.prototype.getFiles=function(){"use strict";if(this.data.items)return Array.prototype.slice.call(this.data.items).map(j).filter(b("emptyFunction").thatReturnsArgument);else if(this.data.files)return Array.prototype.slice.call(this.data.files);else return[]};a.prototype.hasFiles=function(){"use strict";return this.getFiles().length>0};e.exports=a}),null);
__d("DragDropTarget",["Arbiter","CSS","DataTransfer","DocumentDragDrop","DragDropFileUpload","Event","SubscriptionsHandler","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function a(a){this._element=a,this._listeners=new(b("SubscriptionsHandler"))(),this._statusElem=a,this._dragEnterCount=0,this._enabled=!1}Object.assign(a.prototype,{_onFilesDropCallback:b("emptyFunction"),_onURLDropCallback:b("emptyFunction"),_onPlainTextDropCallback:b("emptyFunction"),_onDropCallback:b("emptyFunction"),_fileFilterFn:b("emptyFunction").thatReturnsArgument,setOnDocumentDragEnterCallback:function(a){this._onDocumentDragEnterCallback=a;return this},setOnDocumentDragLeaveCallback:function(a){this._onDocumentDragLeaveCallback=a;return this},setOnDragEnterCallback:function(a){this._onDragEnterCallback=a;return this},setOnDragLeaveCallback:function(a){this._onDragLeaveCallback=a;return this},setOnFilesDropCallback:function(a){this._onFilesDropCallback=a;return this},setOnURLDropCallback:function(a){this._onURLDropCallback=a;return this},setOnPlainTextDropCallback:function(a){this._onPlainTextDropCallback=a;return this},setOnDropCallback:function(a){this._onDropCallback=a;return this},enable:function(){__p&&__p();if(!b("DragDropFileUpload").isSupported())return this;this._listeners.engage();b("DocumentDragDrop").registerStatusElement(this._statusElem,"fbWantsDragDrop");this._listeners.addSubscriptions(b("Event").listen(this._element,"dragenter",this._onDragEnter.bind(this)),b("Event").listen(this._element,"dragleave",this._onDragLeave.bind(this)),b("Event").listen(this._element,"dragover",this._onDragOver.bind(this)),b("Event").listen(this._element,"drop",function(a){__p&&__p();this._dragEnterCount=0;b("CSS").removeClass(this._statusElem,"fbDropReady");b("CSS").removeClass(this._statusElem,"fbDropReadyPhoto");b("CSS").removeClass(this._statusElem,"fbDropReadyPhotos");b("CSS").removeClass(this._statusElem,"fbDropReadyLink");var c=new(b("DataTransfer"))(a.dataTransfer),d={},e=!1,f=this._fileFilterFn(a.dataTransfer.files);f.length&&(this._onFilesDropCallback(f,a),d.files=f,e=!0);f=c.getLink();f&&(this._onURLDropCallback(f,a),d.url=f,e=!0);f=c.getText();f&&(this._onPlainTextDropCallback(f,a),d.plainText=f,e=!0);e&&this._onDropCallback(d,a);a.kill()}.bind(this)));this._listeners.addSubscriptions(b("Arbiter").subscribe("dragenter",this._onDocumentDragEnter.bind(this)),b("Arbiter").subscribe("dragleave",this._onDocumentDragLeave.bind(this)));this._enabled=!0;return this},disable:function(){__p&&__p();if(!this._enabled)return this;b("DocumentDragDrop").removeStatusElement(this._statusElem,"fbWantsDragDrop");b("CSS").removeClass(this._statusElem,"fbDropReady");b("CSS").removeClass(this._statusElem,"fbDropReadyPhoto");b("CSS").removeClass(this._statusElem,"fbDropReadyPhotos");b("CSS").removeClass(this._statusElem,"fbDropReadyLink");this._listeners.release();this._enabled=!1;return this},setFileFilter:function(a){this._fileFilterFn=a;return this},setStatusElement:function(a){this._statusElem=a;return this},_onDragEnter:function(a){if(this._dragEnterCount===0){var c=new(b("DataTransfer"))(a.dataTransfer);b("CSS").addClass(this._statusElem,"fbDropReady");c.isLink()||!c.isImage()?b("CSS").addClass(this._statusElem,"fbDropReadyLink"):c.getCount()>1?b("CSS").addClass(this._statusElem,"fbDropReadyPhotos"):b("CSS").addClass(this._statusElem,"fbDropReadyPhoto");this._onDragEnterCallback&&this._onDragEnterCallback()}this._dragEnterCount++;a.preventDefault()},_onDragLeave:function(a){this._dragEnterCount=Math.max(this._dragEnterCount-1,0),this._dragEnterCount===0&&(b("CSS").removeClass(this._statusElem,"fbDropReady"),b("CSS").removeClass(this._statusElem,"fbDropReadyPhoto"),b("CSS").removeClass(this._statusElem,"fbDropReadyPhotos"),b("CSS").removeClass(this._statusElem,"fbDropReadyLink"),this._onDragLeaveCallback&&this._onDragLeaveCallback())},_onDragOver:function(a){if(!a.dataTransfer){b("Event").kill(a);return}try{var c=a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect=c=="move"||c=="linkMove"?"move":"copy"}catch(a){}b("Event").kill(a)},_onDocumentDragEnter:function(event,a){this._onDocumentDragEnterCallback&&a.element==this._element&&this._onDocumentDragEnterCallback()},_onDocumentDragLeave:function(event,a){this._dragEnterCount=0,this._onDragLeave(event),this._onDocumentDragLeaveCallback&&a.element==this._element&&this._onDocumentDragLeaveCallback()}});e.exports=a}),null);
__d("XEventReminderController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/eventreminder/",{event_reminder_id:{type:"Int",required:!0}})}),null);
__d("EventReminderRequestHelper",["AsyncRequest","EventReminderActions","XEventReminderController"],(function(a,b,c,d,e,f){"use strict";a={fetchEventReminder:function(a,c,d){var e=b("XEventReminderController").getURIBuilder().setInt("event_reminder_id",c);new(b("AsyncRequest"))(e.getURI()).setHandler(function(e){e.payload&&(b("EventReminderActions").updateEventReminder(a,e.payload,c),d())}).send()}};e.exports=a}),null);
__d("DraftJsEventsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAnonymizedDom=function(a){this.$1.anonymized_dom=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setExtraParams=function(a){this.$1.extra_params=a;return this};a.prototype.setScriptPath=function(a){this.$1.script_path=a;return this};a.prototype.setSelectionState=function(a){this.$1.selection_state=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={anonymized_dom:!0,event:!0,extra_params:!0,script_path:!0,selection_state:!0,vc:!0};e.exports=a}),null);
__d("MessengerMessageActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAction=function(a){this.$1.action=a;return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setContainermodule=function(a){this.$1.containermodule=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setEntryPoint=function(a){this.$1.entry_point=a;return this};a.prototype.setErrorText=function(a){this.$1.error_text=a;return this};a.prototype.setGroupSize=function(a){this.$1.group_size=a;return this};a.prototype.setMessageType=function(a){this.$1.message_type=a;return this};a.prototype.setMid=function(a){this.$1.mid=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setOfflineThreadid=function(a){this.$1.offline_threadid=a;return this};a.prototype.setPreviousReaction=function(a){this.$1.previous_reaction=a;return this};a.prototype.setReaction=function(a){this.$1.reaction=a;return this};a.prototype.setRecipientID=function(a){this.$1.recipient_id=a;return this};a.prototype.setThreadType=function(a){this.$1.thread_type=a;return this};a.prototype.setThreadid=function(a){this.$1.threadid=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={action:!0,appid:!0,appversion:!0,clienttime:!0,containermodule:!0,country:!0,entry_point:!0,error_text:!0,group_size:!0,message_type:!0,mid:!0,name:!0,offline_threadid:!0,previous_reaction:!0,reaction:!0,recipient_id:!0,thread_type:!0,threadid:!0,vc:!0};e.exports=a}),null);
__d("MessengerMessageRequestsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAction=function(a){this.$1.action=a;return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setContainermodule=function(a){this.$1.containermodule=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setEntryPoint=function(a){this.$1.entry_point=a;return this};a.prototype.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};a.prototype.setFolderType=function(a){this.$1.folder_type=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setThreadID=function(a){this.$1.thread_id=a;return this};a.prototype.setThreadKey=function(a){this.$1.thread_key=a;return this};a.prototype.setThreadKeyList=function(a){this.$1.thread_key_list=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={action:!0,appid:!0,appversion:!0,clienttime:!0,containermodule:!0,country:!0,entry_point:!0,extra_client_data:!0,folder_type:!0,name:!0,surface:!0,thread_id:!0,thread_key:!0,thread_key_list:!0,vc:!0};e.exports=a}),null);
__d("MessengerWebViewReactionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEmojiGroup=function(a){this.$1.emoji_group=a;return this};a.prototype.setEmojiGroupCount=function(a){this.$1.emoji_group_count=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setMid=function(a){this.$1.mid=a;return this};a.prototype.setSenderID=function(a){this.$1.sender_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={emoji_group:!0,emoji_group_count:!0,event:!0,mid:!0,sender_id:!0,vc:!0};e.exports=a}),null);
__d("P2PReliabilityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppBuildNumber=function(a){this.$1.app_build_number=a;return this};a.prototype.setAppID=function(a){this.$1.app_id=a;return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setDeviceID=function(a){this.$1.device_id=a;return this};a.prototype.setEventName=function(a){this.$1.event_name=a;return this};a.prototype.setExtra=function(a){this.$1.extra=a;return this};a.prototype.setMsgID=function(a){this.$1.msg_id=a;return this};a.prototype.setMsgType=function(a){this.$1.msg_type=a;return this};a.prototype.setRawTime=function(a){this.$1.raw_time=a;return this};a.prototype.setReceiverID=function(a){this.$1.receiver_id=a;return this};a.prototype.setResultCode=function(a){this.$1.result_code=a;return this};a.prototype.setSenderID=function(a){this.$1.sender_id=a;return this};a.prototype.setServiceName=function(a){this.$1.service_name=a;return this};a.prototype.setUserCountry=function(a){this.$1.user_country=a;return this};c={app_build_number:!0,app_id:!0,app_version:!0,call_id:!0,device_id:!0,event_name:!0,extra:!0,msg_id:!0,msg_type:!0,raw_time:!0,receiver_id:!0,result_code:!0,sender_id:!0,service_name:!0,user_country:!0};e.exports=a}),null);
__d("MessagesViewerSetID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"})}),null);
__d("MessagesViewer",["AsyncRequest","DOM","MessagesViewerSetID","PhotoStore","React","ReactDOM","ge"],(function(a,b,c,d,e,f){__p&&__p();a={renderSpotlight:function(a,c,d,e){var f=a.setID;f||(f=b("MessagesViewerSetID").MESSAGES);g(b("React").createElement(d,{actorid:a.actorid,dimensions:[a.dimensions],disablepaging:a.disablePaging,disableForward:a.disableForward,forwardDialogComponent:e,open:!0,photoid:a.fbid,reverse:!1,rootClassName:a.rootClassName,setid:f,snapToPhoto:a.snapToPhoto,thumbsrc:a.src}));if(!b("PhotoStore").hasBeenCreated(f)&&a.endpoint){d=new(b("AsyncRequest"))(a.endpoint);c&&d.setRelativeTo(c);d.send()}},renderVideo:function(a){g(a)}};function g(a){var c=b("ge")("messages_viewer");c||(c=b("DOM").create("div",{id:"messages_viewer"}),document.body.appendChild(c));b("ReactDOM").render(a,c,function(){this.subscribeOnce("close",function(){b("ReactDOM").unmountComponentAtNode(c)})})}e.exports=a}),null);
__d("MercuryAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function(a,b,c,d,e,f){"use strict";a={renderVideo:function(a){b("Bootloader").loadModules(["MessagingVideoViewer.react","MessagingForwardAttachmentDialog.react"],function(c,d){b("MessagesViewer").renderVideo(b("React").createElement(c,babelHelpers["extends"]({},a,{forwardDialogComponent:d})))},"MercuryAttachmentViewer")},bootstrapWithConfig:function(a,c){b("Bootloader").loadModules(["SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],function(d,e){b("MessagesViewer").renderSpotlight(a,c,d,e)},"MercuryAttachmentViewer")},preload:function(){b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],b("emptyFunction"),"MercuryAttachmentViewer")})}};e.exports=a}),null);
__d("ChatActivity",["Arbiter","ArbiterMixin","Event","JSLogger","MercuryConfig","PresenceState","UserActivity","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("MercuryConfig").activity_limit||6e4,i=b("MercuryConfig").idle_limit||18e5,j=b("MercuryConfig").idle_poll_interval||3e5,k=b("JSLogger").create("chat_activity"),l=Date.now(),m=!0;function n(){var a=Date.now();return!!(m&&a-l<h)}c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.isActive=n,b}var o=new a();function p(){var a=l;l=Date.now();l-a>i&&(k.debug("idle_to_active",a),b("PresenceState").doSync());o.inform("activity")}b("Event").listen(window,"focus",function(){m=!0,p()});b("Event").listen(window,"blur",function(){m=!1});b("UserActivity").subscribe(function(){p()});function q(a){a=a&&a.at&&b("PresenceState").verifyNumber(a.at);typeof a!=="number"&&(a=null);return a||0}setInterval(function(){var a=Date.now(),c=q(b("PresenceState").get()),d=Math.max(l,c);a-d>i&&(k.debug("idle",{cookie:c,local:l}),o.inform("idle",a-d))},j);b("PresenceState").registerStateStorer(function(a){var b=q(a);b<l&&(a.at=l);return a});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.chat_activity={activity_limit:h,idle_limit:i,idle_poll_interval:j,last_active_time:l}});e.exports=o}),null);
__d("DocumentTitle",["Arbiter"],(function(a,b,c,d,e,f){__p&&__p();var g=1500,h=null,i=!1,j=0,k=[],l=null,m=document.title;function n(){k.length>0?!i?(o(k[j].title),j=++j%k.length):p():(clearInterval(h),h=null,p())}function o(a){document.title=a,i=!0}function p(){q.set(l||m,!0),i=!1}function q(a){"use strict";this.$1=a}q.get=function(){"use strict";return m};q.set=function(a,c){"use strict";var d=a.toString();document.title=d;!c?(m=d,l=null,b("Arbiter").inform("update_title",a)):l=d};q.blink=function(a){"use strict";a={title:a.toString()};k.push(a);h===null&&(h=setInterval(n,g));return new q(a)};q.prototype.stop=function(){"use strict";var a=k.indexOf(this.$1);a>=0&&(k.splice(a,1),j>a?j--:j==a&&j==k.length&&(j=0))};q.badge=function(a){"use strict";var b=q.get();a=a?"("+a+") "+b:b;q.set(a,!0)};e.exports=q}),null);
__d("MercuryNotificationRenderer",["fbt","CurrentUser","MercuryAssert","MercuryIDs","MercuryMessages","MessengerParticipants.bs","MercuryViewer","MessagingGenericAdminTextType","MessengerState.bs"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("MercuryMessages").get(),i="source:messenger_growth:event_upcoming_bump";function a(a,c){__p&&__p();b("MercuryAssert").isThreadID(a),b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),a,function(d){__p&&__p();h.getThreadMessagesRange(a,0,1,function(e){__p&&__p();e=e.length&&e[e.length-1];var f=[];e.tags!==undefined&&(f=f.concat(e.tags));e.log_message_data&&(e.log_message_data.message_type==b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST||e.log_message_data.message_type==b("MessagingGenericAdminTextType").WORK_INVITE_CLAIMED)?c(g._("New contact added")):f.indexOf(i)!==-1?c(g._("You have an upcoming event.")):e&&e.author!=b("MercuryViewer").getID()?b("MessengerParticipants.bs").get(e.author,function(e){var f=e.short_name,h=d.custom_nickname;if(h){e=b("MercuryIDs").getUserIDFromParticipantID(e.id);h[e]&&(f=h[e])}d.name?c(g._("{senderName} messaged {groupName}",[g._param("senderName",f),g._param("groupName",d.name)])):b("MercuryIDs").isGroupChat(a)?c(g._("{name} messaged your group",[g._param("name",f)])):c(g._("{name} messaged you",[g._param("name",f)]))}):c(g._("New message!"))})})}e.exports={renderDocumentTitle:a}}),null);
__d("MercuryTimestampTracker",["MercuryActionType","MercuryDispatcher","MercuryPayloadSource","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.$1=a,this.$3=0,this.$2=b("MercuryDispatcher").getForFBID(this.$1),this.$2.subscribe("update-messages",this.$4.bind(this))}a.prototype.$4=function(a,c){if(!c.actions||!c.actions.length)return;if(c.payload_source===b("MercuryPayloadSource").CLIENT_SEND_MESSAGE||c.payload_source===b("MercuryPayloadSource").UNKNOWN)return;for(var a=0;a<c.actions.length;a++){var d=c.actions[a],e=d.action_type;e==b("MercuryActionType").USER_GENERATED_MESSAGE&&d.thread_id&&d.timestamp>this.$3&&(this.$3=d.timestamp)}};a.prototype.getLastUserMessageTimestamp=function(){return this.$3};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("ChatTitleBarBlinker",["ChatActivity","DocumentTitle","JSLogger","MercuryThreadInformer","MercuryNotificationRenderer","PresenceState","MercuryTimestampTracker"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=b("MercuryThreadInformer").get();var g=b("MercuryTimestampTracker").get(),h=b("JSLogger").create("chat_title"),i=null,j=0,k=!1;function l(){if(i){i.stop();i=null;return!0}return!1}function m(a){a=a||g.getLastUserMessageTimestamp();j<=a&&(j=a,(l()||k)&&b("PresenceState").doSync())}f={blink:function(a,c){!i&&j<c&&b("MercuryNotificationRenderer").renderDocumentTitle(a,function(a){i||(i=b("DocumentTitle").blink(a))})},stopBlinking:function(){m()},blinkingElsewhere:function(){k=!0}};function n(a){a=b("PresenceState").verifyNumber(a.sb2);return!a||a<=j?null:a}function a(a){a=a&&n(a);a&&(j=a,h.debug("load",j),l(),k=!1)}function c(a){var b=n(a);b||(h.debug("store",j),a.sb2=j,k=!1);return a}b("PresenceState").registerStateStorer(c);b("PresenceState").registerStateLoader(a);d.subscribe("thread-read-changed",function(a,b){a=g.getLastUserMessageTimestamp();var c=0;for(var d in b)b[d].mark_as_read&&b[d].timestamp>=a&&b[d].timestamp>c&&(c=b[d].timestamp);c&&m(c)});b("ChatActivity").subscribe("activity",function(){return m()});c=b("PresenceState").getInitial();c&&(j=n(c)||0);e.exports=f}),null);
__d("MercuryIgnoredBlockedParticipants.bs",["bs_caml_obj","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){d=d.participants.filter(function(c){return c!==b("MercuryIDs").getParticipantIDFromUserID(a)});return d.filter(function(a){return c.has(a)!==!1})}function a(a,b,c){if(c.is_canonical)return!1;else return g(a,b,c).length>0}function c(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function d(a,c,d){var e=d.is_canonical;if(e){e=d.participants.filter(function(c){return b("bs_caml_obj").caml_notequal(c,b("MercuryIDs").getParticipantIDFromUserID(a))});return!e.every(function(a){return!c.has(a)})}else return!1}f.findIntersection=g;f.isPresentInGroupThread=a;f.participantsInGroupThread=c;f.qualifiesAs=d}),null);
__d("SoundPlayer",["URI","createArrayFromMixed"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function h(a){var c=new(b("URI"))(a);return c.getDomain()?a:new(b("URI"))(window.location.href).setPath(c.getPath()).toString()}function i(a){a=new(b("URI"))(a).getPath();if(/\.mp3$/.test(a))return"audio/mpeg";return/\.og[ga]$/.test(a)?"audio/ogg":""}var j={preload:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(g.has(e))return;var f=document.createElement("audio");if(!f||!f.canPlayType||!f.canPlayType(i(e)))continue;f.preload="auto";f.src=h(e);document.body&&document.body.appendChild(f);g.set(e,f);return}},play:function(a,c){__p&&__p();c===void 0&&(c={});for(var a=b("createArrayFromMixed")(a),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;g.has(f)||j.preload(f);f=g.get(f);if(!f)continue;c.loop&&f.setAttribute("loop","");c.volume&&(f.volume=c.volume);f.play();return}},pause:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=g.get(e);if(e){e.pause();return}}},stop:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=g.get(e);if(f){f.pause();f.removeAttribute("src");f.src=h(e);return}}}};e.exports=j}),null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function(a,b,c,d,e,f){__p&&__p();var g="fb_sounds_playing3";function h(){__p&&__p();var a=b("WebStorage").getLocalStorage();if(a)try{a=a[g];if(a){a=JSON.parse(a);if(Array.isArray(a))return a}}catch(a){}return[]}function i(a){var c=b("WebStorage").getLocalStorage();if(c){var d=h();d.push(a);while(d.length>5)d.shift();try{c[g]=JSON.stringify(d)}catch(a){}}}function j(a){return h().some(function(b){return b===a})}a={play:function(a,c,d){a=b("createArrayFromMixed")(a);c=c||a[0]+Math.floor(Date.now()/1e3);if(j(c))return;b("SoundPlayer").play(a,{loop:!!d});i(c)},isSupported:function(){return!!b("WebStorage").getLocalStorage()}};e.exports=a}),null);
__d("SoundRPC",["Event","FBJSON","SoundSynchronizer"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c,d){b("SoundSynchronizer").play(a,c,d)}a={playLocal:g,playRemote:function(a,c,d,e){c={name:"SoundRPC",data:{paths:c,sync:d,loop:e}};a.postMessage(b("FBJSON").stringify(c),"*")},supportsRPC:function(){return!!window.postMessage},_listen:function(){b("Event").listen(window,"message",function(a){if(!/\.facebook.com$/.test(a.origin))return;var c={};try{c=b("FBJSON").parse(a.data)}catch(a){}c.name==="SoundRPC"&&g(c.data.paths,c.data.sync,c.data.loop)})}};e.exports=a}),null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=!1;c={init:function(a){},play:function(a,c,d){g?b("SoundRPC").playRemote(g.contentWindow,a,c,!1):b("SoundRPC").playLocal(a,c,d),h=!0},hasPlayedSoundBefore:function(){return h},playOnlyIfImmediate:function(a,c,d){if(!h&&b("Visibility").isHidden())return;this.play(a,c,d)},stop:function(a){g||b("SoundPlayer").stop(a)}};d=new(b("URI"))(location.href);d.getSubdomain()&&d.getSubdomain()!=="www"&&d.setSubdomain("www");f=d.getDomain();function a(){if(b("UserAgent_DEPRECATED").ie()<9)return!1;return b("SoundInitialData").RPC_DISABLED?!1:b("SoundSynchronizer").isSupported()&&b("SoundRPC").supportsRPC()}b("isFacebookURI")(d)&&location.host!==f&&a()&&(g=document.createElement("iframe"),g.setAttribute("src","//"+f+"/sound_iframe.php"),g.style.display="none",document.body&&document.body.appendChild(g));e.exports=c}),null);
__d("MercuryBrowserAlerts",["ArbiterMixin","Bootloader","ChatActivity","ChatConfig","ChatOptions","ChatTitleBarBlinker","CurrentUser","Event","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryThreadInfo","MercuryViewer","MessagingTag","MessengerState.bs","Sound","UserActivity","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=3,h=6e5,i=new Map(),j=null;function k(){return!b("UserActivity").isOnTab()&&!b("UserActivity").hasBeenInactive()}function l(){i=new Map()}function m(a){b("ChatOptions").getSetting("sound")&&!k()&&b("Sound").play([b("ChatConfig").get("sound.notif_ogg_url"),b("ChatConfig").get("sound.notif_mp3_url")],a,!1)}var n=Object.assign({init:function(){b("Event").listen(window,"focus",function(){l(),clearInterval(j)}),b("Event").listen(window,"blur",function(){j=setInterval(l,h)}),b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")&&b("CurrentUser").isWorkUser()&&(this._availabilityStatusStore=null,b("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(a){this._availabilityStatusStore=a}.bind(this),"MercuryBrowserAlerts"))},messageReceived:function(a){__p&&__p();var c=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(b("MercuryIDs").getUserIDFromParticipantID(b("MercuryViewer").getID()));if(c||a.author&&b("MercuryViewer").isViewer(a.author)||!a.is_unread||a.folder!=b("MessagingTag").INBOX&&a.folder!=b("MessagingTag").ARCHIVED)return;var d=a.thread_id,e=b("ChatActivity").isActive();if(e){var f=!1;n.inform("before-alert",{threadID:d,cancelAlert:function(){f=!0}})}b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),d,function(c){__p&&__p();var h=b("MercuryThreadInfo").isMuted(c),j=b("MercuryIDs").getUserIDFromParticipantID(b("MercuryViewer").getID());if(h)if(!b("MercuryThreadInfo").areMentionsMuted(c)){if(!a.profile_ranges||!a.profile_ranges.some||!a.profile_ranges.some(function(a){return a.id===j}))return}else return;var k=b("CurrentUser").getID();b("MessengerState.bs").compute(k,function(h){__p&&__p();h=h.blocked_ids;if(b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(k,h,c))return;h=a.timestamp;if(e)f||m(h);else{b("ChatTitleBarBlinker").blink(d,h);var j=i.get(d)||0;j<g&&(i.set(d,j+1),m(h))}b("ChatTitleBarBlinker").blinkingElsewhere()})})}},b("ArbiterMixin"));e.exports=n}),null);
__d("ChatAnimatedGifs",["URI"],(function(a,b,c,d,e,f){__p&&__p();var g={shouldHideBody:function(a){__p&&__p();if(!a.has_attachment)return!1;for(var b=0;b<a.attachments.length;b++){var c=a.attachments[b];if(c.preview_url){c=g.getRawUrlFromSafeUrl(c.preview_url);if(a.body==c)return!0}}return!1},getRawUrlFromSafeUrl:function(a){return new(b("URI"))(a).getQueryData().url}};e.exports=g}),null);
__d("ChatAppActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({INITIAL_DISPLAY_DONE:null,HIDE:null,LOAD:null,TTI:null,UNHIDE:null})}),null);
__d("ChatAppActions",["ChatAppActionTypes","ChatDispatcher"],(function(a,b,c,d,e,f){"use strict";a={tti:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").TTI})},hide:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").HIDE})},unhide:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").UNHIDE})},setInitialDisplayDone:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").INITIAL_DISPLAY_DONE})},load:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").LOAD})}};e.exports=a}),null);
__d("ChatAppStore",["ChatAppActionTypes","ChatDispatcher","FluxStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("ChatDispatcher")),this.$ChatAppStore2={initialDisplayDone:!1,isHidden:!1,isInitialized:!1,isLoaded:!1},this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2)}a.prototype.__onDispatch=function(a){__p&&__p();a=a.type;this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2);switch(a){case b("ChatAppActionTypes").INITIAL_DISPLAY_DONE:this.$ChatAppStore2.initialDisplayDone=!0;this.__emitChange();break;case b("ChatAppActionTypes").HIDE:this.$ChatAppStore2.isHidden=!0;this.__emitChange();break;case b("ChatAppActionTypes").UNHIDE:this.$ChatAppStore2.isHidden=!1;this.__emitChange();break;case b("ChatAppActionTypes").TTI:this.$ChatAppStore2.isInitialized=this.$ChatAppStore2.isLoaded=!0;this.__emitChange();break;case b("ChatAppActionTypes").LOAD:this.$ChatAppStore2.isLoaded=!0;this.__emitChange();break}};a.prototype.getPreviousState=function(){return this.$ChatAppStore1};a.prototype.getState=function(){return this.$ChatAppStore2};a.__moduleID=e.id;e.exports=new a()}),null);
__d("ChatNotificationConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NORMAL:0,NO_USER_MESSAGE_NOTIFICATION:1})}),null);
__d("ChatBehavior",["Arbiter","ArbiterMixin","AvailableList","AvailableListConstants","ChatNotificationConstants","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g;c=!1;var h=b("AvailableList").getWebChatNotification&&b("AvailableList").getWebChatNotification(),i=c,j=!0;d=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.ON_CHANGED="changed",b}a.prototype.notifiesUserMessages=function(){"use strict";return h!==b("ChatNotificationConstants").NO_USER_MESSAGE_NOTIFICATION};a.prototype.ignoresRemoteTabRaise=function(){"use strict";return i};a.prototype.showsTabUnreadUI=function(){"use strict";return j};var k=new a();function l(){k.inform(k.ON_CHANGED)}b("AvailableList").subscribe&&b("AvailableList").subscribe(b("AvailableListConstants").ON_CHAT_NOTIFICATION_CHANGED,function(){var a=h,c=b("AvailableList").getWebChatNotification();h=c;a!=c&&l()});b("Arbiter").subscribe("chat/set_does_page_occlude_tabs",function(a,b){i=!!b,l()});b("Arbiter").subscribe("chat/set_show_tab_unread_ui",function(a,b){j=!!b,l()});e.exports=k}),null);
__d("MessengerHotlikeEmoji.bs",[],(function(a,b,c,d,e,f){"use strict";var g="f0000";function a(a){return a===g}f.hotlike_key=g;f.isMessengerHotlike=a}),null);
__d("EmojiOnlyMessage.react",["cx","EmojiImageURL","EmojiLikeConstants","Image.react","MessengerHotlikeEmoji.bs","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a="_1ift _1ifu",c=0,d=this.props.contents.map(function(d){c++;var e=d.emojiKey;if(e){e=b("MessengerHotlikeEmoji.bs").isMessengerHotlike(e)?b("EmojiImageURL").getMessengerURL(e,b("EmojiLikeConstants").sizeMap.dp32):b("EmojiImageURL").getFBEmojiURL(e,b("EmojiLikeConstants").sizeMap.dp32);return b("React").createElement(b("Image.react"),{alt:d.text,className:a,key:c,src:e})}else return b("React").createElement("span",{key:c},d.text)});return b("React").createElement("div",{tabIndex:"0"},d)};function a(){h.apply(this,arguments)}a.propTypes={contents:c.arrayOf(c.shape({emojiKey:c.string,text:c.string.isRequired})).isRequired};e.exports=a}),null);
__d("Utf16",[],(function(a,b,c,d,e,f){a={decode:function(a){switch(a.length){case 1:return a.charCodeAt(0);case 2:return 65536|(a.charCodeAt(0)-55296)*1024|a.charCodeAt(1)-56320;default:return null}},encode:function(a){if(a<65536)return String.fromCharCode(a);else return String.fromCharCode(55296+(a-65536>>10))+String.fromCharCode(56320+a%1024)}};e.exports=a}),null);
__d("messengerIterateEmoji",["MessengerSupportedEmoji","ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){__p&&__p();var f=String(a);while(f){a=b("ifRequired")("MessengerSupportedEmojiUtils",function(a){return a.getEmojiMatchObj(f)},function(){return b("MessengerSupportedEmoji").getEmojiMatchObj(f)});if(a){var g=a.offset+a.length,h=f.substr(0,a.is_supported?a.offset:g);d(h);a.is_supported&&c(a.emoji_str,a.emoji_key,e);h=f.substr(g);f=h}else break}d(f)}e.exports=a}),null);
__d("messengerIterateEmoticons",["EmoticonEmojiList"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){var f,g,h;a=String(a);while(a){var i=b("EmoticonEmojiList").regexp.exec(a);if(i)f=i.index+i[1].length,g=a.substr(0,f),i=i[2],f=a.substr(f+i.length),h=b("EmoticonEmojiList").names[i],d(g),c(i,h,e),a=f;else break}d(a)}e.exports=a}),null);
__d("MessengerTextWithEmoticons.react",["cx","fbt","BaseTextWithDecoration.react","EmojiImageURL","EmoticonEmojiList","Image.react","MessengerHotlikeEmoji.bs","React","gkx","messengerIterateEmoji","messengerIterateEmoticons"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;function j(a,c,d,e){var f=e?128:16;a=!a&&!b("MessengerHotlikeEmoji.bs").isMessengerHotlike(d)?b("EmojiImageURL").getFBEmojiURL(d,f):b("EmojiImageURL").getMessengerURL(d,f);d=e?"_1ift _5m3a":"_1ift _2560";return b("React").createElement(b("Image.react"),{alt:c,className:d,src:a})}function k(a,c,d){var e=d?128:16,f=b("EmoticonEmojiList").emote2emojis[c],g=f?b("MessengerHotlikeEmoji.bs").isMessengerHotlike(f)?b("EmojiImageURL").getMessengerURL(f,e):b("EmojiImageURL").getFBEmojiURL(f,e):null;if(g){f=String.fromCodePoint(parseInt(f,e));e=d?"_1ift _5m3a":"_1ift _2560";return b("React").createElement(b("Image.react"),{alt:f,className:e,src:g})}d=h._("{emoticonName} emoticon",[h._param("emoticonName",c)]);return b("React").createElement("span",{"aria-label":d},a)}function l(a,b,c){return function(d,e,f){var g=function(c,d,a){e(b(c,d,a))};a(String(d),g,f,c)}}i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.shouldComponentUpdate=function(a){return a.text!==this.props.text};a.prototype.render=function(){var a=[l(b("messengerIterateEmoji"),j.bind(null,!!this.props.forceMessengerEmoji),this.props.customSize),l(b("messengerIterateEmoticons"),k,this.props.customSize)];return b("React").createElement(b("BaseTextWithDecoration.react"),babelHelpers["extends"]({},this.props,{text:this.props.text,decorators:a}))};function a(){i.apply(this,arguments)}a.propTypes={text:c.string,customSize:c.bool,forceMessengerEmoji:c.bool};e.exports=a}),null);
__d("MessageReplyPermissions",["MercuryAttachmentType","MercuryConfig","gkx"],(function(a,b,c,d,e,f){"use strict";a={canReplyToMessage:function(a){return this.isRepliableMessage(a)&&b("gkx")("AT4XqrVNBYwaTCldftX_3p63LEbGgIcHGQ5WMySWbZYMlZu22QdH6RZZJZsVQ4mH1XIJ58rjz4PZkNOr6zG9IRwyYOaUiyj2qvuh3U3wbMhrUA")||this._canRenderM3RedesignReply(a)},bubbleContainsRepliedToMessage:function(a,b){return!b&&this._canRenderM3RedesignReply(a)},isRepliableMessage:function(a){var c=a.attachments&&a.attachments.length===1&&a.attachments[0].attach_type;return!!a.body||c===b("MercuryAttachmentType").PHOTO||c===b("MercuryAttachmentType").VIDEO||c===b("MercuryAttachmentType").STICKER||c===b("MercuryAttachmentType").THIRDPARTYSTICKER||c===b("MercuryAttachmentType").ANIMATED_IMAGE||a.attachments&&a.attachments.length>1},_canRenderM3RedesignReply:function(a){var c=a.attachments&&a.attachments.length===1&&a.attachments[0].attach_type;return b("MercuryConfig").SM3BD&&(!!a.body||b("MercuryConfig").RTPE&&c===b("MercuryAttachmentType").PHOTO||b("MercuryConfig").RTVE&&c===b("MercuryAttachmentType").VIDEO||b("MercuryConfig").RTSE&&(c===b("MercuryAttachmentType").STICKER||c===b("MercuryAttachmentType").THIRDPARTYSTICKER)||b("MercuryConfig").RTGE&&c===b("MercuryAttachmentType").ANIMATED_IMAGE||b("MercuryConfig").RTOAE&&a.attachments&&a.attachments.length>1)}};e.exports=a}),null);
__d("messengerCustomColorUtils",["gkx"],(function(a,b,c,d,e,f){"use strict";function a(a,c){c=c||{};b("gkx")("AT4vZBWyiZL1KZrir2lJt4vVNMIYu8sDbA3PtNwJWZh5seJSYZeYdmCgqH3wgiUS4PfslnEPm3wz9jSsjDINBCSy")||(c.backgroundColor=a);return c}e.exports={customBubbleStyle:a}}),null);
__d("ChatBubble.react",["cx","BootloadedComponent.react","DOMDimensions","EmojiOnlyMessage.react","ErrorBoundary.react","JSResource","MercuryConfig","MercuryMessageBody.react","MercuryMessageRenderLocations","MessageReplyPermissions","MessengerMathUtils","MessengerSupportedEmojiUtils","React","ReactDOM","joinClasses","messengerCustomColorUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=2;c=b("React").createClass({displayName:"ChatBubble",_boxWidth:0,_repliedToMessageRef:null,propTypes:{attachments:a.node,body:a.string,className:a.string,customColor:a.string,customLike:a.object,isEmojiLike:a.bool,isFromViewer:a.bool,maxWidth:a.number.isRequired,message:a.object,metaRanges:a.array,onReplyToMessage:a.func,ranges:a.array,threadCustomColor:a.string,threadID:a.string},getInitialState:function(){return{emojis:undefined,bubbleWidth:null}},componentDidMount:function(){if(this.props.attachments&&!this.props.isEmojiLike)return;if(!this.props.emojis){var a=this.props.body||"";a=b("MessengerSupportedEmojiUtils").getEmojiOnlyContents(a);a&&a.length&&this.setState({emojis:a})}this._restyleBubble(this.props)},componentDidUpdate:function(a){(a.maxWidth!==this.props.maxWidth||a.body!==this.props.body||!a.attachments&&this.props.attachments)&&this._restyleBubble(a)},render:function(){__p&&__p();var a=this.props,c=a.attachments,d=a.body;d=d===void 0?"":d;var e=a.className,f=a.maxWidth;a=babelHelpers.objectWithoutProperties(a,["attachments","body","className","maxWidth"]);a=Object.assign({},a);delete a.customColor;delete a.customLike;delete a.isEmojiLike;delete a.isFromViewer;delete a.message;delete a.metaRanges;delete a.ranges;delete a.threadCustomColor;delete a.threadID;return b("React").createElement("div",babelHelpers["extends"]({},a,{className:b("joinClasses")("_5w1r"+(this.state.emojis?"":" _3_om")+(this.state.emojis?" _31xx":"")+(this.props.message&&this.props.message.replied_to_message&&this.props.message.replied_to_message.body&&!b("MercuryConfig").SM3BD?" _1vmy":""),e),ref:"bubble",style:{maxWidth:f,width:this.state.emojis?null:this.state.bubbleWidth,wordWrap:d.length>=15?"break-word":"inherit"}}),b("React").createElement("div",{className:"_4gx_",ref:"inner"},this._renderContent(),c))},_renderContent:function(){if(!this.props.body||this.props.isEmojiLike)return null;var a={},c=null;this.state.emojis?c=b("React").createElement(b("EmojiOnlyMessage.react"),{contents:this.state.emojis}):(c=b("React").createElement(b("MercuryMessageBody.react"),{body:this.props.body,ranges:this.props.ranges,metaRanges:this.props.metaRanges,threadID:this.props.threadID,customLike:this.props.customLike,threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,renderLocation:b("MercuryMessageRenderLocations").CHAT}),this.props.customColor&&(a=b("messengerCustomColorUtils").customBubbleStyle(this.props.customColor,a)));var d=this.props.message&&this.props.message.replied_to_message&&b("MessageReplyPermissions").bubbleContainsRepliedToMessage(this.props.message.replied_to_message,!!this.state.emojis)?b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("RepliedToMessageContent.react").__setRef("ChatBubble.react"),bootloadPlaceholder:b("React").createElement("div",null),isFromViewer:this.props.isFromViewer,isLinkified:!0,isMessengerUI:!1,repliedToMessage:this.props.message&&this.props.message.replied_to_message,threadID:this.props.threadID,ref:this._setRepliedToMessageRef,replyInOneBubble:!0})):null;return b("React").createElement("div",{className:"_1aa6"+(this.state.emojis?" _31xy":"")+(this.props.message&&this.props.message.isSelected?" _1yok":"")+(d?" _6e7o":""),ref:"contentWrapper",style:a},d,d?"\n":null,b("React").createElement("span",{className:"_5yl5",ref:"content"},c))},_restyleBubble:function(a){__p&&__p();if(this.props.attachments||this.props.body!=null&&b("MessengerMathUtils").isMathBlock(this.props.body.trim())){this.setState({bubbleWidth:null});return}var c=b("ReactDOM").findDOMNode(this.refs.bubble);if(a.maxWidth!==this.props.maxWidth||b("DOMDimensions").getElementDimensions(c).width>this.props.maxWidth){a=this.props.maxWidth;this.setState({bubbleWidth:a},this._shrinkBubble);return}this._shrinkBubble()},_shrinkBubble:function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this.refs.bubble);a=b("DOMDimensions").getElementDimensions(a).width;var c=b("ReactDOM").findDOMNode(this.refs.content),d=b("DOMDimensions").getElementDimensions(c).width;if(this._repliedToMessageRef){var e=b("ReactDOM").findDOMNode(this._repliedToMessageRef);e=b("DOMDimensions").getElementDimensions(e).width;d=Math.max(e,d)}e=c?d+b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.contentWrapper),"width",!0,!1,!1):0;c=e+h;d>0&&c<this.props.maxWidth&&a-c-this.getBoxWidth()>0&&this.setState({bubbleWidth:c})},contentWraps:function(){var a=b("ReactDOM").findDOMNode(this.refs.content);if(!a)return!1;var c=a.getClientRects();a=b("DOMDimensions").getElementDimensions(a).height;return c&&c.length>1&&c[0].height<a},_setRepliedToMessageRef:function(a){this._repliedToMessageRef=a},getBoxWidth:function(){this._boxWidth||(this._boxWidth=b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.bubble),"width",!0,!0,!1));return this._boxWidth}});e.exports=c}),null);
__d("ChatCodePasteUtils",["cx","BanzaiODS","ChatBubble.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/`{3,}/,i=3,j=/^\s+/,k=/\s+$/;function a(a){return!!(a&&h.test(a)&&a.split("\n").length>1)}function l(a,b){__p&&__p();var c=0;if(b-2>=0){c+=a[b-2].trim().length;var d=a[b-2].match(k);d&&(c+=d[0].length)}b-1>=0&&(c+=a[b-1].length+2*i);d=a[b].match(j);d&&(c+=d[0].length);return c}function m(a,b,c){if(a)return a.map(function(a){return Object.assign(Object.assign({},a),{offset:a.offset-b})}).filter(function(a){return 0<=a.offset&&a.offset<c});else return a}function c(a,c,d,e,f){__p&&__p();a=a.split(h);var g=[],i=0;for(var j=0;j<a.length;j+=2){var k=a[j].trim();if(k){i+=l(a,j);var n=d?m(d,i,k.length):d;g.push(b("React").createElement("div",{key:j,className:"_1e-x _n4o"},b("React").createElement(b("ChatBubble.react"),{body:k,customColor:f||undefined,className:"clearfix _5wdf",maxWidth:c,ranges:n||undefined,threadID:e||undefined})))}if(j+1<a.length&&a[j+1]){k=a[j+1].split("\n");n=k[0].replace(/[^a-zA-Z]+/g,"");k=k.slice(1).join("\n");b("BanzaiODS").bumpEntityKey("chat_code_paste","render_bubble");g.push(b("React").createElement("div",{key:j+1,className:"_1e-x _n4o"},b("React").createElement("div",{ref:"bubble",className:"_3_om _4yng _5wdf"},b("React").createElement("div",{style:{maxWidth:c},ref:"syntaxTarget"+j,className:"language-"+n},k))))}}return g}e.exports={containsCodeBlock:a,getCodeAndMessageBubbles:c}}),null);
__d("ChatPrivacyActionController",["ChatVisibility","JSLogger","PresencePrivacy"],(function(a,b,c,d,e,f){__p&&__p();a=function a(c,d){__p&&__p();this._userID=c;this._logger=b("JSLogger").create("blackbird");this._getState=function(){return b("ChatVisibility").isOnline()?b("PresencePrivacy").allows(this._userID)?a.NORMAL:a.BLOCKED:a.OFFLINE};this._togglePrivacy=function(){__p&&__p();this._getState();switch(this._getState()){case a.OFFLINE:if(b("ChatVisibility").isOnline()){this._logger.error("tabs_already_online");break}this._logger.log("tabs_go_online",{tab_id:this._userID});b("ChatVisibility").goOnline(function(){b("PresencePrivacy").allows(this._userID)||(this._getState()!==a.BLOCKED&&this._logger.error("privacy_action_controller_blocked_inconsistency"),this._togglePrivacy())}.bind(this));break;case a.BLOCKED:b("PresencePrivacy").allow(this._userID);this._logger.log("tabs_unblock",{tab_id:this._userID});break;case a.NORMAL:b("PresencePrivacy").disallow(this._userID);this._logger.log("tabs_block",{tab_id:this._userID});break}};c=function(){d&&d(this._getState())}.bind(this);c();this._subscribeToken=b("PresencePrivacy").subscribe("privacy-changed",c)};a.OFFLINE="offline";a.BLOCKED="blocked";a.NORMAL="normal";Object.assign(a.prototype,{togglePrivacy:function(){this._logger.log("gear_menu_toggle_privacy",{tab_id:this._userID}),this._togglePrivacy()},destroy:function(){this._subscribeToken&&b("PresencePrivacy").unsubscribe(this._subscribeToken)}});e.exports=a}),null);
__d("FantaDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!1})}),null);
__d("FantaTabActions",["Bootloader","CurrentUser","FantaDispatcher","MercuryIDs","MessengerURIConstants","URI","WebMessengerThreadPermalinks","WorkplaceChatHelper","gkx","goURI","ifRequired","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({BLUR_TAB:null,CLEAR_PAGE_INDICATOR_DESCRIPTION:null,CLOSE_ALL_TABS:null,CLOSE_AND_TAB_NEXT:null,CLOSE_TAB:null,DELETE_TAB:null,FOCUS_NEXT_TAB:null,FOCUS_PREVIOUS_TAB:null,FOCUS_TAB:null,HIGHLIGHT_NEW_MESSAGE:null,HOVERED_TAB:null,JUMP_TO_MESSAGE:null,LOAD_FROM_DATA:null,MINIMIZE_ALL_TABS:null,MINIMIZE_TAB:null,OPEN_TAB_WITH_INTERSTITIAL_DATA:null,OPEN_TAB:null,REPLACE_TAB:null,SCROLL_BOTTOM_CHANGED:null,SET_ALLOWED_RAISED_TABS:null,SET_MESSAGE_COUNT:null,SET_PAGE_INDICATOR_DESCRIPTION:null,SET_PERMANENT_URI:null,SHOW_UNSEEN_MESSAGES:null,UNHIGHLIGHT_NEW_MESSAGE:null,UNHOVERED_TAB:null,UNMINIMIZE_TAB:null,WIPE_JUMP_TO_MESSAGE:null});function h(a,c){var d=a?new(b("URI"))(b("WebMessengerThreadPermalinks").getThreadURIFromServerID(a)):new(b("URI"))(b("MessengerURIConstants").COMPOSE_SUBPATH);b("ifRequired")("BusinessURI.brands",function(a){return b("goURI")(a(d))},function(){return setTimeout(function(){i.openTab(a,c)},100)})}var i={Types:g,openNewMessageTab:function(a,b,c){i.openTab(a,b,c,!0)},openTab:function(a,c,d,e){__p&&__p();if(b("CurrentUser").isWorkUser()&&b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop()&&b("gkx")("AT7jinnyRPDg4OtD2DVZhvkvAcwN4UEfD67JxgYKN8ktNW7yrzWDgUhjX86ZgaJp_pMk__upuP12-9rZjDRDprZwcbUv5zDffty-rkNZ2YUXjQ")){if(c==="jewel_new_message"){b("goURI")("workchat://new");return}if(!b("MercuryIDs").isLocalThread(a)||c!=="groupsync_fbgroupmall_chat_button"){b("goURI")("workchat://"+(a||""));return}}b("ifRequired")("FantaTabsEagerBootloader",function(a){return a.bootload()});this.dispatchOrBootloadGetMessages(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB,tabID:a,entryPoint:c,defaultText:d,isNewMessageTab:e}),b("ifRequired")("FantaTabsReactApp",function(b){this._tryLoadSlimApp(a,c)}.bind(this),function(){this._tryLoadSlimApp(a,c,function(){return h(a,c)})}.bind(this))}.bind(this))},openInterstitialTab:function(a,c,d){this.dispatchOrBootloadGetMessages(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB_WITH_INTERSTITIAL_DATA,tabID:a,interstitialData:c,entryPoint:d}),b("ifRequired")("FantaTabsReactApp",function(b){this._tryLoadSlimAppWithInterstitialData(a,c,d)}.bind(this),function(){this._tryLoadSlimAppWithInterstitialData(a,c,d)}.bind(this))}.bind(this))},_tryLoadSlimApp:function(a,c,d){b("ifRequired")("FantaTabsSlimApp",function(d){b("ifRequired")("FantaAppStore",function(){},function(){d.getPumpedUp(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB,tabID:a,entryPoint:c})})})},function(){return d&&d(a)})},_tryLoadSlimAppWithInterstitialData:function(a,c,d){b("ifRequired")("FantaTabsSlimApp",function(e){b("ifRequired")("FantaAppStore",function(){},function(){e.getPumpedUp(function(){b("FantaDispatcher").dispatch({type:g.OPEN_TAB_WITH_INTERSTITIAL_DATA,tabID:a,interstitialData:c,entryPoint:d})})})})},replaceTab:function(a,c){b("FantaDispatcher").dispatch({type:g.REPLACE_TAB,tabID:a,newTabID:c})},minimizeTab:function(a){b("FantaDispatcher").dispatch({type:g.MINIMIZE_TAB,tabID:a})},minimizeAllTabs:function(){b("FantaDispatcher").dispatch({type:g.MINIMIZE_ALL_TABS})},unminimizeTab:function(a){b("FantaDispatcher").dispatch({type:g.UNMINIMIZE_TAB,tabID:a})},closeTab:function(a){b("FantaDispatcher").dispatch({type:g.CLOSE_TAB,tabID:a})},closeAllTabs:function(){b("FantaDispatcher").dispatch({type:g.CLOSE_ALL_TABS})},closeAndTabNext:function(a){b("FantaDispatcher").dispatch({type:g.CLOSE_AND_TAB_NEXT,tabID:a})},deleteTab:function(a){b("FantaDispatcher").dispatch({type:g.DELETE_TAB,tabID:a})},focusTab:function(a){b("FantaDispatcher").dispatch({type:g.FOCUS_TAB,tabID:a})},blurTab:function(a){b("FantaDispatcher").dispatch({type:g.BLUR_TAB,tabID:a})},hoveredTab:function(a){b("FantaDispatcher").dispatch({type:g.HOVERED_TAB,tabID:a})},unhoveredTab:function(a){b("FantaDispatcher").dispatch({type:g.UNHOVERED_TAB,tabID:a})},highlightNewMessage:function(a){b("FantaDispatcher").dispatch({type:g.HIGHLIGHT_NEW_MESSAGE,tabId:a})},unhighlightNewMessage:function(a){b("FantaDispatcher").dispatch({type:g.UNHIGHLIGHT_NEW_MESSAGE,tabId:a})},setAllowedRaisedTabs:function(a){b("FantaDispatcher").dispatch({type:g.SET_ALLOWED_RAISED_TABS,allowedRaisedTabs:a})},loadFromData:function(a){this.dispatchOrBootloadGetMessages(function(){a&&b("FantaDispatcher").dispatch({type:g.LOAD_FROM_DATA,tabData:a})})},focusNextTab:function(event){b("FantaDispatcher").dispatch({type:g.FOCUS_NEXT_TAB,event:event})},focusPreviousTab:function(event){b("FantaDispatcher").dispatch({type:g.FOCUS_PREVIOUS_TAB,event:event})},scrollBottomChanged:function(a,c,d){b("FantaDispatcher").dispatch({type:g.SCROLL_BOTTOM_CHANGED,isScrolledToBottom:c,tabID:a,showUnseenMessages:d})},jumpToMessage:function(a,c){b("FantaDispatcher").dispatch({type:g.JUMP_TO_MESSAGE,mid:c,tabID:a})},wipeJumpToMessage:function(a){b("FantaDispatcher").dispatch({type:g.WIPE_JUMP_TO_MESSAGE,tabID:a})},setPageIndicatorDescription:function(a,c){b("FantaDispatcher").dispatch({type:g.SET_PAGE_INDICATOR_DESCRIPTION,tabID:a,description:c})},clearPageIndicatorDescription:function(a){b("FantaDispatcher").dispatch({type:g.CLEAR_PAGE_INDICATOR_DESCRIPTION,tabID:a})},showUnseenMessages:function(a){b("FantaDispatcher").dispatch({type:g.SHOW_UNSEEN_MESSAGES,tabID:a})},setPermanentUri:function(a,c){b("FantaDispatcher").dispatch({type:g.SET_PERMANENT_URI,tabID:a,uri:c})},dispatchOrBootloadGetMessages:function(a){b("ifRequired")("FantaReducersGetMessages",function(){a()},function(){b("ifRequired")("FantaAppStore",function(c){b("Bootloader").loadModules(["FantaReducersGetMessages"],function(b){c.addReducers(b),a()},"FantaTabActions")},function(){a()})})}};e.exports=i}),null);
__d("ChatTabBlinking",["cx","CSS","FantaTabActions","clearInterval","gkx","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("gkx")("AT4aq0gj3KFvuyn5ouzkcinNuxrDXZY6HPjnRXCVXzOigsSLEws96b2T0YYtUZg_IxPxKREPJvW4RS6GeFXjfiRr")?1200:600,i="highlightTitle";a={_blinkMap:{},_interval:null,_isHighlighting:!1,blinkTab:function(a,b){this._blinkMap[a]||(this._blinkMap[a]={view:b,elem:b.getTabElem()}),this.checkInterval()},unblinkTab:function(a){if(this._blinkMap[a]){var c=this._blinkMap[a].elem;c&&(b("gkx")("AT4aq0gj3KFvuyn5ouzkcinNuxrDXZY6HPjnRXCVXzOigsSLEws96b2T0YYtUZg_IxPxKREPJvW4RS6GeFXjfiRr")?setTimeout(function(){b("FantaTabActions").unhighlightNewMessage(a)}):b("CSS").removeClass(c,i));delete this._blinkMap[a]}this.checkInterval()},checkInterval:function(){var a=Object.keys(this._blinkMap).length;a>0?this._interval||(this._interval=b("setIntervalAcrossTransitions")(this._toggleBlinkHighlight.bind(this),h)):this._interval&&(b("clearInterval")(this._interval),this._interval=null)},_toggleBlinkHighlight:function(){__p&&__p();var a=this;this._isHighlighting=!this._isHighlighting;var c=function(c){if(Object.prototype.hasOwnProperty.call(a._blinkMap,c)){var d=a._blinkMap[c],e=d.elem;d=d.view;e&&e.parentNode&&!d.isFocused()&&!d.isHovered()?b("gkx")("AT4aq0gj3KFvuyn5ouzkcinNuxrDXZY6HPjnRXCVXzOigsSLEws96b2T0YYtUZg_IxPxKREPJvW4RS6GeFXjfiRr")?a._isHighlighting?setTimeout(function(){b("FantaTabActions").highlightNewMessage(c)}):setTimeout(function(){b("FantaTabActions").unhighlightNewMessage(c)}):b("CSS").conditionClass(e,i,a._isHighlighting):a.unblinkTab(c)}};for(var d in this._blinkMap)c(d)}};e.exports=a}),null);
__d("ChatCloseButton.react",["cx","fbt","Link.react","React","TrackingNodes","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.CLOSE_BUTTON),c=h._("Press Esc to close"),d=h._("Close tab"),e="_4vu4";return b("React").createElement(b("Link.react"),{"aria-label":this.props.active?c:d,className:b("joinClasses")(this.props.className,"close","button",e),"data-ft":a,"data-hover":"tooltip","data-tooltip-content":this.props.active?c:d,"data-tooltip-position":"above",onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onMouseDown:this.props.onMouseDown})};function a(){i.apply(this,arguments)}a.propTypes={onClick:c.func,onKeyUp:c.func,onMouseDown:c.func,active:c.bool};a.defaultProps={active:!1};e.exports=a}),null);
__d("ChatCollapsedLogMessageGroup.react",["cx","fbt","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={collapsed:!0},b}a.prototype.render=function(){var a=h._("See Latest Activity"),c=h._("See Less Activity");return b("React").createElement("div",{className:"_5w0o"},b("React").createElement(b("Link.react"),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed})}.bind(this)},this.state.collapsed?a:c),this.state.collapsed?null:b("React").createElement("div",null,b("React").createElement("div",{className:"_2zsu"}),this.props.children,b("React").createElement("div",{className:"_2zsu"})))};e.exports=a}),null);
__d("ChatDateBreak.react",["cx","React","formatDate","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){"use strict";return this.props.date.getTime()!==a.date.getTime()};a.prototype.render=function(){"use strict";var a=b("formatDate")(this.props.date,{today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return b("React").createElement("time",{className:b("joinClasses")(this.props.className,"_5w-5")},b("React").createElement("span",{className:"_5w-6"},a))};function a(){"use strict";h.apply(this,arguments)}a.propTypes={date:c.instanceOf(Date).isRequired};e.exports=a}),null);
__d("FantaTypeFileUploader",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=Object.freeze({ANIMATED_IMAGE:"animated_image",AUDIO:"audio",FILE:"file",GENERIC_ATTACHMENT:"generic_attachment",IMAGE:"image",VIDEO:"video"});d={uploadedFiles:b("immutable").Map(),uploadingFiles:b("immutable").Map()};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;a.prototype.getTypeIDs=function(a){return this.uploadedFiles.reduce(function(b,c){c.type===a&&c.uploadedID&&(b=b.concat(c.uploadedID));return b},[])};function a(){g.apply(this,arguments)}a.fileTypes=c;e.exports=a}),null);
__d("FantaTypeSharePreview",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={isLoading:!1,params:null,type:null,uri:null};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeComposer",["FantaTypeFileUploader","FantaTypeSharePreview","immutable"],(function(a,b,c,d,e,f){"use strict";var g,h=0;c={fileUploader:new(b("FantaTypeFileUploader"))(),sharePreview:new(b("FantaTypeSharePreview"))(),text:"",replyingToMessage:null,version:h};d=babelHelpers.inherits(a,b("immutable").Record(c));g=d&&d.prototype;function a(){g.constructor.call(this,{version:++h})}e.exports=a}),null);
__d("FantaMessageActions",["Bootloader","FantaDispatcher","FantaTypeComposer","MercuryConfig","emptyFunction","ifRequired","keyMirror","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CANCEL_FILE_UPLOAD:null,COMPOSER_TEXT_UPDATE:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,PREPARE_FILES_FOR_SEND:null,RECEIVED_NEW_MESSAGE:null,REMOVE_SHARE_PREVIEW:null,SEND_GROUP_MESSAGE:null,SEND_HOT_LIKE:null,SEND_MESSAGE:null,SEND_PHOTO:null,SEND_STICKER:null,UPDATE_GROUP_NAME:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null,REPLY_TO_MESSAGE:null,CANCEL_REPLY_TO_MESSAGE:null});function h(){var a=document.createElement("form");a.action=b("MercuryConfig").upload_url;a.method="post";return a}function i(a,b){var c=document.createElement("input");c.type="file";c.name="attachment[]";c.multiple=!0;b&&(c.onchange=b);a.appendChild(c);return c}var j={Types:g,prepareFilesForSend:function(a,c,d,e){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:g.PREPARE_FILES_FOR_SEND,tabID:a,files:c,composer:d}),e&&e()})},openUploadFilePicker:function(a,b){var c=h();c=i(c,function(){j.prepareFilesForSend(a,this.files,b)});c.click()},uploadedFile:function(a,c,d){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:g.UPLOADED_FILE,tabID:a,uploadID:c,payload:d})})},uploadFileFailed:function(a,c){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:g.UPLOAD_FILE_FAILED,tabID:a,uploadID:c})})},replyToMessage:function(a,c){b("FantaDispatcher").dispatch({type:g.REPLY_TO_MESSAGE,threadID:c,message:a})},cancelReplyToMessage:function(a){b("FantaDispatcher").dispatch({type:g.CANCEL_REPLY_TO_MESSAGE,threadID:a})},cancelFileUpload:function(a,c){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:g.CANCEL_FILE_UPLOAD,tabID:a,uploadID:c})})},linkPreview:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:g.LINK_PREVIEW,tabID:a,uri:c})})},loadedShareData:function(a,c,d){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:g.LOADED_SHARE_DATA,tabID:a,attachmentData:c,composer:d})})},loadingShareData:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:g.LOADING_SHARE_DATA,composer:c,tabID:a})})},removeSharePreview:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:g.REMOVE_SHARE_PREVIEW,tabID:a,composer:c})})},receivedNewMessage:function(a,c){b("FantaDispatcher").dispatch({type:g.RECEIVED_NEW_MESSAGE,tabID:a,message:c})},updateGroupName:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:g.UPDATE_GROUP_NAME,threadID:a,newName:c})})},sendGroupMessage:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:g.SEND_GROUP_MESSAGE,threadID:a,onSendSuccess:c})})},sendMessage:function(a,c,d,e){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:g.SEND_MESSAGE,threadID:a,message:c,composer:d,onSendSuccess:e})})},sendPhoto:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:g.SEND_PHOTO,onSendSuccess:d,photoData:c,threadID:a})})},sendHotLike:function(a,c,d,e,f){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:g.SEND_HOT_LIKE,emoji:c,onSendSuccess:f,size:d,source:e,threadID:a})})},sendSticker:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:g.SEND_STICKER,threadID:a,stickerID:c,onSendSuccess:d})})},composerTextUpdate:function(a,c,d){c.length>0&&b("ifRequired")("FantaReducersSendMessages",b("emptyFunction"),function(){return this.dispatchOrBootloadSendMessages(b("emptyFunction"))}.bind(this)),this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:g.COMPOSER_TEXT_UPDATE,composer:d,message:c,threadID:a})})},dispatchOrBootloadSendMessages:function(a){b("ifRequired")("FantaReducersSendMessages",function(){b("setImmediate")(a)},function(){b("Bootloader").loadModules(["FantaAppStore","FantaReducersSendMessages"],function(c,d){c.addReducers(d),b("setImmediate")(a)},"FantaMessageActions")})},dispatchOrBootloadUploader:function(a){b("ifRequired")("FantaReducersFileUploader",function(){a()},function(){b("Bootloader").loadModules(["FantaAppStore","FantaReducersFileUploader"],function(b,c){b.addReducers(c),a()},"FantaMessageActions")})},dispatchOrBootloadSharePreview:function(a){b("ifRequired")("FantaReducersSharePreview",function(){a()},function(){b("Bootloader").loadModules(["FantaAppStore","FantaReducersSharePreview"],function(b,c){b.addReducers(c),a()},"FantaMessageActions")})}};e.exports=j}),null);
__d("MessengerDecoratorUtil",["MercuryAttachment","MercuryAttachmentType","StoryAttachmentStyle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a){return a===Object(a)};a={isEventAttachment:function(a){return this._isStoryBased(a)&&a.share.style_list.indexOf(b("StoryAttachmentStyle").EVENT_REMINDER)>-1},isP2PAttachment:function(a){a=b("MercuryAttachment").get(a).filter(function(a){return g(a)&&this.isP2P(a)}.bind(this));return!!a.length},isP2P:function(a){return!!(this._isStoryBased(a)&&(a.share.style_list.indexOf(b("StoryAttachmentStyle").ORION)>-1||a.share.style_list.indexOf(b("StoryAttachmentStyle").ORION_REQUEST)>-1))},_isStoryBased:function(a){return!!(a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.style_list)}};e.exports=a}),null);
__d("MessageReactionMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1491398900900362"};c.getQueryID=function(){"use strict";return"254517288326467"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("ContextualLayerAutoFlip",["ContextualLayerAlignmentEnum","ContextualLayerDimensions","DOMDimensions","Rect","Vector","getDocumentScrollElement"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c){c=new(b("Rect"))(c).convertTo(a.domain);var d=Math.max(a.l,c.l);a=Math.min(a.r,c.r);return Math.max(a-d,0)}function a(a){"use strict";this._layer=a}a.prototype.enable=function(){"use strict";this._subscription=this._layer.subscribe("adjust",this._adjustOrientation.bind(this)),this._layer.isShown()&&this._layer.updatePosition()};a.prototype.disable=function(){"use strict";this._subscription.unsubscribe(),this._subscription=null,this._layer.isShown()&&this._layer.updatePosition()};a.prototype._adjustOrientation=function(a,c){"use strict";__p&&__p();a=this.getValidPositions(c);if(!a.length){c.invalidate();return}var d=b("ContextualLayerDimensions").getViewportRect(this._layer),e=this._getValidAlignments(c),f,h,i;for(f=0;f<e.length;f++){c.setAlignment(e[f]);for(h=0;h<a.length;h++){c.setPosition(a[h]);i=b("ContextualLayerDimensions").getLayerRect(this._layer,c);if(d.contains(i))return}}var j=-1;if(c.getPreferMoreContentShownRect()){var k=b("DOMDimensions").getDocumentDimensions(),l=new(b("Rect"))(d).convertTo("document"),m=99999;for(h=0;h<a.length;h++){c.setPosition(a[h]);i=b("ContextualLayerDimensions").getLayerRect(this._layer,c);var n=new(b("Rect"))(i).convertTo("document");if(n.l>=0&&n.r<=k.width&&n.t>=43&&n.b<=k.height){var o=l.l-n.l,p=n.r-l.r,q=l.t-n.t;n=n.b-l.b;o=(o>0?o:0)+(p>0?p:0)+(q>0?q:0)+(n>0?n:0);o<m&&(j=h,m=o)}}}this.__setBestPosition(j,c,a);p=0;q=0;for(f=0;f<e.length;f++)c.setAlignment(e[f]),i=b("ContextualLayerDimensions").getLayerRect(this._layer,c),n=g(d,i),n>q&&(q=n,p=f);c.setAlignment(e[p])};a.prototype.__setBestPosition=function(a,b,c){"use strict";a>=0?b.setPosition(c[a]):b.setPosition(c.includes("below")?"below":c[0])};a.prototype.getValidPositions=function(a){"use strict";__p&&__p();var c=[a.getPosition(),a.getOppositePosition()],d=this._layer.getContextScrollParent();if(d===window||d===b("getDocumentScrollElement")())return c;var e=this._layer.getContext(),f=b("Vector").getElementPosition(d,"viewport").y,g=b("Vector").getElementPosition(e,"viewport").y;if(a.isVertical())return c.filter(function(a){if(a==="above")return g>=f;else{a=f+d.offsetHeight;var b=g+e.offsetHeight;return b<=a}});else{a=f+d.offsetHeight;if(g>=f&&g+e.offsetHeight<=a)return c;else return[]}};a.prototype._getValidAlignments=function(a){"use strict";var c=b("ContextualLayerAlignmentEnum").values;a=a.getAlignment();var d=c.indexOf(a);d>0&&(c.splice(d,1),c.unshift(a));return c};Object.assign(a.prototype,{_subscription:null});e.exports=a}),null);
__d("ContextualLayerAutoFlipHorizontal",["ContextualLayerAutoFlip"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("ContextualLayerAutoFlip"));g&&g.prototype;a.prototype.getValidPositions=function(a){"use strict";return[a.getPosition()]};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerReactionsContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerHideOnScrollOut","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function(a,b,c,d,e,f,g){"use strict";a=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({addedBehaviors:[b("ContextualLayerAutoFlipHorizontal"),b("ContextualLayerHideOnScrollOut"),b("ContextualLayerUpdateOnScroll"),b("LayerHideOnEscape"),b("AccessibleLayer")],displayName:"MessengerReactionsContextualDialog",shouldSetARIAProperties:!1,theme:{wrapperClassName:"_4owc"}}));e.exports=a}),null);
__d("MessengerReactionsUtil.bs",["EmojiFormat.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=[[128525],[128518],[128558],[128546],[128544],[128077],[128078]];var g={};c.forEach(function(a,c){g[b("EmojiFormat.bs").codeArrayToUnicode(a)]=c+1|0;return 0});function a(a,b){a=g[a];b=g[b];if(a!==undefined)if(b!==undefined)return a-b|0;else return-1;else if(b!==undefined)return 1;else return 0}d=c.map(b("EmojiFormat.bs").codeArrayToUnicode);f.reactionsSortOrder=c;f.orderMap=g;f.sortFunction=a;f.defaultReactions=d}),null);
__d("MessengerReactionsMenu.react",["cx","Promise","Bootloader","CSS","CurrentUser","DOMContainer.react","MercuryIDs","MercuryMessages","MessageReactionMutationWebGraphQLMutation","MessengerMessageActionsTypedLogger","MessengerReactionsContextualDialog.react","MessengerReactionsUtil.bs","MessengerReactionsWebConfig","MessengerState.bs","MessengerSupportedEmojiUtils","MessengerTextWithEmoticons.react","React","XAsyncRequest","createCancelableFunction","getThreadTypeNameFromThreadType","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={animations:{},reactions:b("MessengerReactionsUtil.bs").defaultReactions.slice()},this.$5=function(a){a||this.props.onHide()}.bind(this),c}a.prototype.componentDidMount=function(){b("gkx")("AT7dFvDvstgBLQPTzIVQ-K_BRNJQyn38FQ8LsrhoWHNPhYTHpIiylBssyGU3E_0HnxERJO-whPUbuICbRNRkf3gv")&&(this.$1=b("createCancelableFunction")(function(a){return this.setState({animations:a})}.bind(this)),b("promiseDone")(this.loadAnimations(),this.$1)),this.$2()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.$2()};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.cancel()};a.prototype.$2=function(){if(this.props.useChatEmojiReact){var a=b("MessengerReactionsUtil.bs").defaultReactions.slice(),c=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),this.props.message.thread_id);c=(c=c)!=null?(c=c.custom_like_icon)!=null?c.emoji:c:c;c!=null&&!a.includes(c)&&a.push(c);this.setState({reactions:a})}};a.prototype.$3=function(){return new(b("Promise"))(function(a){return b("Bootloader").loadModules(["Keyframes"],function(b){return a(b)},"MessengerReactionsMenu.react")})};a.prototype.$4=function(){return this.$3().then(function(a){return b("Promise").all(["love","haha","wow","sad","angry","thumbsup","thumbsdown"].map(function(c){return a.requestRenderer(b("MessengerReactionsWebConfig").paths[c],{projectName:"messaging_reactions",assetName:c})}))}).then(function(a){return a.map(function(a){a=a.setWidth(45).setHeight(45).repeatForever().play().redrawIfNeeded().getElement();b("CSS").addClass(a,"_37pj");return a}).reduce(function(a,c,d){a[b("MessengerReactionsUtil.bs").defaultReactions[d]]=c;return a},{})})};a.prototype.loadAnimations=function(){var a=Date.now(),c=this.$4();b("promiseDone")(c,function(c){b("Bootloader").loadModules(["MessengerRestReactionTypedLogger"],function(b){new b().setLoadedTime(Date.now()-a).log()},"MessengerReactionsMenu.react")});return c};a.prototype.render=function(){var a=b("CurrentUser").getID(),c=this.props.message.reactions&&this.props.message.reactions[a];return b("React").createElement(b("MessengerReactionsContextualDialog.react"),{alignment:"center",contextRef:this.props.refProp,shown:!0,onBlur:this.props.onHide,onToggle:this.$5},b("React").createElement("div",{role:"listbox","aria-orientation":"horizontal",className:"_1z8q _fy2"},this.state.reactions.map(function(a){return b("React").createElement("span",{className:"_1z8r"+(a===c?" _5-2b":""),"aria-label":a,id:a,key:a,onClick:function(){return this.$6(a)}.bind(this),role:"option","aria-selected":a===c,tabIndex:"0"},this.state.animations[a]?b("React").createElement(b("DOMContainer.react"),null,this.state.animations[a]):b("React").createElement(b("MessengerTextWithEmoticons.react"),{customSize:!0,forceMessengerEmoji:!0,renderEmoticons:!0,renderEmoji:!0,text:a}))}.bind(this))))};a.prototype.$7=function(a){return!b("MessengerReactionsUtil.bs").defaultReactions.includes(a)?b("MessengerSupportedEmojiUtils").getSupportedEmojiKey(a):a};a.prototype.$6=function(a){__p&&__p();var c=this.props,d=c.message,e=c.entryPoint;c=b("CurrentUser").getID();var f=d.reactions&&d.reactions[c],g=b("MercuryMessages").get().getServerMessageID(d.message_id);c=b("MessageReactionMutationWebGraphQLMutation").getURI({action:a===f?"REMOVE_REACTION":"ADD_REACTION",message_id:g,actor_id:c,reaction:a});var h=function(c){var h=d.other_user_fbid||d.thread_fbid,i=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),d.thread_id),j=i&&i.participants?i.participants.length:0;i=b("getThreadTypeNameFromThreadType")(i&&i.thread_type);var k=d.attachments[0];j=new(b("MessengerMessageActionsTypedLogger"))().setAction("reaction").setOfflineThreadid(d.offline_threading_id).setMid(g).setRecipientID(b("MercuryIDs").getUserIDFromParticipantID(d.author)).setEntryPoint(e).setReaction(this.$7(a)).setPreviousReaction(this.$7(f)).setGroupSize(j).setThreadType(i).setThreadid(h);c.errorSummary&&(j=j.setErrorText(c.errorSummary.toString()));k&&(j=j.setMessageType(k.attach_type));j.log()}.bind(this);new(b("XAsyncRequest"))(c).setMethod("POST").setHandler(h).send();this.props.onHide()};e.exports=a}),null);
__d("MessengerReactionsPrompt.react",["cx","ix","CurrentUser","Image.react","MessengerReactionsMenu.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={open:!1},this.$2=function(a){a.stopPropagation(),this.setState({open:!0},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this)),this.props.setReactionsPromptShown&&this.props.setReactionsPromptShown(!0)}.bind(this),this.$3=function(){this.setState({open:!1},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this)),this.props.setReactionsPromptShown&&this.props.setReactionsPromptShown(!1)}.bind(this),b}a.prototype.render=function(){if(!this.props.messageIsSelected&&!this.state.open)return null;var a=null;this.props.isQuickAdd?a=h("278123"):a=b("CurrentUser").isWorkUser()?this.state.open?h("559649"):h("559648"):this.state.open?h("559646"):h("559647");return b("React").createElement("span",{className:(this.props.isQuickAdd?"":"_5zvq")+(this.props.isQuickAdd?" _yav":""),onClick:this.state.open?this.$1:this.$2,ref:"button"},b("React").createElement(b("Image.react"),{src:a}),this.renderMenu())};a.prototype.renderMenu=function(){return!this.state.open?null:b("React").createElement(b("MessengerReactionsMenu.react"),{entryPoint:"awareness_plus",message:this.props.message,onHide:this.$3,refProp:function(){return this.refs.button}.bind(this),useChatEmojiReact:this.props.useChatEmojiReact})};a.prototype.$1=function(a){a.stopPropagation()};e.exports=a}),null);
__d("MessengerReactions.react",["cx","fbt","Bootloader","CurrentUser","MercuryAttachmentType","MercuryConfig","MercuryIDs","MessengerEnvironment","MessengerParticipants.bs","MessengerReactionsPrompt.react","MessengerReactionsUtil.bs","MessengerTextWithEmoticons.react","MessengerWebViewReactionsTypedLogger","React","ShimButton.react","StoryAttachmentStyle","TooltipData"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j="ALL",k=b("CurrentUser").getID(),l=3,m=9;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={reactionsPromptShown:!1},this.$1=function(a){this.setState({reactionsPromptShown:a})}.bind(this),this.$3=function(){var a=b("MessengerEnvironment").messengerui,c=this.props,d=c.isFromViewer,e=c.message,f=c.participants;c=e.reactions;new(b("MessengerWebViewReactionsTypedLogger"))().setEvent("open_details").setMid(e.message_id).setSenderID(e.author).setEmojiGroup(j).setEmojiGroupCount(Object.values(c).length).log();a?b("Bootloader").loadModules(["MessengerDialogs.bs","MessengerReactionsDialogReact.bs"],function(a,c){var g=c.jsComponent;a.showDialog(function(){return b("React").createElement(g,{isFromViewer:d,participants:f,message:e})})},"MessengerReactions.react"):b("Bootloader").loadModules(["ChatReactionsDialog"],function(a){a.show(e,f,d)},"MessengerReactions.react")}.bind(this),c}a.prototype.render=function(){__p&&__p();var a=this.props,c=a.message,d=a.participants,e=a.renderQuickAdd;a=a.hovered;var f=c.reactions,g=c.attachments,h=g&&g.length===1&&b("MercuryConfig").MNFWD&&f&&Object.keys(f).length===0;if(h&&g[0].attach_type===b("MercuryAttachmentType").STICKER)return null;if(!this.state.reactionsPromptShown&&!a&&h&&g[0].attach_type===b("MercuryAttachmentType").SHARE)return null;if(g[0]&&g[0].attach_type===b("MercuryAttachmentType").SHARE&&!g[0].share)return null;if(((a=g[0])!=null?(a=a.share)!=null?(a=a.style_list)!=null?a[0]:a:a:a)===b("StoryAttachmentStyle").MONTAGE_DIRECT)return null;if((!f||!d)&&!e)return null;var i={},j=0;h=!1;Object.entries(f||{}).forEach(function(a){var b=a[0];a=a[1];typeof a==="string"&&(b===k&&(h=!0),i[a]||(i[a]=0),i[a]++,j++)});g=Object.keys(i).sort(b("MessengerReactionsUtil.bs").sortFunction).slice(0,l).map(function(c,d,a){return b("React").createElement("span",{className:"_4kf5",style:{zIndex:a.length-d,marginLeft:d===0?0:"-4px"},key:c},b("React").createElement(b("MessengerTextWithEmoticons.react"),{customSize:!0,renderEmoticons:!0,renderEmoji:!0,forceMessengerEmoji:!0,text:c}))});a=j>0?b("React").createElement("span",{className:"_4kf5 _4kf6"+(h?" _fy2":"")},j):null;d=e&&!h?b("React").createElement("div",{className:"_aou _aov"},b("React").createElement("span",{className:"_aow"},b("React").createElement(b("MessengerReactionsPrompt.react"),{message:c,messageIsSelected:!0,isQuickAdd:!0,useChatEmojiReact:b("MercuryConfig").MCER,setReactionsPromptShown:this.$1}))):null;f=b("TooltipData").propsFor(this.$2());return b("React").createElement("div",babelHelpers["extends"]({},f,{className:"_4kf7 preview"}),b("React").createElement(b("ShimButton.react"),{className:"_aou",onClick:this.$3},g,a),d)};a.prototype.$2=function(){__p&&__p();var a=this.props.message.reactions,c=this.props.participants;if(!a||!c)return"";a=Object.keys(a);var d=a.reduce(function(a,d){if(a.length>=m+1)return a;d=b("MercuryIDs").getParticipantIDFromUserID(d);d=c.get(d)||b("MessengerParticipants.bs").getNow(d);d=d&&d.name;d&&a.push(d);return a},[]),e=d.length,f=d.join("\n");if(a.length>e){d.pop();e=h._("and {count} others",[h._param("count",a.length-d.length)]);f=d.join("\n")+"\n"+e.toString()}return f};a.propTypes={isFromViewer:c.bool.isRequired,message:c.object.isRequired,participants:c.object,renderQuickAdd:c.bool,hovered:c.bool};e.exports=a}),null);
__d("MessengerDecorator",["cx","invariant","BootloadedComponent.react","CurrentUser","FantaMessageActions","JSResource","MercuryAttachment","MercuryAttachmentType","MercuryConfig","MessageReplyPermissions","MessagingTag","MessengerDecoratorUtil","MessengerEnvironment","MessengerReactions.react","React","StoryAttachmentStyle","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function(a){a=a.attachments&&a.attachments.length===1&&a.attachments[0]&&a.attachments[0].attach_type!==b("MercuryAttachmentType").STICKER&&!b("MessengerDecoratorUtil").isP2PAttachment(a);return!!a},j=function(a){return i(a)&&b("MercuryAttachment").isLightweightActionAttachment(a.attachments[0])},k=function(a){if(m(a))return!1;var c=a.attachments&&a.attachments.length===1&&a.attachments[0];a||h(0);if(!c)return!1;if(b("MercuryAttachment").isPhotoGroupAttachment(c))return!0;return b("MercuryAttachment").isFileAttachment(c)&&c.message_file_fbid?!0:!1},l=function(a){if(b("MessengerEnvironment").messengerui)return!1;a=(a=a.reactions)!=null?a[b("CurrentUser").getID()]:a;return!!a&&typeof a==="string"},m=function(a){return b("gkx")("AT5MAotH6BG7mXo4DyZnW3seA7_jf32c8tGX1llmkbXJ5ui_oKs0jpz-iYum9Gkv1o7pv5ZMvW9WlaNx_vA1ZSmAhi0Rjb62jJA5vu2Oz81AxQ")&&((a=a)!=null?(a=a.attachments)!=null?(a=a[0])!=null?(a=a.share)!=null?(a=a.style_list)!=null?a[0]:a:a:a:a:a)===b("StoryAttachmentStyle").MONTAGE_DIRECT},n=function(a){var c=[],d=[];a.attachments.forEach(function(a){a.metadata&&a.metadata.fbid&&(c.push(a.metadata.fbid.toString()),d.push(a.attach_type.toString())),b("MercuryAttachment").isFileAttachment(a)&&a.message_file_fbid&&(c.push(a.message_file_fbid),d.push(a.attach_type))});return{ids:c,types:d}},o=[{name:"Reactions",check:function(a,c){if(m(a))return!1;var d=!!(a.reactions&&Object.keys(a.reactions).length>0);c=!!(!c&&(k(a)||i(a)&&b("MercuryConfig").MNFWD));return(d||c)&&!j(a)},render:function(a,c,d,e){var f=k(a)||i(a)&&b("MercuryConfig").MNFWD;return b("React").createElement(b("MessengerReactions.react"),{isFromViewer:c,key:a.message_id+"-reactions",message:a,renderQuickAdd:f&&!c,hovered:e,participants:d&&d.participants})},getAdditionalClassNames:function(){return"_5z-5"}}],p=[],q=[],r=[{name:"MontageReply",check:function(a){if(!b("MercuryConfig").MontageThreadViewer)return!1;a=a.montage_reply_data&&a.montage_reply_data.message_id;return!!a},render:function(a,c,d){d=a.montage_reply_data&&a.montage_reply_data.message_id;var e=a.montage_reply_data&&a.montage_reply_data.reply_action;return b("React").createElement(b("BootloadedComponent.react"),{key:"montagereply:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MontageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:c,messageID:d,replyAction:e,replyAuthorID:a.author,threadID:a.thread_id})},getAdditionalClassNames:function(){return null}},{name:"MessageReply",check:function(a){return!a.replied_to_message?!1:b("gkx")("AT4CzFQpJfvFelj2165PMRpSmjl0KkqVpD7kcMn3m4229dpMBBNhzyATOEkUEFXxBLU6M-O8cZ7ZedDaOvs3WNr-i5u563hgB6TbE_VE4wwFnQ")||b("MercuryConfig").M3CRE},render:function(a,c,d){return b("React").createElement(b("BootloadedComponent.react"),{key:"messagereply:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:c,authorID:a.author,repliedToMessage:a.replied_to_message,threadID:a.thread_id,scrollToRepliedMessage:d&&d.scrollToRepliedMessage,customColor:d&&d.customColor,messageBody:a.body})},getAdditionalClassNames:function(){return null}}],s=[{name:"ForwardImages",check:function(a){return k(a)},render:function(a,c){var d=n(a),e=d.ids;d=d.types;return b("React").createElement(b("BootloadedComponent.react"),{key:"forwardimages:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("MessengerEnvironment").messengerui?b("JSResource")("MessengerPhotoForwardButton.react").__setRef("MessengerDecorator"):b("JSResource")("ChatPhotoForwardButton.react").__setRef("MessengerDecorator"),attachmentIDs:e,attachmentTypes:d,isFromViewer:c})},getAdditionalClassNames:function(){return"_ylc"}},{name:"MontageDirectKeep",check:function(a){return m(a)},render:function(a,c,d){return b("React").createElement(b("BootloadedComponent.react"),{key:"montagedirectkeep:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MontageDirectKeep.react").__setRef("MessengerDecorator"),message:a})},getAdditionalClassNames:function(){return null}},{name:"ReactionPrompt",check:function(a){return m(a)?!1:l(a)||!k(a)&&!j(a)},render:function(a,c,d){c=b("MercuryConfig").MNFWD&&i(a);return b("React").createElement(b("BootloadedComponent.react"),{key:"reactionprompt:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerReactionsPrompt.react").__setRef("MessengerDecorator"),message:a,messageIsSelected:d&&d.messageIsSelected&&!c&&(!a.folder||a.folder===b("MessagingTag").INBOX),useChatEmojiReact:b("MercuryConfig").MCER,onShowMenu:d&&d.onShowMenu})},getAdditionalClassNames:function(){return null}},{name:"MessengerUIReplyAction",check:function(a){return b("MessageReplyPermissions").canReplyToMessage(a)?b("MessengerEnvironment").messengerui:!1},render:function(a,c,d){return b("React").createElement(b("BootloadedComponent.react"),{key:"messagereplyaction:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerMessageReplyAction.react").__setRef("MessengerDecorator"),message:a,isActive:d&&d.messageIsSelected,onReplyToMessage:d&&d.onReplyToMessage})},getAdditionalClassNames:function(){return null}},{name:"MessageActions",check:function(a){return m(a)?!1:b("MessengerEnvironment").messengerui||b("gkx")("AT7HdSIkhS9TSQx6PWXopj-NxmSus9nuXkEu6XM1WdZJElXpLdnQNN92q5iZdzYJyRUbbjoWOgsBC8RH9ivzcfSt")||b("MercuryConfig").M3CRE},render:function(a,c,d){c=m(a)?!1:(k(a)||i(a)&&b("MercuryConfig").MNFWD)&&!j(a);var e=null,f=d;b("MessengerEnvironment").messengerui||!!(f&&f.onReplyToMessage)?e=f&&f.onReplyToMessage:e=function(){return b("FantaMessageActions").replyToMessage(a,a.thread_id)};return b("React").createElement(b("BootloadedComponent.react"),{key:"messageactions:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerMessageActions.react").__setRef("MessengerDecorator"),message:a,isActive:d&&d.messageIsSelected,onShowMenu:d&&d.onShowMenu,includeReactions:c,isShowingOriginal:d&&d.isShowingOriginal,hasFormatting:d&&d.hasFormatting,onToggleOriginal:d&&d.handleToggleOriginal,onReplyToMessage:e,isSavedView:d&&d.isSavedView})},getAdditionalClassNames:function(){return null}}];a={getBeforeDecorators:function(){return r},getAfterDecorators:function(){return o},getInnerDecorators:function(){return s},getAfterExternalDecorators:function(){return p},getInsideDecorators:function(){return q}};e.exports=a}),null);
__d("MessengerInnerDecorators.react",["cx","Locale","MessengerDecorator","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={shown:!1},this.$1=function(a){this.setState({shown:a})}.bind(this),b}a.prototype.render=function(){var a=b("MessengerDecorator").getInnerDecorators().map(function(a){return a.check(this.props.message)?a.render(this.props.message,this.props.isFromViewer,babelHelpers["extends"]({},this.props.messageProps,{messageIsSelected:this.props.hovered||this.state.shown,onShowMenu:this.$1,isSavedView:this.props.isSavedView})):null}.bind(this)).filter(Boolean);return b("React").createElement("span",{className:"_40fu"+(b("Locale").isRTL()||this.props.forGameChat?" _64wc":"")},b("React").createElement("span",{className:b("joinClasses")(this.props.className,"_2u_d")},a))};e.exports=a}),null);
__d("MessengerVideoAutoplayActions",["MessengerFluxReduceDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g="messenger_video",h=b("keyMirror")({DESTROY:null,DSTROY_ALL:null,SCROLL:null,UPDATE:null});a={Types:h,Namespace:g,onScroll:function(a,c,d,e){b("MessengerFluxReduceDispatcher").dispatch({type:h.SCROLL,namespace:g,threadID:a,messageIDs:c,messageRectMap:d,viewportRect:e})},updateStore:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:h.UPDATE,namespace:g,threadID:a,messageIDs:c})},deleteThread:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:h.DESTROY,namespace:g,threadID:a})},deleteAllThreads:function(){b("MessengerFluxReduceDispatcher").dispatch({type:h.DESTROY_ALL,namespace:g})}};e.exports=a}),null);
__d("MessengerVideoAutoplayStore",["FluxReduceStore","MessengerVideoAutoplayActions","immutable","MessengerFluxReduceDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("MessengerVideoAutoplayActions").Types;g=babelHelpers.inherits(j,b("immutable").Record({currentVideoMessageID:null,lastVideoMessageID:null,messageIDs:null,videoVisibilityMap:null}));g&&g.prototype;function j(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return b("immutable").Map()};a.prototype.reduce=function(a,c){if(c.namespace!==b("MessengerVideoAutoplayActions").Namespace)return a;switch(c.type){case i.SCROLL:c.messageIDs&&(a=this.$MessengerVideoAutoplayStore1(a,c.threadID,c.messageIDs));return this.$MessengerVideoAutoplayStore2(a,c.threadID,c.messageRectMap,c.viewportRect);case i.UPDATE:return this.$MessengerVideoAutoplayStore1(a,c.threadID,c.messageIDs);case i.DESTROY:return this.$MessengerVideoAutoplayStore3(a,c.threadID);case i.DESTROY_ALL:return a.clear()}return a};a.prototype.$MessengerVideoAutoplayStore1=function(a,b,c){return!c?a["delete"](b):a.set(b,new j({currentVideoMessageID:null,lastVideoMessageID:c.first(),messageIDs:c,videoVisibilityMap:null}))};a.prototype.$MessengerVideoAutoplayStore3=function(a,b){return a["delete"](b)};a.prototype.$MessengerVideoAutoplayStore4=function(a,b,c,d,e){var f=null;c=c.map(function(a){if(f)return[a,!1];else{var b=this.$MessengerVideoAutoplayStore5(a,d,e);b&&(f=a);return[a,b]}}.bind(this)).fromEntrySeq().toOrderedMap();return a.mergeIn([b],{currentVideoMessageID:f,videoVisibilityMap:c})};a.prototype.$MessengerVideoAutoplayStore2=function(a,b,c,d){__p&&__p();var e=a.getIn([b,"messageIDs"]);if(!e||!c||!d)return a;if(!a.getIn([b,"currentVideoMessageID"]))return this.$MessengerVideoAutoplayStore4(a,b,e,c,d);else{var f=a.getIn([b,"videoVisibilityMap"]),g=a.getIn([b,"lastVideoMessageID"]),h=a.getIn([b,"currentVideoMessageID"]);if(this.$MessengerVideoAutoplayStore5(g,c,d)){if(f&&f.first())return a}else if(this.$MessengerVideoAutoplayStore5(h,c,d))return a;a=a.setIn([b,"currentVideoMessageID"],null);return this.$MessengerVideoAutoplayStore4(a,b,e,c,d)}};a.prototype.$MessengerVideoAutoplayStore6=function(a,b){return!a?!1:a.top>b.top&&a.bottom<b.bottom};a.prototype.$MessengerVideoAutoplayStore5=function(a,b,c){b=b.get(a);return this.$MessengerVideoAutoplayStore6(b,c)};a.prototype.getVideoVisibilityMap=function(a){return this.getState().getIn([a,"videoVisibilityMap"])};a.prototype.getMessageIDs=function(a){return this.getState().getIn([a,"messageIDs"])};a.prototype.isVisible=function(a,b){return!!this.getState().getIn([a,"videoVisibilityMap",b])};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MessengerFluxReduceDispatcher"))}),null);
__d("ChatMessage.react",["csx","cx","fbt","BootloadedComponent.react","ChatAnimatedGifs","ChatBubble.react","ChatCodePasteUtils","CSS","EmojiLikeUtils","FluxContainer","ImmutableObject","JSResource","Locale","MercuryAttachment","MercuryDisplayTimeFilterMessageRenderer","MercuryErrorInfo","MercuryIDs","MercuryMessageError.react","MercuryTimestamp","MessengerDecorator","MessengerInnerDecorators.react","MessengerMessage.bs","MessengerVideoAutoplayStore","MNCommerceMessageType","React","ReactDOM","TooltipData","XUISpinner.react","convertMIGColorToFIGColor","immutable","isRTL","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.state={isVisible:!1,isHighlighted:!1},this.$2=function(){return this.setState({hovered:!0})}.bind(this),this.$3=function(){return this.setState({hovered:!1})}.bind(this),b}a.getStores=function(){return[b("MessengerVideoAutoplayStore")]};a.calculateState=function(a,c){return{isVisible:b("MessengerVideoAutoplayStore").isVisible(c.message.thread_id,c.message.message_id)}};a.prototype.componentDidMount=function(){b("CSS").conditionClass(b("ReactDOM").findDOMNode(this),"_2cnu",this.isOneLine())};a.prototype.isOneLine=function(){var a=this.props.message;return b("MessengerMessage.bs").isInbound(a)&&!this.refs.attachmentsInside&&this.refs.bubble&&!this.refs.bubble.contentWraps()};a.prototype.shouldComponentUpdate=function(a,b){var c=a.message!==this.props.message,d=!1,e=!1,f=this.props.thread;if(f)d=f.custom_like_icon!==a.thread.custom_like_icon,e=f.solid_color!==a.thread.solid_color;else if(a.thread)return!0;return c||d||e||b.isVisible!==this.state.isVisible||b.isHighlighted!==this.state.isHighlighted};a.prototype.render=function(){__p&&__p();var a=this.props.message,c=b("MercuryAttachment").get(a).length>0,d=b("MessengerMessage.bs").isInbound(a),e=b("MercuryIDs").isGroupChat(a.thread_id),f=b("MercuryErrorInfo").hasErrorStatus(a);c="_5wd4"+(d?" _1nc7":"")+(d?"":" _1nc6")+(c?" _2_-t":"")+(d&&e?" _5ysy":"")+(f?" _1zcs":"")+(this.state.isHighlighted?" _6iuj":"");var g=this.props.isFromViewer,h=[],i=a,j=this.props.thread?b("convertMIGColorToFIGColor")(this.props.thread.solid_color):"";i&&b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(i)&&h.push(a.render(i,g,{customColor:j}))});d=b("MercuryAttachment").get(a).filter(function(a){return!b("MercuryAttachment").isBubblePreferred(a)});e=this.$1("outside",d);return b("React").createElement("div",{className:b("joinClasses")(this.props.className,c),onMouseEnter:this.$2,onMouseLeave:this.$3},b("React").createElement("div",{className:b("joinClasses")("._1dlq","_h8t")},h,this.$4(e)),d.some(function(a){return b("MercuryAttachment").isShareAttachment(a)})?b("React").createElement(b("MessengerInnerDecorators.react"),{message:a,isFromViewer:g||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat}):b("React").createElement("div",{className:"_40qi"}),this.$5(i,g),this.$6())};a.prototype.$4=function(a){var c=this.props.message,d={},e=b("MessengerMessage.bs").isOutbound(c);if(e||this.props.needsTimestampTooltip){var f=i._("{time}",[i._param("time",b("MercuryTimestamp").getPreciseTimestamp(c.timestamp))]);Object.assign(d,b("TooltipData").propsFor(f,e?"right":"left"))}if(c.is_filtered_content)return b("React").createElement("div",babelHelpers["extends"]({className:"_5wd9 _5wdc uiBoxYellow clearfix",ref:"inner"},d),b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(c));f=c.body&&c.body!==""?b("isRTL")(c.body):b("Locale").isRTL();return b("React").createElement("div",babelHelpers["extends"]({className:"_5wd9"+(f?" direction_rtl":"")+(f?"":" direction_ltr")+" clearfix",ref:"inner"},d),this.$7(!a),a)};a.prototype.$5=function(a,c){__p&&__p();if(a){var d=[],e=[];b("MessengerDecorator").getAfterExternalDecorators().forEach(function(b){a&&b.check(a)&&(d.push(b.render(a,c,this.props)),e.push(b.getAdditionalClassNames()))}.bind(this));if(e.length===0&&d.length===0)return null;var f=e.join(" ");return b("React").createElement("div",{className:b("joinClasses")(f,"_5ijz"+(c?"":" isFromOther"))},d)}return null};a.prototype.$6=function(){var a=this.props.message;return a.is_filtered_content||!b("MessengerMessage.bs").hasError(a)?null:b("React").createElement("div",{className:"_3ry4",ref:"undertext"},b("React").createElement(b("MercuryMessageError.react"),{className:"_5wda clearfix",message:a,ref:"status"}),this.$8())};a.prototype.$8=function(){return this.props.message.is_spoof_warning?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("MercurySpoofWarning.react").__setRef("ChatMessage.react"),authorID:this.props.message.author,className:"_5wdb"}):null};a.prototype.$9=function(){return b("React").createElement("div",{style:{padding:"20px",text_align:"center",background:"white"}},b("React").createElement(b("XUISpinner.react"),null))};a.prototype.$1=function(a,c){__p&&__p();if(this.props.message.commerce_message_type===b("MNCommerceMessageType").RIDE_INTENT)return null;var d=this.props.message,e=this.props.thread?this.props.thread.custom_like_icon:null,f=a=="inside"?"attachmentsInside":"attachmentsOutside",g=this.props.thread?b("convertMIGColorToFIGColor")(this.props.thread.solid_color):"",h=[],i=[];a==="outside"&&d&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(d,this.props.isFromViewer)&&(h.push(a.render(d,this.props.isFromViewer,this.props,this.state.hovered)),i.push(a.getAdditionalClassNames()))}.bind(this));if(c.length>0){var j=b("React").createElement(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:d,isFromViewer:this.props.isFromViewer||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat});return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:this.$9(),bootloadLoader:b("JSResource")("MercuryAttachments.react").__setRef("ChatMessage.react"),className:b("joinClasses")((a==="outside"?"_3e7u":"")+(d.body?" _16ys":"")+(g?" _3al":"")+" _n4o"+(h?" _1a6y":""),i),attachments:c,customLike:e,customColor:g,forGameChat:this.props.forGameChat,isChat:!0,afterDecorators:h,innerDecorators:j,isVisible:this.state.isVisible,maxWidth:this.props.maxBubbleWidth,message:d,onUnwrap:this.$10,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,ref:f})}return null};a.prototype.$7=function(a){__p&&__p();var c=this.props,d=c.isFromViewer,e=c.message;c=c.thread;var f=e.body,g=b("MercuryAttachment").get(e).filter(function(a){return b("MercuryAttachment").isBubblePreferred(a)});g=this.$1("inside",g);var h=[],i=[],j=e;j&&(a&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(j,d)&&(h.push(a.render(j,d,this.props)),i.push(a.getAdditionalClassNames()))}.bind(this)),b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(j,d)&&i.push(a.getAdditionalClassNames())}));var k=i.join(" ");b("ChatAnimatedGifs").shouldHideBody(e)&&(f="");var l=e.ranges;e.profile_ranges&&e.profile_ranges.length&&(l=(l||[]).concat(e.profile_ranges.map(function(a){return babelHelpers["extends"]({},a,{url:"/"+a.id})})));var m=b("ChatCodePasteUtils").containsCodeBlock(f);return(f||g)&&!b("EmojiLikeUtils").isEmojiLike(e)?b("React").createElement("div",{className:b("joinClasses")(k,"_1e-x _n4o")},m?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{style:{height:22}}),bootloadLoader:b("JSResource")("ChatCodeBubble.react").__setRef("ChatMessage.react"),body:f,className:"_5wdf",maxWidth:this.props.maxBubbleWidth,ranges:l,threadID:e.thread_id,customColor:c&&d?b("convertMIGColorToFIGColor")(c.solid_color):""}):b("React").createElement("div",{className:"_3_bl"},b("React").createElement("div",{className:"_3_bp"}),b("React").createElement(b("ChatBubble.react"),{attachments:g,body:f,className:"_5wdf",isEmojiLike:!1,isFromViewer:this.props.isFromViewer,onReplyToMessage:this.props.onReplyToMessage,metaRanges:e.meta_ranges,message:e,maxWidth:this.props.maxBubbleWidth,ranges:l,ref:"bubble",threadID:e.thread_id,customLike:e.customLike,customColor:c&&d?b("convertMIGColorToFIGColor")(c.solid_color):"",threadCustomColor:c&&b("convertMIGColorToFIGColor")(c.solid_color)})),a?b("React").createElement(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:e,isFromViewer:this.props.isFromViewer||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat}):null,h):null};a.prototype.highlightMessage=function(){this.setState({isHighlighted:!1}),b("setImmediate")(function(){return this.setState({isHighlighted:!0})}.bind(this))};a.propTypes={forGameChat:c.bool.isRequired,message:c.object.isRequired,maxBubbleWidth:c.number.isRequired,onAttachmentLoad:c.func,onStickerClick:c.func,participants:c.instanceOf(b("immutable").Map).isRequired,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,thread:c.instanceOf(b("ImmutableObject")),needsTimestampTooltip:c.bool};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("ChatMessageGroup.react",["cx","fbt","ChatDateBreak.react","ChatMessage.react","CurrentUser","Image.react","ImmutableObject","MercuryConfig","MercuryIDs","MercuryTimestamp","MessengerParticipants.bs","MessengerTextWithEmoticons.react","QE2Logger","React","ReactDOM","WorkForeignEntityType","gkx","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("immutable").OrderedMap;c=b("React").PropTypes;var i=new(b("ImmutableObject"))({name:"",href:"#",image_src:""});d=b("React").createClass({displayName:"ChatMessageGroup",propTypes:{activeMessageID:c.string,author:c.string,forGameChat:c.bool,hasDateBreak:c.bool,isCanonical:c.bool,isFromViewer:c.bool,isPageMessage:c.bool,isOnline:c.bool,maxBubbleWidth:c.number,messages:c.instanceOf(b("immutable").List).isRequired,readReceipts:c.instanceOf(a).isRequired,onAttachmentLoad:c.func,onStickerClick:c.func,persona:c.object,thread:c.instanceOf(b("ImmutableObject")),threadID:c.string},getInitialState:function(){return{participants:{}}},componentDidMount:function(){b("QE2Logger").logExposureForUser("messenger_growth_tombstone"),this._subscription=this._computeParticipants()},shouldComponentUpdate:function(a,c){return this.props.isOnline!==a.isOnline||this.props.activeMessageID!==a.activeMessageID||this.props.isFromViewer!==a.isFromViewer||!b("immutable").is(this.props.messages,a.messages)||this.state.participants!==c.participants||!b("immutable").is(this.props.thread,a.thread)},componentDidUpdate:function(a){a=j(this.props);!this._subscription&&!a.every(function(a){return this.state.participants[a]}.bind(this))&&(this._subscription=this._computeParticipants())},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},render:function(){return b("React").createElement("div",{className:"_4tdt"+(this.props.isFromViewer?" _ua0":"")+(this.props.isFromViewer?"":" _ua1")+(this._hasSeenHeadsAtBottom()?" _3lil":"")},this._renderProfileColumn(),b("React").createElement("div",{className:"_ua2"},this._renderName(),b("React").createElement("div",{className:"_4tdv"},this._renderMessages())))},_needsProfileColumn:function(){if(!b("gkx")("AT4vZBWyiZL1KZrir2lJt4vVNMIYu8sDbA3PtNwJWZh5seJSYZeYdmCgqH3wgiUS4PfslnEPm3wz9jSsjDINBCSy"))return!0;if(!this.props.isCanonical)return!0;if(this.props.persona)return!0;var a=this.state.participants[this.props.author];return a&&a.is_messenger_platform_bot?!0:!1},_renderProfileColumn:function(){__p&&__p();var a;if(this.props.isFromViewer||!this._needsProfileColumn())return null;var c=this.state.participants[this.props.author]||i,d=c.name,e=c.image_src;this.props.persona&&(d=this.props.persona.name,e=this.props.persona.profile_picture_url);d=h._("{name} {time}",[h._param("name",d),h._param("time",b("MercuryTimestamp").getPreciseTimestamp(this.props.messages.last().timestamp))]);e=e?b("React").createElement(b("Image.react"),{src:e}):null;var f=b("MercuryConfig").GDWC&&this.props.isOnline;a=b("CurrentUser").isWorkUser()&&((a=c)!=null?(a=a.work_foreign_entity_info)!=null?a.type:a:a)===b("WorkForeignEntityType").FOREIGN;return b("React").createElement("div",{className:"_31o4 _3njy"},b("React").createElement("a",{"aria-label":d,className:"_4tdw","data-hover":"tooltip","data-tooltip-content":d,"data-tooltip-position":"left",href:this.props.persona?null:c.href,ref:"link"},e),a?b("React").createElement("div",{className:"_4rwx _4rwy"}):f?b("React").createElement("div",{className:"_sce"}):null)},_renderName:function(){__p&&__p();if(this.props.isCanonical&&!this.props.persona||this.props.isFromViewer)return null;var a=this.state.participants[this.props.messages.first().author];if(!a)return null;if(this.props.messages.first().replied_to_message)return null;var c=a.short_name;if(this.props.thread&&this.props.thread.custom_nickname){a=b("MercuryIDs").getUserIDFromParticipantID(a.id);this.props.thread.custom_nickname[a]&&(c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:this.props.thread.custom_nickname[a]}))}if(this.props.persona){a=this.state.participants[this.props.messages.first().author];c=a?h._("{persona name} from {page name}",[h._param("persona name",this.props.persona.name),h._param("page name",a.short_name)]):this.props.persona.name}return b("React").createElement("div",{className:"_4tdx"},c)},_renderMessages:function(){var a=this.props.messages.size,c=[];this.props.messages.forEach(function(d,e,f){var g=d.message_id===this.props.activeMessageID;g&&!(e===0&&this.props.hasDateBreak)&&c.push(b("React").createElement(b("ChatDateBreak.react"),{date:new Date(d.timestamp),key:"db:"+d.message_id}));c.push(b("React").createElement(b("ChatMessage.react"),{forGameChat:!!this.props.forGameChat,isFromViewer:this.props.isFromViewer,key:d.message_id,maxBubbleWidth:this.props.maxBubbleWidth,message:d,participants:b("immutable").Map(this.state.participants),readReceipts:this.props.readReceipts,ref:d.message_id,nextTimestamp:this._getNextTimestamp(f,a,e),onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,thread:this.props.thread,needsTimestampTooltip:!this._needsProfileColumn()}))}.bind(this));return c},_hasSeenHeadsAtBottom:function(){var a=this.props,b=a.messages,c=a.nextTimestamp;a=a.readReceipts;var d=b.last().timestamp,e=0;a.forEach(function(a){return a>=d&&a<c&&++e===2?!1:null});return e===2},_getNextTimestamp:function(a,b,c){return c<b-1?a.get(c+1).timestamp:this.props.nextTimestamp},getMessageElement:function(a){return b("ReactDOM").findDOMNode(this.refs[a])},getMessage:function(a){return this.refs[a]},_computeParticipants:function(){__p&&__p();var a=j(this.props),c={},d=[];a.forEach(function(a){var e=b("MessengerParticipants.bs").getNow(a);c[a]=e;e||d.push(a)});this.setState({participants:c});return d.length>0?b("MessengerParticipants.bs").getMulti(d,function(b){var a=this.state.participants;d.forEach(function(c){a[c]=b[c]});this._subscription=null;this.setState({participants:a})}.bind(this)):null}});function j(a){var b=[a.author];a.readReceipts.forEach(function(a,c){b.push(c)});return b}e.exports=d}),null);
__d("MercuryMessageRendererUtils",["cx","invariant","HovercardLink","MercuryViewer","MessengerTextWithEmoticons.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={getLinkToParticipant:function(a,c){var d=a.fbid,e=b("HovercardLink").constructEndpoint({id:d});c=c&&c.custom_nickname&&c.custom_nickname[d];c&&(c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c}));d=c?c:a.name;return a.href?b("React").createElement("a",{className:"_5wzt",href:a.href,"data-hovercard":e},d):d},moveCurrentUserToFront:function(a){a===void 0&&(a=[]);a||h(0);var c=a.indexOf(b("MercuryViewer").getID());if(c>0){c=a.filter(function(a){return a!==b("MercuryViewer").getID()});return[b("MercuryViewer").getID()].concat(c)}return a}};e.exports=a}),null);
__d("MessageRequestUtils",["MessagingTag"],(function(a,b,c,d,e,f){"use strict";a={isMessageRequest:function(a){return(a.folder===b("MessagingTag").PENDING||a.folder===b("MessagingTag").OTHER)&&a.can_reply},isFiltered:function(a){return a.folder===b("MessagingTag").OTHER}};e.exports=a}),null);
__d("TimeSpentRoomTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT"})}),null);
__d("MessageThreadAssociatedObjectUtils",["TimeSpentRoomTypeEnum"],(function(a,b,c,d,e,f){"use strict";a={shouldRender:function(a){return a&&a.room_type===b("TimeSpentRoomTypeEnum").GROUP&&!a.is_workplace_community},isLinkedToGroupChat:function(a){return a&&a.room_type===b("TimeSpentRoomTypeEnum").GROUP&&!a.is_workplace_community}};e.exports=a}),null);
__d("MessengerGroupAdminModelStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUIRED:"required",OPTIONAL:"optional",NOT_SUPPORTED:"not_supported"})}),null);
__d("MessengerParticipantAddModeTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD:"ADD",INVITE:"INVITE",ADD_INVITE:"ADD_INVITE"})}),null);
__d("MessengerAdminGroupUtils",["fbt","CurrentUser","MercuryConfig","MercuryIDs","MessageRequestUtils","MessageThreadAssociatedObjectUtils","MessagingSourceEnum","MessengerApprovalModeTypes","MessengerGroupAdminModelStatus","MessengerJoinableModeType","MessengerParticipantAddModeTypes","QE2Logger","WorkModeConfig","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="messenger_use_new_group_participant_suggestion_ranking",i="show_nullstate_chat_tab_group_chat",j={isJoinableAndOpenThread:function(a){return this.isJoinableThread(a)&&this.isApprovalOpenThread(a)},isJoinableAndApprovalRequiredThread:function(a){return!!(this.isJoinableThread(a)&&a&&a.approval_mode===b("MessengerApprovalModeTypes").APPROVALS)},isWorkGroupSyncedChat:function(a){return!!(b("gkx")("AT7fEWlWLwzcomQ12uRE_cG5HZJE7FbXXRCfPurxhw8vIpN6D0E7mGAi-hDkDV8fg1mjxj-jQMaCESDTVOkEzzqV")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},isWorkSyncedChatThreadCreationMessage:function(a){return!!(a.log_message_data&&a.log_message_data.name&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_CREATION)!==-1)},isWorkSyncedChatThreadMemberSyncMessage:function(a){return!!(a.tags&&a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC)!==-1)},shouldAddToApprovalQueue:function(a,b){return!!(this.isJoinableAndApprovalRequiredThread(a)&&a&&!j.isAdmin(a.admin_ids,b))},isJoinableThread:function(a){return!!(b("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE)},isGroupChat:function(a){return!!(a&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},shouldInvite:function(a){return!!(b("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&a&&a.participant_add_mode===b("MessengerParticipantAddModeTypes").INVITE)},isApprovalOpenThread:function(a){return!!(b("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&a&&a.approval_mode===b("MessengerApprovalModeTypes").OPEN)},isAdminRequired:function(a){return!!(a&&a.admin_model_status===b("MessengerGroupAdminModelStatus").REQUIRED)},isOwner:function(a,b){return a&&(this.isJoinableThread(b)||this.isAdminRequired(b))},canSeeJoinableGroupOptions:function(a){var c=b("WorkModeConfig").is_work_user;return!c&&this.isJoinableThread(a)},canSeeGroupOptionsSection:function(a,c){var d=b("WorkModeConfig").is_work_user;c=this.isAdmin(a.admin_ids,c);return!d&&(this.isJoinableThread(a)||c&&this.isAdminRequired(a))},canSeeBotsInGroupTypeahead:function(){var a=b("CurrentUser").isWorkUser();return a&&b("gkx")("AT5GhC4rylRpYKpnZf2oEtsedOSc0WCJLB5V8z6-mqCNieSKORSJnqenUlgYVRpQaRNASrJq2SeIYY3m4QNhPBlK")},canMakeOthersAdmins:function(a,b,c){return this.isOwner(a,c)&&!b},canMakeSelfAdmin:function(a,b){return(this.isJoinableThread(b)||this.isAdminRequired(b))&&b.admin_ids.length===0&&a},canRemoveAdmin:function(a,b,c){return this.isAdminRequired(c)&&c.admin_ids.length===1?!1:this.isOwner(a,c)&&b},canRemoveFromGroup:function(a,b){return this.isAdminRequired(b)||this.isWorkGroupSyncedChat(b)?a:this.isOwner(a,b)||!this.isJoinableThread(b)},showJoinableLink:function(a){var b=!!(a&&a.joinable_mode&&a.joinable_mode.link);a=j.isJoinableThread(a);return a&&b},showJoinableApprovalToggle:function(a,b){if(a.associated_object&&!a.associated_object.approval_mode_toggleable)return!1;b=j.isAdmin(a.admin_ids,b);return j.isOwner(b,a)},showApprovalQueue:function(a,b){b=j.isAdmin(a.admin_ids,b);b=j.isOwner(b,a);var c=this.getPendingRequestNumber(a);if(a&&this.isAdminRequired(a))return this.isAdminRequired(a)&&b&&c>0;else{a=j.isJoinableAndApprovalRequiredThread(a);return a&&b&&c>0}},showParticipantsModal:function(a,b,c){return this.isJoinableThread(c)&&!a&&!b},useNewGroupMemberSuggestionRanking:function(){b("QE2Logger").logExposureForUser(h);return b("MercuryConfig").MNGPS},showDefaultListForNewPersonAddChatTab:function(){b("QE2Logger").logExposureForUser(i);return b("MercuryConfig").ChatGroupChat},showDefaultListForNewChatTab:function(){return b("MercuryConfig").ChatComposer},canUpdateThreadCustomization:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admin_ids,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},canUpdateThreadDescription:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admin_ids,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},isAdmin:function(a,c){if(!a)return!1;return b("MercuryIDs").isValid(c)?a.indexOf(b("MercuryIDs").getUserIDFromParticipantID(c))!==-1:a.indexOf(c)!==-1},getLeaveGroupBodyText:function(a,b){return this.isOwner(a,b)?g._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."):g._("You will stop receiving messages from this conversation and people will see that you left.")},getLeaveGroupTitleText:function(a,b){return this.isOwner(a,b)?g._("Leave this conversation?"):g._("Leave Conversation?")},getLeaveGroupButtonText:function(a,b){return this.isOwner(a,b)?g._("Leave conversation"):g._("Leave")},getMakeOwnerBodyText:function(a,b,c){if(a)return b?g._("As a group admin, you will be able to manage who can join and customize this conversation."):g._("As a group admin, \"{owner's name}\" will be able to manage who can join and customize this conversation.",[g._param("owner's name",c)]);else return b?g._("As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."):g._("As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners.",[g._param("owner's name",c)])},getMakeOwnerTitleText:function(a,b){if(a)return b?g._("Become group admin?"):g._("Add group admin?");else return b?g._("Become group owner?"):g._("Add group owner?")},getMakeOwnerButtonText:function(a,b){if(a)return b?g._("Become admin"):g._("Make admin");else return b?g._("Become owner"):g._("Make owner")},getRemoveOwnerBodyText:function(a,b,c,d){if(b&&c)return a?null:g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group.");else if(b&&!c)return a?g._("You will no longer be able to manage who can join and customize this conversation."):g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group.");else return a?g._("\"{owner's name}\" will no longer be able to manage who can join and customize this conversation.",[g._param("owner's name",d)]):g._("\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group.",[g._param("owner's name",d)])},getRemoveOwnerTitleText:function(a){return a?g._("Remove as group admin?"):g._("Remove as group owner?")},getRemoveOwnerButtonText:function(a){return a?g._("Remove"):g._("Remove owner")},getPendingRequestNumber:function(a){if(a&&a.approval_queue_ids&&a.approval_queue_ids.length)return a.approval_queue_ids.length;else if(a&&this.isAdminRequired(a)&&a.group_approval_queue&&a.group_approval_queue.length)return a.group_approval_queue.length;return 0}};e.exports=j}),null);
__d("MessengerLightweightActionUtils",["MercuryAttachmentType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return!!(a&&a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.target&&a.share.target.lwa_type)}function a(a){a=a.attachments;return!!(a&&a.length===1&&g(a[0]))}function c(a){return a.attachments[0].share.title}function d(a){return a[0].share.title}e.exports={isLWAMessage:a,isLWAAttachment:g,getCollapsedLWAText:c,getLWASnippetText:d}}),null);
__d("MercuryLogMessageRenderer",["cx","fbt","invariant","ix","Bootloader","CSS","CurrentUser","Image.react","MercuryAttachmentViewer","MercuryLogMessageType","MercuryMessageRendererUtils","MercuryViewer","MessagingSourceEnum","MessengerAdminGroupUtils","MessengerLightweightActionUtils","MessengerParticipants.bs","MessengerState.bs","MessengerTextWithEmoticons.react","React","ReactDOM","TooltipLink.react","UserAgent","convertMIGColorToFIGColor"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a={renderText:function(a,c,d,e){__p&&__p();c=c||b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),a.thread_id);if(b("MessengerLightweightActionUtils").isLWAMessage(a)){e(b("MessengerLightweightActionUtils").getCollapsedLWAText(a));return}switch(a.log_message_type){case b("MercuryLogMessageType").SUBSCRIBE:var f=a.author;a.log_message_data||i(0);var g=a.log_message_data.added_participants;g||i(0);f=g.length===1&&f===g[0];g=c&&b("MessengerAdminGroupUtils").isWorkGroupSyncedChat(c)&&b("MessengerAdminGroupUtils").isWorkSyncedChatThreadMemberSyncMessage(a);f||g?b("Bootloader").loadModules(["MercuryJoinableMessageRenderer"],function(b){b.renderText(a,c,e)},"MercuryLogMessageRenderer"):m(a,e);break;case b("MercuryLogMessageType").UNSUBSCRIBE:b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?A(a,e):s(a,e):r(a,e);break;case b("MercuryLogMessageType").THREAD_NAME:c&&b("MessengerAdminGroupUtils").isWorkGroupSyncedChat(c)&&b("MessengerAdminGroupUtils").isWorkSyncedChatThreadCreationMessage(a)?v(a,e):c&&b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?B(a,c,e):t(a,c,e):w(a,c,e);break;case b("MercuryLogMessageType").THREAD_IMAGE:c&&b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?C(a,c,e):x(a,c,e):y(a,c,e);break;case b("MercuryLogMessageType").WALLPAPER:z(a,e);break;case b("MercuryLogMessageType").GENERIC_ADMIN_TEXT:var h=b("convertMIGColorToFIGColor")(c&&c.solid_color);b("Bootloader").loadModules(["MercuryXMATRenderer"],function(b){e(b.renderText(h,a,d))},"MercuryLogMessageRenderer");break;default:b("Bootloader").loadModules(["MercurySpecialLogMessageRenderer"],function(b){b.renderText(a,e)},"MercuryLogMessageRenderer");break}},renderIcon:function(a){return b("React").createElement(b("Image.react"),{className:k(a.log_message_type,a.log_message_data),src:j("99239")})},renderLegacy:function(a,c,d,e){k(e.log_message_type,e.log_message_data).split(" ").forEach(function(c){return c&&b("CSS").addClass(a,c)}),this.renderText(e,null,!1,function(a){b("ReactDOM").render(b("React").createElement("span",null,a),c)}),this.renderAttachmentLegacy(d,e)},renderAttachmentLegacy:function(a,c){if(c.log_message_type===b("MercuryLogMessageType").THREAD_IMAGE){c.log_message_data||i(0);var d=c.log_message_data.image;d&&d.preview_url&&(b("ReactDOM").render(b("React").createElement(b("Image.react"),{className:"_z6a",onClick:function(){return l(d)},src:d.preview_url}),a),b("CSS").show(a))}}};e.exports=a;function k(a,c){c=!!(c&&c.answered);return"_5wzu"+(a===b("MercuryLogMessageType").SUBSCRIBE?" _5wzj":"")+(a===b("MercuryLogMessageType").UNSUBSCRIBE?" _5wzk":"")+(a===b("MercuryLogMessageType").THREAD_NAME?" _5wzl":"")+(a===b("MercuryLogMessageType").THREAD_IMAGE?" _5wzm":"")+(a===b("MercuryLogMessageType").VIDEO_CALL&&c?" _5wzn":"")+(a===b("MercuryLogMessageType").VIDEO_CALL&&!c?" _5wzo":"")+(a===b("MercuryLogMessageType").PHONE_CALL&&c?" _5wzp":"")+(a===b("MercuryLogMessageType").PHONE_CALL&&!c?" _5wzq":"")+(a===b("MercuryLogMessageType").SERVER_ERROR?" _5wzr":"")+(a?"":" _2r5l")}function l(a){b("MercuryAttachmentViewer").bootstrapWithConfig({src:a.preview_url,endpoint:a.url,fbid:a.metadata.fbid,dimensions:a.metadata.dimensions,disablePaging:!0},null)}function m(a,c){__p&&__p();a.log_message_data||i(0);var d=b("MercuryMessageRendererUtils").moveCurrentUserToFront(a.log_message_data.added_participants);d||i(0);switch(d.length){case 1:n(a,c,d);break;case 2:o(a,c,d);break;case 3:p(a,c,d);break;default:q(a,c,d);break}}function n(a,c,d){var e=[a.author,d[0]];b("MessengerParticipants.bs").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("You added {subscriber1}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} added you.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author]))])):c(h._("{actor} added {subscriber1}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]]))]))})}function o(a,c,d){var e=[a.author].concat(d);b("MessengerParticipants.bs").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("You added {subscriber1} and {subscriber2}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} added you and {subscriber2}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))])):c(h._("{actor} added {subscriber1} and {subscriber2}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))]))})}function p(a,c,d){var e=[a.author].concat(d);b("MessengerParticipants.bs").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} added you, {subscriber2} and {subscriber3}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))])):c(h._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))]))})}function q(a,c,d){var e=[a.author].concat(d);b("MessengerParticipants.bs").getMulti(e,function(e){function f(a){var c=b("React").createElement("div",null,a.map(function(a){return b("React").createElement("div",null,a.name)}));return b("React").createElement(b("TooltipLink.react"),{alignH:"center",position:"above",tooltip:c},h._({"*":"{num} more"},[h._param("num",a.length,[0])]))}var g=d.map(function(a){return e[a]});a.author===b("MercuryViewer").getID()?c(h._("You added {subscriber1}, {subscriber2} and {more_people}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(g[0])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} added you, {subscriber2} and {more_people}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))])):c(h._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(g[0])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))]))})}function r(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0);var e=a.log_message_data.removed_participants;e||i(0);var f;e.length===1&&(f=e[0],d.push(f));b("MessengerParticipants.bs").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("You left the conversation.")):c(h._("You removed {name} from the conversation.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} left the conversation.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._("{actor} removed you from the conversation.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} removed {name} from the conversation.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function s(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0);var e=a.log_message_data.removed_participants;e||i(0);var f;e.length===1&&(f=e[0],d.push(f));b("MessengerParticipants.bs").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("You left the room.")):c(h._("You removed {name} from the room.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} left the room.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._("{actor} removed you from the room.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} removed {name} from the room.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function t(a,c,d){__p&&__p();a.log_message_data||i(0);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("You named the room: {name}.",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("You removed the room name."));else b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} named the room: {name}.",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} removed the room name.",[h._param("actor",a)]))})}function u(a,c,d,e,f){a.author===b("MercuryViewer").getID()?f(h._("You named the group {thread_name}. Your group is also on Facebook.",[h._param("thread_name",b("React").createElement("span",{className:e},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:d})))])):b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);f(h._("{actor} named the group {thread_name}. Your group is also on Facebook.",[h._param("actor",a),h._param("thread_name",b("React").createElement("span",{className:e},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:d})))]))})}function v(a,c){a.log_message_data||i(0);a=a.log_message_data.name;var d="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(a){c(h._("You can now chat to {name} on Workplace Chat.",[h._param("name",b("React").createElement("span",{className:d},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:a})))]));return}}function w(a,c,d){__p&&__p();a.log_message_data||i(0);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(e&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").EVENT_UPCOMING_BUMP)!==-1)d(h._("The group has been named {name}.",[h._param("name",b("React").createElement("span",{className:f},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e})))]));else if(e&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").GROUPSYNC_NAMING)!==-1)u(a,c,e,f,d);else if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("You named the conversation: {name}.",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("You removed the conversation name."));else b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} named the conversation: {name}.",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} removed the conversation name.",[h._param("actor",a)]))})}function x(a,c,d){a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0),a.log_message_data.image?d(h._("You changed the room picture.")):d(h._("You removed the room picture."))):b("MessengerParticipants.bs").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0);a.log_message_data.image?d(h._("{actor} changed the room picture.",[h._param("actor",e)])):d(h._("{actor} removed the room picture.",[h._param("actor",e)]))})}function y(a,c,d){a.tags!==undefined&&a.tags.indexOf(b("MessagingSourceEnum").EVENT_UPCOMING_BUMP)!==-1?d(h._("The conversation picture has been set.")):a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0),a.log_message_data.image?d(h._("You changed the conversation picture.")):d(h._("You removed the conversation picture."))):b("MessengerParticipants.bs").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0);a.log_message_data.image?d(h._("{actor} changed the conversation picture.",[h._param("actor",e)])):d(h._("{actor} removed the conversation picture.",[h._param("actor",e)]))})}function z(a,c){a.author===b("MercuryViewer").getID()?c(h._("You changed the wallpaper.")):b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a);c(h._("{actor} changed the wallpaper.",[h._param("actor",a)]))})}function A(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0);var e=a.log_message_data.removed_participants;e||i(0);var f;e.length===1&&(f=e[0],d.push(f));b("MessengerParticipants.bs").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("You left the chat.")):c(h._("You removed {name} from the chat.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} left the chat.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._("{actor} removed you from the chat.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} removed {name} from the chat.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function B(a,c,d){__p&&__p();a.log_message_data||i(0);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("You named the chat: {name}.",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("You removed the chat name."));else b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} named the chat: {name}.",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} removed the chat name.",[h._param("actor",a)]))})}function C(a,c,d){a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0),a.log_message_data.image?d(h._("You changed the chat picture.")):d(h._("You removed the chat picture."))):b("MessengerParticipants.bs").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0);a.log_message_data.image?d(h._("{actor} changed the chat picture.",[h._param("actor",e)])):d(h._("{actor} removed the chat picture.",[h._param("actor",e)]))})}}),null);
__d("MercuryLogMessage.react",["cx","fbt","DOM","DOMDimensions","Event","EventReminderRequestHelper","MercuryLogMessageRenderer","MercuryLogMessageType","MessagingGenericAdminTextType","React","ReactDOM","ShimButton.react","cancelAnimationFrame","emptyFunction","formatDate","joinClasses","requestAnimationFrame","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=266;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={messageText:null,showEventReminderFlyout:!1},this.$4=function(){this.$5()}.bind(this),this.$9=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_id:a:a:a;!this.state.showEventReminderFlyout&&a?b("EventReminderRequestHelper").fetchEventReminder(this.props.thread.thread_id,a,function(){this.$1&&this.setState({showEventReminderFlyout:!0})}.bind(this)):this.setState({showEventReminderFlyout:!1})}.bind(this),this.$11=function(a){a!==this.state.showEventReminderFlyout&&this.setState({showEventReminderFlyout:a})}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=!0,this.UNSAFE_componentWillReceiveProps(this.props)};a.prototype.componentWillUnmount=function(){this.$1=!1,this.$2&&b("cancelAnimationFrame")(this.$2)};a.prototype.$3=function(){return b("React").createElement(b("ShimButton.react"),{form:"link",onClick:this.$4},h._("Show previous messages."))};a.prototype.$5=function(){var a=this.props.loadMoreMessages&&this.props.loadMoreMessages();if(!this.$1)return;if(a)this.setState({messageText:this.$3()});else{a=h._("Couldn't find previous messages.");this.setState({messageText:a})}};a.prototype.UNSAFE_componentWillReceiveProps=function(a){if(a.message.log_message_type===b("MercuryLogMessageType").SERVER_ERROR)return;b("MercuryLogMessageRenderer").renderText(a.message,a.thread,a.isLastOfType,function(a){this.$1&&this.setState({messageText:a})}.bind(this))};a.prototype.shouldComponentUpdate=function(a,b){return this.state.messageText!=b.messageText||a.maxWidth!==this.props.maxWidth||this.state.showEventReminderFlyout!==b.showEventReminderFlyout};a.prototype.componentDidUpdate=function(){this.$6();if(!this.refs.attachment)return;b("MercuryLogMessageRenderer").renderAttachmentLegacy(this.refs.attachment,this.props.message);b("DOM").scry(this.refs.wrap,"img").forEach(function(a){var c=b("Event").listen(a,"load",function(){this.$6(),c.remove()}.bind(this))}.bind(this))};a.prototype.render=function(){return b("React").createElement("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_5ye6"),ref:"wrap",style:babelHelpers["extends"]({},this.props.style,this.$7()),title:b("formatDate")(new Date(this.props.message.timestamp),"g:ia")}),b("React").createElement("div",{className:"_5ye7"},b("MercuryLogMessageRenderer").renderIcon(this.props.message),this.state.messageText),b("React").createElement("div",{className:"_5ye8",ref:"attachment"},this.$8()))};a.prototype.$8=function(){__p&&__p();var a;if(this.props.thread&&!this.props.thread.lightweight_event||!this.props.message.log_message_data)return null;if(!this.props.event||!this.props.event.exists)return null;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_time:a:a:a;if(!a)return null;typeof a==="string"&&(a=parseInt(a,10));if(a<=Math.floor(Date.now()/1e3))return null;var c;b("requireWeak")("Link.react",function(a){c=a});var d;switch(this.props.message.log_message_data.message_type){case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:d=h._("Change");break;default:d=null}a=b("React").createElement(c,{href:"#",onClick:this.$9,title:h._("Edit Event"),ref:"event_rem_link"},d);this.props.displayItems&&(a=null);return b("React").createElement("span",null,a,this.$10())};a.prototype.$10=function(){__p&&__p();var a;if(!this.state.showEventReminderFlyout)return null;var c="right",d=b("ReactDOM").findDOMNode(this.refs.wrap);d&&d instanceof Element&&d.getBoundingClientRect().left<j&&(c="left");d={alignment:c,position:"above",contextRef:function(){return this.refs.event_rem_link}.bind(this),shown:this.state.showEventReminderFlyout,onToggle:this.$11};var e;b("requireWeak")("EventsActionsLogger",function(a){e=a});c={action_history:[{surface:e.Surface.MESSENGER_CHAT_TAB,mechanism:e.Mechanism.REMINDER_ADMIN_TEXT}]};a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_id:a:a:a;a={threadID:this.props.thread.thread_id,eventID:a,dialogProps:d,flyoutNoSheet:!0,isEditing:!0,actionContext:c};var f;b("requireWeak")("ChatEventReminderContainer.react",function(a){f=a});return b("React").createElement(f,a)};a.prototype.$7=function(){return this.props.maxWidth?{maxWidth:this.props.maxWidth}:null};a.prototype.$6=function(){this.$2&&b("cancelAnimationFrame")(this.$2);if(!this.$1)return;this.$2=b("requestAnimationFrame")(function(){this.props.onImageLoad&&this.props.onImageLoad(b("DOMDimensions").getElementDimensions(this.refs.wrap).height),delete this.$2}.bind(this))};a.propTypes={loadMoreMessages:c.func,maxWidth:c.number,message:c.object.isRequired,onImageLoad:c.func,thread:c.object,isLastOfType:c.bool.isRequired,event:c.object};a.defaultProps={onImageLoad:b("emptyFunction")};e.exports=a}),null);
__d("MercuryLogMessageContainer.react",["EventReminderStateStore","FluxContainer","MercuryLogMessage.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("EventReminderStateStore")]};a.calculateState=function(a,c){a=(a=c.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_id:a:a:a;return{event:b("EventReminderStateStore").getEvent(c.thread?c.thread.thread_id:"",a)}};a.prototype.render=function(){return b("React").createElement(b("MercuryLogMessage.react"),{className:this.props.className,onLogMessageExpanded:this.props.onLogMessageExpanded,loadMoreMessages:this.props.loadMoreMessages,message:this.props.message,onImageLoad:this.props.onImageLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:this.props.isLastOfType,event:this.state.event})};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("enumerate",[],(function(a,b,c,d,e,f){"use strict";e.exports=function(b){return b.FB_enumerate}(a)}),null);
__d("MercuryMessageGroup",["MercuryActionType","MercuryAttachmentType","MercuryShareAttachmentRenderLocations","MercuryThreadlistConstants","MessengerLightweightActionUtils","MessengerMessage.bs","enumerate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={calculateMessageGroups:function(a,c){__p&&__p();var d=[],e=null,f={value:null};a=b("enumerate")(a);var h;while(!(h=a.next()).done){var i=g.canAppendMessageToLastGroup(f.value,h.value,c);i||(e=[],d.push(e));e.push(h.value);f=h}return d},canAppendMessageToLastGroup:function(a,c,d){var e=b("MercuryThreadlistConstants").GROUPING_THRESHOLD;if(!a||h(a,d)||h(c,d)||a.author!=c.author||a.timestamp<c.timestamp-e||a.is_spoof_warning!==c.is_spoof_warning||a.page_admin_notes||c.replied_to_message)return!1;d=b("MessengerMessage.bs").getPersona(a);e=b("MessengerMessage.bs").getPersona(c);return!d&&!e?!0:d===null||e===null?!1:d.id===e.id}};function h(a,c){var d=a.has_attachment;d&&(c===b("MercuryShareAttachmentRenderLocations").MESSENGER||c===b("MercuryShareAttachmentRenderLocations").CHAT)&&(d=i(a));return!!(b("MessengerLightweightActionUtils").isLWAMessage(a)||a.action_type==b("MercuryActionType").LOG_MESSAGE||d||a.html_body||a.body&&a.body.length>b("MercuryThreadlistConstants").MAX_CHARS_BEFORE_BREAK)}function i(a){a=a.attachments[0];return!a||a.attach_type===b("MercuryAttachmentType").STICKER||a.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE}e.exports=g}),null);
__d("MessengerCallLogEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP_CALL_ENDED:"group_call_ended",GROUP_CALL_STARTED:"group_call_started",INVITED_TO_CALL:"invited_to_call",MISSED_CALL:"missed_call",ONE_ON_ONE_CALL_ENDED:"one_on_one_call_ended"})}),null);
__d("MessengerDomIDs.bs",["uniqueID"],(function(a,b,c,d,e,f){"use strict";a={COMPOSER_INPUT_DESCRIPTION:b("uniqueID")(),CONVERSATION:b("uniqueID")(),MAIN_LABEL:b("uniqueID")(),MUTE_DIALOG_TITLE:b("uniqueID")(),THREAD_INFO_PANEL:b("uniqueID")(),THREAD_TITLE:b("uniqueID")()};f.ids=a}),null);
__d("PagesMessagingMercuryChatTabActionKeys",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({REQUEST_GREETING_CONFIG:null,NOTIFY_GREETING_CONFIG_RECEIVED:null});e.exports=a}),null);
__d("PagesMessagingMercuryChatTabDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("PagesMessagingMercuryChatTabActions",["PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabDispatcher"],(function(a,b,c,d,e,f){"use strict";a={requestGreetingConfig:function(a){b("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:b("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG,threadID:a})},notifyGreetingConfigReceived:function(a,c){b("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:b("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED,threadID:a,payload:c})}};e.exports=a}),null);
__d("PagesMessagingMercuryChatTabState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("immutable").Record({pagesGreetingShouldShow:!1,pagesGreetingContent:null,pageResponsiveness:null,coverPhotoData:null,connectionContext:null,pageOnlineMessage:null,icebreakers:null}));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("XMercuryChatTabPagesNullStateConfigController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/messaging/mercury/greeting/",{})}),null);
__d("PagesMessagingMercuryChatTabStore",["invariant","AsyncRequest","FluxStore","MercuryIDs","PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabDispatcher","PagesMessagingMercuryChatTabState","XMercuryChatTabPagesNullStateConfigController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("FluxStore"));h=c&&c.prototype;function a(){h.constructor.call(this,b("PagesMessagingMercuryChatTabDispatcher")),this.$PagesMessagingMercuryChatTabStore1=new Map()}a.prototype.getStateByThread=function(a){this.$PagesMessagingMercuryChatTabStore1.has(a)||this.$PagesMessagingMercuryChatTabStore1.set(a,new(b("PagesMessagingMercuryChatTabState"))());a=this.$PagesMessagingMercuryChatTabStore1.get(a);a||g(0);return a};a.prototype.__onDispatch=function(a){var c=a.actionType,d=a.payload;a=a.threadID;var e=this.getStateByThread(a);e||g(0);switch(c){case b("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG:this.$PagesMessagingMercuryChatTabStore2(a);break;case b("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED:this.$PagesMessagingMercuryChatTabStore3(a,this.$PagesMessagingMercuryChatTabStore4(d,e));break}};a.prototype.$PagesMessagingMercuryChatTabStore2=function(a){var c=b("XMercuryChatTabPagesNullStateConfigController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").setData({page_id:b("MercuryIDs").getUserIDFromThreadID(a)}).setHandler(function(c){return b("PagesMessagingMercuryChatTabActions").notifyGreetingConfigReceived(a,c.payload)}).send()};a.prototype.$PagesMessagingMercuryChatTabStore3=function(a,b){this.$PagesMessagingMercuryChatTabStore1.set(a,b),this.__emitChange()};a.prototype.$PagesMessagingMercuryChatTabStore4=function(a,b){var c=b.set("pagesGreetingShouldShow",a.pagesGreetingShouldShow).set("pagesGreetingContent",a.pagesGreetingContent).set("pageResponsiveness",a.pageResponsiveness).set("coverPhotoData",a.coverPhotoData).set("connectionContext",a.connectionContext).set("pageOnlineMessage",a.pageOnlineMessage);(b.icebreakers===null||b.icebreakers===undefined||Object.keys(b.icebreakers).length===0)&&(c=c.set("icebreakers",a.icebreakers));return c};a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesMessageListGreeting.react",["cx","FluxContainer","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabStore","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.getStores=function(){return[b("PagesMessagingMercuryChatTabStore")]};a.calculateState=function(a,c){if(c.messageCount>0)return{shouldShowGreeting:!1};a=b("PagesMessagingMercuryChatTabStore").getStateByThread(c.threadID);return{greetingContent:a.pagesGreetingContent,shouldShowGreeting:a.pagesGreetingShouldShow}};a.prototype.componentDidMount=function(){b("PagesMessagingMercuryChatTabActions").requestGreetingConfig(this.props.threadID)};a.prototype.render=function(){return!this.state.shouldShowGreeting||!this.state.greetingContent||this.state.greetingContent.trim().length===0?null:b("React").createElement("div",{className:"_4fsh _3-8z"},this.state.greetingContent)};function a(){h.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessageList.react",["cx","ImmutableObject","MercuryActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageGroup","MercuryShareAttachmentRenderLocations","MessagingGenericAdminTextType","MessengerCallLogEvent","MessengerDomIDs.bs","MessengerLightweightActionUtils","MessengerMessage.bs","PagesMessageListGreeting.react","React","ReactDOM","gkx","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerDomIDs.bs").ids;c=b("React").PropTypes;var j=1e3*60*60,k=function(a){var c;c=(c=a)!=null?(c=c.log_message_data)!=null?c.message_type:c:c;switch(c){case b("MessagingGenericAdminTextType").GROUP_POLL:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.question_id:c:c:c;case b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.game_id:c:c:c;case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;default:return null}},l=function(a){return b("MessengerLightweightActionUtils").isLWAMessage(a)?"lwa":null};d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={activeMessageID:null,messageGroups:b("MercuryMessageGroup").calculateMessageGroups(this.props.messages,this.props.location)},this.$5=function(a){this.setState(function(b){return{activeMessageID:b.activeMessageID===a?null:b.activeMessageID}})}.bind(this),this.$6=function(a){this.setState({activeMessageID:a})}.bind(this),c}a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.messages!==this.props.messages&&this.setState({messageGroups:b("MercuryMessageGroup").calculateMessageGroups(a.messages,a.location)})};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.DateBreak,d=a.forGameChat,e=a.location,f=a.MessageGroup;a=a.CollapsedLogMessageGroup;var g=[],h=[],r,s=this.props.thread&&this.props.thread.solid_color;s=s?{backgroundColor:s}:null;var t=this.state.activeMessageID,u=this.state.messageGroups,v=u.length,w=this.props.readReceipts,x=w.last();x=x?x.watermark:0;var y=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),z={};for(var A=this.props.messages.size-1;A>=0;A--){var B=this.props.messages.get(A),C=k(B)||l(B);C&&!z[C]&&(z[C]=B.message_id)}for(var C=0;C<v;C++){B=C>0?u[C-1]:null;A=B&&B.length>0?B[B.length-1]:null;B=u[C];var D=B[0],E=B[B.length-1],F=!1;if(!A||D.timestamp-A.timestamp>j){F=!0;A=b("React").createElement(c,{date:new Date(D.timestamp),key:"db:"+D.message_id,ref:"db:"+D.message_id});h.length===0&&g.push(A)}if(b("MessengerLightweightActionUtils").isLWAMessage(D)&&z[l(D)]!==D.message_id){A=this.$1(D,z);g.push(A);continue}if(D.action_type==b("MercuryActionType").LOG_MESSAGE){A=(A=D)!=null?(A=A.log_message_data)!=null?A.message_type:A:A;var G=A===b("MessagingGenericAdminTextType").PARTIES_PRESENCE,H=A===b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE,I=A===b("MessagingGenericAdminTextType").GROUP_POLL,J=[b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP].includes(A);if((e===b("MercuryShareAttachmentRenderLocations").CHAT||e===b("MercuryShareAttachmentRenderLocations").MESSENGER)&&(D.log_message_type===b("MercuryLogMessageType").VIDEO_CALL||D.log_message_type===b("MercuryLogMessageType").PHONE_CALL||A===b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG&&(D.log_message_data.untypedData.event===b("MessengerCallLogEvent").MISSED_CALL||D.log_message_data.untypedData.event===b("MessengerCallLogEvent").ONE_ON_ONE_CALL_ENDED||b("gkx")("AT4BGIAjIMDx8SHmzjXSkULaWITB36xa4d5h2k8EJZYGLtl7KePUKA_D22IHEMhiWWD9GTeeaFyu4-sNz2_OdRqs")))){A=this.$2(D,y,u,v,C,w,x,E,z);g.push(A)}else{A=this.$3(D,z);r=D.message_id;!H&&!I&&!J&&h.push(A);if(G&&b("gkx")("AT4v31CLhq3ONrcLgjTAwLp2ZfFMc_5Q4k_xqjXl68WxCtQn-L41RqEq0wKhzarMvKqqDw1ofb-Pm3Nbga8dnUI9wr8MS86lbyUu4_ovfyNU0g"))continue;(h.length===B.length||H||I||J)&&(this.$4(h,g,r,s,a),h=[]);(H||I||J)&&g.push(A)}continue}B=b("immutable").List(B);G=n(u,v,C,z);r=!p(w,B,G);H=o(x,E);I=q(this.props.deliveryTimestamp,E);J=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(b("MercuryIDs").getUserIDFromParticipantID(B.first().author));A=b("MessengerMessage.bs").getPersona(E);g.push(b("React").createElement(f,{activeMessageID:m(t,B),author:B.first().author,deliveryTimestamp:I,forGameChat:d,hasDateBreak:F,isCanonical:this.props.isCanonical,isFromViewer:y===D.author,isPageMessage:this.props.isPageMessage,isOnline:J,key:"mg:"+D.message_id,lastReadTimestamp:H,maxBubbleWidth:this.props.maxBubbleWidth,messages:B,nextTimestamp:G,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$5,onMessageSelect:this.$6,onStickerClick:this.props.onStickerClick,onReplyToMessage:this.props.onReplyToMessage,pageID:this.props.isPageMessage?this.props.viewer:null,persona:A,readReceipts:r?w:b("immutable").OrderedMap(),ref:"mg:"+D.message_id,thread:this.props.thread,threadID:this.props.threadID,scrollToRepliedMessage:this.props.scrollToRepliedMessage}))}E=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid;I=null;e===b("MercuryShareAttachmentRenderLocations").MESSENGER&&E&&this.props.isPageMessage&&(I=b("React").createElement(b("PagesMessageListGreeting.react"),{messageCount:h.length+v,threadID:E}));return b("React").createElement("div",{id:e===b("MercuryShareAttachmentRenderLocations").MESSENGER?i.CONVERSATION:null},I,g)};a.prototype.getMessageElement=function(a,c){__p&&__p();if(c){var d=this.refs["db:"+a];if(d)return b("ReactDOM").findDOMNode(d)}d=this.$7(a);if(!d)return null;d=d[0].message_id;var e=this.refs["mg:"+d];if(!e)return null;return c&&d===a?b("ReactDOM").findDOMNode(e):e.getMessageElement(a)};a.prototype.getMessageComponent=function(a){var b=this.$7(a);if(!b)return null;b=b[0].message_id;b=this.refs["mg:"+b];return!b?null:b.getMessage(a)};a.prototype.$7=function(a){return this.state.messageGroups.find(function(b){return b.some(function(b){return b.message_id===a})})};a.prototype.$4=function(a,c,d,e,f){a.length!==0&&(a.length>1?c.push(b("React").createElement(f,{key:"mg:"+d,style:e},a)):c.push(b("React").createElement("div",{key:"mg:"+d},a)))};a.prototype.$2=function(a,c,d,e,f,g,h,i,j){__p&&__p();var k=this.props.MessageGroup;if(a.log_message_data.message_type===b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG){var l={caller:b("MercuryIDs").getParticipantIDFromUserID(a.log_message_data.untypedData.caller_id),callee:b("MercuryIDs").getParticipantIDFromUserID(a.log_message_data.untypedData.callee_id),server_info_data:a.log_message_data.untypedData.server_info,thread_id:a.thread_fbid,answered:a.log_message_data.untypedData.event!==b("MessengerCallLogEvent").MISSED_CALL,log_message_type:a.log_message_data.untypedData.video?b("MercuryLogMessageType").VIDEO_CALL:b("MercuryLogMessageType").PHONE_CALL,event:a.log_message_data.untypedData.event};a=b("ImmutableObject").setProperty(a,"log_message_data",l)}l={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:a.log_message_body,log_message_data:a.log_message_data,log_message_type:a.log_message_type,timestamp:a.timestamp}};l=b("ImmutableObject").setProperty(a,"attachments",[l]);l=b("ImmutableObject").setProperty(l,"body","");l=b("immutable").List([l]);d=n(d,e,f,j);e=!p(g,l,d);f=o(h,i);j=q(this.props.deliveryTimestamp,i);return b("React").createElement(k,{author:l.first().author,deliveryTimestamp:j,forGameChat:this.props.forGameChat,isCanonical:this.props.isCanonical,isFromViewer:c===a.author,isPageMessage:this.props.isPageMessage,key:a.message_id,lastReadTimestamp:f,maxBubbleWidth:this.props.maxBubbleWidth,messages:l,nextTimestamp:d,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$5,onMessageSelect:this.$6,onStickerClick:this.props.onStickerClick,readReceipts:e?g:b("immutable").OrderedMap(),thread:this.props.thread,threadID:this.props.threadID})};a.prototype.$3=function(a,c){var d=this.props.LogMessage;c=c[k(a)];return a.log_message_type!==b("MercuryLogMessageType").SERVER_ERROR?b("React").createElement(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:a.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:c===a.message_id}):null};a.prototype.$1=function(a,c){c=c[l(a)];var d=this.props.LogMessage;return b("React").createElement(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:a.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:c===a.message_id})};a.propTypes={CollapsedLogMessageGroup:c.func.isRequired,DateBreak:c.func.isRequired,deliveryTimestamp:c.number.isRequired,forGameChat:c.bool,isCanonical:c.bool,isPageMessage:c.bool,location:c.string.isRequired,LogMessage:c.func.isRequired,loadMoreMessages:c.func,MessageGroup:c.func.isRequired,messages:c.instanceOf(b("immutable").List).isRequired,onAttachmentLoad:c.func,onlineUsers:c.instanceOf(b("immutable").List),onStickerClick:c.func,onReplyToMessage:c.func,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,viewer:c.string.isRequired,thread:c.object,threadID:c.string,scrollToRepliedMessage:c.func};function m(a,b){return b.find(function(b){return b.message_id===a})?a:null}function n(a,c,d,e){if(d>=c-1)return Infinity;var f=a[d+1][0];if(b("MessengerLightweightActionUtils").isLWAMessage(f)&&e[l(f)]!==f.message_id||f.action_type==b("MercuryActionType").LOG_MESSAGE)return n(a,c,d+1,e);else return f.timestamp}function o(a,b){return b.timestamp>a?a:Infinity}function p(a,b,c){return b.isEmpty()||a.last()<b.first().timestamp||a.first()>=c}function q(a,b){return b.timestamp>a?a:Infinity}e.exports=a}),null);
__d("MessengerReadReceipt.bs",["bs_array","Utils.bs","immutable","MercuryActionStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function h(a,c,d,e){__p&&__p();c=c>=a.timestamp;var f=a.status;e=!e||d!==a.author;if(c)if(f==null)if(e)return!0;else return!1;else if(e)return f===b("MercuryActionStatus").SUCCESS;else return!1;else return!1}function a(a,c,d){__p&&__p();if(c==null)return[];else{a=a[c.thread_id];if(a!==undefined)return a.reduce(function(a,e,f,g){if(h(c,e.watermark,f,b("Utils.bs").isTruthy(d)))return b("bs_array").append(a,[f]);else return a},[]);else return[]}}function c(a,b){a=a[b.thread_id];if(a!==undefined)return a.reduce(function(a,c,d,e){if(a)return h(b,c.watermark,d,!1);else return!1},!0);else return!1}function d(a,c){a=a[c];if(a!==undefined)return a;else return b("immutable").OrderedMap()}function e(a,b,c){a=a[b];if(a!==undefined){b=a.get(c);if(b==null)return null;else return b}else return null}f.emptyReadReceipts=g;f.wasSeen=h;f.getSeenBy=a;f.wasSeenByAll=c;f.getSeenTimestamps=d;f.getSeenTimestamp=e}),null);
__d("ChatConversation.react",["ChatCollapsedLogMessageGroup.react","ChatDateBreak.react","ChatMessageGroup.react","MercuryIDs","MercuryLogMessageContainer.react","MercuryShareAttachmentRenderLocations","MessageList.react","MessengerReadReceipt.bs","React","cancelAnimationFrame","immutable","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").OrderedMap;a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatConversation",_raf:undefined,_onMountTimeout:undefined,propTypes:{contextBanner:a.object,forGameChat:a.bool.isRequired,isCanonical:a.bool.isRequired,loadMoreMessages:a.func,maxBubbleWidth:a.number.isRequired,messages:a.instanceOf(b("immutable").List).isRequired,onAttachmentLoad:a.func,onMount:a.func,onlineUsers:a.instanceOf(b("immutable").List).isRequired,onStickerClick:a.func,viewer:a.string.isRequired,thread:a.object,threadID:a.string.isRequired},componentDidMount:function(){this._raf=b("requestAnimationFrame")(function(){this._onMountTimeout=setTimeout(function(){this.props.onMount&&this.props.onMount(),delete this._onMountTimeout}.bind(this),0),delete this._raf}.bind(this))},componentWillUnmount:function(){this._raf&&b("cancelAnimationFrame")(this._raf),clearTimeout(this._onMountTimeout)},render:function(){return b("React").createElement("div",null,this.props.contextBanner,b("React").createElement(b("MessageList.react"),{DateBreak:b("ChatDateBreak.react"),forGameChat:this.props.forGameChat,LogMessage:b("MercuryLogMessageContainer.react"),MessageGroup:b("ChatMessageGroup.react"),deliveryTimestamp:0,isCanonical:this.props.isCanonical,location:b("MercuryShareAttachmentRenderLocations").CHAT,loadMoreMessages:this.props.loadMoreMessages,maxBubbleWidth:this.props.maxBubbleWidth,CollapsedLogMessageGroup:b("ChatCollapsedLogMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.props.onAttachmentLoad,onlineUsers:this.props.onlineUsers,onStickerClick:this.props.onStickerClick,readReceipts:this._calculateReceipts(this.props),ref:"messageList",viewer:this.props.viewer,thread:this.props.thread,threadID:this.props.threadID}))},_calculateReceipts:function(a){__p&&__p();var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.threadID),e=new Set(a.thread?a.thread.participants:d.keys());e["delete"](c);return d.withMutations(function(c){b("immutable").Seq(a.messages).reverse().forEach(function(a){if(e.size===0)return!1;if(!e.has(a.author))return null;c.update(a.author,function(b){return!b||b.watermark<=a.timestamp?{watermark:a.timestamp,action:a.timestamp}:b});e["delete"](a.author);return null})})},getMessageList:function(){return this.refs.messageList}});e.exports=c}),null);
__d("ChatDetailStack.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.bottomDetail;a=a.topDetail;c=c?b("React").createElement("div",{className:"_4jeh"},c):null;return b("React").createElement("div",{className:"_2rt2"},b("React").createElement("div",{className:"_4jeg"},a),c)}e.exports=a}),null);
__d("ChatEditParticipantsUtils",["AsyncDialog","AsyncRequest","MercuryIDs","MercuryThreadIDMap","URI"],(function(a,b,c,d,e,f){"use strict";var g=b("MercuryThreadIDMap").get();a={showParticipantsModal:function(a){if(!b("MercuryIDs").isGroupChat(a))return;g.getServerIDFromClientID(a,function(a){b("AsyncDialog").send(new(b("AsyncRequest"))(new(b("URI"))("/ajax/browser/dialog/multichat_members/").addQueryData({id:a})))})}};e.exports=a}),null);
__d("MessengerBotComposerWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1193572474099061"};c.getQueryID=function(){"use strict";return"1132183563559860"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("XMessengerBotsMenuController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger/commerce/bots/menu/",{page_id:{type:"String",required:!0}})}),null);
__d("MessengerBotMenuDataFetcher",["AsyncRequest","Cache","MessengerBotComposerWebGraphQLQuery","XMessengerBotsMenuController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1=new(b("Cache"))(),this.$2=new(b("Cache"))()}a.prototype.getMenuItems=function(a,c,d){__p&&__p();if(this.$1.has(a)){c(this.$1.get(a));return}var e=b("XMessengerBotsMenuController").getURIBuilder().setString("page_id",a).getURI();new(b("AsyncRequest"))().setURI(e).setHandler(function(b){b=b.payload.menu;this.$1.set(a,b);c(b)}.bind(this)).setErrorHandler(function(a){d()}).send()};a.prototype.getHasPageSetting=function(a,c,d,e){__p&&__p();if(!this.$2.has(a)){var f=b("MessengerBotComposerWebGraphQLQuery").getURI({node_id:a});new(b("AsyncRequest"))().setURI(f).setHandler(function(b){b=b.payload.data.node;b=b&&b.commerce_page_settings||[];this.$2.set(a,b);c(b.indexOf(e)!==-1)}.bind(this)).setErrorHandler(function(b){this.$2.set(a,[]),d()}.bind(this)).send()}f=this.$2.get(a)||[];c(f.indexOf(e)!==-1);return f.indexOf(e)!==-1};e.exports=new a()}),null);
__d("LayerAutoFocusReact",["focusWithinLayer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this._layer=a,this._subscription=null}a.prototype.enable=function(){this._layer.containsReactComponent&&(this._subscription=this._layer.subscribe("reactshow",this._focus.bind(this)))};a.prototype.disable=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)};a.prototype._focus=function(){var a=this._layer.getRoot();a&&b("focusWithinLayer")(a)};e.exports=a}),null);
__d("getPageIDFromThreadID",["FBIDCheck","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("MercuryIDs").getUserIDFromThreadID(a);return!a||b("FBIDCheck").isUser_deprecated(a)?null:a}e.exports=a}),null);
__d("ChatTabComposerContainer.react",["cx","fbt","Bootloader","ChatComposer","ChatConfig","FantaMessageActions","FantaTypeComposer","MercuryIDs","MercuryMessageActions","MercuryShareAttachmentRenderLocations","MessengerBotMenuDataFetcher","MessengerParticipants.bs","MessengerState.bs","MNCommercePageSetting","P2PGKValues","React","ReactComponentWithPureRenderMixin","ReactDOM","SimpleXUIDialog","getPageIDFromThreadID","getThreadTypeNameFromThreadType","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ChatComposer").ChatComposer,j="right";a=b("React").PropTypes;var k=b("ChatConfig").get("single_line_composer"),l=140,m=90;c=b("React").createClass({displayName:"ChatTabComposerContainer",_participantSubscription:null,mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{composer:a.object.isRequired,disableInput:a.bool.isRequired,fileUploader:a.object,handleSend:a.func,inputKeyDown:a.func,isFocused:a.bool,onEscape:a.func,onFileUploadFail:a.func,onPhotoUploadFail:a.func,onStickerSelect:a.func,onTab:a.func,onUploadCancel:a.func,onUploadComplete:a.func,onUploadSubmit:a.func,thread:a.any,threadID:a.string,viewer:a.string.isRequired,forGameChat:a.bool.isRequired},_inputRef:null,_photoUploader:null,_setTextImmediate:null,_singleLineComposerRef:null,getInitialState:function(){return{participants:[],showP2PButton:this._getShowP2PButton(),pageID:b("getPageIDFromThreadID")(this.props.threadID),showStructuredMenu:this._getShowStructuredMenu(),longInput:!1}},componentDidMount:function(){this.props.onMount(this),this.state.pageID&&b("MessengerBotMenuDataFetcher").getHasPageSetting(this.state.pageID,function(a){this.setState({showStructuredMenu:a})}.bind(this),function(){this.setState({showStructuredMenu:!1})}.bind(this),b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED),this.setState({participants:this._computeParticipants()})},componentDidUpdate:function(a){__p&&__p();var b=this.props.thread,c=b?b.thread_id:null;if(c===this.props.threadID){this.props.fileUploader!==a.fileUploader&&this._handleComposerHeightMayChange();return}c=b?b.participants:[];if(c.length!==this.state.participants.length){this.setState({participants:this._computeParticipants()});return}var d=new Set(this.state.participants.filter(Boolean).map(function(a){return a.id}));if(c.every(function(a){return d.has(a)}))return;else this.setState({participants:this._computeParticipants()})},componentWillUnmount:function(){this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription)},_computeParticipants:function(){__p&&__p();var a=this.props.thread;if(!a)return[];var c=[],d=[];a.participants.forEach(function(a){var e=b("MessengerParticipants.bs").getNow(a);e?d.push(e):c.push(a)});c.length>0&&(this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription),this._participantSubscription=b("MessengerParticipants.bs").getMulti(c,function(b){this._participantSubscription=null,this.setState({participants:a.participants.map(function(a){return b[a]})})}.bind(this)));return d},_getShowP2PButton:function(){return b("P2PGKValues").P2PVisible&&this.props.viewer!==b("MercuryIDs").getUserIDFromThreadID(this.props.threadID)},_getShowStructuredMenu:function(){var a=b("getPageIDFromThreadID")(this.props.threadID);return a===null||a===undefined?!1:b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(){},function(){},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED)},render:function(){var a=this.props.composer,c=this.props.threadID;c=c?b("MessengerState.bs").isEmptyLocalThread(this.props.viewer,c):!1;return k?b("React").createElement(i,{composer:a,fileUploader:this.props.fileUploader,handleSend:this.props.handleSend,handleSendClick:this._handleSendClick,inputRef:function(a){return this._inputRef=a}.bind(this),isEmptyLocalThread:c,isFocused:this.props.isFocused,defaultText:a.text,onEmojiSelect:this._handleEmojiSelect,onEscape:this._handleEscape,onInputKeyDown:this._handleInputKeyDown,onTab:this.props.onTab,onTextChange:this._onTextChange,onUploaderMount:function(a){return this._photoUploader=a}.bind(this),pageID:this.state.pageID,participantIDs:undefined,participants:this.state.participants,disableInput:this.props.disableInput,showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,thread:this.props.thread,threadID:this.props.threadID,uploadPhotoFn:function(a){this._photoUploader&&this._photoUploader.uploadFiles([].concat(a))}.bind(this),viewer:this.props.viewer,focusInput:this.focusInput,longInput:this.state.longInput,ref:function(a){return this._singleLineComposerRef=a}.bind(this),forGameChat:this.props.forGameChat}):b("React").createElement(i,babelHelpers["extends"]({composer:this.props.composer,defaultText:a.text,fileUploader:this.props.fileUploader,fileUploaderProps:this._getFileUploaderProps(),handleSendClick:this._handleSendClick,isEmptyLocalThread:c,ref:"composer",thread:this.props.thread},this.props,{disableInput:this.props.disableInput,onTextChange:this._onTextChange,p2pProps:this._getP2PProps(),pageID:this.state.pageID,participantIDs:undefined,participants:this.state.participants,photoUploaderProps:this._getPhotoUploaderProps(),showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,stickerButtonProps:this._getStickerButtonProps(),forGameChat:this.props.forGameChat}))},onSend:function(a){if(a&&a.profile_ranges&&a.profile_ranges.length){var c=a,d=this.props.thread,e=this.state.participants;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(a,f){new a().setEvent(f.MENTION).setGroupSize(e&&e.length).setNumDelivered((c.profile_ranges||[]).length).setThreadid(d&&d.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(d&&d.thread_type)).setOfflineThreadid(c.offline_threading_id).log()},"ChatTabComposerContainer.react")}k?this._inputRef&&this._inputRef.onSend&&this._inputRef.onSend(a):this.refs.composer&&this.refs.composer.onSend(a)},getInput:function(){return k?this._inputRef:this.refs.composer&&this.refs.composer.getInput&&this.refs.composer.getInput()},focusInput:function(){var a=this.getInput();a&&a.focus&&a.focus()},isUploading:function(){return this.refs.composer.isUploading()},_handleSendClick:function(a){a=this.getInput();a&&typeof a.handleSend==="function"&&(a&&a.handleSend())},_getP2PProps:function(){return!this.state.showP2PButton?{}:{button:b("React").createElement("i",{className:"hidden_elem"}),className:"_6ga _6gb",flyoutAlignment:j,referrer:b("MercuryShareAttachmentRenderLocations").CHAT,threadID:this.props.threadID,onTrigger:this.props.onP2PTrigger}},_getStickerButtonProps:function(){var a={className:"_6gb _6gf",flyoutAlignment:j,threadID:this.props.threadID,onStickerSelect:this.props.onStickerSelect};return a},_getPhotoUploaderProps:function(){var a={className:"_6gd",customUI:!0,imageClassName:"hidden_elem",linkClassName:"_6gb _6ge",threadID:this.props.threadID,onLastUploadCancel:this._handleUploadCancel,onAllUploadsComplete:this._handleUploadComplete,onLastUploadFail:this._handlePhotoUploadFail,onUploadError:this._handleUploadError,onSubmit:this._handleUploadSubmit};return a},_getFileUploaderProps:function(){var a=this._getPhotoUploaderProps();a.linkClassName="_6gb _6gg";a.imagesOnly=!1;a.onLastUploadFail=this._handleFileUploadFail;return a},_handleUploadComplete:function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).confirmAttachmentPlaceholder(c.upload_id,c),this.props.onUploadComplete&&this.props.onUploadComplete(c)},_handleUploadError:function(a){var b,c;switch(a.error){case"size-exceeded":b=h._("The file you have selected is too large");c=h._("The file you have selected is too large. The maximum size is 25MB.");break;default:b=h._("File Upload Failed"),c=h._("There was a problem uploading the file.")}this._showErrorDialog(b,c);this.props.onFileUploadFail&&this.props.onFileUploadFail(a)},_handleUploadCancel:function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c),this.props.onUploadCancel&&this.props.onUploadCancel(c)},_handleFileUploadFail:function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c);a=h._("File Upload Failed");var d=h._("There was a problem uploading the file.");c.errorDialogParams&&(a=c.errorDialogParams.title||a,d=c.errorDialogParams.body||d);this._showErrorDialog(a,d);this.props.onFileUploadFail&&this.props.onFileUploadFail(c)},_handlePhotoUploadFail:function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c);a=h._("Upload Failed");var d=h._("Please try again. Make sure you are uploading a valid file.");c.errorDialogParams&&(a=c.errorDialogParams.title||a,d=c.errorDialogParams.body||d);this._showErrorDialog(a,d);this.props.onPhotoUploadFail&&this.props.onPhotoUploadFail(c)},_handleUploadSubmit:function(a,b){this.props.onUploadSubmit&&this.props.onUploadSubmit(b)},_showErrorDialog:function(a,c){b("SimpleXUIDialog").show(c,a)},_handleInputKeyDown:function(a,b){this.props.inputKeyDown&&this.props.inputKeyDown(a,b)},_handleEscape:function(a){this.props.onEscape&&this.props.onEscape(a)},_handleEmojiSelect:function(a){this._inputRef&&this._inputRef.insertEmoji&&this._inputRef.insertEmoji(a)},_onTextChange:function(a,c){var d=this.props.threadID;d&&(this._setTextImmediate=b("setImmediate")(function(){this._setTextImmediate=null,b("FantaMessageActions").composerTextUpdate(d,a,c)}.bind(this)));this._handleComposerHeightMayChange()},_handleComposerHeightMayChange:function(){if(!this._singleLineComposerRef)return;var a=b("ReactDOM").findDOMNode(this._singleLineComposerRef);if(!a)return;a=a.clientHeight;!this.state.longInput&&a>l?this.setState({longInput:!0}):this.state.longInput&&a<m&&this.setState({longInput:!1})}});e.exports=c}),null);
__d("M4IconSettings.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconSettings");function h(a,c,d){var e=a?a[0]:!0,f=c?c[0]:"blue",h={fill:"none",stroke:f,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){var a=!e;return b("ReasonReact.bs").element(0,0,b("M4IconSVG.bs").make([a?b("React").createElement("g",{key:"filled"},b("React").createElement("path",{key:"outer",style:h,d:"M15.5,8.9V7.1l-2.2-0.5c-0.1-0.5-0.3-0.9-0.6-1.3l1.2-1.9l-1.2-1.2l-1.9,1.2C10.3,3,9.9,2.8,9.4,2.7L8.9,0.5\n          \t\t\tH7.1L6.6,2.7C6.1,2.8,5.7,3,5.2,3.2L3.3,2.1L2.1,3.3l1.2,1.9C3,5.7,2.8,6.1,2.7,6.6L0.5,7.1v1.7l2.2,0.5c0.1,0.5,0.3,0.9,0.6,1.3\n          \t\t\tl-1.2,1.9l1.2,1.2l1.9-1.2c0.4,0.2,0.9,0.4,1.3,0.6l0.5,2.2h1.7l0.5-2.2c0.5-0.1,0.9-0.3,1.3-0.6l1.9,1.2l1.2-1.2l-1.2-1.9\n          \t\t\tc0.2-0.4,0.4-0.9,0.6-1.3L15.5,8.9z"}),b("React").createElement("circle",{key:"inner",style:h,cx:"8",cy:"8",r:"2.5"})):b("React").createElement("path",{key:"all",d:"M15.5,8.9V7.1l-2.2-0.5c-0.1-0.5-0.3-0.9-0.6-1.3l1.2-1.9l-1.2-1.2l-1.9,1.2C10.3,3,9.9,2.8,9.4,2.7L8.9,0.5 H7.1L6.6,2.7C6.1,2.8,5.7,3,5.2,3.2L3.3,2.1L2.1,3.3l1.2,1.9C3,5.7,2.8,6.1,2.7,6.6L0.5,7.1v1.7l2.2,0.5c0.1,0.5,0.3,0.9,0.6,1.3 l-1.2,1.9l1.2,1.2l1.9-1.2c0.4,0.2,0.9,0.4,1.3,0.6l0.5,2.2h1.7l0.5-2.2c0.5-0.1,0.9-0.3,1.3-0.6l1.9,1.2l1.2-1.2l-1.2-1.9 c0.2-0.4,0.4-0.9,0.6-1.3L15.5,8.9z M8,11c-1.7,0-3-1.3-3-3c0-1.7,1.3-3,3-3c1.7,0,3,1.3,3,3C11,9.7,9.7,11,8,11z",fill:f,stroke:f})]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h([a.filled],[a.color],[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("ChatTabMenuBootloader.react",["cssVar","cx","fbt","AutoFocusableLink.react","BootloadOnInteraction.react","CurrentUser","FantaTypeComposer","JSResource","LazyComponent.react","M4IconSettings.bs","MessengerState.bs","React","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("M4IconSettings.bs").jsComponent;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){var a=this.props,c=a.highlightNewMessage,d=a.isFocused;a=a.threadID;a=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),a);a=a&&a.header_color||"#0084ff";c=c?"#FFFFFF":d?a:"#bec2c9";d=i._("Options");return b("React").createElement("div",{className:"_461_",ref:"menu"},b("React").createElement(b("BootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("ChatTabMenu.react").__setRef("ChatTabMenuBootloader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{"aria-label":d,role:"button"},b("React").createElement(k,{filled:!0,color:c}))}))};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("MessengerHoverCardLink",["URI"],(function(a,b,c,d,e,f){var g={getBaseURI:function(){return new(b("URI"))("/ajax/hovercard/chat.php")},constructEndpoint:function(a){return new(b("URI"))(g.getBaseURI()).setQueryData({id:a.id,type:"chat"})}};e.exports=g}),null);
__d("ChatTitleLink.react",["cx","ChatEditParticipantsUtils","Link.react","MercuryIDs","MercuryThreadTitle.react","MessengerAdminGroupUtils","MessengerHoverCardLink","React","TrackingNodes","UserAgent","gkx","goURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatTitleLink",propTypes:{href:a.string,isNewMessageTab:a.bool,thread:a.object,viewer:a.string},getDefaultProps:function(){return{href:null}},getTitle:function(){return this.refs.threadTitle.getTitle()},render:function(){if(!this.props.thread)return null;var a=this.props,c=a.href,d=a.thread,e=a.viewer;a=babelHelpers.objectWithoutProperties(a,["href","thread","viewer"]);var f="";b("gkx")("AT6Pi2a8MKJnWbIzTtkE83l3SQto_q6iFEUcjRzrX_KWbZvaeUi7XiJBSppF6WZHWLawAEgGrQhXyShvNLt7lgt3")&&d&&d.thread_id&&(f=b("MessengerHoverCardLink").constructEndpoint({id:b("MercuryIDs").getThreadFBIDFromThreadID(d.thread_id)}));return b("React").createElement(h,babelHelpers["extends"]({className:"titlebarText"+(b("UserAgent").isBrowser("Chrome")&&!b("UserAgent").isPlatform("Windows")?" fixemoji":"")+(c===null?" noLink":""),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.TITLE),"data-hover":"tooltip",onClick:function(a){return this._handleClick(a)}.bind(this),"data-hovercard":f.toString(),href:c},a),b("React").createElement(b("MercuryThreadTitle.react"),{ref:"threadTitle",isNewThread:this.props.isNewMessageTab,thread:d,useAndSeparator:!0,useShortName:!d.is_canonical,viewer:e}))},_handleClick:function(a){var c=this.props,d=c.href;c=c.thread;if(!d)return;c&&c.associated_object?b("goURI")(d):b("MessengerAdminGroupUtils").showParticipantsModal(c.is_canonical,this.props.isNewMessageTab,c)&&(b("ChatEditParticipantsUtils").showParticipantsModal(c.thread_id),a.preventDefault())}});var h=function(a){return a.href?b("React").createElement(b("Link.react"),a):b("React").createElement("span",a)};e.exports=c}),null);
__d("MercuryTypingAnimation.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a="_4a0v _1x3z";return b("React").createElement("div",{className:b("joinClasses")(this.props.className,a)},b("React").createElement("div",{className:"_4b0g"},b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"})))};function a(){h.apply(this,arguments)}a.propTypes={color:c.oneOf(["light","dark"])};a.defaultProps={color:"dark"};e.exports=a}),null);
__d("ChatTypingIndicator.react",["cx","fbt","Image.react","MercuryConfig","MercuryIDs","MercuryTypingAnimation.react","MessengerParticipants.bs","MessengerPersonas.bs","QE2Logger","React","ReactComponentWithPureRenderMixin"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatTypingIndicator",mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{isOnline:a.bool,userID:a.string,showName:a.bool},componentDidMount:function(){b("QE2Logger").logExposureForUser("messenger_growth_tombstone")},render:function(){var a,c=this.getPersona();this.props.userID&&(a=b("MessengerParticipants.bs").getNow(this.props.userID));if(!a&&!c)return null;var d=b("MercuryConfig").GDWC&&!!this.props.isOnline;return b("React").createElement("div",{className:"_4tdt"},i(a,c,d),this._renderBubble())},getBubble:function(){return this.refs.bubble},getPersona:function(){var a=this.props.userID;return!a?null:b("MessengerPersonas.bs").getNow(b("MercuryIDs").getUserIDFromParticipantID(a))},_renderBubble:function(){var a=this.props.showName;return b("React").createElement("div",{className:"_4tdv"},b("React").createElement("div",{className:"_5wd4 _1nc7 _2cnu"+(a?" _5ysy":"")},b("React").createElement("div",{className:"_5wd9 _n4o"},b("React").createElement("div",{className:"_5w1r _5wdf _3_om"},b("React").createElement(b("MercuryTypingAnimation.react"),{className:"_5x7x",ref:"bubble"})))))}});function i(a,c,d){var e=c?c.name:a?a.name:null;c=c?c.profile_picture_url:a?a.image_src:null;a=a?a.href:null;e=h._("{name}",[h._param("name",e)]);return b("React").createElement("div",{className:"_31o4 _3njy"},b("React").createElement("a",{"aria-label":e,className:"_4tdw","data-hover":"tooltip","data-tooltip-content":e,"data-tooltip-position":"left",href:a||"#",ref:"link"},b("React").createElement(b("Image.react"),{src:c,ref:"image"})),d?b("React").createElement("div",{className:"_sce"}):null)}e.exports=c}),null);
__d("ChatTypingIndicators.react",["cx","fbt","ChatTypingIndicator.react","CurrentUser","DOM","MercuryIDs","MessengerParticipants.bs","MessengerPersonas.bs","MessengerState.bs","React","ReactDOM","TooltipData","emptyFunction","gkx","immutable"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatTypingIndicators",propTypes:{indicatorClass:a.func,indicatorsDidShow:a.func,indicatorsDidHide:a.func,onlineUsers:a.instanceOf(b("immutable").List),rootClassName:a.string,threadID:a.string.isRequired,viewer:a.string.isRequired,typingUserIDs:a.arrayOf(a.string.isRequired).isRequired},getDefaultProps:function(){return{indicatorClass:b("ChatTypingIndicator.react"),indicatorsDidShow:b("emptyFunction"),indicatorsDidHide:b("emptyFunction")}},shouldComponentUpdate:function(a){__p&&__p();var b=new Set(a.typingUserIDs),c=new Set(this.props.typingUserIDs);if(b.size!==c.size)return!0;for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;if(!c.has(f))return!0}return a.threadID!==this.props.threadID||a.viewer!==this.props.viewer||a.onlineUsers!==this.props.onlineUsers||a.rootClassName!==this.props.rootClassName},componentDidUpdate:function(){this.props.typingUserIDs.length>0?this.props.indicatorsDidShow():this.props.indicatorsDidHide(),b("MessengerParticipants.bs").getMulti(this.props.typingUserIDs,function(a){this.isMounted()&&this.props.typingUserIDs.forEach(function(c){var d=a[c],e=this.refs[c]&&this.refs[c].getBubble();if(e&&d){c=b("MessengerPersonas.bs").getNow(b("MercuryIDs").getUserIDFromParticipantID(c));c=c?c.name:d.short_name;b("TooltipData").set(b("ReactDOM").findDOMNode(e),this.renderTooltip(c),"above","left")}}.bind(this))}.bind(this))},_renderContent:function(){var a=b("MercuryIDs").isGroupChat(this.props.threadID);return b("React").createElement("div",{className:this.props.rootClassName},Array.from(this.props.typingUserIDs).sort().map(function(b){return this._renderTypingIndicator(b,!!a)}.bind(this)))},render:function(){if(!b("MercuryIDs").isValid(this.props.threadID))return null;var a=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),this.props.threadID);if(a&&!a.is_subscribed)return null;if(!b("CurrentUser").isWorkUser()&&b("gkx")("AT4vZBWyiZL1KZrir2lJt4vVNMIYu8sDbA3PtNwJWZh5seJSYZeYdmCgqH3wgiUS4PfslnEPm3wz9jSsjDINBCSy"))return b("React").createElement("div",{className:"_4gd0"},this._renderContent());else return this._renderContent()},_renderTypingIndicator:function(a,c){var d=this.props.indicatorClass,e=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(b("MercuryIDs").getUserIDFromParticipantID(a));return b("React").createElement(d,{key:a,ref:a,showName:c,userID:a,isOnline:e})},renderTooltip:function(a){var c=b("DOM").create("span");b("ReactDOM").render(b("React").createElement("span",null,h._("{name} is typing...",[h._param("name",a)])),c);return c}});e.exports=c}),null);
__d("ChatTypingIndicatorsWrapper.react",["ChatTypingIndicators.react","MessengerState.bs","React","immutable"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){"use strict";return b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:this.props.viewer},function(a){return b("React").createElement(b("ChatTypingIndicators.react"),{indicatorClass:this.props.indicatorClass,indicatorsDidHide:this.props.indicatorsDidHide,indicatorsDidShow:this.props.indicatorsDidShow,onlineUsers:this.props.onlineUsers,rootClassName:this.props.rootClassName,threadID:this.props.threadID,typingUserIDs:Object.keys(b("MessengerState.bs").typing(a)[this.props.threadID]||{}),viewer:this.props.viewer})}.bind(this))};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("M4IconCamcorder.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconCamcorder");function h(a,c,d){var e=a?a[0]:!0,f=c?c[0]:"blue",h={fill:e?f:"none",stroke:f};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("ReasonReact.bs").element(0,0,b("M4IconSVG.bs").make([b("React").createElement("path",{key:"body",style:h,d:"M9.5,13.5h-7c-1.1,0-2-0.9-2-2v-7c0-1.1,0.9-2,2-2h7c1.1,0,2,0.9,2,2v7C11.5,12.6,10.6,13.5,9.5,13.5z"}),b("React").createElement("line",{key:"focus-ring",stroke:e?"none":f,x1:"13.5",x2:"13.5",y1:"5",y2:"11"}),b("React").createElement("path",{key:"lens",style:h,d:"M15,3.6l-3.5,3V8v1.4l3.5,3c0.2,0.2,0.5,0,0.5-0.3V8V3.9C15.5,3.6,15.2,3.4,15,3.6z"})]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h([a.filled],[a.color],[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("M4IconPhone.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconPhone");function h(a,c,d){d=a?a[0]:!0;a=c?c[0]:"blue";var e={fill:d?a:"none",stroke:a};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("ReasonReact.bs").element(0,0,b("M4IconSVG.bs").make([b("React").createElement("path",{key:"all",style:e,d:"M8.8,11.6c0.1,0,0.1,0.1,0.2,0.1c0.4,0.2,0.8,0.1,1-0.3c0.1-0.2,0.2-0.4,0.3-0.6c0.2-0.2,0.5-0.6,0.8-0.7 C11.5,10,11.8,10,12,10c0.4,0,0.9,0.4,1.6,0.8c0.7,0.4,1.2,0.8,1.5,1c0.2,0.2,0.3,0.4,0.3,0.6c0,0.4,0,1.2-0.7,1.9 c-1,1.1-2.5,1.6-4.3,1c-1.8-0.6-4.1-1.7-6-3.7s-3.1-4.2-3.7-6s-0.2-3.3,1-4.3c0.7-0.6,1.4-0.7,1.9-0.7c0.2,0,0.5,0.1,0.6,0.3 c0.2,0.3,0.6,0.8,1,1.5C5.7,3.1,6,3.6,6,4c0,0.3,0,0.6-0.1,0.8C5.8,5.1,5.5,5.4,5.2,5.6C5,5.8,4.8,5.9,4.7,6C4.3,6.1,4.1,6.6,4.3,7 c0,0.1,0.1,0.1,0.1,0.2C5.5,9,7,10.5,8.8,11.6z"})]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h([a.filled],[a.color],[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("ChatVideoCallButtonBootloader.react",["cx","AutoFocusableLink.react","BootloadOnInteraction.react","JSResource","LazyComponent.react","M4IconCamcorder.bs","M4IconPhone.bs","React","requireWeak"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("M4IconCamcorder.bs").jsComponent,j=b("M4IconPhone.bs").jsComponent;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.state={RTCComponent:null},b}a.prototype.componentDidMount=function(){this.$1=!0,b("requireWeak")("ChatVideoCallButton.react",function(a){this.$1&&this.setState({RTCComponent:a})}.bind(this))};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.render=function(){var a=this.props.isAudio,c=this.state.RTCComponent;return b("React").createElement("div",{className:"_3a61"+(a?" _461a":"")+(a?"":" _461b"),key:"rtc"+(a?"audio":"video")},c?b("React").createElement(c,this.props):b("React").createElement(b("BootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("ChatVideoCallButton.react").__setRef("ChatVideoCallButtonBootloader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{role:"button"},a?b("React").createElement(j,{color:this.props.color,filled:!0}):b("React").createElement(i,{color:this.props.color,filled:!0}))}))};e.exports=a}),null);
__d("XUIAmbientNUXTheme",["cx"],(function(a,b,c,d,e,f,g){a={wrapperClassName:"_2x6q",arrowDimensions:{offset:14,length:18}};e.exports=a}),null);
__d("ChatTabHeader.react",["ix","cx","fbt","AutoFocusableLink.react","Bootloader","BootloadOnRender.react","ChatCloseButton.react","ChatTitleLink.react","EventPlanExperiment","EventReminderStateStore","FantaTypeComposer","Image.react","JSResource","LayerFadeOnHide","LazyComponent.react","LoadOnRender.react","MercuryBootloadOnInteraction.react","MercuryIDs","MercuryThreadInfo","MercuryTypingAnimation.react","MessageRequestUtils","MessagingTag","MessengerAdminGroupUtils","MessengerJoinableModeType","React","SimpleNUXMessage","TooltipData","WorkChatAvailabilityStatusLoader","XUIAmbientNUX.react","asset","gkx","immutable","requireWeak"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;var k="118809038721180",l=function(a){b("Bootloader").loadModules(["ArchiveWarningReact.bs"],function(b){b=b.jsComponent;return a(b)},"ChatTabHeader.react")},m=b("gkx")("AT7esXHVKl_rB1r5C-zEkmCVhZJMRd4NQJBo-b1EyRH6vUNk2XZEcNJ3WOEvumLbmsR6a_bwkl5o0d60WUY3jm1v");d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(a){j.constructor.call(this,a),this.$1=!1,this.$4=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.props.onClick.apply(null,b)}.bind(this),this.$15=function(){return this.refs.menu}.bind(this),this.$16=function(){b("SimpleNUXMessage").markMessageSeenByUser(k),this.setState({eventPlanNuxSeen:!0})}.bind(this),this.state={eventPlanNuxSeen:b("SimpleNUXMessage").hasUserSeenMessage(k)}}a.prototype.componentDidMount=function(){this.$1=!0,b("requireWeak")("ChatVideoCallButton.react",function(a){this.$1&&this.setState({RTCComponent:a})}.bind(this))};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.render=function(){var a=this.$3(),c=this.props.isRaised;return b("React").createElement("div",{className:"_15p4"+(this.props.isRaised?"":" _15p5")+(c||!a?" _2pis":""),onMouseUp:this.$4,ref:"root"},b("React").createElement("div",{"aria-level":"2",className:"titlebarTextWrapper _15p6",role:"heading"},b("React").createElement("div",{className:"_61td",role:c?"presentation":"button",tabIndex:c?-1:0},a,this.$5()),this.props.isTyping&&!this.props.isRaised?b("React").createElement(b("MercuryTypingAnimation.react"),{className:"_15p8",color:"dark"}):null),b("React").createElement("ul",{className:"_32ca"+(m?" _2qi8":"")},this.$6(),b("React").createElement("li",{className:"_32cb"},b("React").createElement(b("ChatCloseButton.react"),{active:this.props.isActive,className:"_3olu _3olv",onClick:this.props.onCloseClick}))))};a.prototype.focus=function(){this.refs.root&&this.refs.root.focus()};a.prototype.$7=function(){return this.props.thread?b("MessageRequestUtils").isMessageRequest(this.props.thread):!1};a.prototype.$6=function(){if(!this.props.isRaised)return null;var a=[this.$8(),this.$9(),this.$10(),this.$11(),this.$12(),this.$13()];return a.filter(Boolean)};a.prototype.$12=function(){return this.$14({isAudio:!0})};a.prototype.$11=function(){return this.$14({isAudio:!1})};a.prototype.$14=function(a){__p&&__p();if(this.props.isEmptyChat||this.$7())return null;var c=this.props,d=c.isGroupChat,e=c.onRTCNuxCloseButtonClick,f=c.rtcNuxShown,g=c.thread,h=c.threadID;c=c.viewer;if(d){if(!g||g.participants.length<=1||!b("MercuryThreadInfo").canReply(g))return null;if(g.joinable_mode&&g.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE)return null}d=babelHelpers["extends"]({isGroupChat:d,onRTCNuxCloseButtonClick:e,rtcCallData:g&&g.rtc_call_data,rtcNuxShown:f&&a.isAudio,threadID:h,thread:g,viewer:c},a);d.className="_3olv"+(d.isAudio?" _2fpc":"")+(d.isAudio?"":" _2fpd");e=this.state.RTCComponent;return b("React").createElement("li",{className:"_3a61"+(d.isAudio?" _461a":"")+(d.isAudio?"":" _461b"),key:"rtc"+(d.isAudio?"audio":"video")},e?b("React").createElement(e,d):b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),d),loader:b("JSResource")("ChatVideoCallButton.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:d.className,role:"button"})}))};a.prototype.$13=function(){__p&&__p();var a=this.props,c=a.thread;a=a.isNewMessageTab;if(a||!!c&&c.folder===b("MessagingTag").PENDING)return null;a={attachmentsShelf:this.props.attachmentsShelf,composer:this.props.composer,hasBlockedMessages:this.props.hasBlockedMessages,isGroupChat:this.props.isGroupChat,isMultiCompany:this.props.isMultiCompany,isMuted:this.props.isMuted,isPageChat:this.props.isPageChat,membershipParticipants:this.props.membershipParticipants,participants:this.props.participants,sheetController:this.props.sheetController,thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer};a.className="_3olv _1ll-";c=i._("Options");var d=!1;if(this.props.threadID){var e=b("EventReminderStateStore").getEvent(this.props.threadID);d=e&&!e.exists&&!this.state.eventPlanNuxSeen&&b("EventPlanExperiment").shouldShowEntryPointNuxWithExposure()}return b("React").createElement("div",{key:"menu"},b("React").createElement("li",{className:"_3a61 _461_",ref:"menu"},b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),a),loader:b("JSResource")("ChatTabMenu.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a.className,"aria-label":c,role:"button"})})),b("React").createElement(b("XUIAmbientNUX.react"),{alignment:"right",behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},contextRef:this.$15,onCloseButtonClick:this.$16,shown:d,width:"auto"},i._("Click here to start a new plan.")))};a.prototype.$10=function(){if(this.props.isNewMessageTab||this.props.isPageChat||this.props.isMultiCompany&&!this.props.isGroupChat||this.$7())return null;var a={className:"_3olv _3jyj",isFBAtWork:this.props.isWorkUser,shouldAddToApprovalQueue:b("MessengerAdminGroupUtils").shouldAddToApprovalQueue(this.props.thread,this.props.viewer),shown:!0,onClick:function(){return this.props.sheetController.openAddFriendsSheet()}.bind(this),thread:this.props.thread,viewer:this.props.viewer},c=i._("Add");return b("React").createElement("li",{className:"_3a61 _4620",key:"add"},b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),a),loader:b("JSResource")("ChatAddToThreadButton.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{"aria-label":c,className:a.className,role:"button"})}))};a.prototype.$8=function(){if(!this.props.isViewerEmployee)return null;var a=this.props.participants;a=a?a.length>0&&a.every(function(a){return!!(a&&a.employee)}):!1;return!a?null:b("React").createElement("li",{key:"archiveWarning"},b("React").createElement(b("LoadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{shown:!0}),loader:l,placeholder:b("React").createElement("div",null)}))};a.prototype.$9=function(){if(!this.props.isWorkUser||!this.props.isMultiCompany)return null;var a=i._("Multi company chat");return b("React").createElement("li",{key:"multiCompanyBadge"},b("React").createElement("div",{className:"_3olv"},b("React").createElement(b("AutoFocusableLink.react"),babelHelpers["extends"]({className:"_kp6",onClick:this.props.onClick,lable:a,role:"presentation"},b("TooltipData").propsFor(a,"above")))))};a.prototype.$17=function(){return b("React").createElement("span",{className:"_3a61"+(this.props.isRaised?"":" _3-99")},b("React").createElement("span",{className:"_3olv _2nlt"}))};a.prototype.$18=function(){__p&&__p();if(!b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6"))return null;var a=this.props.threadID?b("MercuryIDs").getUserIDFromThreadID(this.props.threadID):null;if(!this.props.participants)return null;var c=this.props.participants.filter(function(b){return b.fbid===a})[0];if(!c)return null;c=b("WorkChatAvailabilityStatusLoader").isLoaded()&&a?b("WorkChatAvailabilityStatusLoader").getStoreEnforce().getDescriptionWithUserName(c.short_name,a):"";return b("React").createElement("span",{className:"_4jft"},b("React").createElement(b("Image.react"),{"data-tooltip-content":c,"data-hover":"tooltip",src:g("550341")}))};a.prototype.$5=function(){var a=this.props.thread,c=this.props.tooltip;b("gkx")("AT6Pi2a8MKJnWbIzTtkE83l3SQto_q6iFEUcjRzrX_KWbZvaeUi7XiJBSppF6WZHWLawAEgGrQhXyShvNLt7lgt3")&&a&&a.is_canonical&&(c="");return b("React").createElement(b("ChatTitleLink.react"),babelHelpers["extends"]({href:this.props.isRaised?this.props.href:undefined,isNewMessageTab:this.props.isNewMessageTab,thread:this.props.thread,viewer:this.props.viewer},b("TooltipData").propsFor(c,"above")))};a.prototype.$3=function(){var a=this.props,c=a.isRaised;a=a.thread;return!c&&a&&a.unread_count>0?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:"_3-8_ _3-99",count:a.unread_count,type:"special"}),loader:b("JSResource")("XUIBadge.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement("span",null)}):b("React").createElement(b("React").Fragment,null,this.$18(),this.$17())};a.propTypes={attachmentsShelf:c.object.isRequired,composer:c.object,hasBlockedMessages:c.bool.isRequired,href:c.string,isActive:c.bool.isRequired,isEmptyChat:c.bool,isGroupChat:c.bool,isMuted:c.bool,isPageChat:c.bool,isRaised:c.bool,isTyping:c.bool,isViewerEmployee:c.bool,isWorkUser:c.bool,onClick:c.func.isRequired,onCloseClick:c.func.isRequired,onRTCNuxCloseButtonClick:c.func.isRequired,participants:c.arrayOf(c.object),rtcNuxShown:c.bool.isRequired,sheetController:c.object.isRequired,thread:c.object,threadID:c.string,tooltip:c.string,viewer:c.string.isRequired};e.exports=a}),null);
__d("getGroupNameTooltipFromParticipantIDs",["fbt","MercuryViewer","MessengerParticipants.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=10,i="\n";function a(a,c){__p&&__p();var d=[],e=b("MercuryViewer").getID();a=a&&a.filter(function(a){return a!==e});if(!a||!a.length){c(null);return}var f=a.length,j=f-h;j>1&&(a=a.slice(0,h));b("MessengerParticipants.bs").getMulti(a,function(a){for(var b in a){var e=a[b];d.push(e.name)}if(j>1){e=g._("and {number of hidden chat participants} more.",[g._param("number of hidden chat participants",j)]);d.push(e)}c(d.join(i))})}function c(a){__p&&__p();var c=[],d=b("MercuryViewer").getID();a=a&&a.filter(function(a){return a!==d});if(!a||!a.length)return null;c=a.map(function(a){a=b("MessengerParticipants.bs").getNow(a);return a&&a.name}).filter(function(a){return!!a});a=a.length-(a.length-c.length)-h;if(a>1){c=c.slice(0,h);a=g._("and {number of hidden chat participants} more.",[g._param("number of hidden chat participants",a)]);c.push(a)}return c.join(i)}e.exports={getGroupNameTooltipFromParticipantIDs:c,getGroupNameTooltipFromParticipantIDsAsync:a}}),null);
__d("ChatTabHeaderContainer.react",["ChatTabHeader.react","CurrentUser","FantaTypeComposer","MercuryIDs","MercuryThreadInfo","React","WorkModeConfig","getGroupNameTooltipFromParticipantIDs","getPageIDFromThreadID","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("getGroupNameTooltipFromParticipantIDs").getGroupNameTooltipFromParticipantIDs;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(a){g.constructor.call(this,a),this.state=this.calculateState(a)}a.prototype.calculateState=function(a){var c=!1,d;a.threadID&&(c=b("MercuryIDs").isGroupChat(a.threadID),d=b("getPageIDFromThreadID")(a.threadID));return{isGroupChat:c,pageID:d}};a.prototype.componentDidMount=function(){this.props.onMount&&this.props.onMount(this)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.calculateState(a))};a.prototype.render=function(){var a=this.props.participants&&this.props.participants.toList().toArray(),c=this.props.thread,d;c&&(d=h(c.participants));var e=c&&c.participants&&c.participants.length===0;return b("React").createElement(b("ChatTabHeader.react"),{attachmentsShelf:this.props.attachmentsShelf,composer:this.props.composer,hasBlockedMessages:this.props.hasBlockedMessages,href:this.props.href,isActive:this.props.isActive,isEmptyChat:e,isGroupChat:this.state.isGroupChat,isMultiCompany:this.props.isMultiCompany,isMuted:!!c&&b("MercuryThreadInfo").isMuted(c),isNewMessageTab:this.props.isNewMessageTab,isPageChat:!!this.state.pageID,isRaised:this.props.isRaised,isTyping:this.props.isTyping,isViewerEmployee:b("CurrentUser").isEmployee(),isWorkUser:!!b("WorkModeConfig").is_work_user,membershipParticipants:this.props.membershipParticipants,onClick:this.props.onClick,onCloseClick:this.props.onCloseClick,onRTCNuxCloseButtonClick:this.props.onRTCNuxCloseButtonClick,participants:a,ref:"header",rtcNuxShown:this.props.rtcNuxShown,sheetController:this.props.sheetController,thread:c,threadID:this.props.threadID,tooltip:d,viewer:this.props.viewer})};a.prototype.focus=function(){this.refs.header.focus()};a.propTypes={attachmentsShelf:c.object.isRequired,composer:c.object,isActive:c.bool.isRequired,isRaised:c.bool,isTyping:c.bool,onClick:c.func.isRequired,onCloseClick:c.func.isRequired,onMount:c.func,onRTCNuxCloseButtonClick:c.func.isRequired,rtcNuxShown:c.bool.isRequired,sheetController:c.object.isRequired,thread:c.object,threadID:c.string,viewer:c.string.isRequired};e.exports=a}),null);
__d("MercuryTypeaheadDataSource",["CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles","WorkModeConfig"],(function(a,b,c,d,e,f){__p&&__p();var g,h=[],i={},j={},k={},l=[],m=!1,n=!1;c=babelHelpers.inherits(a,b("DataSource"));g=c&&c.prototype;function a(a){"use strict";a=a||{},a.kanaNormalization=!0,g.constructor.call(this,a),this.showDefaultList=a.showDefaultList||!1}a.prototype.dirty=function(){"use strict";this.$MercuryTypeaheadDataSource1=h;this.localCache=j;this.queryCache=i;this.queryIDs=k;this.defaultList=l;return this};a.prototype.bootstrap=function(){"use strict";if(m||n)return!1;n=!0;b("ShortProfiles").fetchAll().then(function(){this.updateBootstrapData(),n=!1,m=!0,this.showDefaultList&&this.inform("show-default",{impressions:this.defaultList})}.bind(this),function(){}.bind(this));return!0};a.prototype.updateBootstrapData=function(){"use strict";__p&&__p();var a=this.getCachedShortProfileIDs(),c=b("WorkModeConfig").is_work_user?b("MercuryParticipantTypes").FB4C:b("MercuryParticipantTypes").FRIEND;a=a.map(function(a){var d=b("ShortProfiles").getNow(a),e=a==b("CurrentUser").getID()?c:d.type,f=[d.additionalName,d.alternateName].concat(d.searchTokens||[]).join(" "),g=d.name,h=null;return{uid:a,index:b("OrderedFriendsList").getActiveRank(a),text:g,subtext:h,tokens:f,localized_text:d.name,additional_text:d.additionalName,photo:d.thumbSrc,render_type:e,type:b("MercuryTypeaheadConstants").USER_TYPE}});a.length&&this.addEntries(a);if(!this.showDefaultList)return;a=a.sort(function(a,b){return a.index-b.index}).slice(0,5);l=this.buildData(a.map(function(a){return a.uid}));this.defaultList=l};a.prototype.query=function(a,b,c,d){"use strict";b=b||a.length===1;return g.query.call(this,a,b,c,d)};a.prototype.getQueryData=function(a,b){"use strict";return babelHelpers["extends"]({},g.getQueryData.call(this,a,b))};a.prototype.setEntry=function(a,b){"use strict";this.$MercuryTypeaheadDataSource1[a]=b};a.prototype.getEntry=function(a){"use strict";return this.$MercuryTypeaheadDataSource1[a]||null};a.prototype.getCachedShortProfileIDs=function(){"use strict";var a=b("ShortProfiles").getCachedProfileIDs();a=a.filter(function(a){var c=b("ShortProfiles").getNow(a);return a==b("CurrentUser").getID()||c.type===b("MercuryParticipantTypes").FRIEND||c.type===b("MercuryParticipantTypes").FB4C});return a};a.prototype.isBootstrapped=function(){"use strict";return m};a.prototype.isBootstrapping=function(){"use strict";return n};a.prototype.processEntries=function(a,c){"use strict";a=a.map(function(a){a.index==null&&(a.render_type===b("MercuryParticipantTypes").FRIEND||a.render_type===b("MercuryParticipantTypes").FB4C)&&(a.index=b("OrderedFriendsList").getActiveRank(a.uid));return a});return g.processEntries.call(this,a)};a.prototype.mergeUids=function(a,b,c,d){"use strict";b=b.sort(function(a,b){return this.getEntry(a).index-this.getEntry(b).index}.bind(this));return g.mergeUids.call(this,a,b,c,d)};a.prototype.setShowDefaultList=function(a){"use strict";this.showDefaultList=a};e.exports=a}),null);
__d("ChatTabTypeaheadDataSource",["MercuryConfig","MercuryTypeaheadConstants","MercuryTypeaheadDataSource"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("MercuryTypeaheadDataSource"));g=c&&c.prototype;function a(a){"use strict";a=a||{},a.maxResults=b("MercuryTypeaheadConstants").COMPOSER_CHATTAB_MAX,a.showDefaultList=b("MercuryConfig").ChatComposer,g.constructor.call(this,a),this.$ChatTabTypeaheadDataSource1=!0}a.prototype.buildData=function(a){"use strict";__p&&__p();var c=[],d=[],e=[],f=[],h=[],i=[],j=[],k=!this.$ChatTabTypeaheadDataSource1;a.forEach(function(a){__p&&__p();var i=g.getEntry.call(this,a);switch(i.render_type){case b("MercuryTypeaheadConstants").FRIEND_TYPE:c.push(a);break;case b("MercuryTypeaheadConstants").THREAD_TYPE:this.$ChatTabTypeaheadDataSource1&&d.push(a);break;case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:e.push(a);break;case b("MercuryTypeaheadConstants").FB4C_TYPE:f.push(a);break;case b("MercuryTypeaheadConstants").PAGE_TYPE:k||h.push(a);break;case b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:i=!k||i.can_add_to_group_chat;i&&j.push(a);break;default:break}}.bind(this),this);a=i.concat(c,f,d,h,e,j);return g.buildData.call(this,a)};a.prototype.query=function(a,b,c,d){"use strict";return g.query.call(this,a,b,c,d)};a.prototype.respond=function(a,b,c){"use strict";return g.respond.call(this,a,b,c)};a.prototype.setShowThreads=function(a){"use strict";this.$ChatTabTypeaheadDataSource1=a};e.exports=a}),null);
__d("MercuryCanonicalGroupThreadManager",["Bootloader","KeyedCallbackManager","MercuryIDs","MercuryPayloadSource","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MessengerServerPayloadTransformer.bs","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=new(b("KeyedCallbackManager"))(),this.$3=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.$4={},this.$7(),this.$8(),this.$6={}}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.getCanonicalGroupThreadIDForParticipants=function(a,b){a=this.$9(a);var c=this.$10(a);c=this.$2.executeOrEnqueue(c,b);this.$11(a);return c};a.prototype.unsubscribe=function(a){a&&this.$2.unsubscribe(a)};a.prototype.$10=function(a){return a.sort().join(",")};a.prototype.$12=function(a,c){c=b("MercuryIDs").getThreadIDFromThreadFBID(c);this.$2.setResource(a,c);this.$4[c]=a};a.prototype.$11=function(a){var c=this.$10(a);c={canonical_group_key:c,participants:a};b("MercuryServerDispatcher").trySend("/ajax/mercury/search_canonical_groups.php",c,null,this.$1)};a.prototype.$7=function(){b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_canonical_groups.php":{request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a){this.handleUpdate(a)}.bind(this)}})};a.prototype.$9=function(a){a.indexOf(this.$1)===-1&&a.push(this.$1);return a};a.prototype.handleUpdate=function(a){if(a.graphql_payload){var c=b("MessengerServerPayloadTransformer.bs").transformThread(a.viewer,a.graphql_payload,a.for_page);this.$3.handleUpdate({threads:[c],payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}c=a.canonical_group;if(c)for(var d in c)this.$12(d,c[d])};a.prototype.getNow=function(a){a=this.$10(this.$9(a));return this.$2.getResource(a)};a.prototype.$8=function(){b("Bootloader").loadModules(["MercuryThreadInformer"],function(a){a=a.getForFBID(this.$1);var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(a.subscribe("threads-deleted",function(a,b){for(var c in b)this.$4[c]&&(this.$2.setResource(this.$4[c],undefined),delete this.$4[c])}.bind(this)));this.$5=c}.bind(this),"MercuryCanonicalGroupThreadManager")};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("FantaGetMessageActions",["FantaDispatcher","MercuryCanonicalGroupThreadManager","MercuryIDs","MercuryTypeaheadConstants","keyMirror","requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("requireWeak")("FantaAppStore",function(a){return g=a});var h=b("keyMirror")({ADD_PARTICIPANTS:null,CLEAR_PARTICIPANTS:null,CLEAR_PREVIEW:null,FETCH_MORE_MESSAGES:null,ON_BOOTLOAD_TYPEAHEAD:null,ON_GET_PARTICIPANT_RESPONSE:null,ON_GET_THREAD_PREVIEW_RESPONSE:null,ON_GET_THREAD_RESPONSE:null,ON_MESSAGE_STORE_RESPONSE:null,ON_PAGE_NULL_RESPONSE:null,ON_PRIVACY_STATE_CHANGE:null,ON_SHOW_CONTEXT_BANNER_TIMER:null,ON_GET_THREAD_HREF_RESPONSE:null,REFRESH_THREAD:null,THREADS_UPDATED:null});a={Types:h,addParticipants:function(a,c){__p&&__p();var d=c.length===1&&c[0].getInfo().render_type===b("MercuryTypeaheadConstants").THREAD_TYPE,e;if(d){d=c[0].getInfo().mercury_thread;d&&(e=b("MercuryIDs").getThreadIDFromThreadFBID(d.thread_fbid))}else if(c.length===1){d=c[0].info&&c[0].info.uid;d&&(e=b("MercuryIDs").getThreadIDFromUserID(d))}else if(c.length===0){b("FantaDispatcher").dispatch({type:h.CLEAR_PARTICIPANTS,tabID:a});return}else{var f=b("MercuryCanonicalGroupThreadManager").get();d=c.map(function(a){return a.info.uid});b("FantaDispatcher").dispatch({type:h.CLEAR_PREVIEW,tabID:a,tokens:c});var i=f.getCanonicalGroupThreadIDForParticipants(Array.from(d),function(d){f.unsubscribe(i);if(g){var e=g.getState();if(!e.tabGroup.tabs.get(a))return}d&&b("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:d,tabID:a,tokens:c})})}e&&b("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:e,tabID:a,tokens:c})},onBootloadTypeahead:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_BOOTLOAD_TYPEAHEAD,tabID:a,thread:c})},fetchMoreMessages:function(a){b("FantaDispatcher").dispatch({type:h.FETCH_MORE_MESSAGES,threadID:a})},refreshThread:function(a){b("FantaDispatcher").dispatch({type:h.REFRESH_THREAD,threadID:a})},onGetThreadResponse:function(a){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_RESPONSE,thread:a})},onGetThreadPreviewResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_PREVIEW_RESPONSE,tabID:a,thread:c})},onParticipantResponse:function(a){b("FantaDispatcher").dispatch({type:h.ON_GET_PARTICIPANT_RESPONSE,tabID:a})},onShowContextBannerTimer:function(a){b("FantaDispatcher").dispatch({type:h.ON_SHOW_CONTEXT_BANNER_TIMER,threadID:a})},onMessageStoreResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_MESSAGE_STORE_RESPONSE,messages:a,tabID:c})},threadsUpdated:function(a){b("FantaDispatcher").dispatch({type:h.THREADS_UPDATED,threads:a})},onPrivacyStateChange:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_PRIVACY_STATE_CHANGE,threadID:a,privacyState:c})},onPageNullResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_PAGE_NULL_RESPONSE,threadID:a,nullStateCTA:c})},onGetThreadHrefResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_HREF_RESPONSE,tabID:a,href:c})}};e.exports=a}),null);
__d("FantaTabSheetActions",["FantaDispatcher","LogHistory","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CLOSE_ADD_FRIENDS_SHEET:null,CLOSE_ADD_MORE_FRIENDS_SHEET:null,CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:null,CLOSE_EMPLOYEE_WORK_USER_SHEET:null,CLOSE_NAME_CONVERSATION_TAB_SHEET:null,CLOSE_READ_ONLY_PERMANENT_SHEET:null,CLOSE_READ_ONLY_SHEET:null,CLOSE_USER_FOCUS_AND_BYPASS_SHEET:null,ON_BOOTLOAD_EVENT_REMINDER:null,ON_WORK_DO_NOT_DISTURB_RESPONSE:null,ON_MENTORSHIP_PROGRAM_RESPONSE:null,ON_IS_PAGE_TAB:null,OPEN_ADD_MORE_FRIENDS_SHEET:null,OPEN_APPOINTMENT_SHEET:null,OPEN_BYPASS_FOCUS_SHEET:null,OPEN_EMPLOYEE_AWAY_SHEET:null,OPEN_EMPLOYEE_PERSONAL_USER_SHEET:null,OPEN_EMPLOYEE_WORK_USER_SHEET:null,OPEN_NAME_CONVERSATION_TAB_SHEET:null,OPEN_READ_ONLY_PERMANENT_SHEET:null,OPEN_READ_ONLY_SHEET:null,OPEN_USER_FOCUS_SHEET:null,OPEN_MENTORSHIP_PROGRAM_SHEET:null}),h=b("LogHistory").getInstance("fanta_sheets");function i(a){b("FantaDispatcher").dispatch(a),h.log(a.type,a.tabID)}a={Types:g,openUserFocusSheet:function(a){i({type:g.OPEN_USER_FOCUS_SHEET,tabID:a})},openBypassFocusSheet:function(a){i({type:g.OPEN_BYPASS_FOCUS_SHEET,tabID:a})},closeUserFocusAndBypassSheet:function(a){i({type:g.CLOSE_USER_FOCUS_AND_BYPASS_SHEET,tabID:a})},openAddMoreFriendsSheet:function(a){i({type:g.OPEN_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddMoreFriendsSheet:function(a){i({type:g.CLOSE_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddFriendsSheet:function(a){i({type:g.CLOSE_ADD_FRIENDS_SHEET,tabID:a})},openNameConversationSheet:function(a){i({type:g.OPEN_NAME_CONVERSATION_TAB_SHEET,tabID:a})},closeNameConversationSheet:function(a){i({type:g.CLOSE_NAME_CONVERSATION_TAB_SHEET,tabID:a})},openReadOnlySheet:function(a){i({type:g.OPEN_READ_ONLY_SHEET,tabID:a})},closeReadOnlySheet:function(a){i({type:g.CLOSE_READ_ONLY_SHEET,tabID:a})},openReadOnlyPermanentSheet:function(a){i({type:g.OPEN_READ_ONLY_PERMANENT_SHEET,tabID:a})},closeReadOnlyPermanentSheet:function(a){i({type:g.CLOSE_READ_ONLY_PERMANENT_SHEET,tabID:a})},openEmployeeAwaySheet:function(a){i({type:g.OPEN_EMPLOYEE_AWAY_SHEET,tabID:a})},openEmployeePersonalUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},closeEmployeePersonalUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},openEmployeeWorkUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_WORK_USER_SHEET,tabID:a})},closeEmployeeWorkUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_WORK_USER_SHEET,tabID:a})},openMentorshipProgramSheet:function(a){i({type:g.OPEN_MENTORSHIP_PROGRAM_SHEET,tabID:a})},onIsPageTab:function(a,b){i({type:g.ON_IS_PAGE_TAB,pageIndicator:b,tabID:a})},onBootloadEventReminder:function(a){i({type:g.ON_BOOTLOAD_EVENT_REMINDER,tabID:a})},openAppointmentBannerSheet:function(a){i({type:g.OPEN_APPOINTMENT_SHEET,tabID:a})},onWorkDoNotDisturbResponse:function(a,b,c){i({type:g.ON_WORK_DO_NOT_DISTURB_RESPONSE,tabID:a,status:b,description:c})},onMentorshipProgramResponse:function(a,b,c){i({type:g.ON_MENTORSHIP_PROGRAM_RESPONSE,tabID:a,groupID:c,programName:b})}};e.exports=a}),null);
__d("MercurySheetPolicy",["keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={ChatThreadIsMutedTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatUserFocusSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserFocusBypassSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserBlockedTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatUploadWarningTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatThreadIsMessageBlockedSheet:{isPermanent:!0,isSheetWithInput:!1},ChatReadOnlyTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatReadOnlyPermanentTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatOfflineTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNoRecipientsTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNewMessagesTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatNameConversationTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatEmployeeAwaySheet:{isPermanent:!0,isSheetWithInput:!1},ChatEventReminderTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatAppointmentBanner:{isPermanent:!0,isSheetWithInput:!1},ChatMontageSheet:{isPermanent:!1,isSheetWithInput:!1},ChatJoinCallSheet:{isPermanent:!0,isSheetWithInput:!1},FantaAddFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},FantaAddMoreFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},ChatRoomAssociatedObjectSheet:{isPermanent:!1,isSheetWithInput:!1},ChatMentorshipProgramSheet:{isPermanent:!1,isSheetWithInput:!1},ChatGroupsSyncTabSheet:{isPermanent:!0,isSheetWithInput:!1}};a={canReplaceOpenSheet:function(a,b){var c=this.getType(b),d=this.isPermanent(b);b=this.isSheetWithInput(b);var e=this.getType(a),f=this.isPermanent(a);a=this.isSheetWithInput(a);if(a)return!!(c!==e&&b);if(f&&!d)return!1;return e===this.sheets.ChatThreadIsMessageBlockedSheet?!1:!0},getType:function(a){var b=a.getType||a.type&&a.type.getType||function(){return a};b=b.call(a);return b},isPermanent:function(a){if(typeof a==="string"&&g[a])return g[a].isPermanent;var b=a.isPermanent||a.type&&a.type.isPermanent||function(){return!1};b=b.call(a);return b},isSheetWithInput:function(a){if(typeof a==="string"&&g[a])return g[a].isSheetWithInput;var b=a.isSheetWithInput||a.type&&a.type.isSheetWithInput||function(){return!1};b=b.call(a);return b},sheets:b("keyMirror")(g)};e.exports=a}),null);
__d("MessengerRoomPrivacyMode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WHITELISTED_MODE:0,PUBLIC_MODE:1})}),null);
__d("FantaComposeViewReducers",["Bootloader","FantaGetMessageActions","FantaTabSheetActions","MercuryDataSourceWrapper","MercurySheetPolicy","MercuryTypeaheadConstants","MessengerAdminGroupUtils","MessengerRoomPrivacyMode","ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaGetMessageActions").Types,h=b("FantaTabSheetActions").Types;function a(a,b){switch(b.type){case g.ON_GET_THREAD_RESPONSE:case g.ON_GET_THREAD_PREVIEW_RESPONSE:var c=b.thread;b=b.tabID||c.thread_id;a=i(a,c,b)}return a}function i(a,c,d){c.participants.length===0&&(a=j(a,d,c),a=l(a,d,b("MercurySheetPolicy").sheets.FantaAddFriendsSheet));return a}function c(a,b){switch(b.type){case g.ON_BOOTLOAD_TYPEAHEAD:b=b.thread;var c=b.thread_id;a=j(a,c,b)}return a}function j(a,c,d){__p&&__p();var e=a.mercury.tabContents.get(c);if(!e||e.typeahead)return a;b("ifRequired")("ChatTabTypeaheadRenderer",function(f){__p&&__p();b("ifRequired")("ContextualTypeaheadView",function(g){__p&&__p();b("ifRequired")("MercuryTypeahead",function(h){__p&&__p();if(!a.mercury.tabContents.get(c))return;var i=!!(d&&d.participants&&d.participants.length===0),j=!!(d&&d.associated_object&&d.associated_object.privacy_mode===b("MessengerRoomPrivacyMode").WHITELISTED_MODE),k=i?b("MercuryDataSourceWrapper").chat_typeahead_source:j?b("MercuryDataSourceWrapper").chat_add_people_froup_source:b("MercuryDataSourceWrapper").chat_add_people_source;k.setShowThreads(i);i?k.setShowDefaultList(b("MessengerAdminGroupUtils").showDefaultListForNewChatTab()):j||k.setShowDefaultList(b("MessengerAdminGroupUtils").showDefaultListForNewPersonAddChatTab());j&&k.setQueryData({thread_id:d.thread_fbid});i=new h(k,g);i.setViewOption("renderer",f);i.setExcludedParticipantsFromThreadMeta(d);e=e.merge({typeahead:i});a=a.setIn(["mercury","tabContents",c],e)},function(){return k(c,d)})},function(){return k(c,d)})},function(){return k(c,d)});return a}function d(a,c){switch(c.type){case h.OPEN_ADD_MORE_FRIENDS_SHEET:var d=c.tabID,e=a.mercury.tabContents.get(d).thread;if(e){a=j(a,d,e);return l(a,c.tabID,b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet)}}return a}function k(a,c){b("Bootloader").loadModules(["ChatTabTypeaheadRenderer","ContextualTypeaheadView","MercuryTypeahead"],function(d,e,f){b("FantaGetMessageActions").onBootloadTypeahead(a,c)},"FantaComposeViewReducers")}function l(a,c,d){__p&&__p();var e=a.mercury.tabContents.get(c),f=a.tabGroup.tabs.get(c);if(!f||!e)return a;f=e;f=f.openSheet;if(f&&!b("MercurySheetPolicy").canReplaceOpenSheet(f,d))return a;e=e.merge({openSheet:d});a=a.setIn(["mercury","tabContents",c],e);return a}function f(a,c){switch(c.type){case g.ADD_PARTICIPANTS:var d=c.tokens;c=c.tabID;d=d.length===1&&d[0].getInfo().render_type===b("MercuryTypeaheadConstants").THREAD_TYPE;if(!d)return l(a,c,b("MercurySheetPolicy").sheets.FantaAddFriendsSheet)}return a}e.exports={addParticipants:f,onBootloadTypeahead:c,onGetThreadResponse:a,openAddMoreFriends:d}}),null);
__d("FantaReducersCookie",["FantaMessageActions","FantaTabActions","PresenceState","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i=b("throttle").acrossTransitions(b("PresenceState").doSync,500);function a(a,b){switch(b.type){case g.RECEIVED_NEW_MESSAGE:case h.CLOSE_ALL_TABS:case h.CLOSE_AND_TAB_NEXT:case h.CLOSE_TAB:case h.DELETE_TAB:case h.MINIMIZE_ALL_TABS:case h.MINIMIZE_TAB:case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:case h.REPLACE_TAB:case h.UNMINIMIZE_TAB:i();return j(a)}return a}function c(a,b){switch(b.type){case h.LOAD_FROM_DATA:var c=a.tabGroup;b=b.tabData;c=c.updatedTime;c=c>=b.updatedTime||b.updatedTime===undefined?c:b.updatedTime;return a.mergeIn(["tabGroup"],{updatedTime:c})}return a}function j(a){return a.mergeIn(["tabGroup"],{updatedTime:Date.now()})}e.exports={updateCookie:a,loadFromData:c}}),null);
__d("FantaReducersDockCalculator",["Arbiter","FantaMessageActions","FantaTabActions","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaMessageActions").Types,i=null;function j(a){i=a,b("setImmediate")(function(){b("Arbiter").inform("FantaReducersDockCalculator/shouldRecalculate")})}function k(a){if(!i||a.size!==i.size)j(a);else{var b=!1;a.forEach(function(a){var c=i&&i.get(a.id);(!c||a.isMinimized!==c.isMinimized)&&(b=!0)});b&&j(a)}}function a(a,b){var c=a.tabGroup.tabs;switch(b.type){case g.CLOSE_ALL_TABS:case g.CLOSE_AND_TAB_NEXT:case g.CLOSE_TAB:case g.DELETE_TAB:case g.MINIMIZE_ALL_TABS:case g.MINIMIZE_TAB:case g.OPEN_TAB:case g.OPEN_TAB_WITH_INTERSTITIAL_DATA:case g.UNMINIMIZE_TAB:j(c);break;case g.LOAD_FROM_DATA:case h.RECEIVED_NEW_MESSAGE:k(c);break}return a}e.exports={recalculateDock:a}}),null);
__d("FantaReducersLogging",["Bootloader","FantaTabActions","FantaTabSheetActions","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaTabSheetActions").Types;function a(a,c){__p&&__p();if(!b("gkx")("AT7OsZ9HtEyPgfhJFQHuE0P041fHeeN2NPSm1EqAg463b6aopCITyZWjbp4OgKkQKtYXSpA-M6CmnBX7-J8cZgbvURt5zoQ3MC2POa0dZoQCkA"))return a;switch(c.type){case h.OPEN_ADD_MORE_FRIENDS_SHEET:case g.OPEN_TAB:if(c.type===g.OPEN_TAB&&c.entryPoint!=="compose_link"&&c.entryPoint!=="jewel_new_message")return a;var d=a.mercury.tabContents.get(c.tabID);d&&b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger","MessengerSecondarySearchFunnelConstants"],function(a,b){var e;switch(c.entryPoint){case"compose_link":e=b.ENTRY_SURFACES.SIDEBAR;break;case"jewel_new_message":e=b.ENTRY_SURFACES.JEWEL;break;default:e=b.ENTRY_SURFACES.EXISTING_TAB}a.startFunnel(b.CLIENTS.WWW,b.SEARCH_SURFACES.OMNIPICKER,e,c.type===h.OPEN_ADD_MORE_FRIENDS_SHEET?d.id:null,d.loggingID)},"FantaReducersLogging");break}return a}function c(a,c){switch(c.type){case g.CLOSE_ALL_TABS:case g.CLOSE_AND_TAB_NEXT:case g.CLOSE_TAB:case g.DELETE_TAB:case g.OPEN_TAB:case g.OPEN_TAB_WITH_INTERSTITIAL_DATA:var d=a.tabGroup.allowedRaisedTabs;c=a.tabGroup.getRaisedandUnraisedTabs();var e=c.raisedTabs;c=c.unraisedTabs;var f=e.count(),h=f+c.count();b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(d).setOpenTabs(h).setVisibleTabs(f).log()},"FantaReducersLogging")}return a}e.exports={updateVisibleTabs:c,logSearchEventsAfterAction:a}}),null);
__d("isAdsExcelAddinURI",[],(function(a,b,c,d,e,f){var g=new RegExp("(^|\\.)fbaddins\\.com$","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.indexOf(a.getProtocol())!==-1&&g.test(a.getDomain())}e.exports=a}),null);
__d("isValidURI",[],(function(a,b,c,d,e,f){var g=new RegExp("((^|\\.)atlassolutions\\.com$)|((^|\\.)instagram\\.com$)|((^|\\.)wit\\.ai$)|((^|\\.)accountkit\\.com$)","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.includes(a.getProtocol())&&g.test(a.getDomain())}e.exports=a}),null);
__d("AsyncSignal",["Promise","ErrorUtils","QueryString","Run","TimeSlice","TrackingConfig","URI","ZeroRewrites","getAsyncParams","isAdsExcelAddinURI","isBonfireURI","isFacebookURI","isMessengerDotComURI","isValidURI","memoize","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g;function a(a,c){this.data=c||{},this.uri=a.toString(),b("TrackingConfig").domain&&this.uri.charAt(0)=="/"&&(this.uri=b("TrackingConfig").domain+this.uri)}a.prototype.setHandler=function(a){this.handler=a;return this};a.prototype.setTimeout=function(a){this.timeout=a;return this};a.prototype.send=function(){b("TimeSlice").guard(this._send.bind(this),"AsyncSignal send",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype._send=function(){__p&&__p();var a=this.handler,c=this.data;c.asyncSignal=(Math.random()*1e4|0)+1;var d=b("ZeroRewrites").rewriteURI(new(b("URI"))(this.uri));d=b("isFacebookURI")(d)||b("isMessengerDotComURI")(d)||b("isBonfireURI")(d)||b("isAdsExcelAddinURI")(d)||b("isValidURI")(d);if(d)Object.assign(c,b("getAsyncParams")("POST"));else throw new Error("'"+this.uri+"' is an external URL, you should not send async signals to offsite links.");var e=b("QueryString").appendToUrl(this.uri,c);g||(g=new(b("Promise"))(function(a){b("Run").onAfterLoad(a)}));d=g.then(function(){return new(b("Promise"))(function(a,b){var c=new Image();c.onload=a;c.onerror=c.onabort=b;c.src=e})});if(a){var f=!1,h=b("memoize")(function(){b("ErrorUtils").applyWithGuard(a,null,[f])});b("promiseDone")(d.then(function(){f=!0,h()},h));this.timeout&&setTimeout(h,this.timeout)}return this};e.exports=a}),null);
__d("FantaAvailableStatus",["AvailableListConstants","ChatVisibility","MercuryIDs","PresenceStatus","ShortProfiles"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={isAvailable:function(a,c){var d;a=this.getStatus(a,c);c=b("MercuryIDs").getUserIDFromThreadID(c);c&&(d=b("ShortProfiles").getNow(c));return a===b("AvailableListConstants").ACTIVE&&(d===undefined||d===null||!d.is_messenger_only)},getStatus:function(a,c){__p&&__p();var d=b("AvailableListConstants").OFFLINE;c=b("MercuryIDs").getUserIDFromThreadID(c);if(c)d=b("PresenceStatus").get(c);else if(a&&a.participants){c=a.participants.map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)});d=b("PresenceStatus").getGroup(c)}b("ChatVisibility").isOnline()||(d=b("AvailableListConstants").OFFLINE);return d}}}),null);
__d("FantaTypeJoinableThread",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={admins:[],approvalMode:0,associatedObject:null,description:null,friendsInParticipants:[],imageURL:null,isViewerSubscribed:!1,isWorkpaceChat:!1,joinableMode:{mode:0,link:""},linkHash:"",participants:[],threadID:null,threadFBID:null,threadName:null};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeTabContents",["ChatPrivacyActionController","FantaGetMessageActions","FantaTypeComposer","ImmutableObject","MercuryIDs","emptyFunction","immutable","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c={composer:new(b("FantaTypeComposer"))(),hasFetchedAll:!1,highlightNewMessage:!1,id:"",isMontageOpen:!1,isMultiCompany:null,isNewMessageTab:!1,isScrolledToBottom:!0,joinableInterstitialData:null,jumpToMessage:null,loggingID:null,membershipParticipants:null,mentorship:null,messages:b("immutable").List(),messageStore:null,nullStateCTA:null,openSheet:null,pageIndicator:null,pageIndicatorDescription:null,participants:null,privacyController:null,showContextBanner:!1,showUnseenMessages:b("emptyFunction"),signatureID:null,thread:null,threadHref:null,threadPreviewID:null,threadPreviewRecipients:null,timezoneInfo:null,typeahead:null,uri:null,workAvailabilityHumanReadable:null,workAvailabilityStatus:null};d=babelHelpers.inherits(a,b("immutable").Record(c));g=d&&d.prototype;function a(a){var c,d=b("MercuryIDs").getUserIDFromThreadID(a.id);d&&(c=new(b("ChatPrivacyActionController"))(d,function(c){b("setImmediate")(function(){b("FantaGetMessageActions").onPrivacyStateChange(a.id,c)})}));g.constructor.call(this,babelHelpers["extends"]({privacyController:c},a))}e.exports=a}),null);
__d("FantaReducersMercury",["Arbiter","AsyncSignal","AvailableList","AvailableListConstants","Bootloader","FantaAvailableStatus","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTabSheetActions","FantaTypeJoinableThread","FantaTypeTabContents","JSLogger","MercuryIDs","MercuryThreadIDMap","TimeSlice","WebMessengerThreadPermalinks","getPageIDFromThreadID","ifRequired","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadIDMap").get(),h=b("JSLogger").create("FantaReducersMercury"),i=b("FantaMessageActions").Types,j=b("FantaTabActions").Types,k=b("FantaGetMessageActions").Types,l=1;function m(){return Math.floor(Math.random()*2147483648).toString(16)}function a(a,c){__p&&__p();switch(c.type){case j.OPEN_TAB:case j.OPEN_TAB_WITH_INTERSTITIAL_DATA:var d=c.tabID,e=c.defaultText;b("ifRequired")("FantaTabsReactApp",function(c){!b("MercuryIDs").isValidThreadID(d)?(a=a.deleteIn(["tabGroup","tabs",d]),t(d)):B(a,d)},function(){return a=n(a,c.tabID)});a=o(a,d);var f=m(),g=a.mercury.tabContents.get(d);g=g.merge({isNewMessageTab:!!c.isNewMessageTab,loggingID:l++,signatureID:f});a=a.setIn(["mercury","tabContents",d],g);new(b("AsyncSignal"))("/ajax/chat/opentab_tracking.php",{threadID:d,userID:b("MercuryIDs").getUserIDFromThreadID(d),signatureID:f}).send();if(c.interstitialData){f=new(b("FantaTypeJoinableThread"))(c.interstitialData);g=g.merge({joinableInterstitialData:f});a=a.setIn(["mercury","tabContents",d],g)}e&&(a=a.setIn(["mercury","tabContents",d,"composer","text"],e));b("Arbiter").inform("jewel/hide");return a}return a}function n(a,c){b("ifRequired")("FantaTabsSlimApp",function(d){!b("MercuryIDs").isValidThreadID(c)?(a=a.deleteIn(["tabGroup","tabs",c]),t(c)):B(a,c)},function(){B(a,c)});return a}function c(a,b){switch(b.type){case i.RECEIVED_NEW_MESSAGE:a=o(a,b.tabID)}return a}function o(a,c){__p&&__p();var d=a.mercury.tabContents.get(c);if(!d){var e=b("getPageIDFromThreadID")(c);e&&b("Bootloader").loadModules(["PagesMercuryChatTabIndicatorHandler"],function(a){var d=b("AvailableListConstants").OFFLINE,f=new a(e,d,function(a){b("setImmediate")(function(){return b("FantaTabActions").setPageIndicatorDescription(c,a)})},function(){b("setImmediate")(function(){return b("FantaTabActions").clearPageIndicatorDescription(c)})});b("setImmediate")(function(){b("FantaTabSheetActions").onIsPageTab(c,f)});f.checkResponsiveness()},"FantaReducersMercury");return a.setIn(["mercury","tabContents",c],new(b("FantaTypeTabContents"))({id:c}))}return a}function d(a,b){switch(b.type){case j.SET_PAGE_INDICATOR_DESCRIPTION:var c=b.tabID;b=b.description;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({pageIndicatorDescription:b||""});a=a.setIn(["mercury","tabContents",c],d)}return a}function f(a,b){switch(b.type){case j.CLEAR_PAGE_INDICATOR_DESCRIPTION:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.merge({pageIndicatorDescription:""});a=a.setIn(["mercury","tabContents",b],c)}return a}function p(a,b){switch(b.type){case j.REPLACE_TAB:a=s(a,b.newTabID);a=o(a,b.newTabID);return a}return a}function q(a,b){__p&&__p();switch(b.type){case k.ADD_PARTICIPANTS:var c=b.tabID;b=b.previewTabID;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({threadPreviewID:b});a=a.setIn(["mercury","tabContents",c],d);return a}return a}function r(a,c){switch(c.type){case k.CLEAR_PARTICIPANTS:c=c.tabID;var d=a.mercury.tabContents.get(c),e=d?d.loggingID:null;d=d?d.isNewMessageTab:!1;a=a.setIn(["mercury","tabContents",c],new(b("FantaTypeTabContents"))({id:c,isNewMessageTab:d,loggingID:e}))}return a}function s(a,c){b("ifRequired")("FantaTabsReactApp",function(d){b("MercuryIDs").isValidThreadID(c)||(a=a.deleteIn(["tabGroup","tabs",c]),t(c))},function(){b("ifRequired")("FantaTabsSlimApp",function(d){b("MercuryIDs").isValidThreadID(c)||(a=a.deleteIn(["tabGroup","tabs",c]),t(c))})});return a}function t(a){g.getClientIDFromServerID(a,function(c){return b("setImmediate")(function(){b("MercuryIDs").isValidThreadID(c)?b("FantaTabActions").openTab(c):h.error("invalid id",a)})})}function u(a,b){switch(b.type){case j.FOCUS_TAB:B(a,b.tabID)}return a}function v(a,b){switch(b.type){case j.CLOSE_TAB:b=b.tabID;a=x(a,b)}return a}function w(a,b){switch(b.type){case j.DELETE_TAB:b=b.tabID;a=x(a,b);a=a.deleteIn(["mercury","tabContents",b])}return a}function x(a,c){b("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteThread(c)});return a}function y(a,c){switch(c.type){case j.CLOSE_ALL_TABS:b("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteAllThreads()});return a}return a}function z(a,b){switch(b.type){case j.FOCUS_NEXT_TAB:case j.FOCUS_PREVIOUS_TAB:case j.CLOSE_AND_TAB_NEXT:b=a.tabGroup.focusedTabID;b&&B(a,b)}return a}function A(a,b){switch(b.type){case j.CLOSE_AND_TAB_NEXT:b.tabID}return a}function B(a,c){__p&&__p();var d=b("MercuryIDs").getUserIDFromThreadID(c);if(d){var e=function(){b("AvailableList").updateForID(d)};b("TimeSlice").guard(e,"superfluous request to first open DD",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()}e=a.mercury.tabContents.get(c);if(e){a=e.thread;e=e.pageIndicator;e&&e.notifyPageOnlineStatusChanged(b("FantaAvailableStatus").getStatus(a,c))}}function C(a,b){switch(b.type){case j.UNMINIMIZE_TAB:B(a,b.tabID)}return a}function D(a,b){__p&&__p();switch(b.type){case j.LOAD_FROM_DATA:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a=o(a,e)}}return a}function E(a,c){switch(c.type){case j.OPEN_TAB:case j.OPEN_TAB_WITH_INTERSTITIAL_DATA:var d=c.tabID;b("WebMessengerThreadPermalinks").getThreadURI(d,function(a){b("MercuryIDs").isLocalThread(d)||b("setImmediate")(function(){return b("FantaTabActions").setPermanentUri(d,a)})})}return a}function F(a,b){switch(b.type){case j.SET_PERMANENT_URI:var c=b.tabID;b=b.uri;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({uri:b});a=a.setIn(["mercury","tabContents",c],d)}return a}e.exports={addParticipants:q,clearPageIndicatorDescription:f,clearParticipants:r,closeAllTabs:y,closeAndTabNext:A,closeTab:v,deleteTab:w,focusTab:u,focusTabEvents:z,loadFromData:D,loadUri:E,openTab:a,receivedNewMessage:c,replaceTab:p,setPageIndicatorDescription:d,setUri:F,unminimizeTab:C}}),null);
__d("FantaReducersMessages",["CurrentUser","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTypeComposer","MercuryBrowserAlerts","MessengerParticipants.bs","WorkForeignEntityType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i=b("FantaGetMessageActions").Types;function a(a,c){switch(c.type){case g.RECEIVED_NEW_MESSAGE:c=c.message;b("MercuryBrowserAlerts").messageReceived(c);return a}return a}function c(a,b){switch(b.type){case g.COMPOSER_TEXT_UPDATE:var c=b.composer,d=b.message;b=b.threadID;var e=a.mercury.tabContents.get(b);return!e||e&&e.composer.version!==c.version?a:a.mergeIn(["mercury","tabContents",b,"composer"],{text:d})}return a}function d(a,b){switch(b.type){case g.REPLY_TO_MESSAGE:var c=b.message;b=b.threadID;var d=a.mercury.tabContents.get(b);if(!d)return a;d=c;return a.mergeIn(["mercury","tabContents",b,"composer"],{replyingToMessage:d})}return a}function f(a,b){switch(b.type){case g.CANCEL_REPLY_TO_MESSAGE:b=b.threadID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=null;return a.mergeIn(["mercury","tabContents",b,"composer"],{replyingToMessage:c})}return a}function j(a,c){switch(c.type){case h.CLOSE_TAB:case h.CLOSE_AND_TAB_NEXT:return!a.mercury.tabContents.get(c.tabID)?a:a.setIn(["mercury","tabContents",c.tabID,"composer"],new(b("FantaTypeComposer"))())}return a}function k(a,c){switch(c.type){case h.CLOSE_ALL_TABS:c=a.mercury.tabContents;c.forEach(function(c){c=c.id;a=a.setIn(["mercury","tabContents",c,"composer"],new(b("FantaTypeComposer"))())});return a}return a}function l(a,b){switch(b.type){case h.SCROLL_BOTTOM_CHANGED:var c=b.tabID,d=b.isScrolledToBottom;b=b.showUnseenMessages;var e=a.mercury.tabContents.get(c);if(!e)return a;e=e.merge({isScrolledToBottom:d,showUnseenMessages:b});a=a.setIn(["mercury","tabContents",c],e)}return a}function m(a,b){switch(b.type){case h.JUMP_TO_MESSAGE:var c=b.tabID;b=b.mid;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({jumpToMessage:b});a=a.setIn(["mercury","tabContents",c],d)}return a}function n(a,b){switch(b.type){case h.WIPE_JUMP_TO_MESSAGE:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.merge({jumpToMessage:null});a=a.setIn(["mercury","tabContents",b],c)}return a}function o(a,b){switch(b.type){case h.SHOW_UNSEEN_MESSAGES:b=b.tabID;b=a.mercury.tabContents.get(b);b&&b.showUnseenMessages()}return a}function p(a,c){__p&&__p();switch(c.type){case i.ON_GET_THREAD_RESPONSE:c=c.thread;var d=c.thread_id,e=a.mercury.tabContents.get(d);if(!e)return a;var f=null;b("CurrentUser").isWorkUser()&&c.participants&&(f=c.participants.map(b("MessengerParticipants.bs").getNow,b("MessengerParticipants.bs")).find(function(a){return((a=a)!=null?(a=a.work_foreign_entity_info)!=null?a.type:a:a)===b("WorkForeignEntityType").FOREIGN})!==undefined);e=e.merge({thread:c,isMultiCompany:f});a=a.setIn(["mercury","tabContents",d],e);break}return a}function q(a,b){switch(b.type){case h.HIGHLIGHT_NEW_MESSAGE:return!a.mercury.tabContents.get(b.tabId)?a:a.setIn(["mercury","tabContents",b.tabId,"highlightNewMessage"],!0)}return a}function r(a,b){switch(b.type){case h.UNHIGHLIGHT_NEW_MESSAGE:return!a.mercury.tabContents.get(b.tabId)?a:a.setIn(["mercury","tabContents",b.tabId,"highlightNewMessage"],!1)}return a}e.exports={cancelReplyToMessage:f,closeAllTabs:k,closeTab:j,composerTextUpdate:c,highlightNewMessage:q,jumpToMessage:m,onGetThreadResponse:p,receivedNewMessage:a,replyToMessage:d,scrollBottomChanged:l,showUnseenMessages:o,unhighlightNewMessage:r,wipeJumpToMessage:n}}),null);
__d("MessengerSecondarySearchFunnelConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",WWW:"www"});b=Object.freeze({ABANDON:"abandon",CREATE_GROUP:"create_group",ENTER_THREAD:"enter_thread",RESULT_SELECTED:"result_selected",SEND:"send",SINGLE_RESULT_SELECTED:"single_result_selected"});c=Object.freeze({ACTION:"action"});d=Object.freeze({EXISTING_TAB:"existing_tab",JEWEL:"jewel",SIDEBAR:"sidebar",COMPOSER:"composer"});f=Object.freeze({END:"end",IMPRESSIONS:"impressions",MICRO_SESSION_ENDED:"micro_session_ended",MICRO_SESSION_STARTED:"micro_session_started",QUERY_CHANGED:"query_changed",RESULT_SELECTED:"result_selected",SOURCE_ENDED:"source_ended",SOURCE_STARTED:"source_started",START:"start",TOKEN_REMOVED:"token_removed"});var g=Object.freeze({BROADCAST:"broadcast",GROUP_CREATION:"group_creation",OMNIPICKER:"omnipicker",SHARE:"share"}),h=Object.freeze({DIRECT_SEND:"direct_send",ADD:"add"}),i=Object.freeze({FINISHED:"finished",FAILED:"failed"}),j=Object.freeze({BROADCAST:9500,GROUP_CREATE:9501}),k=Object.freeze({QUERY:"query",NO_QUERY:"no_query"}),l=Object.freeze({BOOTSTRAP:"bootstrap",LOCAL:"local",LOCAL_AND_SERVER:"local_and_server",LOCAL_CONTACTS:"local_contacts",ORDERED_GCF_FRIENDLIST:"local_ordered_gcf_friendlist",QUERY_CACHE:"query_cache",SERVER:"server",SHORT_PROFILES:"local_short_profiles",SUGGESTED_RECIPIENTS:"local_suggested_recipients"});e.exports={FUNNEL_NAME:"MESSENGER_SECONDARY_SEARCH_FUNNEL",CLIENTS:a,END_ACTIONS:b,END_REASONS:c,ENTRY_SURFACES:d,EVENTS:f,SEARCH_SURFACES:g,SELECTION_TYPES:h,SOURCE_STATUSES:i,LOGGING_IDS:j,MICRO_SESSION_TYPES:k,SOURCES:l}}),null);
__d("FantaReducersPreLogging",["Bootloader","FantaMessageActions","FantaTabActions","FantaTabSheetActions","MessengerSecondarySearchFunnelConstants","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaTabSheetActions").Types,i=b("FantaMessageActions").Types;c=b("MessengerSecondarySearchFunnelConstants").END_ACTIONS;var j=c.ABANDON,k=c.SEND,l=b("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION;function a(a,c){__p&&__p();if(!b("gkx")("AT7OsZ9HtEyPgfhJFQHuE0P041fHeeN2NPSm1EqAg463b6aopCITyZWjbp4OgKkQKtYXSpA-M6CmnBX7-J8cZgbvURt5zoQ3MC2POa0dZoQCkA"))return a;switch(c.type){case g.CLOSE_TAB:case g.CLOSE_AND_TAB_NEXT:case h.CLOSE_ADD_FRIENDS_SHEET:case h.CLOSE_ADD_MORE_FRIENDS_SHEET:a=m(a,c.tabID,l,j);break;case g.CLOSE_ALL_TABS:a.mercury.tabContents.forEach(function(b){a=m(a,b.id,l,j)});break;case i.SEND_GROUP_MESSAGE:a=m(a,c.threadID,l,k,!0);break;case i.SEND_HOT_LIKE:case i.SEND_MESSAGE:case i.SEND_PHOTO:case i.SEND_STICKER:a=m(a,c.threadID,l,k);break}return a}function m(a,c,d,e,f){if(!b("gkx")("AT7OsZ9HtEyPgfhJFQHuE0P041fHeeN2NPSm1EqAg463b6aopCITyZWjbp4OgKkQKtYXSpA-M6CmnBX7-J8cZgbvURt5zoQ3MC2POa0dZoQCkA"))return a;var g=a.mercury.tabContents.get(c),h=g?g.loggingID:null,i=g?g.threadPreviewID:null;h&&b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger"],function(b){a=a.setIn(["mercury","tabContents",c],g.merge({loggingID:null}));var j;e===k&&(f===null||f===undefined)?j=g&&g.messages.size===0:j=f;b.endFunnel(d,e,h,i?i.split(":")[1]:c,j)},"FantaReducersPreLogging");return a}e.exports={logSearchEvents:a}}),null);
__d("FantaTypeTab",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={focusCounter:0,id:"",isHovered:!1,isMinimized:!1,openCounter:0,entryPoint:"unknown"};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeTabGroup",["FantaConst","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c={allowedRaisedTabs:b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS,focusedTabID:null,tabs:b("immutable").Map({}),updatedTime:0};var h=function(a){return a.openCounter*-1},i=function(a){return a.focusCounter*-1};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;a.prototype.getRaisedandUnraisedTabs=function(){var a=this.tabs.sortBy(i),b=a.slice(this.allowedRaisedTabs);a=a.take(this.allowedRaisedTabs).sortBy(h);return{raisedTabs:a,unraisedTabs:b}};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerDiscoveryEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BROWSER_PROFILE_ICON:"browser_profile_icon",MESSENGER_SEARCH_M4:"messenger_search_m4",MESSENGER_SEARCH_M4_HOME:"messenger_search_m4:home",MESSENGER_SEARCH_M4_PEOPLE:"messenger_search_m4:people",MESSENGER_SEARCH_M4_GAMES:"messenger_search_m4:games",MESSENGER_SEARCH_M4_DISCOVER:"messenger_search_m4:discover",MESSENGER_SEARCH_M4_NULL_STATE:"messenger_search_m4:null_state",FB_STORY:"fb_story",ANONYMOUS_MESSAGING:"anonymous_messaging",FIRST_PARTY_BOT:"first_party_bot",FIRST_PARTY_BOT_RECRUITING_BOT:"first_party_bot:recruiting_bot",FIRST_PARTY_BOT_MESSENGER_BOT:"first_party_bot:messenger_bot",FIRST_PARTY_BOT_WORKPLACE_APP:"first_party_bot:workplace_app",FIRST_PARTY_BOT_REPORT_SPAM:"first_party_bot:report_spam",FIRST_PARTY_BOT_MOBILE_BUILDS_BOT:"first_party_bot:mobile_builds_bot",FIRST_PARTY_BOT_FB_TEST_PAGE:"first_party_bot:fb_test_page",FIRST_PARTY_BOT_CALENDAR_BOT:"first_party_bot:calendar_bot",FIRST_PARTY_BOT_ORDER_FOOD:"first_party_bot:order_food",FIRST_PARTY_BOT_BUSINESS_ASSISTANT:"first_party_bot:business_assistant",FIRST_PARTY_BOT_MOBILE_FINANCIAL_SERVICE:"first_party_bot:mobile_financial_service",FIRST_PARTY_BOT_FACEBOOK_BUSINESS:"first_party_bot:facebook_business",FIRST_PARTY_BOT_LEAD_GEN:"first_party_bot:lead_gen",FIRST_PARTY_BOT_MARKETPLACE:"first_party_bot:marketplace",FIRST_PARTY_BOT_INSTANT_EXPERIENCES:"first_party_bot:instant_experiences",FIRST_PARTY_BOT_PRODUCT_SUPPORT_TOOL:"first_party_bot:product_support_tool",FIRST_PARTY_BOT_CTA_ADS:"first_party_bot:cta_ads",FIRST_PARTY_BOT_FB_LOGIN_ALERTS:"first_party_bot:fb_login_alerts",FIRST_PARTY_BOT_M:"first_party_bot:m",MESSENGER_SEARCH:"messenger_search",MESSENGER_SEARCH_HOME:"messenger_search:home",MESSENGER_SEARCH_PEOPLE:"messenger_search:people",MESSENGER_SEARCH_GAMES:"messenger_search:games",MESSENGER_SEARCH_DISCOVER:"messenger_search:discover",MESSENGER_SEARCH_NULL_STATE:"messenger_search:null_state",FB_NOTIFICATIONS:"fb_notifications",BEGIN_SHARE_FLOW:"begin_share_flow",APP_INSIGHTS:"app_insights",BRANDED_CAMERA:"branded_camera",SAMPLE_BOTS:"sample_bots",PAGES_COMMS_AUTOMATED_RESPONSES:"pages_comms_automated_responses",FB_LOGIN_ALERTS:"fb_login_alerts",VERTICAL_SERVICES:"vertical_services",VERTICAL_SERVICES_GET_QUOTE:"vertical_services:get_quote",MESSENGERDOTCOM:"messengerdotcom",MESSENGERDOTCOM_WEB_SEARCH:"messengerdotcom:web_search",MESSENGERDOTCOM_PAGES_PLUGIN:"messengerdotcom:pages_plugin",MESSENGER_INBOX:"messenger_inbox",MESSENGER_INBOX_THREAD_LIST:"messenger_inbox:thread_list",MESSENGER_INBOX_IN_THREAD:"messenger_inbox:in_thread",UNKNOWN:"unknown",UNKNOWN_BNP_PSID:"unknown:bnp_psid",UNKNOWN_ORGANIC_POST:"unknown:organic_post",FB_SEARCH:"fb_search",FB_SEARCH_CHAT_SIDEBAR_TYPEAHEAD:"fb_search:chat_sidebar_typeahead",FB_SEARCH_SEARCH_ENTITY_CARD:"fb_search:search_entity_card",FB_SEARCH_HIGH_CONFIDENCE_CARD:"fb_search:high_confidence_card",SPONSORED_MESSAGES_ADS:"sponsored_messages_ads",INSTANT_ARTICLE:"instant_article",INSTANT_ARTICLE_CTA:"instant_article:cta",INSTANT_ARTICLE_OVERFLOW_MENU:"instant_article:overflow_menu",FB_FEED:"fb_feed",FB_FEED_PYMM_RHC:"fb_feed:pymm_rhc",FB_FEED_PAGE_HOVER_CARD:"fb_feed:page_hover_card",FB_FEED_ADMIN:"fb_feed:admin",FB_FEED_ORGANIC_POST:"fb_feed:organic_post",PAGES_MANAGER_APP:"pages_manager_app",PAGES_MANAGER_APP_NOTIFICATION_DIRECT_REPLY_TEXT:"pages_manager_app:notification_direct_reply_text",PAGES_MANAGER_APP_NOTIFICATION_DIRECT_REPLY_LIKE:"pages_manager_app:notification_direct_reply_like",CUSTOMER_MATCHING:"customer_matching",CUSTOMER_MATCHING_PHONE_NUMBER:"customer_matching:phone_number",CLICK_TO_MESSENGER_AD:"click_to_messenger_ad",CLICK_TO_MESSENGER_AD_MESSENGER_DEEPLINK_ADS:"click_to_messenger_ad:messenger_deeplink_ads",CLICK_TO_MESSENGER_AD_ADS_WELCOME_ADMIN:"click_to_messenger_ad:ads_welcome_admin",CLICK_TO_MESSENGER_AD_USER_SENT:"click_to_messenger_ad:user_sent",CLICK_TO_MESSENGER_AD_PARTIAL_AUTOMATED:"click_to_messenger_ad:partial_automated",MDOTME:"mdotme",PRIVATE_REPLY:"private_reply",PRIVATE_REPLY_ADMIN:"private_reply:admin",ADMIN_MESSAGES:"admin_messages",BUSINESS_ON_MESSENGER:"business_on_messenger",DISCOVER_TAB_M3:"discover_tab_m3",DISCOVER_TAB_M4:"discover_tab_m4",DISCOVER_TAB_M4_BUSINESSES:"discover_tab_m4:businesses",DISCOVER_TAB_M4_GAMES:"discover_tab_m4:games",DISCOVER_TAB_M4_FOR_YOU:"discover_tab_m4:for_you",FB_PAGE:"fb_page",FB_PAGE_ICEBREAKER_RHC:"fb_page:icebreaker_rhc",FB_PAGE_SEND_AND_POST_FROM_COMPOSER:"fb_page:send_and_post_from_composer",FB_PAGE_ADMIN_TEST_LINK:"fb_page:admin_test_link",FB_PAGE_SHOP_PDP:"fb_page:shop_pdp",FB_PAGE_FREQUENTLY_ASKED_QUESTION_CARD:"fb_page:frequently_asked_question_card",FB_PAGE_ABOUT_CARD_DETAIL_VIEW:"fb_page:about_card_detail_view",FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:"fb_page:responsiveness_context_card",FB_PAGE_ABOUT_CARD:"fb_page:about_card",FB_PAGE_ABOUT_CARD_PQI_MESSAGE_UPSELL:"fb_page:about_card_pqi_message_upsell",FB_PAGE_PAGE_HEADER:"fb_page:page_header",FB_PAGE_PRIMARY_MESSAGE_BUTTON:"fb_page:primary_message_button",FB_PAGE_SECONDARY_MESSAGE_BUTTON:"fb_page:secondary_message_button",FB_PAGE_FB_PAGE_CTA_PAGES_ACTIONS_UNIT:"fb_page:fb_page_cta_pages_actions_unit",FB_PAGE_JEWEL_THREAD:"fb_page:jewel_thread",FB_PAGE_USER_MESSAGE_PROMPT:"fb_page:user_message_prompt",FB_PAGE_PAGES_INFO:"fb_page:pages_info",FB_PAGE_LOADED_FROM_DATA:"fb_page:loaded_from_data",FB_PAGE_CHAT_SIDEBAR_TYPEAHEAD:"fb_page:chat_sidebar_typeahead",FB_PAGE_DYNAMICHOVERCARD:"fb_page:dynamicHoverCard",FB_PAGE_ABOUT_ROW:"fb_page:about_row",FB_PAGE_PYMM_RHC:"fb_page:pymm_rhc",FB_PAGE_GROUPS_RHC:"fb_page:groups_rhc",FB_PAGE_CONTEXT_CARD:"fb_page:context_card",FB_PAGE_CONTEXTUAL_RECOMMENDATIONS:"fb_page:contextual_recommendations",FB_PAGE_SEARCHENTITYCARD:"fb_page:searchEntityCard",FB_PAGE_MESSAGE_RECEIVED:"fb_page:message_received",FB_PAGE_PAGE_HOVERCARD:"fb_page:page_hovercard",FB_PAGE_QUESTION_TRIGGERED_CONVO:"fb_page:question_triggered_convo",FB_PAGE_DEFAULT_NATIVE_TEMPLATES_CTA:"fb_page:default_native_templates_cta",FB_PAGE_LAUNCHPAD_MORE_DRAWER:"fb_page:launchpad_more_drawer",FB_PAGE_LAUNCHPAD_HEADER:"fb_page:launchpad_header",FB_PAGE_LAUNCHPAD_FOOTER:"fb_page:launchpad_footer",FB_HEADER_DOCK:"fb_header_dock",FB_HEADER_DOCK_LOADED_FROM_BROWSER_COOKIE:"fb_header_dock:loaded_from_browser_cookie",FB_HEADER_DOCK_JEWEL_THREAD:"fb_header_dock:jewel_thread",FB_HEADER_DOCK_JEWEL_SEE_ALL_MESSAGES:"fb_header_dock:jewel_see_all_messages",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",NULL_STATE_CTA:"null_state_cta",INSTANT_GAMES:"instant_games",INSTANT_GAMES_ADMIN_INTRO:"instant_games:admin_intro",BROADCAST:"broadcast",PAGES_PLUGIN:"pages_plugin",PAGES_PLUGIN_MESSAGE_TAB:"pages_plugin:message_tab",SEND_TO_MESSENGER_PLUGIN:"send_to_messenger_plugin",WORK_CHAT:"work_chat",WORK_CHAT_WORK_IDS:"work_chat:work_ids",WORK_CHAT_EMAIL:"work_chat:email",CHECKBOX_PLUGIN:"checkbox_plugin",DEPRECATED:"deprecated",DEPRECATED_BUSINESS_ON_MESSENGER:"deprecated:business_on_messenger",DEPRECATED_ADMIN_MESSAGES:"deprecated:admin_messages",DEPRECATED_PIXEL_EVENT:"deprecated:pixel_event",DEPRECATED_NULL_STATE_CTA:"deprecated:null_state_cta",DEPRECATED_SUBSCRIPTIONS:"deprecated:subscriptions",FB_JOB:"fb_job",FB_JOB_JOB_APPLICATION:"fb_job:job_application",M:"m",FB_EVENT:"fb_event",FB_EVENT_MESSAGE_HOST:"fb_event:message_host",IG_FEED:"ig_feed",IG_FEED_ORGANIC_POST:"ig_feed:organic_post",DYNAMIC_LOCAL_ADS:"dynamic_local_ads"})}),null);
__d("isWebMessengerURI",[],(function(a,b,c,d,e,f){function a(a){return/^(\/messages)/.test(a.getPath())}e.exports=a}),null);
__d("FantaReducersTabs",["Bootloader","CurrentUser","EventProfiler","FantaConst","FantaMessageActions","FantaTabActions","FantaTypeTab","FantaTypeTabGroup","LogHistory","MessengerDiscoveryEntryPoint","MessengerState.bs","PinnedConversationNubsConfig","TimeSlice","URI","isWebMessengerURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i="tab_",j=b("LogHistory").getInstance("fanta_tabs"),k=1,l=1,m=1;function a(a,c){switch(c.type){case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:j.debug(c.type,JSON.stringify({id:c.tabID}));l===1&&b("EventProfiler").tagCurrentActiveInteractionsAs("FirstChatTabOpen");return q(a,c.tabID||i+m++,!0,c.entryPoint)}return a}function c(a,b){__p&&__p();switch(b.type){case h.REPLACE_TAB:var c=b.tabID,d=b.newTabID,e=a.tabGroup;e=e.tabs;e=e.get(c);j.debug(b.type,JSON.stringify({id:c,isExisting:!!e,newID:d}));if(e){b=e.id===a.tabGroup.focusedTabID;a=a.setIn(["tabGroup","tabs",d],e.merge({id:d})).deleteIn(["tabGroup","tabs",c]);return q(a,d,b,"replace_tab")}return q(a,d,!1,"replace_tab")}return a}function d(a,b){switch(b.type){case h.MINIMIZE_TAB:return r(a,b.tabID,!0)}return a}function f(a,b){switch(b.type){case h.UNMINIMIZE_TAB:return r(a,b.tabID,!1)}return a}function n(a,b){switch(b.type){case h.FOCUS_TAB:b=b.tabID;return y(a,b)}return a}function o(a,b){switch(b.type){case h.BLUR_TAB:return z(a,b.tabID)}return a}function p(a,c){__p&&__p();switch(c.type){case g.RECEIVED_NEW_MESSAGE:var d=c.tabID,e=a.tabGroup.tabs.get(d);j.debug(c.type,JSON.stringify({id:d,isOpen:!!e}));if(!e){c=a.tabGroup.focusedTabID;a=q(a,d,!1,"message_received");var f=a.tabGroup.allowedRaisedTabs;e=a.tabGroup.getRaisedandUnraisedTabs();var h=e.raisedTabs;e=e.unraisedTabs;var i=h.count(),k=i+e.count();b("TimeSlice").guard(function(){b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(f).setOpenTabs(k).setVisibleTabs(i).log()},"FantaReducersTabs")},"name",{propagationType:b("TimeSlice").PropagationType.ORPHAN})();h=b("URI").getNextURI();if(b("isWebMessengerURI")(h))return a=r(a,d,!0);else if(c)return y(a,c)}}return a}function q(a,c,d,e){e===void 0&&(e="unknown");var f=a.tabGroup;f=f.tabs;f=f.get(c);!f?(f=new(b("FantaTypeTab"))({id:c,focusCounter:k,openCounter:l++,entryPoint:e}),a=a.setIn(["tabGroup","tabs",c],f)):f.isMinimized&&d&&(a=r(a,c,!1));return d?y(a,c):a}function r(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isMinimized:c}));return a}function s(a,b){__p&&__p();switch(b.type){case h.MINIMIZE_ALL_TABS:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a=r(a,e,!0)}return a}return a}function t(a,b){switch(b.type){case h.CLOSE_TAB:case h.DELETE_TAB:var c=b.tabID;j.debug(b.type,JSON.stringify({id:c}));return v(a,c)}return a}function u(a,c){switch(c.type){case g.SEND_GROUP_MESSAGE:c=c.threadID;var d=b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),c);if(d)return v(a,c)}return a}function v(a,b){a=z(a,b);return a.deleteIn(["tabGroup","tabs",b]).deleteIn(["mercury","tabContents",b])}function w(a,b){switch(b.type){case h.CLOSE_ALL_TABS:j.debug(b.type);a=z(a,a.tabGroup.focusedTabID);return a.setIn(["tabGroup","tabs"],a.tabGroup.tabs.clear()).setIn(["mercury","tabContents"],a.mercury.tabContents.clear())}return a}function x(a,b){switch(b.type){case h.CLOSE_AND_TAB_NEXT:j.debug(b.type,JSON.stringify({id:b.tabID}));a=v(a,b.tabID);return H(a)}return a}function y(a,b,c){c===void 0&&(c=!1);var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{focusCounter:k++}));d=c?null:b;a=a.mergeIn(["tabGroup"],{focusedTabID:d});return a}function z(a,b){return a.tabGroup.focusedTabID===b?a.mergeIn(["tabGroup"],{focusedTabID:null}):a}function A(a,b){switch(b.type){case h.HOVERED_TAB:b=b.tabID;return C(a,b,!0)}return a}function B(a,b){switch(b.type){case h.UNHOVERED_TAB:b=b.tabID;return C(a,b,!1)}return a}function C(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isHovered:c}));return a}function D(a,c){__p&&__p();switch(c.type){case h.SET_ALLOWED_RAISED_TABS:var d=c.allowedRaisedTabs,e=a.tabGroup.allowedRaisedTabs;if(d!==e){j.debug(c.type,JSON.stringify({count:d}));b("PinnedConversationNubsConfig").chatTabTypingPriority||(d=Math.max(1,d));var f=a.tabGroup.tabs.count(),g=f>d?d:f;c=d>e&&f>e;e=d<e&&f>d;(c||e)&&b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(d).setOpenTabs(f).setVisibleTabs(g).log()},"FantaReducersTabs")}return E(a,d)}return a}function E(a,c){c===void 0&&(c=b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS);if(c===a.tabGroup.allowedRaisedTabs)return a;b("PinnedConversationNubsConfig").chatTabTypingPriority||(c=Math.max(1,c));return a.mergeIn(["tabGroup"],{allowedRaisedTabs:c})}function F(a,c){__p&&__p();switch(c.type){case h.LOAD_FROM_DATA:var d=a.tabGroup,e=c.tabData,f=d.updatedTime;if(f>=e.updatedTime||e.updatedTime===undefined)return a;a=E(a.set("tabGroup",new(b("FantaTypeTabGroup"))()),d.allowedRaisedTabs);var g=[];e.tabs.sort(function(a,b){return a.openCounter-b.openCounter}).forEach(function(c){g.push(c.id),a=q(a,c.id,!1,[b("MessengerDiscoveryEntryPoint").FB_HEADER_DOCK_LOADED_FROM_BROWSER_COOKIE]),c.isMinimized&&(a=r(a,c.id,c.isMinimized))});e.tabs.sort(function(a,b){return a.focusCounter-b.focusCounter}).forEach(function(b){a=y(a,b.id,!0)});j.debug(c.type,JSON.stringify({updatedTime:f,newerTime:e.updatedTime,opened:g}));a=e.focusedTabID?y(a,e.focusedTabID,!0):z(a)}return a}function G(a,b){switch(b.type){case h.FOCUS_NEXT_TAB:return H(a)}return a}function H(a){__p&&__p();var b=a.tabGroup.focusedTabID,c=a.tabGroup.getRaisedandUnraisedTabs();c=c.raisedTabs;var d=c.count();if(d===0)return a;else if(c.count()===1)return y(a,c.first().id);d=c.skipUntil(function(a){return a.id===b}).rest();if(d.count()===0)return y(a,c.first().id);else return y(a,d.first().id)}function I(a,b){__p&&__p();switch(b.type){case h.FOCUS_PREVIOUS_TAB:var c=a.tabGroup.focusedTabID;b=a.tabGroup.getRaisedandUnraisedTabs();b=b.raisedTabs;if(b.count()<2)return a;var d=b.reverse().skipUntil(function(a){return a.id===c}).rest();if(d.count()===0)return y(a,b.last().id);else return y(a,d.first().id)}return a}e.exports={addParticipantsToLocalGroup:u,blurTab:o,closeAllTabs:w,closeAndTabNext:x,closeTab:t,focusNextTab:G,focusPreviousTab:I,focusTab:n,hoveredTab:A,loadFromData:F,minimizAllTabs:s,minimizeTab:d,openTab:a,receivedNewMessage:p,replaceTab:c,setAllowedRaisedTabs:D,unhoveredTab:B,unminimizeTab:f}}),null);
__d("FantaTypeMercuryState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={tabContents:b("immutable").Map({})};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeAppState",["FantaTypeMercuryState","FantaTypeTabGroup","immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={tabGroup:new(b("FantaTypeTabGroup"))(),mercury:new(b("FantaTypeMercuryState"))()};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaAppStore",["FantaComposeViewReducers","FantaDispatcher","FantaReducersCookie","FantaReducersDockCalculator","FantaReducersLogging","FantaReducersMercury","FantaReducersMessages","FantaReducersPreLogging","FantaReducersTabs","FantaTypeAppState","FluxReduceStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[].concat(Object.values(b("FantaReducersPreLogging")),Object.values(b("FantaReducersTabs")),Object.values(b("FantaReducersMercury")),Object.values(b("FantaReducersMessages")),Object.values(b("FantaReducersDockCalculator")),Object.values(b("FantaReducersCookie")),Object.values(b("FantaComposeViewReducers")),Object.values(b("FantaReducersLogging")));g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("FantaTypeAppState"))()};a.prototype.ignoreReducer=function(a){var b=Object.values(a);h=h.filter(function(a){return!b.find(function(b){return b===a})})};a.prototype.addReducers=function(a){this.ignoreReducer(a),h=h.concat(Object.values(a))};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;c=new a(b("FantaDispatcher"));e.exports=c}),null);
__d("ArchiveWarningReact.bs",["cx","React","ReasonReact.bs","TooltipData","bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("ArchiveWarningReact");function i(a,c){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var c=b("TooltipData").propsFor("All employee-to-employee conversations will be archived","above");if(a){var d=b("React").createElement("i",{className:"_3olv _14lt"});return b("React").cloneElement(b("React").createElement("div",{className:"_3a61"},d),{"data-tooltip-content":b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(c["data-tooltip-content"])),"data-hover":b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(c["data-hover"])),"data-tooltip-position":b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(c["data-tooltip-position"]))})}else return null},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.shown,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("ChatDetailStack.bs",["ReasonReact.bs","ChatDetailStack.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("ChatDetailStack.react"),{topDetail:a,bottomDetail:c},d)}f.make=a}),null);
__d("ChatTabMenu.bs",["MercuryIDs","ReasonReact.bs","bs_js_primitive","MessengerState.bs","bs_js_null_undefined","getPageIDFromThreadID","ChatTabMenuBootloader.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g,h,i,j,k,l,m){var n=a?[a[0].thread_id]:0;if(n){var o=n[0];o=[b("MercuryIDs").isGroupChat(o),b("MessengerState.bs").isNewEmptyLocalThread(c,o),b("bs_js_primitive").null_undefined_to_opt(b("getPageIDFromThreadID")(o))!==0]}else o=[!1,!0,!1];var p=a?a[0].message_count===0:!0;return b("ReasonReact.bs").wrapJsForReason(b("ChatTabMenuBootloader.react"),{autoFocus:!1,composer:d,hasBlockedMessages:g,highlightNewMessage:j,isEmptyChat:o[1],isEmptyConversation:p,isFocused:i,isGroupChat:o[0],isMultiCompany:h,isPageChat:o[2],membershipParticipants:b("bs_js_null_undefined").fromOption(e),participantsMap:b("bs_js_null_undefined").fromOption(f),isNewMessageTab:k,thread:b("bs_js_null_undefined").fromOption(a),threadID:b("bs_js_null_undefined").fromOption(n),uri:l,viewer:c},m)}f.make=a}),null);
__d("MercuryThreadTitleReact.bs",["ReasonReact.bs","bs_js_null_undefined","MercuryThreadTitle.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MercuryThreadTitle.react"),{className:b("bs_js_null_undefined").fromOption(a),maxTitle:b("bs_js_null_undefined").fromOption(c),thread:d,viewer:e,isNewThread:b("bs_js_null_undefined").fromOption(f),showUnreadCount:b("bs_js_null_undefined").fromOption(g),useShortName:b("bs_js_null_undefined").fromOption(h),useAndSeparator:b("bs_js_null_undefined").fromOption(i)},j)}f.make=a}),null);
__d("ChatThreadName.bs",["cx","React","goURI","LinkReact.bs","MercuryIDs","ReasonReact.bs","MessengerHoverCardLink","MercuryThreadTitleReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("ChatThreadName");function a(a,c,d,e,f,g,i){__p&&__p();return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){__p&&__p();if(a){var h=a[0],i=h.thread_id,j=b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,[d],[f],0,["tooltip"],[d],0,0,[c],0,[function(a){if(c.length>0){b("goURI")(c,undefined,undefined);a.stopPropagation();return 0}else return 0}],0,0,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("MercuryThreadTitleReact.bs").make(["_1ogo"],0,h,e,[g],0,[!h.is_canonical],[!0],[]))]));if(h.is_canonical){h=b("MessengerHoverCardLink").constructEndpoint({id:b("MercuryIDs").getThreadFBIDFromThreadID(i)});return b("React").cloneElement(j,{"data-hovercard":h,"data-hover":""})}else return j}else return null},h[9],h[10],h[11],h[12]]}f.component=h;f.make=a}),null);
__d("ChatVideoCallButton.bs",["MercuryIDs","ReasonReact.bs","bs_js_primitive","bs_js_null_undefined","ChatVideoCallButtonBootloader.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g,h,i){__p&&__p();a=a?a[0]:!0;c=c?c[0]:function(){return 0};d=d?d[0]:!1;h=h?h[0]:!0;if(f){var j=f[0];j=[[j.thread_id],b("bs_js_primitive").null_undefined_to_opt(j.rtc_call_data)]}else j=[0,0];var k=j[1];k=k?k[0]:{call_state:"NO_ONGOING_CALL",server_info_data:null,initiator_fbid:null};j=b("bs_js_null_undefined").fromOption(j[0]);var l=b("MercuryIDs").isGroupChat(j);return b("ReasonReact.bs").wrapJsForReason(b("ChatVideoCallButtonBootloader.react"),{isAudio:a,isGroupChat:l,color:e?e[0]:null,onRTCNuxCloseButtonClick:c,rtcNuxShown:d,threadID:j,thread:b("bs_js_null_undefined").fromOption(f),viewer:g,shown:h,rtcCallData:k},i)}f.make=a}),null);
__d("FantaCloseButton.bs",["ix","cx","fbt","bs_curry","asset","LinkReact.bs","ImageReact.bs","ReasonReact.bs","TrackingNodes","TrackingNodeTypes"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("FantaCloseButton");function a(a,c,d){return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){var d=b("TrackingNodes").getTrackingInfo(b("TrackingNodeTypes").CLOSE_BUTTON),e=c?i._("Press Esc to close"):i._("Close tab");return b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,[e],["_40qq _4vu4 button"],[d],["tooltip"],[e],0,["above"],0,0,[function(c){c.stopPropagation();return b("bs_curry")._1(a,c)}],0,0,0,0,0,0,0,[b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(["close"],0,0,0,[g("393091")],0,0,0,0,[]))]))},j[9],j[10],j[11],j[12]]}f.component=j;f.make=a}),null);
__d("SplitImage.bs",["ReasonReact.bs","SplitImage.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("SplitImage.react"),{border:b("bs_js_null_undefined").fromOption(e),size:a,srcs:c,className:b("bs_js_null_undefined").fromOption(d)},f)}f.make=a}),null);
__d("FantaProfilePresence.bs",["cx","React","goURI","gkx","LinkReact.bs","bs_caml_array","ImageReact.bs","MercuryIDs","SplitImage.bs","ReasonReact.bs","bs_js_primitive","MessengerHoverCardLink"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("FantaProfilePresence");function i(a,c,d,e,f,g,i,j,k){__p&&__p();var l=j?j[0]:"";return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){__p&&__p();var h=b("gkx")("AT4aq0gj3KFvuyn5ouzkcinNuxrDXZY6HPjnRXCVXzOigsSLEws96b2T0YYtUZg_IxPxKREPJvW4RS6GeFXjfiRr")&&a.length>1;if(h){var j=Math.round(c/3)|0;j=c-j|0;j=b("React").createElement("div",{className:"_44yp",style:{height:c.toString()+"px",width:c.toString()+"px"}},b("React").createElement("div",{className:"_1gyw"},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,[""],0,0,[b("bs_caml_array").caml_array_get(a,0)],[j],0,[j],0,[]))),b("React").createElement("div",{className:"_1gyw",style:{borderColor:l}},b("ReasonReact.bs").element(0,0,b("ImageReact.bs").make(0,[""],0,0,[b("bs_caml_array").caml_array_get(a,1)],[j],0,[j],0,[]))))}else j=b("ReasonReact.bs").element(0,0,b("SplitImage.bs").make(c,a,["_1gyw"],e,[]));j=b("ReasonReact.bs").element(0,0,b("LinkReact.bs").make(0,0,[i],["_2yg8"],0,["tooltip"],[i],0,0,[g],0,[function(a){if(g.length>0){b("goURI")(g,undefined,undefined);a.stopPropagation();return 0}else return 0}],0,0,0,0,[-1],0,0,[j]));if(f){var k=f[0];if(k.is_canonical){k=b("MessengerHoverCardLink").constructEndpoint({id:b("MercuryIDs").getThreadFBIDFromThreadID(k.thread_id)});k=b("React").cloneElement(j,{"data-hovercard":k})}else k=j}else k=j;return b("React").createElement("div",{"aria-hidden":!0,className:"_ro7"+(h?" _44yq":"")},k,d?b("React").createElement("div",{className:"_1gyx",style:{borderColor:l}}):null)},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.images,a.imageSize,a.isActive,b("bs_js_primitive").null_undefined_to_opt(a.border),b("bs_js_primitive").null_undefined_to_opt(a.thread),a.threadHref,a.tooltip,b("bs_js_primitive").null_undefined_to_opt(a.backgroundColor),[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("bs_belt_Option",["bs_curry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a)return a[0];else throw new Error("getExn")}function g(a,b,c){if(a)return c(a[0]);else return b}function c(a,c,d){return g(a,c,b("bs_curry").__1(d))}function h(a,b){if(a)return[b(a[0])];else return 0}function d(a,c){return h(a,b("bs_curry").__1(c))}function i(a,b){if(a)return b(a[0]);else return 0}function e(a,c){return i(a,b("bs_curry").__1(c))}function j(a,b){if(a)return a[0];else return b}function k(a){if(a)return!0;else return!1}function l(a){if(a)return!1;else return!0}function m(a,b,c){if(a)if(b)return c(a[0],b[0]);else return!1;else if(b)return!1;else return!0}function n(a,c,d){return m(a,c,b("bs_curry").__2(d))}function o(a,b,c){if(a)if(b)return c(a[0],b[0]);else return 1;else if(b)return-1;else return 0}function p(a,c,d){return o(a,c,b("bs_curry").__2(d))}f.getExn=a;f.mapWithDefaultU=g;f.mapWithDefault=c;f.mapU=h;f.map=d;f.flatMapU=i;f.flatMap=e;f.getWithDefault=j;f.isSome=k;f.isNone=l;f.eqU=m;f.eq=n;f.cmpU=o;f.cmp=p}),null);
__d("FantaM4Header.bs",["cx","fbt","cssVar","React","gkx","MercuryIDs","bs_belt_Option","ChatTabMenu.bs","ReasonReact.bs","bs_js_primitive","ChatThreadName.bs","ChatDetailStack.bs","FantaCloseButton.bs","ArchiveWarningReact.bs","ChatVideoCallButton.bs","FantaProfilePresence.bs","MessengerParticipants.bs","getPageIDFromThreadID","getGroupNameTooltipFromParticipantIDs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("FantaM4Header");function k(a,c){__p&&__p();if(a){a=a[0].valueSeq().filter(function(a){return!(a.image_src==null)}).map(function(a,d,e){d=b("bs_belt_Option").getExn(b("bs_js_primitive").null_undefined_to_opt(a.image_src));return[d,a.fbId!==c]}).take(4).toArray();var d=a.length>3;d=d?a.filter(function(a){return a[1]}):a;return d.slice(0,3).map(function(a){return a[0]})}else return[]}function l(a,c,d){__p&&__p();if(a){a=a[0];var e=a.image_src;if(e==null){a=b("MercuryIDs").getParticipantIDFromFromThreadID(a.thread_id);if(a==null)return k(c,d);else{c=b("MessengerParticipants.bs").getNow(a);if(c==null)return[];else{d=c.image_src;if(d==null)return[];else return[d]}}}else return[e]}else return[]}function m(a){__p&&__p();if(a){a=a[0];if(a.is_canonical)return"";else{a=b("getGroupNameTooltipFromParticipantIDs").getGroupNameTooltipFromParticipantIDs(a.participants);if(a==null)return"";else return a}}else return""}function n(a,c,d,e,f,g,i,k,n,o,p,q,r,s,t,u,v,w,x){__p&&__p();var y=s?s[0]:"";return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var j=l(r,p,t),s=r?b("bs_js_primitive").null_undefined_to_opt(b("getPageIDFromThreadID")(r[0].thread_id)):0,z=h._("Active now");s=s||!e?null:b("React").createElement("div",{"aria-label":z,role:"presentation"},z);if(p){z=p[0];var A=z.filter(function(b,a,c){return b.employee});A=z.count()>0&&A.count()===z.count()}else A=!1;z=m(r);if(r){var B=r[0].header_color;B=B==null?["#0084ff"]:[B]}else B=["#0084ff"];B=d?B?[["#FFFFFF"],B[0]]:[["#bec2c9"],""]:B?f?[[B[0]],""]:[["#bec2c9"],""]:[["#bec2c9"],""];var C=B[1];B=B[0];var D=b("gkx")("AT6xa_Prh72hnOTDQ3aoezexBws-l47wdubCJdahCNHN_M0yvNIVgO3a6G_ArwG33iWNx1YBgXNCaMdq6kvMfM0Y");D=d?D?"_69pt _2mgn _3566":"_69pt _2mgn":"_69pt";var E=v?h._("New Message"):b("ReasonReact.bs").element(0,0,b("ChatThreadName.bs").make(r,y,z,t,"_2mgq",v,[]));A=v?null:A?b("React").createElement("div",{className:"_69r-"},b("React").createElement("div",{className:"_1v1u"},b("ReasonReact.bs").element(0,0,b("ArchiveWarningReact.bs").make(A,[]))),s):s;return b("React").createElement("div",{className:D,style:{backgroundColor:C},onClick:n},b("React").createElement("div",{className:"_66n2"},v?null:b("ReasonReact.bs").element(0,0,b("FantaProfilePresence.bs").make(j,32,u?!0:e,[!0],r,y,z,[C],[])),b("React").createElement("div",{className:"_66n3"+(v?" _6dtv":"")},b("ReasonReact.bs").element(0,0,b("ChatDetailStack.bs").make(E,A,[])),r&&!v?b("React").createElement("div",{className:"_69ae"},b("React").createElement("div",{className:"_66n5 _1iti"},b("ReasonReact.bs").element(0,0,b("ChatVideoCallButton.bs").make([!1],0,0,B,r,t,0,[]))),b("React").createElement("div",{className:"_66n5 _1iti"},b("ReasonReact.bs").element(0,0,b("ChatVideoCallButton.bs").make([!0],[o],[q],B,r,t,0,[]))),b("React").createElement("div",{className:"_66n5"},b("ReasonReact.bs").element(0,0,b("ChatTabMenu.bs").make(r,t,a,i,p,c,g,f,d,v,w,[])))):null)),b("ReasonReact.bs").element(0,0,b("FantaCloseButton.bs").make(k,f,[])))},j[9],j[10],j[11],j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return n(a.composer,a.hasBlockedMessages,a.highlightNewMessage,a.isActive,a.isFocused,a.isMultiCompany,b("bs_js_primitive").null_undefined_to_opt(a.membershipParticipants),a.onClose,a.onHeaderToggle,a.onRTCNuxCloseButtonClick,b("bs_js_primitive").null_undefined_to_opt(a.participants),a.rtcNuxShown,b("bs_js_primitive").null_undefined_to_opt(a.thread),[a.threadHref],a.viewer,b("bs_js_primitive").null_undefined_to_opt(a.pageIndicatorDescription),a.isNewMessageTab,a.uri,[])});c=32;d=20;f.component=j;f.profile_image_size=c;f.small_profile_image_size=d;f.getUpTo3Images=k;f.getProfileImages=l;f.getTooltip=m;f.make=n;f.jsComponent=a}),null);
__d("XGroupCallNuxController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/nux/",{action:{type:"String",required:!0}})}),null);
__d("FantaChatHeaderContainer.react",["cx","AsyncRequest","ChatTabHeaderContainer.react","FantaAvailableStatus","FantaM4Header.bs","FantaTabActions","FantaTabSheetActions","FantaTypeComposer","MercuryIgnoredBlockedParticipants.bs","React","XGroupCallNuxController","gkx","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("FantaM4Header.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=!1,this.state={rtcNuxShown:!1},this.$7=function(){var a=this.props.threadID;b("FantaTabSheetActions").openAddMoreFriendsSheet(a)}.bind(this),this.$4=function(event){this.props.onClose&&this.props.onClose(),event.preventDefault()}.bind(this),this.$5=function(event){var a=event.target,c=a&&a.classList&&a.classList.contains("button");a=a&&(a.tagName==="svg"||a.ownerSVGElement!=null);if(c||a)return;event.stopPropagation();b("FantaTabActions").minimizeTab(this.props.threadID)}.bind(this),this.$6=function(event){this.$3();var a=event.target;if(!a)return;(a.getAttribute("role")==="presentation"||a.classList&&(a.classList.contains("_15p6")||a.classList.contains("_2nlt")||a.classList.contains("_14lt")))&&(event.stopPropagation(),b("FantaTabActions").minimizeTab(this.props.threadID))}.bind(this),this.$3=function(){if(this.state.rtcNuxShown&&this.$1){this.setState({rtcNuxShown:!1});var a=b("XGroupCallNuxController").getURIBuilder().setString("action","dismiss").getURI();new(b("AsyncRequest"))(a).send()}}.bind(this),c}a.prototype.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return c.threadHref!==a.threadHref||c.highlightNewMessage!==a.highlightNewMessage||c.isFocused!==a.isFocused||c.viewer!==a.viewer||c.threadID!==a.threadID||c.isLastGroupTab!==a.isLastGroupTab||c.thread!==a.thread||d.rtcNuxShown!==b.rtcNuxShown||c.customColor!==a.customColor||c.blockedIDs!==a.blockedIDs||!c.membershipParticipants&&!!a.membershipParticipants||!!c.membershipParticipants&&!!a.membershipParticipants&&!c.membershipParticipants.equals(a.membershipParticipants)||!c.participants&&!!a.participants||!!c.participants&&!!a.participants&&!c.participants.equals(a.participants)};a.prototype.componentDidMount=function(){this.$1=!0,this.$2()};a.prototype.componentWillUnmount=function(){this.$3(),this.$1=!1};a.prototype.render=function(){var a=this.props,c=a.blockedIDs,d=a.composer,e=a.customColor,f=a.highlightNewMessage,g=a.isFocused,h=a.isNewMessageTab,j=a.membershipParticipants,k=a.pageIndicatorDescription,l=a.participants,m=a.thread,n=a.threadHref,o=a.threadID,p=a.uri;a=a.viewer;var q=this.state.rtcNuxShown,r=e?{color:e}:null;c=!!m&&b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(a,c,m);if(b("gkx")("AT6A1bnDK2h8UfK21QtwMasCKSCRuJLNl1CkXiFlb4ngyuzOTwnMPylW45yiU1EwI4xsY2mbtMRkoGbbra-xak0V")){var s=b("FantaAvailableStatus").isAvailable(m,o);return b("React").createElement("div",{className:"clearfix titlebar"},b("React").createElement(i,{composer:d,hasBlockedMessages:c,highlightNewMessage:f,isActive:s,isFocused:g,isMultiCompany:this.props.isMultiCompany,isNewMessageTab:!!h,membershipParticipants:j,onClose:this.$4,onHeaderToggle:this.$5,onRTCNuxCloseButtonClick:this.$3,pageIndicatorDescription:k,participants:l,rtcNuxShown:q,thread:m,threadHref:n,uri:p,viewer:a}))}return b("React").createElement("div",{className:"clearfix fbNubFlyoutTitlebar titlebar"+(e?" _1m34":""),style:r},b("React").createElement(b("ChatTabHeaderContainer.react"),{attachmentsShelf:document.createElement("div"),composer:d,hasBlockedMessages:c,href:n,isActive:g,isMultiCompany:this.props.isMultiCompany,isNewMessageTab:!!h,isRaised:!0,isTyping:!1,membershipParticipants:j,onClick:this.$6,onCloseClick:this.$4,onRTCNuxCloseButtonClick:this.$3,participants:l,rtcNuxShown:q,sheetController:{openAddFriendsSheet:this.$7},thread:m,threadID:o,viewer:a}))};a.prototype.$2=function(){if(this.props.isLastGroupTab){var a=b("XGroupCallNuxController").getURIBuilder().setString("action","should_show").getURI();new(b("AsyncRequest"))(a).setHandler(function(a){a=a.payload.shouldShow;this.$1&&this.setState({rtcNuxShown:a})}.bind(this)).send()}};a.propTypes={blockedIDs:c.instanceOf(Set).isRequired,customColor:c.string,highlightNewMessage:c.bool,isFocused:c.bool.isRequired,isLastGroupTab:c.bool.isRequired,onClose:c.func.isRequired,thread:c.object,threadID:c.string.isRequired,uri:c.string,viewer:c.string.isRequired};e.exports=a}),null);
__d("FantaConversation.react",["Bootloader","ChatConversation.react","CurrentUser","EventProfiler","MercuryIDs","MessengerHotLikePreviewEvents","React","StickerInterfaces","StickersTypedLogger","SubscriptionsHandler","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(a){g.constructor.call(this,a),this.$4=function(a){this.props.threadID===a&&this.setState({likePreview:null})}.bind(this),this.$5=function(a,c){if(!a)return;new(b("StickersTypedLogger"))().setEvent("click_sticker").setPackid(a).setStickerid(c).log();b("Bootloader").loadModules(["StickersPackInTray","StickersActions","StickersStoreController"],function(c,d,e){c.onIsPackInTray(a,b("StickerInterfaces").MESSAGES,function(b){b.in_sticker_tray?(d.selectTrayPack(a),d.showStickerFlyout(this.props.threadID)):e.showStore(a)}.bind(this))}.bind(this),"FantaConversation.react")}.bind(this),this.state={likePreview:null},this.$1=new(b("SubscriptionsHandler"))()}a.prototype.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return!c.onlineUsers.equals(a.onlineUsers)||!c.messages.equals(a.messages)||c.threadID!==a.threadID||c.thread!==a.thread||d.likePreview!==b.likePreview};a.prototype.componentDidMount=function(){this.$2(),this.$3()};a.prototype.componentDidUpdate=function(){this.$3()};a.prototype.componentWillUnmount=function(){this.$1.release()};a.prototype.$3=function(){b("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],!0,"click")};a.prototype.$2=function(){this.$1.addSubscriptions(b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(a,b){this.props.threadID===b&&this.setState({likePreview:a})}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,this.$4),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,this.$4),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,this.$4))};a.prototype.render=function(){var a=this.props.messages,c=this.props,d=c.forGameChat,e=c.onLoadMoreMessages,f=c.thread;c=c.threadID;var g=this.state.likePreview,h=b("CurrentUser").getID();g&&(a=a.push(g));return f?b("React").createElement(b("ChatConversation.react"),{forGameChat:d,isCanonical:b("MercuryIDs").isCanonical(c),loadMoreMessages:e,maxBubbleWidth:181-this.props.scrollbarPadding,messages:a,onAttachmentLoad:function(){return this.props.onAttachmentLoad()}.bind(this),onMount:b("emptyFunction"),onStickerClick:this.$5,onlineUsers:this.props.onlineUsers,readReceipts:this.props.readReceipts,ref:"conversation",thread:f,threadID:c,viewer:h}):b("React").createElement("div",null)};a.prototype.getMessageList=function(){return this.refs.conversation&&this.refs.conversation.getMessageList()};a.propTypes={forGameChat:c.bool.isRequired,messages:c.object.isRequired,onLoadMoreMessages:c.func.isRequired,onlineUsers:c.object.isRequired,scrollbarPadding:c.number,thread:c.object,threadID:c.string.isRequired};e.exports=a}),null);
__d("FantaPageGreetingLoader.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React","getPageIDFromThreadID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.thread;a=a.threadID;if(c!=null){c=((c=c)!=null?c.is_canonical_neo_user:c)||!1;if(c)return null}else return null;return b("getPageIDFromThreadID")(a)?b("React").createElement("div",{className:"_av1"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MercuryChatTabPagesGreetingContainer.react").__setRef("FantaPageGreetingLoader.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:a})})):null};e.exports=a}),null);
__d("XWorkplaceHomepageMainController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/workplace/{?*path}/",{path:{type:"String",defaultValue:""},ref:{type:"String"},source:{type:"String"}})}),null);
__d("MercuryLastMessageIndicator.react",["cx","fbt","CurrentUser","MercuryIDs","MercuryMessageSourceTags","MercuryViewer","MessengerParticipants.bs","MessengerReadReceipt.bs","MessengerTextWithEmoticons.react","React","SubscriptionsHandler","TooltipData","WorkModeConfig","XWorkplaceHomepageMainController","emptyFunction","formatDate","gkx","immutable","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=b("immutable").Set;c=b("React").PropTypes;var k=function(a,c,d){a=b("MessengerReadReceipt.bs").getSeenTimestamp(a,d,c[0]);d=a.action*.001;return{seenTimestamp:d,seenByData:null}},l=function(a,c,d){__p&&__p();var e={};for(var f=a,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;e[i]=b("MessengerParticipants.bs").getNow(i)}i=null;c&&c.custom_nickname&&(i=c.custom_nickname);h={};g=Object.keys(e);for(var f=0;f<g.length;f++){var j=g[f],k=e[j],l;void 0;!k?l=b("MessengerParticipants.bs").getDefaultName():(l=k.short_name,i&&i[k.fbid]&&(l=i[k.fbid]));h[j]=l}var m;k=!1;j=!1;n(a,d,c)?j=!0:a.length==1?m=" "+h[a[0]]:a.length==2?m=" "+h[a[0]]+", "+h[a[1]]:a.length==3?m=" "+h[a[0]]+", "+h[a[1]]+", "+h[a[2]]:a.length>3&&(m=" "+h[a[0]]+", "+h[a[1]]+", ",k=!0);return{seenTimestamp:null,seenByData:{seenByAll:j,text:m,showTooltip:k,seenBy:a}}},m=function(a,c,d,e){e=b("MessengerReadReceipt.bs").getSeenBy(a,e,!0);if(e.length===0)return{seenTimestamp:null,seenByData:null};var f=b("MercuryIDs").getUserIDFromThreadID(d);if(f)return k(a,e,d);else return l(e,c)},n=function(a,c,d){var e=d?d.participants.length:0;a=a.length;c&&c.author!=b("MercuryViewer").getID()&&(!d||d.participants.indexOf(c.author)>-1)&&a++;return e>2&&a>=e-1};d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={seenTimestamp:null,seenByData:null},b}a.getDerivedStateFromProps=function(a,b){"use strict";return m(a.readReceipts,a.thread,a.threadID,a.lastMessage)};a.prototype.shouldComponentUpdate=function(a,b){"use strict";__p&&__p();if(a.thread!==this.props.thread||a.threadID!==this.props.threadID||a.lastMessage!==this.props.lastMessage||a.isTyping!==this.props.isTyping||a.readReceipts!==this.props.readReceipts||b.seenTimestamp!==this.state.seenTimestamp)return!0;a=this.state.seenByData;b=b.seenByData;if(!a&&!b)return!1;if(!a||!b)return!0;if(a.seenByAll!==b.seenByAll||a.showTooltip!==b.showTooltip||a.text!==b.text)return!0;return!j(a.seenBy).equals(j(b.seenBy))?!0:!1};a.prototype.componentDidUpdate=function(){"use strict";if(!this.isVisible())return;this.props.indicatorDidShow&&this.props.indicatorDidShow()};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.release()};a.prototype.$2=function(){"use strict";return!this.props.lastMessage?[]:this.props.lastMessage.source_tags||this.props.lastMessage.tags||[]};a.prototype.$3=function(){"use strict";if(this.props.isTyping)return b("React").createElement("div",{className:this.$4([])},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},"\xa0"));var a=this.$2(),c=this.state.seenByData,d=this.state.seenTimestamp;if(c)return b("React").createElement("div",{className:this.$4(a)},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f"},this.$5(c)));else if(d)return b("React").createElement("div",{className:this.$4(a)},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},this.$6(d)));else return b("React").createElement("div",{className:this.$4(a)},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},this.$7(a)))};a.prototype.render=function(){"use strict";if(!b("CurrentUser").isWorkUser()&&b("gkx")("AT4vZBWyiZL1KZrir2lJt4vVNMIYu8sDbA3PtNwJWZh5seJSYZeYdmCgqH3wgiUS4PfslnEPm3wz9jSsjDINBCSy"))return b("React").createElement("div",{className:"_4gd0"},this.$3());else return this.$3()};a.prototype.$6=function(a){"use strict";var c=Date.now()*.001,d;a<c-518400?d="M j":a<c-86400?d="D g:ia":d="g:ia";return h._("Seen {timestamp}",[h._param("timestamp",b("formatDate")(a,d))])};a.prototype.$7=function(a){"use strict";__p&&__p();if(a.includes(b("MercuryMessageSourceTags").MESSENGER))if(!b("WorkModeConfig").is_work_user)return b("React").createElement("a",{href:"/mobile/messenger",className:"fcg",target:"_blank"},h._("Sent from Messenger"));else return b("React").createElement("a",{href:"https://www.facebook.com/workplace/mobile/",className:"fcg",target:"_blank"},h._("Sent from Workplace Chat"));else if(a.includes(b("MercuryMessageSourceTags").MOBILE)){var c=b("WorkModeConfig").is_work_user?"/workplace/mobile":"/mobile";return b("React").createElement("a",{href:c,className:"fcg",target:"_blank"},h._("Sent from Mobile"))}else if(a.includes(b("MercuryMessageSourceTags").EMAIL))return b("React").createElement("span",null,h._("Sent from email"));else if(a.includes(b("MercuryMessageSourceTags").WORK_DESKTOP)){c=b("XWorkplaceHomepageMainController").getURIBuilder().setString("path","chat-app").setString("ref","last-message-indicator").getURI();return b("React").createElement("a",{href:c,className:"fcg",target:"_blank"},h._("Sent from the desktop app"))}return null};a.prototype.$4=function(a){"use strict";var c=this.props.lastMessage&&this.props.lastMessage.author&&b("MercuryViewer").isViewer(this.props.lastMessage.author);c="_510g"+(c?" _510e":"");var d=null;this.props.isTyping?d=null:this.state.seenByData!==null||this.state.seenTimestamp!==null?d="seen":a.includes(b("MercuryMessageSourceTags").MESSENGER)||a.includes(b("MercuryMessageSourceTags").MOBILE)?d="sentFromMobile":a.includes(b("MercuryMessageSourceTags").WORK_DESKTOP)?d="sentFromDesktop":a.includes(b("MercuryMessageSourceTags").EMAIL)&&(d="sentFromEmail");return b("joinClasses")(c,d)};a.prototype.isVisible=function(){"use strict";var a=this.$2();return a.includes(b("MercuryMessageSourceTags").MESSENGER)||a.includes(b("MercuryMessageSourceTags").MOBILE)||a.includes(b("MercuryMessageSourceTags").EMAIL)||a.includes(b("MercuryMessageSourceTags").WORK_DESKTOP)?!0:this.state.seenTimestamp!==null||this.state.seenByData!==null};a.prototype.$5=function(a){"use strict";__p&&__p();var c=a.seenByAll;if(c)return h._("Seen by everyone");c=a.text;if(!c)return null;c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoji:!0,renderEmoticons:!0,text:c});var d=a.showTooltip;if(!d)return h._("Seen by {names}",[h._param("names",c)]);else{d=this.$8(a);return h._("Seen by {names}{=num more link}",[h._param("names",c),h._param("=num more link",d)])}};a.prototype.$8=function(a){"use strict";__p&&__p();if(!a.text||!a.showTooltip)return null;var c={},d=0,e=null;b("MessengerParticipants.bs").getMulti(a.seenBy,function(b){e=a.seenBy.map(function(a){return b[a].name}).join("\r\n"),d=Object.keys(b).length-2});c=Object.assign({"data-tooltip-alignh":"center"},b("TooltipData").propsFor(e,"above"));var f=h._({"*":"{num} more"},[h._param("num",d,[0])]);return b("React").createElement("span",babelHelpers["extends"]({className:"more"},c),f)};a.propTypes={indicatorDidShow:c.func,lastMessage:c.object,readReceipts:c.object,threadID:c.string.isRequired,isTyping:c.bool.isRequired};a.defaultProps={indicatorDidShow:b("emptyFunction")};e.exports=a}),null);
__d("MessengerQuickReplyUtils",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={localizeTitleIfNecessary:function(a){return a.map(function(a){return a.content_type==="location"?Object.assign(a,{title:g._("Send Location")}):a})}};e.exports=a}),null);
__d("MessengerViewerContactMethodsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1868889766468115"};c.getQueryID=function(){"use strict";return"177554543035925"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MercuryQuickReply.react",["cx","BootloadedComponent.react","JSResource","MercuryIDs","MessengerQuickCamOrigins","MessengerQuickReplyUtils","MessengerViewerContactMethodsWebGraphQLQuery","React","WebGraphQL","XUISpinner.react","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={viewerEmail:null,viewerPhone:null},b}a.prototype.componentDidMount=function(){this.$1(this.props.lastMessage)!==null&&this.props.quickReplyDidShow()};a.prototype.componentDidUpdate=function(a){this.$1(this.props.lastMessage)!==null&&this.$1(a.lastMessage)===null&&this.props.quickReplyDidShow(),this.$2(this.props.lastMessage)};a.prototype.render=function(){__p&&__p();var a=this.props.lastMessage,c=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer);if(!a||a.author===c)return null;c=this.$1(a);if(Array.isArray(c)){var d=c.every(function(a){return a.content_type==="user_email"&&this.state.viewerEmail===null||a.content_type==="user_phone_number"&&this.state.viewerPhone===null}.bind(this));if(!d){d=b("MessengerQuickReplyUtils").localizeTitleIfNecessary(c);return b("React").createElement("div",{className:"_419m"},b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MercuryQuickReply.react"),bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),{className:"_5h-9"}),isSponsored:a.is_sponsored,messageId:a.message_id,options:d,pageId:b("MercuryIDs").getUserIDFromParticipantID(a.author),threadID:a.thread_id,quickCamOriginLocation:this.props.quickCamOriginLocation,viewer:this.props.viewer,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone}))}}return null};a.prototype.$1=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return Array.isArray(a&&a.quick_replies)?a&&a.quick_replies:null};a.prototype.$2=function(a){__p&&__p();a=this.$1(a);if(!a||a.length===0)return;a.some(function(a){return a.content_type==="user_email"||a.content_type==="user_phone_number"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewerContactMethodsWebGraphQLQuery"))({})),function(a){var b;b=(b=a)!=null?(b=b.viewer)!=null?(b=b.user)!=null?b.all_phones:b:b:b;a=(a=a)!=null?(a=a.viewer)!=null?a.all_emails:a:a;var c=b?b.find(function(a){return a.is_preferred}):null;!c&&b&&(c=b[0]);b=a?a.find(function(a){return a.is_primary}):null;this.setState({viewerEmail:(a=b)!=null?a.display_email:a,viewerPhone:(b=c)!=null?(b=b.phone_number)!=null?b.universal_number:b:b})}.bind(this))};a.propTypes={quickReplyDidShow:c.func.isRequired,lastMessage:c.object,quickCamOriginLocation:c.oneOf(b("MessengerQuickCamOrigins").getValues()).isRequired,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerTabsThreadSearchLoader",["Promise","Bootloader","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_store:null,_actions:null,_promise:null,getStoreEnforce:function(){b("nullthrows")(this._store,"Tab thread search store is not loaded");return this._store},getActionsEnforce:function(){b("nullthrows")(this._actions,"Tab thread search actions are not loaded");return this._actions},isLoaded:function(){return this._store&&this._actions},load:function(){this._promise||(this._promise=new(b("Promise"))(function(a){b("Bootloader").loadModules(["MessengerThreadSearchActions","MessengerTabsThreadSearchStore"],function(b,c){this._store=c.get(),this._actions=b,a({store:c,actions:b})}.bind(this),"MessengerTabsThreadSearchLoader")}.bind(this)));return this._promise}};e.exports=a}),null);
__d("FantaConversationScroller.react",["ix","cx","csx","fbt","Animation","Arbiter","BootloadedComponent.react","Bootloader","BootloadOnRender.react","ChatThread","ChatTypingIndicatorsWrapper.react","CurrentUser","ErrorBoundary.react","Event","FantaConversation.react","FantaPageGreetingLoader.react","FantaTabActions","Grid.react","Image.react","JSResource","LazyComponent.react","Link.react","MercuryAttachment","MercuryConfig","MercuryIDs","MercuryLastMessageIndicator.react","MercuryQuickReply.react","MercuryShareAttachmentRenderLocations","MessengerHotLikePreviewEvents","MessengerParticipants.bs","MessengerQuickCamOrigins","MessengerTabsThreadSearchLoader","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","Parent","QE2Logger","React","ReactDOM","Scroll","ScrollBoundaryContain","Style","SubscriptionsHandler","TimeSlice","WebMessengerConstants","XUIButton.react","XUISpinner.react","immutable","asset","clearImmediate","emptyFunction","getElementPosition","getPageIDFromThreadID","gkx","isEventSupported","joinClasses","promiseDone","setImmediate","shallowEqual","throttle"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("ChatThread").ChatThread,m=b("Grid.react").GridItem;c=b("React").PropTypes;var n=15,o=null,p=20,q=1e3;function r(a){__p&&__p();if(o===null){var c=a.firstElementChild;if(c){b("Style").set(a,"overflow","scroll");var d=c.clientWidth;b("Style").set(a,"overflow","hidden");c=c.clientWidth;o=Math.max(c-d,0);b("Style").set(a,"overflow","")}else o=0}return o}d=babelHelpers.inherits(a,b("React").Component);k=d&&d.prototype;function a(a){__p&&__p();k.constructor.call(this,a),this.$9=[],this.state={loadingMessages:!this.props.isEmptyLocalThread,scrollbarPadding:o===null?n:o,hideLastMessageIndicator:!1,searchResults:null},this.$20=function(a){a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);a&&(this.$21(),this.$22()&&!this.$23()&&!this.$3&&!this.props.hasFetchedAll&&!(this.state.searchResults&&this.state.searchResults.mid)&&(this.setState({loadingMessages:!0}),this.props.onLoadMoreMessages()),this.$24(),this.$10())}.bind(this),this.$16=function(){__p&&__p();if(!this.refs||this.state.loadingMessages||!this.props.thread){this.$9=[];return}var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer),c=b("getPageIDFromThreadID")(this.props.threadID);if(!a||!c){this.$9=[];return}var d=10,e,f;try{e=a.getBoundingClientRect(),f=this.refs.conversation?this.refs.conversation.getMessageList():null}catch(a){return}if(!f||!e)return;var g=[];this.$8.forEach(function(a){if(!f)return;var h=a.message_id,i=f.getMessageElement(h);if(i){i=i.getBoundingClientRect();i.top>e.top-d&&i.bottom<e.bottom+d&&(g.push(h),this.$9.includes(h)||b("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(b,d){b.log(a.ad_client_token,a.ad_id,d.MESSAGE_SEEN_THREAD,!0,h,c)},"FantaConversationScroller.react"))}}.bind(this),this);this.$9=g}.bind(this),this.$26=function(){this.$1=null,b("FantaTabActions").scrollBottomChanged(this.props.threadID,this.$6,this.$27)}.bind(this),this.$27=function(){this.$28(!1),this.$18()}.bind(this),this.$29=function(a){a=b("Parent").byClass(a.target,"._1dlq");a||this.props.onFocus&&this.props.onFocus()}.bind(this),this.$31=function(a){a.target&&a.target.classList&&a.target.classList.contains("_5wd4")&&(this.props.onFocus&&this.props.onFocus())}.bind(this),this.$6=!0}a.prototype.shouldComponentUpdate=function(a,c){var d=this.props,e=this.state;return!d.onlineUsers.equals(a.onlineUsers)||d.hasFetchedAll!==a.hasFetchedAll||d.isFocused!==a.isFocused||!d.messages.equals(a.messages)||d.showContextBanner!==a.showContextBanner||d.readReceipts!==a.readReceipts||d.thread!==a.thread||d.threadID!==a.threadID||e.loadingMessages!==c.loadingMessages||e.hideLastMessageIndicator!==c.hideLastMessageIndicator||!b("shallowEqual")(e.searchResults,c.searchResults)||d.jumpToMessage!==a.jumpToMessage};a.prototype.componentDidMount=function(){this.$7=new(b("SubscriptionsHandler"))(),this.$11(),this.$12(),this.$13(),b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$14()),this.setState({scrollbarPadding:r(this.refs.scrollContainer),searchResults:this.$15()}),this.$10=b("throttle")(this.$16,q),this.$8=this.props.messages.filter(function(a){return a.is_sponsored}),this.$10(),this.$17()};a.prototype.componentDidUpdate=function(a){__p&&__p();this.$13();if(this.$3){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer),d=this.$3||0;c=c.scrollHeight-d;this.scrollToPosition(c,!1);this.$3=null}if(!a.messages.equals(this.props.messages)){b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$14());d=a.messages.last();c=this.props.messages.last();if(d!==c&&c&&c.author){a=b("MercuryIDs").getUserIDFromParticipantID(c.author);a===b("CurrentUser").getID()&&(this.scrollToBottom(!1),this.$18())}}this.$19();this.$10()};a.prototype.componentWillUnmount=function(){this.$1&&b("clearImmediate")(this.$1),this.$7.release(),b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(this.props.threadID,null)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();var c=this.state.loadingMessages&&a.messages.size>0&&!a.messages.equals(this.props.messages);if(c||a.hasFetchedAll||a.showContextBanner){this.setState({loadingMessages:!1});c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);var d=c.scrollHeight;c=b("Scroll").getTop(c);this.$3=d-c}this.$8=a.messages.filter(function(a){return a.is_sponsored})};a.prototype.$15=function(){return b("MessengerTabsThreadSearchLoader").isLoaded()?b("MessengerTabsThreadSearchLoader").getStoreEnforce().getThreadState(this.props.threadID):null};a.prototype.$17=function(){(b("gkx")("AT5-H1DssNMzHFJnUsWkAc7ZTo_DRYYDCHBxlitySatfbYXgP_km8FqsTzTXC2uX7HeORenaopRdXTYwYznmUFoOqEvkESAzIjmNIdQtgjBCQQ")||b("MercuryConfig").M3CRE)&&b("promiseDone")(b("MessengerTabsThreadSearchLoader").load(),function(a){var b=a.store;a.actions;this.$7.addSubscriptions(b.get().addListener("change",function(){return this.setState({searchResults:this.$15(),loadingMessages:!1})}.bind(this)))}.bind(this))};a.prototype.$13=function(a){a===void 0&&(a=!1),this.$6&&b("TimeSlice").guard(function(){this.scrollToBottom(a)}.bind(this),"post load chat animations",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype.renderGroupWave=function(){var a=this.props.thread;return b("MercuryIDs").isLocalThread(this.props.threadID)&&b("gkx")("AT7uCGaYk4KWBCIq3SurfBIwk1DjmbU_QXgSqcY73Sdnw3DJhbzA4qigZjhm4wwYtWnHVZcxghHN6RO33C1W8YjG")&&a&&!a.associated_object&&!a.is_canonical&&!a.thread_fbid?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),{background:"light",className:"loading",size:"small"}),bootloadLoader:b("JSResource")("ChatWaveImage.react").__setRef("FantaConversationScroller.react"),thread:a,m4Thread:l!=null}):null};a.prototype.maybeRenderNullStateWave=function(){__p&&__p();var a=this.props,c=a.thread;a=a.threadID;if(!c||!c.is_canonical||c.timestamp)return null;b("QE2Logger").logExposureForUser("wave_in_www_null_state");if(!b("MercuryConfig").MNWNS)return null;c=b("MercuryIDs").getParticipantIDFromFromThreadID(a);c=c?b("MessengerParticipants.bs").getNow(c):null;c=c?c.short_name:null;return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerNewWavePrompt.react").__setRef("FantaConversationScroller.react"),threadID:a,recipientName:c,entrypoint:"canonical_null_state"})};a.prototype.$24=function(){__p&&__p();var a=this.props.threadID,c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!c)return;var d;try{c=c.getBoundingClientRect(),d=this.refs.conversation?this.refs.conversation.getMessageList():null}catch(a){return}if(!d||!c)return;var e=[],f=b("MessengerVideoAutoplayStore").getMessageIDs(a),g=f||this.$14()||b("immutable").List();g.map(function(a){var c=b("MercuryAttachment").getVideoElem(a,d);c&&e.push([a,c.getBoundingClientRect()])});e.length&&b("MessengerVideoAutoplayActions").onScroll(a,f?null:g,b("immutable").Map(e),c)};a.prototype.$14=function(){return this.props.messages.filter(function(a){return b("MercuryAttachment").isSingleVideoAttachment(a)||b("MercuryAttachment").isSharedVideoAttachmentMessage(a)}).reverse().map(function(a){return a.message_id})};a.prototype.$25=function(a,c){__p&&__p();var d=this.refs.conversation?this.refs.conversation.getMessageList():null;if(!d)return;var e=b("ReactDOM").findDOMNode(this.refs.scrollContainer),f=b("ReactDOM").findDOMNode(this.refs.conversation);d=d.getMessageComponent(a);a=b("ReactDOM").findDOMNode(d);if(!a||!f||!e)return;f=f.getBoundingClientRect().top;a=a.getBoundingClientRect().top;a=Math.abs(a-f)-e.getBoundingClientRect().height/2;this.$6=!1;this.scrollToPosition(Math.max(a,0),!1);b("CurrentUser").isWorkUser()&&d.highlightMessage();var g=c;g&&b("setImmediate")(function(){return g()})};a.prototype.scrollToBottom=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);c&&this.scrollToPosition(c.scrollHeight,a)};a.prototype.scrollToPosition=function(a,c){var d=b("ReactDOM").findDOMNode(this.refs.scrollContainer);this.$5&&this.$5.stop();c?this.$5=new(b("Animation"))(d).to("scrollTop",a).ease(b("Animation").ease.end).duration(400).go():b("Scroll").setTop(d,a)};a.prototype.$23=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);a=a===0?0:a||p;return b("Scroll").getTop(c)+c.clientHeight>=c.scrollHeight-a};a.prototype.$22=function(){var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);return b("Scroll").getTop(a)<a.clientHeight};a.prototype.$18=function(){var a=this.$6;this.$23()?this.$6=!0:this.$6=!1;a!==this.$6&&(this.$1=b("setImmediate")(this.$26))};a.prototype.$11=function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!a)return;var c=b("isEventSupported")("mousewheel")?"mousewheel":b("isEventSupported")("wheel")?"wheel":"DOMMouseScroll",d=function(){this.$18()}.bind(this),e=function(){a.addEventListener(c,d,{passive:!0})},f=function(){a.removeEventListener(c,d,{passive:!0})};this.$7.addSubscriptions(b("Arbiter").subscribe("overflow-applied-to-body",function(){return this.$13()}.bind(this)),b("Event").listen(a,"mousedown",d),b("Event").listen(a,"mouseup",d),b("Event").listen(a,"mouseenter",e),b("Event").listen(a,"mouseleave",f),{cancel:f},b("Event").listen(a,"scroll",b("throttle")(this.$20,50)));e=b("ScrollBoundaryContain").applyToElem(a);e&&this.$7.addSubscriptions(e)};a.prototype.$12=function(){this.$7.addSubscriptions(b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(a,b){this.props.threadID===b&&(this.$28(!1),clearInterval(this.$4),this.$4=setInterval(function(){this.$28(!1)}.bind(this),50))}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(a){clearInterval(this.$4)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(a){clearInterval(this.$4)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,function(a){this.props.threadID===a&&clearInterval(this.$4)}.bind(this)))};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.forGameChat,d=a.hasFetchedAll,e=a.isEmptyLocalThread,f=a.messages,g=a.showContextBanner,h=a.thread;a=a.threadID;var i=b("CurrentUser").getID(),k=b("gkx")("AT572SLwCLmZDDTsXg5I9LZsOQ15AFaFyPW6mF-2-OPcT86erU7KYs2R9o67DUyJwQ6AK0Y7upy2o2--jlRi_7EZ");k=k&&(e||d||g);e=this.state.loadingMessages||!h?b("React").createElement("div",{className:"_1xdl"},b("React").createElement(b("XUISpinner.react"),{background:"light",className:"loading",size:"small"})):null;d=function(){return this.$13()}.bind(this);g=b("React").createElement(b("FantaPageGreetingLoader.react"),{thread:h,threadID:a});k=k?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerContextBannerContainer.react").__setRef("FantaConversationScroller.react"),isContinuation:!1,location:b("MercuryShareAttachmentRenderLocations").CHAT,viewer:i,thread:h,threadID:a}):null;var n=b("React").createElement("div",{className:b("joinClasses")("accessible_elem","_2kwv")},j._("Chat Conversation Start")),o=b("React").createElement("div",{className:b("joinClasses")("accessible_elem","_2kwv")},j._("Chat Conversation End")),p=null,q=this.state.searchResults;if(q&&q.messages){var r=j._("Load more...");p=b("React").createElement(b("React").Fragment,null,q.upExhausted?null:b("React").createElement(b("XUIButton.react"),{className:"_41jf",label:r,onClick:function(){return b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP,this.props.threadID)}.bind(this),type:"primary",use:"default"}),b("React").createElement(b("FantaConversation.react"),{forGameChat:c,onAttachmentLoad:d,scrollbarPadding:this.state.scrollbarPadding,ref:"conversation",messages:q.messages,onLoadMoreMessages:b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext,hasFetchedAll:this.props.hasFetchedAll,isFocused:this.props.isFocused,onFocus:this.props.onFocus,onlineUsers:this.props.onlineUsers,readReceipts:this.props.readReceipts,showContextBanner:this.props.showContextBanner,thread:this.props.thread,threadID:this.props.threadID}),q.downExhausted?null:b("React").createElement(b("XUIButton.react"),{className:"_41jf",label:r,onClick:function(){return b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN,this.props.threadID)}.bind(this),type:"primary",use:"default"}),b("React").createElement(b("ChatTypingIndicatorsWrapper.react"),{threadID:a,indicatorClass:undefined,indicatorsWillShow:b("emptyFunction"),indicatorsDidShow:function(){return this.setState({hideLastMessageIndicator:!0},function(){this.$13(!0)}.bind(this))}.bind(this),indicatorsDidHide:function(){return this.setState({hideLastMessageIndicator:!1})}.bind(this),rootClassName:undefined,viewer:i,onlineUsers:this.props.onlineUsers}))}else p=b("React").createElement(b("React").Fragment,null,b("React").createElement(b("FantaConversation.react"),babelHelpers["extends"]({forGameChat:c,onAttachmentLoad:d,scrollbarPadding:this.state.scrollbarPadding,ref:"conversation"},this.props)),b("React").createElement(b("MercuryQuickReply.react"),{lastMessage:f.size>0?f.last():undefined,threadID:a,quickReplyDidShow:function(){return this.$13(!0)}.bind(this),viewer:i,quickCamOriginLocation:b("MessengerQuickCamOrigins").CHAT_TAB}),b("React").createElement(b("ChatTypingIndicatorsWrapper.react"),{threadID:a,indicatorClass:undefined,indicatorsWillShow:b("emptyFunction"),indicatorsDidShow:function(){return this.setState({hideLastMessageIndicator:!0},function(){this.$13(!0)}.bind(this))}.bind(this),indicatorsDidHide:function(){return this.setState({hideLastMessageIndicator:!1})}.bind(this),rootClassName:undefined,viewer:i,onlineUsers:this.props.onlineUsers}),this.renderGroupWave(),this.maybeRenderNullStateWave(),b("React").createElement(b("MercuryLastMessageIndicator.react"),{isTyping:this.state.hideLastMessageIndicator,indicatorDidShow:function(){this.$13(!0)}.bind(this),indicatorWillShow:b("emptyFunction"),lastMessage:f.size>0?f.last():null,readReceipts:this.props.readReceipts,thread:h,threadID:a}));q=b("React").createElement("div",{className:"_1xdm"+(e?" _1xdw":"")},b("React").createElement("div",{className:"_1xdx"},b("React").createElement("div",{className:"_1xe8"})),n,k,e,b("React").createElement("div",{style:f.size>0?{height:"176px"}:e?{height:"168px"}:{height:"192px"},className:"_1xdm"},p),o);return l!=null?b("React").createElement(l,{onClick:this.$29,spacerContent:b("React").createElement(b("React").Fragment,null,n,k,g,e),scrollRef:function(a){this.refs.scrollContainer=a}.bind(this)},p,o,this.$30(!0),b("gkx")("AT5LR14w3g9nmjLKlBbu8cp6dDohvGRAgb2EKeLFjLUw4ckGbkEAtvxTKhQkttWbJnopoJSv-Wj26ZhFsXLqkhQ5")&&b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("OmniMSuggestionsContainer.react").__setRef("FantaConversationScroller.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:this.props.threadID})}))):b("React").createElement("div",{className:"_2v5j"},b("React").createElement("div",{className:"fbNubFlyoutBody scrollable",onClick:this.$31,ref:"scrollContainer",role:"button",tabIndex:"0"},b("React").createElement("div",{className:"fbNubFlyoutBodyContent"},g,b("React").createElement(b("Grid.react"),{className:"conversationContainer",role:"log",cols:1},b("React").createElement(m,{alignv:"bottom"},q)))),this.$30(!1))};a.prototype.$30=function(a){a=a?{bottom:"14px"}:{bottom:"74px"};return this.state.searchResults&&this.state.searchResults.messages?b("React").createElement(b("Link.react"),{style:a,className:"_2llh",onClick:function(){return b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(this.props.threadID,null)}.bind(this)},b("React").createElement(b("Image.react"),{className:"_2llt",src:g("415098")})):null};a.prototype.$19=function(){var a=this.props.jumpToMessage;if(!a)return;this.props.messages.some(function(b){return b.message_id===a})||this.state.searchResults&&this.state.searchResults.messages&&this.state.searchResults.messages.some(function(b){return b.message_id===a})?this.$25(a,function(){return b("FantaTabActions").wipeJumpToMessage(this.props.threadID)}.bind(this)):b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(this.props.threadID,a)};a.prototype.$21=function(){var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer),c=b("getElementPosition")(a);b("Arbiter").inform("chatScrolled/"+this.props.threadID,{scrollTop:b("Scroll").getTop(a),top:c.y,viewHeight:c.height})};a.prototype.$28=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);c&&this.$32(c.scrollHeight,a)};a.prototype.$32=function(a,c){var d=b("ReactDOM").findDOMNode(this.refs.scrollContainer);this.$5&&this.$5.stop();c===!0?this.$5=new(b("Animation"))(d).to("scrollTop",a).ease(b("Animation").ease.end).duration(400).go():b("Scroll").setTop(d,a)};a.propTypes={forGameChat:c.bool.isRequired,hasFetchedAll:c.bool.isRequired,isEmptyLocalThread:c.bool.isRequired,isFocused:c.bool.isRequired,messages:c.object.isRequired,onFocus:c.func,onLoadMoreMessages:c.func.isRequired,onlineUsers:c.instanceOf(b("immutable").List).isRequired,showContextBanner:c.bool,thread:c.object,threadID:c.string.isRequired,jumpToMessage:c.string};e.exports=a}),null);
__d("FantaCookieUtil",["CurrentUser","FantaConst","MercuryIDs","MercuryMessages","MessengerDiscoveryEntryPoint","MessengerState.bs","WorkModeConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={convertCookieData:function(a,c,d){__p&&__p();var e={tabs:[],focusedTabID:null,updatedTime:0,interstitialData:d};d=[];var f=this._getCookieKeys();a=a||{};a[f.tabs]&&(d=a[f.tabs]);d.forEach(function(a){e.tabs.push({id:a.i,isMinimized:!a.r,openCounter:a.o,focusCounter:a.f})});if(c)for(var d=c.tabs.values(),c=Array.isArray(d),g=0,d=c?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(c){if(g>=d.length)break;h=d[g++]}else{g=d.next();if(g.done)break;h=g.value}h=h;b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),h.id)&&e.tabs.push({id:h.id,isMinimized:h.isMinimized,openCounter:h.openCounter,focusCounter:h.focusCounter})}e.focusedTabID=a[f.focusedTabID];e.updatedTime=a[f.updatedTime];return e},createCookieData:function(a,c){__p&&__p();var d=[],e=this._getCookieKeys();if(c[e.updatedTime]>a.updatedTime)return c;for(var f=a.tabs.values(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;!b("MercuryIDs").isLocalThread(i.id)&&!this._shouldDisableForCookie(i.id,i.entryPoint)&&d.push({i:i.id,r:i.isMinimized?undefined:1,o:i.openCounter,f:i.focusCounter})}c[e.tabs]=d;c[e.focusedTabID]=a.focusedTabID;c[e.updatedTime]=a.updatedTime;return c},_shouldDisableForCookie:function(a,c){if(!c.includes(b("MessengerDiscoveryEntryPoint").FB_PAGE_USER_MESSAGE_PROMPT))return!1;c=b("MercuryMessages").getForFBID(b("CurrentUser").getID());c=c.getThreadMessagesRangeNow(a,0,1)[0];return c===undefined},_getCookieKeys:function(){var a=b("WorkModeConfig").is_work_user;return{tabs:a?b("FantaConst").cookieIDs.WORK_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_COOKIE_ID,focusedTabID:a?b("FantaConst").cookieIDs.WORK_FOCUS_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_FOCUS_COOKIE_ID,updatedTime:a?b("FantaConst").cookieIDs.WORK_TIME_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_TIME_COOKIE_ID}}};e.exports=a}),null);
__d("FantaDragAndDrop.react",["Bootloader","BootloadOnRender.react","FantaTypeComposer","JSResource","LazyComponent.react","MercuryShareAttachmentRenderLocations","MessengerEnvironment","React","emptyFunction","ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=960;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$2=function(a){var b=this.props.composer;this.$5(function(c){c.removeSharePreview(a,b)})}.bind(this),this.$3=function(a,b){var c=this.props.composer;this.$5(function(d){d.loadedShareData(a,b,c)})}.bind(this),this.$4=function(a){var b=this.props.composer;this.$5(function(c){c.loadingShareData(a,b)})}.bind(this),b}a.prototype.componentDidMount=function(){b("MessengerEnvironment").messengerui?b("Bootloader").loadModules(["MessengerActions"],b("emptyFunction"),"FantaDragAndDrop.react"):b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"FantaDragAndDrop.react")};a.prototype.shouldComponentUpdate=function(a){var b=this.props,c=b.composer,d=a.composer,e=c.fileUploader,f=e.uploadingFiles;e=e.uploadedFiles;var g=d.fileUploader.uploadingFiles,h=d.fileUploader.uploadedFiles;c=c.sharePreview;d=d.sharePreview;return b.threadID!==a.threadID||!!(!f&&g)||!!(f&&g&&!f.equals(g))||!!(!e&&h)||!!(e&&h&&!e.equals(h))||!!(!c&&d)||!!(c&&d&&!c.equals(d))};a.prototype.render=function(){var a=this.props,c=a.composer;a=a.threadID;var d=c.sharePreview,e=d.share;d=d.uri;c=c.fileUploader;c.uploadingFiles;c.uploadedFiles;return b("React").createElement("div",{className:"fbNubFlyoutAttachments"},b("React").createElement("div",{className:"chatAttachmentShelf"},e||d?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MercurySharePreview.react").__setRef("FantaDragAndDrop.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{onClose:this.$2,onLoaded:this.$3,onLoading:this.$4,threadID:a,imageSize:{width:h,height:h},location:b("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW,share:e,uri:d})}):null))};a.prototype.$5=function(a){b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerActions",function(b){a(b)},function(){b("Bootloader").loadModules(["MessengerActions"],function(b){a(b)},"FantaDragAndDrop.react")}):b("ifRequired")("FantaMessageActions",function(b){a(b)},function(){b("Bootloader").loadModules(["FantaMessageActions"],function(b){a(b)},"FantaDragAndDrop.react")})};a.propTypes={composer:c.object.isRequired,threadID:c.string.isRequired};e.exports=a}),null);
__d("FantaMercuryTabOverflowBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=b("gkx")("AT4aq0gj3KFvuyn5ouzkcinNuxrDXZY6HPjnRXCVXzOigsSLEws96b2T0YYtUZg_IxPxKREPJvW4RS6GeFXjfiRr")?b("JSResource")("FantaM4TabOverflow.react").__setRef("FantaMercuryTabOverflowBootloader.react"):b("JSResource")("FantaMercuryTabOverflow.react").__setRef("FantaMercuryTabOverflowBootloader.react");return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{items:this.props.items,tabContents:this.props.tabContents}),loader:a,placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTab.react",["cx","EventProfiler","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=!1,b}a.prototype.componentDidMount=function(){b("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],!0,"click")};a.prototype.render=function(){var a=this.props,c=a.isFocused,d=a.isLastTab,e=a.isLastTabOfType,f=a.MainComponent,g=a.messengerState,h=a.MinimizedComponent,i=a.raisedTabCount,j=a.tab,k=a.tabContent;a=a.forGameChat;h=j.isMinimized?h:f;f=j.id+(j.isMinimized?"-minimized":"-maximized");var l=this.$1&&!j.isMinimized;this.$1=j.isMinimized;return b("React").createElement("div",{className:"_5qi9 _5qib"+(this.props.isFocused?" _5qic":"")+(j.isMinimized?" _3001":"")},b("React").createElement(h,{isFocused:c,isHovered:j.isHovered||l,isLastTab:d,isLastTabOfType:e,key:f,messengerState:g,raisedTabCount:i,tab:j,tabContent:k,forGameChat:a}))};e.exports=a}),null);
__d("FantaTabGroup.react",["cx","FantaTab.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){return!this.props.tabGroup.equals(a.tabGroup)||this.props.messengerState!==a.messengerState||!!(!this.props.tabContents&&a.tabContents)||!!(this.props.tabContents&&a.tabContents&&!this.props.tabContents.equals(a.tabContents))};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.isLastOfTypeChecker,d=a.MainComponent,e=a.messengerState,f=a.MinimizedComponent,g=a.OverflowComponent,h=a.tabContents;a=a.tabGroup;var i=a.focusedTabID,j=a.getRaisedandUnraisedTabs(),k=j.raisedTabs;j=j.unraisedTabs;var l;c&&(l=k.findLastKey(function(a){return c(a)&&a.id}));a=a.allowedRaisedTabs===0?null:this.$1(j,g);var m=k.count();return b("React").createElement("div",{className:"_59v1"},a,k.map(function(a){return b("React").createElement(b("FantaTab.react"),{forGameChat:!1,isFocused:a.id===i,isLastTab:a===k.last(),isLastTabOfType:a.id===l,key:a.id,messengerState:e,MainComponent:d,MinimizedComponent:f,raisedTabCount:m,tab:a,tabContent:h&&h.get(a.id)})}).toArray())};a.prototype.$1=function(a,c){return!a.isEmpty()?b("React").createElement("div",{className:"_1kws"},b("React").createElement(c,{items:a,tabContents:this.props.tabContents})):null};function a(){h.apply(this,arguments)}a.propTypes={MainComponent:c.func.isRequired,messengerState:c.array,MinimizedComponent:c.func.isRequired,OverflowComponent:c.func.isRequired,tabContents:c.object,tabGroup:c.object.isRequired};e.exports=a}),null);
__d("XMNCommercePostbackCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/postback/",{cta_id:{type:"String",required:!0},message_id:{type:"String"},ref:{type:"String"},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackCTADataManager",["AsyncRequest","BanzaiODS","CurrentUser","getPageIDFromThreadID","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MNPlatformTagsDataManager","XMNCommercePostbackCTAController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryMessageActions").get();a.prototype.send=function(a,c,d,e){c===void 0&&(c=null);d===void 0&&(d=null);e===void 0&&(e=null);a=b("XMNCommercePostbackCTAController").getURIBuilder().setString("cta_id",a).setString("ref",d).setString("message_id",e).getURI();!c?new(b("AsyncRequest"))().setURI(a).setMethod("POST").send():new(b("AsyncRequest"))().setURI(a).setMethod("POST").setErrorHandler(c).send()};a.prototype.sendAndConfirm=function(a,b,c,d,e,f,g,h){e===void 0&&(e=null),f===void 0&&(f=null),g===void 0&&(g=[]),h===void 0&&(h=null),b!==null&&this.sendConfirmationText(b,c,d,g),this.send(a,e,f,h)};a.prototype.sendConfirmationText=function(a,c,d,e){e===void 0&&(e=[]);if(!c)b("BanzaiODS").bumpEntityKey("messenger_commerce","confirm_message_failed.empty_threadID");else{var f=new(b("MercuryMessageObject"))(b("CurrentUser").getID()),h=b("getPageIDFromThreadID")(c);b("MNPlatformTagsDataManager").hasThreadTags(h)&&e.concat(b("MNPlatformTagsDataManager").getThreadTags());g.send(f.constructCTAConfirmationMessageObject(a,b("MercurySourceType").TITAN_WEB,c,d,e));e&&e.length>0&&b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread()}};function a(){}e.exports=new a()}),null);
__d("MessengerMDotMeReferralStore",["MessengerActions","MessengerStore"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){"use strict";g.constructor.call(this),this.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null}}a.prototype.getState=function(){"use strict";return this.$MessengerMDotMeReferralStore1};a.prototype.__onDispatch=function(a){"use strict";switch(a.type){case b("MessengerActions").Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=a.refCode,this.$MessengerMDotMeReferralStore1.refThreadID=a.refThreadID,this.emitChange()}};e.exports=new a()}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/postback_ref/",{page_id:{type:"String",required:!0},ref:{type:"String",required:!0},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackRefSendManager",["AsyncRequest","MessengerActions","MessengerMDotMeReferralStore","XMNCommercePostbackRefSendController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.sendMDotMeRef=function(a,c){var d=this.getMdotMeRef();if(this.shouldSendRef(c,a)){c=b("XMNCommercePostbackRefSendController").getURIBuilder().setString("page_id",a).setString("ref",d).getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").send();b("MessengerActions").changeMDotMeReferral()}};a.prototype.shouldSendRef=function(a,b){return!b||!a?!1:this.hasMDotMeRef(b)};a.prototype.hasMDotMeRef=function(a){var c=b("MessengerMDotMeReferralStore").getState();return!!(c.refCode&&a&&c.refThreadID&&c.refThreadID===a)};a.prototype.getMdotMeRef=function(){var a=b("MessengerMDotMeReferralStore").getState();return a.refCode};function a(){}e.exports=new a()}),null);
__d("MessengerPlatformPostbackFailedDialog.react",["fbt","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogHeader.react","MessengerDialogs.bs","MessengerDialogTitle.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerDialogBodyReact.bs").jsComponent;function a(){return b("React").createElement(b("MessengerDialog.react"),{onToggle:function(a){a||b("MessengerDialogs.bs").removeDialog()}},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogTitle.react"),null,g._("Action Unsuccessful"))),b("React").createElement(h,null,g._("There was an error delivering your message to the bot. Please try again later.")))}e.exports=a}),null);
__d("FantaPageComposerNullState.react",["cx","fbt","BootloadOnRender.react","CurrentUser","FantaAppStore","JSResource","LazyComponent.react","MessengerDialogs.bs","MessengerDiscoveryEntryPoint","MessengerDiscoveryEntryPointsLoggingHelper","MessengerPlatformPostbackFailedDialog.react","MNCommerceCallToActionType","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","React","XUISpinner.react","getPageIDFromThreadID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(){__p&&__p();var a=this.props,c=a.threadID;a=a.nullStateCTA;switch(a.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:break;case b("MNCommerceCallToActionType").POSTBACK:default:var d=b("FantaAppStore").getState().tabGroup.tabs.get(c),e=[];d&&d.entryPoint&&d.entryPoint[0]&&Object.values(b("MessengerDiscoveryEntryPoint")).indexOf(d.entryPoint[0])!==-1&&e.push(b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr([d.entryPoint[0]]));b("MNCommercePostbackCTADataManager").sendAndConfirm(a.id,a.title,c,null,function(a){a.error&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("MessengerPlatformPostbackFailedDialog.react"),null)})},null,e);break}}.bind(this),c}a.prototype.render=function(){return b("React").createElement("div",{className:"_2xh0"},this.$1(),b("React").createElement("div",{className:"_2xh4 _59w_"},b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{cta:this.props.nullStateCTA,onClick:this.$2,threadID:this.props.threadID}),loader:b("JSResource")("ChatPageComposerNullState.react").__setRef("FantaPageComposerNullState.react"),placeholder:b("React").createElement(b("XUISpinner.react"),{size:"small"})})))};a.prototype.$1=function(){__p&&__p();if(this.props.nullStateCTA!==null)switch(this.props.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:return null;case b("MNCommerceCallToActionType").POSTBACK:if(!b("MNCommercePostbackRefSendManager").hasMDotMeRef(b("getPageIDFromThreadID")(this.props.threadID))&&!this.props.nullStateCTA.instantgame_metadata&&!b("CurrentUser").isWorkUser()){var a=this.props.pageName?this.props.pageName:h._("Page");return b("React").createElement("div",{className:"_4teq"},h._("When you tap {cta title}, {name} will see your public info.",[h._param("cta title",this.props.nullStateCTA.title),h._param("name",a)]))}break;default:return null}return null};e.exports=a}),null);
__d("FantaPendingActions.react",["Bootloader","BootloadOnRender.react","FantaTabActions","JSResource","LazyComponent.react","MercuryThreadActions","MessengerMessageRequestsTypedLogger","MessageRequestUtils","MessagingTag","React","MercuryIDs","CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MercuryThreadActions").get();c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$3=function(){var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint(null).log()}.bind(this),this.$4=function(a){var c=this.props.thread;c=!!c&&b("MessageRequestUtils").isFiltered(c);var d=b("CurrentUser").getID();d=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,d);a==="hide"&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(c?"other":"pending").setThreadKey(d).setEntryPoint("inbox_banner").log()}.bind(this),this.$1=function(){__p&&__p();var a=this.props,c=a.thread,d=a.threadID;a=!!c&&b("MessageRequestUtils").isFiltered(c);var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,e);if(a)b("Bootloader").loadModules(["WebMessengerDeleteThreadDialog"],function(a){a.show(d,this.$3,this.$4,function(){return b("FantaTabActions").closeTab(d)})}.bind(this),"FantaPendingActions.react");else{var f=b("MercuryIDs").isGroupChat(d);b("Bootloader").loadModules(["WebMessengerDeclineMRDialog"],function(a){a.show(c,d,function(){return b("FantaTabActions").closeTab(d)},f)},"FantaPendingActions.react")}new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(e).setEntryPoint(null).log()}.bind(this),this.$2=function(){var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c);h.changeFolder(this.props.threadID,b("MessagingTag").INBOX);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint(null).log()}.bind(this),c}a.prototype.render=function(){var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("ChatPendingActions.react").__setRef("FantaPendingActions.react"),placeholder:b("React").createElement("div",{style:{height:27}}),component:b("React").createElement(b("LazyComponent.react"),{isFiltered:a,onDeleteClick:this.$1,onReplyClick:this.$2})})};e.exports=a}),null);
__d("md5",["str2rstr"],(function(a,b,c,d,e,f){__p&&__p();function g(a,b){__p&&__p();var c=a[0],d=a[1],e=a[2],f=a[3];c=i(c,d,e,f,b[0],7,-680876936);f=i(f,c,d,e,b[1],12,-389564586);e=i(e,f,c,d,b[2],17,606105819);d=i(d,e,f,c,b[3],22,-1044525330);c=i(c,d,e,f,b[4],7,-176418897);f=i(f,c,d,e,b[5],12,1200080426);e=i(e,f,c,d,b[6],17,-1473231341);d=i(d,e,f,c,b[7],22,-45705983);c=i(c,d,e,f,b[8],7,1770035416);f=i(f,c,d,e,b[9],12,-1958414417);e=i(e,f,c,d,b[10],17,-42063);d=i(d,e,f,c,b[11],22,-1990404162);c=i(c,d,e,f,b[12],7,1804603682);f=i(f,c,d,e,b[13],12,-40341101);e=i(e,f,c,d,b[14],17,-1502002290);d=i(d,e,f,c,b[15],22,1236535329);c=j(c,d,e,f,b[1],5,-165796510);f=j(f,c,d,e,b[6],9,-1069501632);e=j(e,f,c,d,b[11],14,643717713);d=j(d,e,f,c,b[0],20,-373897302);c=j(c,d,e,f,b[5],5,-701558691);f=j(f,c,d,e,b[10],9,38016083);e=j(e,f,c,d,b[15],14,-660478335);d=j(d,e,f,c,b[4],20,-405537848);c=j(c,d,e,f,b[9],5,568446438);f=j(f,c,d,e,b[14],9,-1019803690);e=j(e,f,c,d,b[3],14,-187363961);d=j(d,e,f,c,b[8],20,1163531501);c=j(c,d,e,f,b[13],5,-1444681467);f=j(f,c,d,e,b[2],9,-51403784);e=j(e,f,c,d,b[7],14,1735328473);d=j(d,e,f,c,b[12],20,-1926607734);c=k(c,d,e,f,b[5],4,-378558);f=k(f,c,d,e,b[8],11,-2022574463);e=k(e,f,c,d,b[11],16,1839030562);d=k(d,e,f,c,b[14],23,-35309556);c=k(c,d,e,f,b[1],4,-1530992060);f=k(f,c,d,e,b[4],11,1272893353);e=k(e,f,c,d,b[7],16,-155497632);d=k(d,e,f,c,b[10],23,-1094730640);c=k(c,d,e,f,b[13],4,681279174);f=k(f,c,d,e,b[0],11,-358537222);e=k(e,f,c,d,b[3],16,-722521979);d=k(d,e,f,c,b[6],23,76029189);c=k(c,d,e,f,b[9],4,-640364487);f=k(f,c,d,e,b[12],11,-421815835);e=k(e,f,c,d,b[15],16,530742520);d=k(d,e,f,c,b[2],23,-995338651);c=l(c,d,e,f,b[0],6,-198630844);f=l(f,c,d,e,b[7],10,1126891415);e=l(e,f,c,d,b[14],15,-1416354905);d=l(d,e,f,c,b[5],21,-57434055);c=l(c,d,e,f,b[12],6,1700485571);f=l(f,c,d,e,b[3],10,-1894986606);e=l(e,f,c,d,b[10],15,-1051523);d=l(d,e,f,c,b[1],21,-2054922799);c=l(c,d,e,f,b[8],6,1873313359);f=l(f,c,d,e,b[15],10,-30611744);e=l(e,f,c,d,b[6],15,-1560198380);d=l(d,e,f,c,b[13],21,1309151649);c=l(c,d,e,f,b[4],6,-145523070);f=l(f,c,d,e,b[11],10,-1120210379);e=l(e,f,c,d,b[2],15,718787259);d=l(d,e,f,c,b[9],21,-343485551);a[0]=r(c,a[0]);a[1]=r(d,a[1]);a[2]=r(e,a[2]);a[3]=r(f,a[3])}function h(a,b,c,d,e,f){b=r(r(b,a),r(d,f));return r(b<<e|b>>>32-e,c)}function i(a,b,c,d,e,f,g){return h(b&c|~b&d,a,b,e,f,g)}function j(a,b,c,d,e,f,g){return h(b&d|c&~d,a,b,e,f,g)}function k(a,b,c,d,e,f,g){return h(b^c^d,a,b,e,f,g)}function l(a,b,c,d,e,f,g){return h(c^(b|~d),a,b,e,f,g)}function m(a){__p&&__p();var b=a.length,c=[1732584193,-271733879,-1732584194,271733878],d;for(d=64;d<=a.length;d+=64)g(c,n(a.substring(d-64,d)));a=a.substring(d-64);var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(d=0;d<a.length;d++)e[d>>2]|=a.charCodeAt(d)<<((d&3)<<3);e[d>>2]|=128<<((d&3)<<3);if(d>55){g(c,e);for(d=0;d<16;d++)e[d]=0}e[14]=b*8;g(c,e);return c}function n(a){var b=[],c=0;while(c<64)b[c>>2]=a.charCodeAt(c++)|a.charCodeAt(c++)<<8|a.charCodeAt(c++)<<16|a.charCodeAt(c++)<<24;return b}var o="0123456789abcdef".split("");function p(a){var b="",c=0;for(;c<4;c++)b+=o[a>>(c<<3)+4&15]+o[a>>(c<<3)&15];return b}function q(a){for(var b=0;b<a.length;b++)a[b]=p(a[b]);return a.join("")}var r=function(a,b){return a+b&4294967295};function a(a){if(null===a||undefined===a)return null;else{for(var c=0;c<a.length;c++)if(a[c]>"\x7f"){a=b("str2rstr")(a);break}return q(m(a))}}a("hello")!="5d41402abc4b2a76b9719d911017c592"&&(r=function(a,b){var c=(a&65535)+(b&65535);a=(a>>16)+(b>>16)+(c>>16);return a<<16|c&65535});e.exports=a}),null);
__d("getEveryoneMentionIndex",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.findIndex(function(a){return a.type=="t"})}e.exports=a}),null);
__d("FantaTabComposer.react",["fbt","ChatTabComposerContainer.react","FantaTabActions","FantaTypeComposer","Keys","LogHistory","MessengerState.bs","PhotosUploadWaterfall","React","SimpleXUIDialog","WaterfallIDGenerator","WorkFileUploadsGating","XUIDialogButton.react","XUIDialogCancelButton.react","emptyFunction","getEveryoneMentionIndex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("LogHistory").getInstance("chat_tab_view");c=b("React").PropTypes;var j=/^\s*$/;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$2=b("WaterfallIDGenerator").generate(),this.$14=function(a){this.$1=a,this.props.isFocused&&!this.props.isNewEmptyLocalThread&&this.focusInput()}.bind(this),this.$13=function(a){this.$15(b("PhotosUploadWaterfall").UPLOAD_START,a),this.props.onSendPhoto(a,this.$1.onSend),this.$16("submit",a),this.focusInput()}.bind(this),this.$7=function(a){this.$15(b("PhotosUploadWaterfall").CLIENT_ERROR,a),this.$16("failed",a)}.bind(this),this.$9=function(a){this.$15(b("PhotosUploadWaterfall").CLIENT_ERROR,a),this.$16("failed",a)}.bind(this),this.$11=function(a){this.$15(b("PhotosUploadWaterfall").CANCEL_DURING_UPLOAD,a),this.$16("canceled",a)}.bind(this),this.$12=function(a){this.$15(b("PhotosUploadWaterfall").ALL_UPLOADS_DONE,a);this.$16("completed",a);a=a.image_ids.length||a.attachments.length;this.$17(a)}.bind(this),this.$8=function(){this.props.onSendMessage("",this.props.composer,this.$1.onSend)}.bind(this),this.$10=function(a){this.props.onSelectSticker(a,b("emptyFunction"))}.bind(this),this.$5=function(a,b,c){this.props.onSendHotLike(a.emoji,b,c,function(){return this.$1.getInput()&&this.$1.getInput().focus()}.bind(this))}.bind(this),this.$6=function(a){this.$1.getInput().insertEmoji(a)}.bind(this),this.$4=function(event,a){var c=this.props.threadID;event.keyCode===b("Keys").RETURN&&!event.shiftKey&&(event.preventDefault(),this.$3(a));if(event.keyCode===b("Keys").DOWN&&event.shiftKey&&this.hasEmptyInput()){b("FantaTabActions").minimizeTab(c);return}}.bind(this),this.$3=function(a){var c=this.$20();if(c==null||c.length===0)this.$19(a,[]);else{var d=b("getEveryoneMentionIndex")(c)>-1;d?this.$18(a,c):this.$19(a,c)}}.bind(this),c}a.prototype.componentDidMount=function(){var a=this.props.participants;this.props.isFocused&&a.length>0&&!this.props.isEmptyLocalThread&&this.focusInput()};a.prototype.componentDidUpdate=function(a){this.props.isFocused&&this.props.isFocused!==a.isFocused&&!this.props.isEmptyLocalThread&&this.focusInput()};a.prototype.shouldComponentUpdate=function(a){var b=this.props;return!b.composer.equals(a.composer)||b.disableInput!==a.disableInput||!b.fileUploader&&!!a.fileUploader||b.fileUploader&&!b.fileUploader.equals(a.fileUploader)||b.isEmptyLocalThread!==a.isEmptyLocalThread||b.isFocused!==a.isFocused||b.isNewEmptyLocalThread!==a.isNewEmptyLocalThread||b.threadID!==a.threadID||b.viewer!==a.viewer||b.forGameChat!==a.forGameChat||b.participants.length!==a.participants.length};a.prototype.render=function(){var a=this.props,c=a.participants,d=a.threadID,e=a.viewer,f=a.isFocused;return c.length===0?b("React").createElement("div",null):b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:e},function(a){return b("React").createElement(b("ChatTabComposerContainer.react"),{composer:this.props.composer,disableFileUploads:!b("WorkFileUploadsGating").canUploadFiles,disableInput:this.props.disableInput,fileUploader:this.props.fileUploader,handleSend:this.$3,inputKeyDown:this.$4,isFocused:f,onBlur:b("emptyFunction"),onCustomLikeSelect:this.$5,onEmojiSelect:this.$6,onEscape:this.props.onEscape,onFileUploadFail:this.$7,onMount:function(){},onP2PTrigger:this.$8,onPhotoUploadFail:this.$9,onStickerSelect:this.$10,onTab:this.props.onTab,onUploadCancel:this.$11,onUploadComplete:this.$12,onUploadSubmit:this.$13,placeholder:g._("Type a message..."),ref:this.$14,resizeFn:b("emptyFunction"),thread:b("MessengerState.bs").threads(a)[d],threadID:d,viewer:e,forGameChat:this.props.forGameChat})}.bind(this))};a.prototype.$15=function(a,c){b("PhotosUploadWaterfall").sendSignal(babelHelpers["extends"]({qn:this.$2,step:a,uploader:b("PhotosUploadWaterfall").APP_CHAT},c||{}))};a.prototype.$17=function(a){if(a===0)return;this.$15(b("PhotosUploadWaterfall").POST_PUBLISHED,{count:a});this.$2=b("WaterfallIDGenerator").generate()};a.prototype.$16=function(a,b){i.debug("photo_uploader:"+a,"{}")};a.prototype.$18=function(a,c){var d=g._("Mention everyone?").toString(),e=g._("Doing so will send a mention to everyone in this group.").toString(),f=g._("Mention \u0040everyone!").toString();f=b("React").createElement("div",null,b("React").createElement(b("XUIDialogCancelButton.react"),null),b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:f,use:"confirm",onClick:function(){this.$19(a,c)}.bind(this)}));b("SimpleXUIDialog").showEx(e,d,f,null,null)};a.prototype.$19=function(a,b){this.props.onSendMessage({message:a,mentions:b},this.props.composer,this.$1.onSend);return};a.prototype.focusInput=function(){this.$1&&this.$1.getInput()&&this.$1.getInput().focus()};a.prototype.$21=function(){return this.$1&&this.$1.getInput()&&this.$1.getInput().getValue()||""};a.prototype.$20=function(){if(!this.$1)return null;var a=this.$1.getInput();return a&&a.getMentions?a.getMentions():null};a.prototype.hasEmptyInput=function(){return j.test(this.$21())};a.propTypes={fileUploader:c.object,forGameChat:c.bool.isRequired,isEmptyLocalThread:c.bool.isRequired,isFocused:c.bool.isRequired,isNewEmptyLocalThread:c.bool.isRequired,onEscape:c.func.isRequired,onSelectSticker:c.func.isRequired,onSendHotLike:c.func.isRequired,onSendMessage:c.func.isRequired,onSendPhoto:c.func.isRequired,onTab:c.func.isRequired,participants:c.array.isRequired,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("FantaTabSheetPlaceholder.react",["cx","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return b("React").createElement("div",{className:"_w_z"},b("React").createElement(b("XUISpinner.react"),null))};e.exports=a}),null);
__d("FantaTabSheet.react",["cx","BootloadedComponent.react","CurrentUser","FantaTabSheetPlaceholder.react","JSResource","MercuryIDs","MercuryMessages","MessengerParticipants.bs","MercurySheetPolicy","MessengerGroupsSyncStatus","React","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MercuryMessages").get();c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){var b=this.props;return b.threadID!==a.threadID||!b.tabContent.equals(a.tabContent)};a.prototype.maybeRenderMontage=function(){var a=this.props,c=a.threadID;a=a.tabContent;return a.isMontageOpen?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatMontageSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:"Montage",threadID:c,onResize:b("emptyFunction")}):null};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.threadID;a=a.tabContent;var d=a.loggingID,e=a.openSheet,f=a.privacyController,g=a.thread,h=a.typeahead,j;switch(e){case b("MercurySheetPolicy").sheets.ChatThreadIsMutedTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetChatThreadIsMuted.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatNameConversationTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetNameConversation.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:e,thread:g,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUserBlockedTabSheet:var k=b("MercuryIDs").getUserIDFromThreadID(c);if(k){k=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(k));k&&f&&(j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserBlockedTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),gender:k.gender,key:e,privacyActionController:f,shortName:k.short_name}))}break;case b("MercurySheetPolicy").sheets.ChatOfflineTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetOffline.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,privacyController:f,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatReadOnlyTabSheet:case b("MercurySheetPolicy").sheets.ChatReadOnlyPermanentTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetReadOnly.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,threadID:c});break;case b("MercurySheetPolicy").sheets.FantaAddFriendsSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:e,loggingID:d,thread:g,threadID:c,typeahead:h});break;case b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddMoreFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:e,loggingID:d,thread:g,threadID:c,typeahead:h});break;case b("MercurySheetPolicy").sheets.ChatThreadIsMessageBlockedSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetMessageBlocked.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUserFocusSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,thread:g,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUserFocusBypassSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusBypassSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e});break;case b("MercurySheetPolicy").sheets.ChatUploadWarningTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUploadWarningTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e});break;case b("MercurySheetPolicy").sheets.ChatNoRecipientsTabSheet:b("MercuryIDs").isCanonical(c)||(j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatNoRecipientsTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e}));break;case b("MercurySheetPolicy").sheets.ChatNewMessagesTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaNewMessagesTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatEmployeeAwaySheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEmployeeAwaySheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e});break;case b("MercurySheetPolicy").sheets.ChatEventReminderTabSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaEventReminderTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatAppointmentBanner:if(g){k=i.getCurrentlyLoadedMessages(c);j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatAppointmentBannerRoot.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),pageID:g.other_user_fbid,userID:b("CurrentUser").getID(),count:100,messageList:k,appointmentBannerDidUpdate:b("emptyFunction"),key:e,threadID:c})}break;case b("MercurySheetPolicy").sheets.ChatJoinCallSheet:if(g){f=g.rtc_call_data;d=g.thread_fbid;j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatJoinCallSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,rtcCallData:f,threadFBID:d})}break;case b("MercurySheetPolicy").sheets.ChatRoomAssociatedObjectSheet:if(g){h=g.associated_object;j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatRoomAssociatedObjectSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,associatedObject:h})}break;case b("MercurySheetPolicy").sheets.ChatMentorshipProgramSheet:j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MentorshipProgramSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,mentorship:a.mentorship});break;case b("MercurySheetPolicy").sheets.ChatGroupsSyncTabSheet:g&&g.groups_sync_status==b("MessengerGroupsSyncStatus").OPT_IN&&g.groups_sync_fb_url&&(j=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatGroupsSyncTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:e,url:g.groups_sync_fb_url}));break}k=this.maybeRenderMontage();if(j)return b("React").createElement("div",{className:"_1sk5"},b("React").createElement("div",{className:"_1sk6"},j));else if(k)return k;return null};function a(){h.apply(this,arguments)}a.propTypes={threadID:c.string.isRequired,tabContent:c.object.isRequired};e.exports=a}),null);
__d("MessengerParticipantUtils.bs",["bs_caml_obj","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){var e=b("MercuryIDs").getParticipantIDFromUserID(a);a=d.participants.filter(function(a){return b("bs_caml_obj").caml_notequal(a,e)});return a.filter(function(a){return c.has(a)})}function h(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function a(a,b,c){return h(a,b,c).length>0}f.findIntersection=g;f.participantsInGroupThread=h;f.areParticipantsInGroupThread=a}),null);
__d("FantaTabMain.react",["cssVar","cx","fbt","invariant","Bootloader","BootloadOnRender.react","ChatBehavior","ChatConfig","ChatTabBlinking","CurrentUser","DragDropTarget","Event","FantaAvailableStatus","FantaChatHeaderContainer.react","FantaConversationScroller.react","FantaDispatcher","FantaDragAndDrop.react","FantaMessageActions","FantaPageComposerNullState.react","FantaPendingActions.react","FantaTabActions","FantaTabComposer.react","FantaTabSheet.react","FBIDCheck","JSResource","Keys","LazyComponent.react","MercuryIDs","MessageRequestUtils","MessagingTagConstants","MessengerBotMenuDataFetcher","MessengerParticipants.bs","MessengerParticipantUtils.bs","MessengerState.bs","MNCommercePageSetting","Parent","React","ReactDOM","SimpleXUIDialog","TrackingNodes","WorkChatAvailabilityStatusLoader","WorkFileUploadsGating","convertMIGColorToFIGColor","getPageIDFromThreadID","getVendorPrefixedEventName","gkx","ifRequired","immutable","joinClasses","promiseDone","throttle"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=/\D+/g;c=b("React").PropTypes;var m=function(a){a=b("MercuryIDs").getUserIDFromThreadID(a.tab.id);return a&&b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")&&b("WorkChatAvailabilityStatusLoader").isLoaded()?b("WorkChatAvailabilityStatusLoader").getStoreEnforce().getIsDoNotDisturb(a):!1};function n(a,b,c){__p&&__p();var d={};if(a){b?d.backgroundColor=b:d.backgroundColor=c;if(a.length&&a.length>0)if(a.length===1)d.backgroundColor=a[0];else if(a.length===2)d.backgroundImage="linear-gradient("+a[0]+", "+a[1]+")";else{var e=a.length,f=100/(e-1);e=a.map(function(a,b){return a+" "+b*f+"%"}).join(", ");d.backgroundImage="linear-gradient("+e+")"}}else b?d.backgroundColor=b:d.backgroundColor=c;return d}d=babelHelpers.inherits(a,b("React").Component);k=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.$10=null,this.state={closing:!1,disableInput:!1,isDoNotDisturb:m(this.props)},this.$22=function(event){var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);if(!a||!c){if(this.$9){clearTimeout(this.$9);this.$9=null;return}b("FantaTabActions").hoveredTab(this.props.tab.id)}}.bind(this),this.$23=function(event){var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);(!a||!c)&&(this.$9&&clearTimeout(this.$9),this.$9=setTimeout(function(){this.$9=null,b("FantaTabActions").unhoveredTab(this.props.tab.id)}.bind(this),500))}.bind(this),this.$20=function(event){var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);(!a||!c)&&(!event.relatedTarget||!event.target?this.$7=setTimeout(function(){this.$7=null,this.$24(this.props.tab.id)}.bind(this),100):this.$24(this.props.tab.id))}.bind(this),this.$21=function(event){if(this.$7){clearTimeout(this.$7);this.$7=null;return}var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id),d=event.target;d&&d.classList&&(d.classList.contains("_3olu")||d.classList.contains("_61td")||d.classList.contains("_40qq")||d.classList.contains("_4zs3"))||(!a||!c)&&(b("FantaDispatcher").isDispatching()||b("FantaTabActions").focusTab(this.props.tab.id))}.bind(this),this.$26=function(a){b("FantaMessageActions").linkPreview(this.props.tab.id,a)}.bind(this),this.$25=function(a){var c=this.props.tabContent;c=c||{};c=c.composer;var d=this.props.tab.id;c&&b("FantaMessageActions").prepareFilesForSend(d,a,c)}.bind(this),this.$17=function(a){a.keyCode===b("Keys").ESC&&(this.$2(!0),a.preventDefault(),a.stopPropagation())}.bind(this),this.$18=function(a){a.keyCode===b("Keys").TAB&&this.$19(a)}.bind(this),this.$19=function(event){var a=this.props.raisedTabCount;a>1&&(event.preventDefault(),this.$3(event.ctrlKey,event.shiftKey))}.bind(this),this.$2=function(a){var c=this.props,d=c.tab;c=c.tabContent;!c||c&&c.composer.text.length===0&&!this.$27()?(this.$28(),a?b("FantaTabActions").closeAndTabNext(d.id):b("FantaTabActions").closeTab(d.id)):this.$29()}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){this.$2=b("throttle")(this.$2,100),this.$3=b("throttle")(this.$3,100)};a.prototype.componentDidMount=function(){this.$11(),this.$12(),this.$13(this.props.tab.id),this.$14(),this.$15(),this.$16()};a.prototype.componentDidUpdate=function(a){this.$12();if(b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")&&b("WorkChatAvailabilityStatusLoader").isLoaded()&&a.thread!==this.props.thread){var c=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a=b("MercuryIDs").getUserIDFromThreadID(a.tab.id);var d=b("WorkChatAvailabilityStatusLoader").getActionsEnforce();a&&d.unsubscribeUser(a,this);c&&(d.subscribeUser(c,this),b("WorkChatAvailabilityStatusLoader").getStoreEnforce().fetchUsers([c]))}};a.prototype.componentWillUnmount=function(){this.$4&&this.$4.disable();this.$10&&this.$10.remove();var a=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a&&b("WorkChatAvailabilityStatusLoader").isLoaded()&&b("WorkChatAvailabilityStatusLoader").getActionsEnforce().unsubscribeUser(a,this)};a.prototype.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return c.hasFetchedAll!==a.hasFetchedAll||c.isFocused!==a.isFocused||c.isHovered!==a.isHovered||c.isLastGroupTab!==a.isLastGroupTab||!c.messages.equals(a.messages)||!c.tab.equals(a.tab)||!c.tabContent&&!!a.tabContent||c.tabContent&&!c.tabContent.equals(a.tabContent)||c.thread!==a.thread||c.fbid!==a.fbid||c.blockedIDs!==a.blockedIDs||c.readReceipts!==a.readReceipts||c.ignoredIds!==a.ignoredIds||d.closing!==b.closing||d.disableInput!==b.disableInput||d.isDoNotDisturb!==b.isDoNotDisturb||!c.onlineUsers.equals(a.onlineUsers)};a.prototype.$12=function(){__p&&__p();if(b("gkx")("AT4aq0gj3KFvuyn5ouzkcinNuxrDXZY6HPjnRXCVXzOigsSLEws96b2T0YYtUZg_IxPxKREPJvW4RS6GeFXjfiRr"))return;var a=this.props,c=a.tab;a=a.thread;c=c.id;if(!a)return;var d=this.refs.root&&b("ReactDOM").findDOMNode(this.refs.root);if(!d)return;a=a.unread_count;if(a!==undefined){a=!!a&&(!b("ChatBehavior").showsTabUnreadUI||b("ChatBehavior").showsTabUnreadUI());a?b("ChatTabBlinking").blinkTab(c,{getTabElem:function(){return d},isFocused:function(){return this.props.isFocused}.bind(this),isHovered:function(){return!1}}):b("ChatTabBlinking").unblinkTab(c)}};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.blockedIDs,d=a.forGameChat,e=a.hasFetchedAll,f=a.isFocused,g=a.isHovered,h=a.isLastGroupTab,k=a.messages,l=a.onLoadMoreMessages,m=a.onSelectSticker,o=a.onSendHotLike,p=a.onSendMessage,q=a.onSendPhoto,r=a.readReceipts,s=a.showContextBanner,t=a.tab,u=a.tabContent;a=a.thread;t=t.id;var v=b("CurrentUser").getID(),w=u&&u.composer.fileUploader,x=u&&u.composer.sharePreview,y=w&&w.uploadingFiles,z=w&&w.uploadedFiles,A=a&&b("convertMIGColorToFIGColor")(a.header_color),B=u&&u.nullStateCTA,C=B&&a&&a.message_count===0,D=a&&a.participants||[],E=u&&u.threadPreviewRecipients||b("immutable").List();D=D.length>0?D:E.toArray();E=(E=this.props)!=null?(E=E.thread)!=null?E.other_user_fbid:E:E;E=E?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(E)):null;var F=b("getPageIDFromThreadID")(this.props.tab.id),G=b("MessengerState.bs").isEmptyLocalThread(v,t),H=b("MessengerState.bs").isNewEmptyLocalThread(v,t);C=a&&b("MessageRequestUtils").isMessageRequest(a)?b("React").createElement(b("FantaPendingActions.react"),{thread:a,threadID:t}):C&&B?b("React").createElement(b("FantaPageComposerNullState.react"),{threadID:t,nullStateCTA:B,pageName:E&&E.short_name}):u?b("React").createElement("div",{className:"fbNubFlyoutFooter"+(this.state.disableInput?" fbNubFlyoutComposerDisabled":"")},b("React").createElement(b("FantaTabComposer.react"),{composer:u.composer,disableInput:this.state.disableInput,fileUploader:w,forGameChat:d,isEmptyLocalThread:G,isFocused:f,isNewEmptyLocalThread:H,onEscape:this.$17,onKeyDown:this.$17,onKeyPress:this.$18,onSelectSticker:m,onSendHotLike:o,onSendMessage:p,onSendPhoto:q,onTab:this.$19,participants:D,ref:"composer",threadID:t,viewer:v})):null;B=b("FantaAvailableStatus").isAvailable(a,t)&&!this.state.isDoNotDisturb;!u&&j(0);E=b("React").createElement(b("FantaTabSheet.react"),{tabContent:u,threadID:t});H=(w=a)!=null?w.marketplace_thread_data:w;o=(m=H)!=null?m.for_sale_item:m;q=(p=H)!=null?p.buyer_fbid:p;w=(D=H)!=null?D.seller_fbid:D;var I;o&&q&&w&&(I=b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MarketplaceMessengerContextBanner.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{buyerID:q,forSaleItem:o,renderLocation:"chat",sellerID:w})}));m=a&&b("gkx")("AT4vZBWyiZL1KZrir2lJt4vVNMIYu8sDbA3PtNwJWZh5seJSYZeYdmCgqH3wgiUS4PfslnEPm3wz9jSsjDINBCSy")?n(a.gradient_colors,a.solid_color,"#0084ff"):undefined;p=u&&u.isMultiCompany;D=u&&u.joinableInterstitialData?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("ChatJoinableInterstitialPreview.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{data:u.joinableInterstitialData,isActive:f,onClose:this.$2})}):b("React").createElement("div",{className:"fbNubFlyoutInner"},b("React").createElement(b("FantaChatHeaderContainer.react"),{blockedIDs:c,composer:u.composer,customColor:A,highlightNewMessage:u&&u.highlightNewMessage,isDoNotDisturb:this.state.isDoNotDisturb,isFocused:f,isLastGroupTab:h,isMultiCompany:p,isNewMessageTab:u&&u.isNewMessageTab,membershipParticipants:u.membershipParticipants,onClose:this.$2,pageIndicatorDescription:u.pageIndicatorDescription,participants:u.participants,thread:a,threadHref:u&&u.threadHref,threadID:t,uri:u.uri,viewer:v}),b("React").createElement("div",{className:"_1ia _2sz2",ref:function(a){this.$5=a}.bind(this),style:m},E,b("React").createElement(b("FantaConversationScroller.react"),{forGameChat:d,hasFetchedAll:e,isFocused:f,isEmptyLocalThread:G,messages:k,onFocus:function(){return this.refs.composer&&this.refs.composer.focusInput()}.bind(this),onLoadMoreMessages:l,onlineUsers:this.props.onlineUsers,readReceipts:r,showContextBanner:s,thread:a,threadID:t,viewer:v,jumpToMessage:u.jumpToMessage}),b("React").createElement("div",{className:"_3bpu"}),b("React").createElement("div",{className:"_2hc2"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("P2PChatThreadBannerContainer.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{isVisible:!0,otherUserID:b("MercuryIDs").getUserIDFromThreadID(t),threadID:t})})),b("React").createElement("div",{className:"_4g6x"},b("React").createElement("div",{className:"_4g6y"},b("React").createElement("div",{className:"_4g6z _4g71"},i._("Drag Link\/Files Here")),b("React").createElement("div",{className:"_4g6z _4g6- _4g6_"},i._("Drop Files Here")),b("React").createElement("div",{className:"_4g6z _4g6- _4g70"},i._("Drop Link Here")))),F?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{originalElement:C,pageID:F,playLinkClassName:"_2xh6 _2h_r",showGameImage:!0,threadFBID:(H=this.props)!=null?(H=H.thread)!=null?H.thread_fbid:H:H,threadID:t}),loader:b("JSResource")("MessengerGameBotPlayButton.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null)}):C,b("React").createElement(b("FantaDragAndDrop.react"),{composer:u.composer,threadID:t,uploadedFiles:z,uploadingFiles:y,sharePreview:x}),I));q=b("gkx")("AT7HdSIkhS9TSQx6PWXopj-NxmSus9nuXkEu6XM1WdZJElXpLdnQNN92q5iZdzYJyRUbbjoWOgsBC8RH9ivzcfSt");return b("React").createElement("div",{className:b("joinClasses")((this.state.closing?"_2suj":"")+" _3_9e _s0f _50mz _50m_"+(B?" _4-0b":"")+(this.state.isDoNotDisturb?" _1oh2":"")+" fbNub _50-v"+(f?" focusedTab":"")+(g?" hoveredTab":"")+" opened _27_3"+(b("ChatConfig").get("single_line_composer")?" _68h9":"")+(q?" _69cg":"")+(q?" _4k2r":""),"fantaTabMain-"+t),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.CHAT_FLYOUT),onBlur:this.$20,onFocus:this.$21,onKeyDown:this.$17,onKeyPress:this.$18,onMouseEnter:this.$22,onMouseLeave:this.$23,ref:"root"},b("React").createElement("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent",role:"complementary"},b("React").createElement("div",{className:"fbNubFlyoutOuter"},D)))};a.prototype.$15=function(){var a=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a&&b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")&&b("promiseDone")(b("WorkChatAvailabilityStatusLoader").load(),function(b){var c=b.store;b._;this.$10=c.addListener(function(){this.setState({isDoNotDisturb:c.getIsDoNotDisturb(a)})}.bind(this))}.bind(this))};a.prototype.$24=function(a){b("FantaDispatcher").isDispatching()||b("FantaTabActions").blurTab(this.props.tab.id),this.$9&&(clearTimeout(this.$9),this.$9=null),setTimeout(function(){b("FantaTabActions").unhoveredTab(a)})};a.prototype.$16=function(){var a=b("getPageIDFromThreadID")(this.props.tab.id);a&&b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(a){this.setState({disableInput:a})}.bind(this),function(){this.setState({disableInput:!1})}.bind(this),b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED)};a.prototype.$11=function(){__p&&__p();if(b("WorkFileUploadsGating").canUploadFiles&&!this.$4){var a=b("ReactDOM").findDOMNode(this.$5);if(a){a=new(b("DragDropTarget"))(a);this.$4=a;a.setOnFilesDropCallback(this.$25);a.setOnURLDropCallback(this.$26);a.enable()}}};a.prototype.$3=function(a,c){a||(c?b("FantaTabActions").focusPreviousTab():b("FantaTabActions").focusNextTab())};a.prototype.$28=function(){var a=this.props.tab.id;b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger"],function(b){return b.endFunnel(a)},"FantaTabMain.react")};a.prototype.$27=function(){return this.$30()||this.$31()};a.prototype.$30=function(){var a,b=this.props.tabContent;a=((a=b)!=null?(a=a.composer)!=null?(a=a.fileUploader)!=null?a.uploadedFiles:a:a:a)||{size:0};b=((b=b)!=null?(b=b.composer)!=null?(b=b.fileUploader)!=null?b.uploadingFiles:b:b:b)||{size:0};return a.size>0||b.size>0};a.prototype.$31=function(){var a=this.props.tabContent;a=(a=a)!=null?(a=a.composer)!=null?a.sharePreview:a:a;return!!(a&&a.params&&a.type)};a.prototype.$32=function(a){__p&&__p();var c=this.props.tab,d=b("ReactDOM").findDOMNode(this.refs.root);this.$1=setTimeout(function(){return a?b("FantaTabActions").closeAndTabNext(c.id):b("FantaTabActions").closeTab(c.id)},1.2*b("ifRequired")("cssVar",function(a){return"200ms".replace(l,"")},function(){return 200}));if(d)var e=b("Event").listen(d,b("getVendorPrefixedEventName")("animationend"),function(d){d.animationName==="closeChatTab"&&(a?b("FantaTabActions").closeAndTabNext(c.id):b("FantaTabActions").closeTab(c.id),clearTimeout(this.$1),e.remove())}.bind(this));this.$33();this.setState({closing:!0})};a.prototype.$29=function(a){var c=this.props.tab,d=c.id;b("FantaTabActions").blurTab(d);c=i._("Are you sure you want to close this chat window?");var e=i._("You haven't sent your message.");b("SimpleXUIDialog").showConfirm(c,e,function(c){c?(this.$28(),a?b("FantaTabActions").closeAndTabNext(d):b("FantaTabActions").closeTab(d)):b("FantaTabActions").focusTab(d)}.bind(this),{autofocusConfirm:!0,useReactFocusBehavior:!0})};a.prototype.$14=function(){this.$8=Math.floor(Date.now()/1e3)};a.prototype.$33=function(){var a=this.props.thread,c=a?a.other_user_fbid:null,d=Math.floor(Date.now()/1e3),e=this.$8;a&&c&&!b("FBIDCheck").isUser_deprecated(c)&&b("Bootloader").loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesEventObserver","PagesEventType"],function(b,f,g,h,i){b.log(c,f.CLICK,g.MESSAGE_FANTA_TAB_CLOSE,"",["pages_surface_team"],{open_tab_timestamp:e,close_tab_timestamp:d,last_message_timestamp:a.last_message_timestamp,message_count:a.message_count,snippet_sender:a.snippet_sender,participants:a.participants}),h.notify(i.MESSAGES_FANTA_TAB_CLOSE,c,{open_tab_timestamp:e,close_tab_timestamp:d,last_message_timestamp:a.last_message_timestamp,message_count:a.message_count,snippet_sender:a.snippet_sender,participants:a.participants})},"FantaTabMain.react")};a.prototype.$13=function(a){__p&&__p();if(!b("MercuryIDs").isValidThreadID(a))return;b("Bootloader").loadModules(["GroupChatMessageBlockAlert","GroupChatMessageIgnoreAlert","MercuryIgnoredBlockedParticipants.bs","MercuryThreadActions"],function(c,d,e,f){__p&&__p();var g=f.get();b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),a,function(f){var h=this.props,i=h.fbid,j=h.ignoredIds;b("MessengerState.bs").compute(i,function(h){h=h.blocked_ids;e.isPresentInGroupThread(i,h,f)?c.show(e.participantsInGroupThread(i,h,f),function(){b("FantaTabActions").focusTab(a)},function(){b("FantaTabActions").closeTab(a),b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a)||g.leaveGroup(a)}):b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(i,j,f)&&f.folder==="inbox"&&d.show(b("MessengerParticipantUtils.bs").participantsInGroupThread(i,j,f),b("MercuryIDs").getThreadFBIDFromThreadID(a),function(){b("FantaTabActions").focusTab(a)},function(){b("FantaTabActions").closeTab(a),b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(c,d,e){g.changeFolder(a,b("MessagingTagConstants").other),new c().setEvent(d.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a)).setPlatform(e.CHAT_TABS).log()},"FantaTabMain.react")})})}.bind(this))}.bind(this),"FantaTabMain.react")};a.propTypes={hasFetchedAll:c.bool.isRequired,isFocused:c.bool.isRequired,isHovered:c.bool.isRequired,isLastGroupTab:c.bool.isRequired,messages:c.object,onlineUsers:c.instanceOf(b("immutable").List).isRequired,onLoadMoreMessages:c.func.isRequired,onSelectSticker:c.func.isRequired,onSendHotLike:c.func.isRequired,onSendMessage:c.func.isRequired,onSendPhoto:c.func.isRequired,raisedTabCount:c.number,showContextBanner:c.bool,tab:c.object.isRequired,tabContent:c.object,thread:c.object,forGameChat:c.bool.isRequired};e.exports=a}),null);
__d("FantaTabMainLoader.react",["Bootloader","FantaAppStore","FantaAvailableStatus","FantaGetMessageActions","FantaMessageActions","FantaTabMain.react","MercuryConfig","MercuryIDs","MessengerState.bs","React","TimeSlice","emptyFunction","immutable","requestIdleCallback","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h=function(a){__p&&__p();b("FantaAppStore").addReducers(a);a=b("FantaAppStore").getState();a=(a=a)!=null?(a=a.mercury)!=null?a.tabContents:a:a;if(a){var c=a.reduce(function(a,b){b=b.thread;b&&a.push(b);return a},[]);b("setImmediate")(function(){return b("FantaGetMessageActions").threadsUpdated(c)})}h=b("emptyFunction")};d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$2=function(){var a=this.props.tab;b("FantaGetMessageActions").fetchMoreMessages(a.id)}.bind(this),this.$3=function(a,c){var d=this.props.tab;b("FantaMessageActions").sendSticker(d.id,a,c)}.bind(this),this.$4=function(a,c,d,e){var f=this.props.tab;b("FantaMessageActions").sendHotLike(f.id,a,c,d,e)}.bind(this),this.$5=function(a,c,d){var e=this.props.tab;b("FantaMessageActions").sendMessage(e.id,a,c,d)}.bind(this),this.$6=function(a,c){var d=this.props.tab;b("FantaMessageActions").sendPhoto(d.id,a,c)}.bind(this),c}a.prototype.shouldComponentUpdate=function(a){var b=this.props;return b.isFocused!==a.isFocused||b.isHovered!==a.isHovered||b.isLastTabOfType!==a.isLastTabOfType||b.messengerState!==a.messengerState||!b.tab.equals(a.tab)||!b.tabContent.equals(a.tabContent)};a.prototype.componentDidMount=function(){var a=function(){b("Bootloader").loadModules(["FantaReducersTabSheets"],h,"FantaTabMainLoader.react")};b("TimeSlice").guard(function(){b("requestIdleCallback")(a)},"additional request not needed for initial display",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.isFocused,d=a.isHovered,e=a.isLastTabOfType,f=a.messengerState,g=a.raisedTabCount,h=a.tab,i=a.tabContent;a=a.forGameChat;var j=i.hasFetchedAll,k=i.showContextBanner,l=i.thread,m=i.threadPreviewID,n=i.messages;m=m?h.id+"-"+m:h.id;if(!i)return b("React").createElement("div",{key:"noContent-"+m});n||(n=b("immutable").List());var o=b("immutable").List([]);b("MercuryConfig").GDWC&&(o=this.$1(l,h));return b("React").createElement(b("FantaTabMain.react"),{blockedIDs:b("MessengerState.bs").blockedIds(f),fbid:b("MessengerState.bs").fbid(f),forGameChat:a,hasFetchedAll:j,ignoredIds:b("MessengerState.bs").ignoredIds(f),isFocused:c,isHovered:d,isLastGroupTab:e,key:m,messages:n,onlineUsers:o,onLoadMoreMessages:this.$2,onSelectSticker:this.$3,onSendHotLike:this.$4,onSendMessage:this.$5,onSendPhoto:this.$6,raisedTabCount:g,readReceipts:b("MessengerState.bs").readReceiptsPerThread(f),showContextBanner:k,tab:h,tabContent:i,thread:l})};a.prototype.$1=function(a,c){__p&&__p();var d=b("MercuryIDs").getUserIDFromThreadID(c.id),e=[];d?e=b("FantaAvailableStatus").isAvailable(a,c.id)?[d]:[]:a&&(e=a.participants.filter(function(a){if(!a)return!1;a=b("MercuryIDs").getThreadIDFromParticipantID(a);if(!a)return!1;a=b("FantaAvailableStatus").isAvailable(null,a);return a}),e=e.map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)||""}));return b("immutable").List(e)};a.propTypes={isFocused:c.bool.isRequired,isHovered:c.bool.isRequired,isLastTabOfType:c.bool.isRequired,messengerState:c.array,raisedTabCount:c.number,tab:c.object.isRequired,tabContent:c.object};e.exports=a}),null);
__d("XUIBadgeReact.bs",["ReasonReact.bs","XUIBadge.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a)if(a[0])return["regular"];else return["special"];else return 0}function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("XUIBadge.react"),{className:b("bs_js_null_undefined").fromOption(c),count:b("bs_js_null_undefined").fromOption(d),maxcount:b("bs_js_null_undefined").fromOption(e),type:b("bs_js_null_undefined").fromOption(g(a))},f)}f.stringOfBadgeType=g;f.make=a}),null);
__d("FantaM4HeaderMinimized.bs",["cx","fbt","cssVar","bs_block","bs_curry","React","ReasonReact.bs","bs_js_primitive","FantaM4Header.bs","XUIBadgeReact.bs","ChatThreadName.bs","ChatDetailStack.bs","FantaCloseButton.bs","FantaProfilePresence.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").reducerComponentWithRetainedProps("FantaM4HeaderMinimized");function k(a,c,d,e,f,g,i,k,l){__p&&__p();return[j[0],j[1],j[2],j[3],j[4],function(a){var c=a[1];if(!a[0][2][0]&&c[2][0]){b("bs_curry")._1(c[3],0);setTimeout(function(){return b("bs_curry")._1(c[3],1)},1e3);return 0}else return 0},j[6],j[7],function(j){__p&&__p();var l=b("FantaM4Header.bs").getProfileImages(g,f,i),m=g?g[0].unread_count:0,n=b("FantaM4Header.bs").getTooltip(g);if(g){var o=g[0].header_color;o=o==null?["#0084ff"]:[o]}else o=["#0084ff"];var p=a&&j[1][0];p=p?o?[o[0],"_69pt _2mgn _6d6l"]:["","_69pt _6d6l"]:o?["","_69pt _6d6l"]:["","_69pt _6d6l"];o=p[0];l=k?null:b("ReasonReact.bs").element(0,0,b("FantaProfilePresence.bs").make(l,20,c,[!0],g,"",n,[o],[]));n=k?h._("New Message"):b("ReasonReact.bs").element(0,0,b("ChatThreadName.bs").make(g,"",n,i,"_2mgq",k,[]));j=m>0&&!(a&&j[1][0]);return b("React").createElement("div",{className:p[1],style:{backgroundColor:o},onClick:e},b("React").createElement("div",{className:"_66n2"},l,b("React").createElement("div",{className:"_66n3"},b("ReasonReact.bs").element(0,0,b("ChatDetailStack.bs").make(n,null,[])),j?b("ReasonReact.bs").element(0,0,b("XUIBadgeReact.bs").make([0],["_429n"],[m],[99],[])):null)),b("ReasonReact.bs").element(0,0,b("FantaCloseButton.bs").make(d,!1,[])))},function(){return[!1]},[a],function(c,a){if(c)return b("bs_block").__(0,[[!1]]);else return b("bs_block").__(0,[[!0]])},j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.highlightNewMessage,a.isActive,a.onClose,a.onHeaderToggle,b("bs_js_primitive").null_undefined_to_opt(a.participants),b("bs_js_primitive").null_undefined_to_opt(a.thread),a.viewer,a.isNewMessageTab,[])});c=20;d=1e3;f.component=j;f.small_profile_image_size=c;f.blink_threshold_ms=d;f.make=k;f.jsComponent=a}),null);
__d("FantaTabMinimized.react",["cx","fbt","Bootloader","ChatBehavior","ChatTabBlinking","ChatTabHeaderContainer.react","CurrentUser","FantaAvailableStatus","FantaM4HeaderMinimized.bs","FantaTabActions","React","ReactDOM","SimpleXUIDialog","emptyFunction","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("FantaM4HeaderMinimized.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={closing:!1},this.$5=function(event){var a=this.props,c=a.tab;a=a.tabContent;!a||a&&a.composer.text.length===0&&!this.$7()?(this.$8(),b("FantaTabActions").closeTab(c.id)):this.$9()}.bind(this),this.$6=function(event){var a=event.target;a&&a.classList&&!a.classList.contains("button")&&(event.stopPropagation(),b("FantaTabActions").unminimizeTab(this.props.tab.id),b("FantaTabActions").focusTab(this.props.tab.id))}.bind(this),c}a.prototype.componentDidMount=function(){this.$3()};a.prototype.componentDidUpdate=function(){this.$3()};a.prototype.shouldComponentUpdate=function(a){var b=this.props;return!b.tab.equals(a.tab)||!b.tabContent&&!!a.tabContent||!!b.tabContent&&!b.tabContent.equals(a.tabContent)};a.prototype.$3=function(){__p&&__p();if(b("gkx")("AT4aq0gj3KFvuyn5ouzkcinNuxrDXZY6HPjnRXCVXzOigsSLEws96b2T0YYtUZg_IxPxKREPJvW4RS6GeFXjfiRr"))return;var a=this.props,c=a.tab;a=a.tabContent;c=c.id;if(!a)return;a=a.thread;if(!a)return;var d=this.refs.root&&b("ReactDOM").findDOMNode(this.refs.root);if(!d)return;a=a.unread_count;if(a!==undefined){a=!!a&&(!b("ChatBehavior").showsTabUnreadUI||b("ChatBehavior").showsTabUnreadUI());a?b("ChatTabBlinking").blinkTab(c,{getTabElem:function(){return d},isFocused:function(){return!1},isHovered:function(){return!1}}):b("ChatTabBlinking").unblinkTab(c)}};a.prototype.$4=function(){var a=this.props.tabContent,c=a&&a.thread,d=c&&c.thread_id,e=a&&a.thread&&a.thread.header_color,f=e?{color:e}:null,g=b("CurrentUser").getID();if(b("gkx")("AT6A1bnDK2h8UfK21QtwMasCKSCRuJLNl1CkXiFlb4ngyuzOTwnMPylW45yiU1EwI4xsY2mbtMRkoGbbra-xak0V")){d=c&&d&&b("FantaAvailableStatus").isAvailable(c,d);return b("React").createElement("div",{className:"clearfix titlebar"},b("React").createElement(j,{highlightNewMessage:a&&a.highlightNewMessage,isActive:d,isNewMessageTab:a&&a.isNewMessageTab,onClose:this.$5,onHeaderToggle:this.$6,participants:a&&a.participants,thread:c,viewer:g}))}return b("React").createElement("div",{className:(this.state.closing?"_2suj":"")+" clearfix fbNubFlyoutTitlebar titlebar"+(e?" _1m34":""),style:f},b("React").createElement(b("ChatTabHeaderContainer.react"),{attachmentsShelf:document.createElement("div"),composer:a&&a.composer,hasBlockedMessages:!1,href:a&&a.threadHref,isActive:!1,isNewMessageTab:!!(a&&a.isNewMessageTab),isRaised:!1,isTyping:!1,membershipParticipants:a&&a.membershipParticipants,onClick:this.$6,onCloseClick:this.$5,onRTCNuxCloseButtonClick:b("emptyFunction"),participants:a&&a.participants,rtcNuxShown:!1,sheetController:{},showAddFriend:b("emptyFunction"),thread:c,threadID:this.props.tab.id,viewer:g}))};a.prototype.render=function(){var a=this.props,c=a.tab;a=a.tabContent;c=c.id;a=a&&!!a.thread&&b("FantaAvailableStatus").isAvailable(a.thread,c);return b("React").createElement("div",{className:"_4cd8 _50mz _50m_ fbNub _50-v"+(a?" _4-0b":"")+" _27_3"+(b("gkx")("AT7HdSIkhS9TSQx6PWXopj-NxmSus9nuXkEu6XM1WdZJElXpLdnQNN92q5iZdzYJyRUbbjoWOgsBC8RH9ivzcfSt")?" _69cg":""),ref:"root"},this.$4())};a.prototype.$8=function(){var a=this.props.tab.id;b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger"],function(b){return b.endFunnel(a)},"FantaTabMinimized.react")};a.prototype.$7=function(){return this.$10()||this.$11()};a.prototype.$10=function(){var a,b=this.props.tabContent;a=((a=b)!=null?(a=a.composer)!=null?(a=a.fileUploader)!=null?a.uploadedFiles:a:a:a)||{size:0};b=((b=b)!=null?(b=b.composer)!=null?(b=b.fileUploader)!=null?b.uploadingFiles:b:b:b)||{size:0};return a.size>0||b.size>0};a.prototype.$11=function(){var a=this.props.tabContent;a=(a=a)!=null?(a=a.composer)!=null?a.sharePreview:a:a;return!!(a&&a.params&&a.type)};a.prototype.$9=function(){var a=this.props.tab,c=h._("Are you sure you want to close this chat window?");b("FantaTabActions").blurTab(a.id);var d=h._("You haven't sent your message.");b("SimpleXUIDialog").showConfirm(c,d,function(c){c?b("FantaTabActions").closeTab(a.id):b("FantaTabActions").focusTab(a.id)},{autofocusConfirm:!0,useReactFocusBehavior:!0})};a.propTypes={tab:c.object.isRequired,tabContent:c.object};e.exports=a}),null);
__d("FantaMercuryTabsWithMain.react",["Bootloader","CurrentUser","FantaAppStore","FantaCookieUtil","FantaMercuryTabOverflowBootloader.react","FantaTabActions","FantaTabGroup.react","FantaTabMainLoader.react","FantaTabMinimized.react","FluxContainer","LazyComponent.react","LoadOnRender.react","MercuryIDs","MessengerState.bs","PresenceState","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MessengerState.bs").jsComponent,i=function(a){b("Bootloader").loadModules(["MessengerReasonDialogContainerReact.bs"],function(b){b=b.jsComponent;return a(b)},"FantaMercuryTabsWithMain.react")};g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("FantaAppStore")]};a.calculateState=function(){return{tabGroup:b("FantaAppStore").getState().tabGroup,tabContents:b("FantaAppStore").getState().mercury.tabContents}};a.prototype.componentDidMount=function(){this.props.loadDataOnMount&&b("FantaTabActions").loadFromData(b("FantaCookieUtil").convertCookieData(b("PresenceState").get()))};a.prototype.render=function(){return b("React").createElement(h,{fbid:b("CurrentUser").getID()},function(a){return[b("React").createElement(b("FantaTabGroup.react"),{key:"tabgroup",messengerState:a,MainComponent:b("FantaTabMainLoader.react"),MinimizedComponent:b("FantaTabMinimized.react"),OverflowComponent:b("FantaMercuryTabOverflowBootloader.react"),tabGroup:this.state.tabGroup,tabContents:this.state.tabContents,isLastOfTypeChecker:this.$1}),b("React").createElement(b("LoadOnRender.react"),{key:"dialog",component:b("React").createElement(b("LazyComponent.react"),null),loader:i,placeholder:b("React").createElement("span",null)})]}.bind(this))};a.prototype.$1=function(a){return b("MercuryIDs").isGroupChat(a.id)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a)}),null);
__d("FantaMercuryThreadEventsBootloaded",["Bootloader","CurrentUser","MercuryThreadInformer","MercuryViewer","MessengerState.bs","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadInformer").get();a={onMessagesReceived:function(a){__p&&__p();g.subscribe("messages-received",function(c,d){__p&&__p();if(!b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop()){c=function(c){__p&&__p();var e=d[c],f=function(d){var f=e[d];if(f.author!=b("MercuryViewer").getID()){if(!f.is_unread)return"continue";b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),c,function(d){b("Bootloader").loadModules(["ChatTabPolicy"],function(b){b.messageIsAllowed(d,f,function(){a(c,f)})},"FantaMercuryThreadEventsBootloaded")})}};for(var g=0;g<e.length;g++){var h=f(g);if(h==="continue")continue}};for(var e in d)c(e)}})}};e.exports=a}),null);
__d("FantaTabViewportManager",["Arbiter","DockTabsViewportCalculator","DockTabsViewportFantaTabUtils","FantaTabActions","ifRequired","immutable","isWebMessengerURI","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=b("DockTabsViewportCalculator").getInstance(a);if(!c)return;c.registerFantaTabCallbacks({fantaTabModelStateGetter:function(){var a=b("immutable").Map({});b("ifRequired")("FantaAppStore",function(b){a=b.getState().tabGroup.tabs});return a},onAvailableWidthChanged:function(a){b("setImmediate")(function(){b("FantaTabActions").setAllowedRaisedTabs(b("DockTabsViewportFantaTabUtils").getTabCountToFitWidth(a))})}});b("Arbiter").subscribe("FantaReducersDockCalculator/shouldRecalculate",function(){c.forceRecalculateChatTabs()});c.forceRecalculateFBDockWidth();b("Arbiter").subscribe("page_transition",function(a,c){b("isWebMessengerURI")(c.uri)&&b("setImmediate")(function(){return b("FantaTabActions").minimizeAllTabs()})})}e.exports={init:a}}),null);
__d("HotLikeSound",["MercurySoundsConfig","SoundPlayer","StickerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("MercurySoundsConfig").hot_like_grow_mp3_url,b("MercurySoundsConfig").hot_like_grow_ogg_url],h=[b("MercurySoundsConfig").hot_like_pop_mp3_url,b("MercurySoundsConfig").hot_like_pop_ogg_url],i=[b("MercurySoundsConfig").hot_like_outgoing_small_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_small_ogg_url],j=[b("MercurySoundsConfig").hot_like_outgoing_medium_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_medium_ogg_url],k=[b("MercurySoundsConfig").hot_like_outgoing_large_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_large_ogg_url],l=function(){return!1};a={setCheckSoundEnabledFunc:function(a){l=a},start:function(){this._play(g)},stop:function(){b("SoundPlayer").stop(g)},pop:function(){this.stop(),this._play(h)},snap:function(a){this.stop(),a===b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID&&this._play(i),a===b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID&&this._play(j),a===b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID&&this._play(k)},_play:function(a){l()&&b("SoundPlayer").play(a)}};e.exports=a}),null);
__d("MercuryDeliveryState",["MercuryConfig","MercuryIDs","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInformer","UserActivity","debounceAcrossTransitions","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryConfig").delivery_timeout||12e4;a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$8=function(){if(this.$5.length===0&&Object.keys(this.$6).length===0)return;var a=this.$5.map(function(a){return a.message_id});a&&this.$2.sendDeliveryReceipts(a,this.$6);this.$6={};this.$5=[]}.bind(this),this.$1=a,this.$2=b("MercuryServerRequests").getForFBID(this.$1),this.$3=b("MercuryThreadInformer").getForFBID(this.$1),this.$4=b("MercuryThreadIDMap").getForFBID(this.$1),this.$5=[],this.$6={},this.$3.subscribe("messages-received",this.$7.bind(this)),b("UserActivity").subscribe(b("debounceAcrossTransitions")(this.$8,300,this))}a.prototype.$7=function(a,c){for(var d in c){a=c[d];a.forEach(function(a){this.$9(a)&&(this.$5.push(a),this.$4.getServerIDFromClientID(d,function(b){this.$6[b]||(this.$6[b]=[]),this.$6[b].push(a.message_id)}.bind(this)))}.bind(this))}(b("UserActivity").isActive(g)||b("gkx")("AT6QldQ637XMvCyugHEhjQqDDf2-wtP50HTiWZ1Ww9U3TKMTy-LCSwNJff4SK8McDFogXyIPPHKCxhkz9mFRLCX-m6fUBuF8qkM5EElKo4EzDw"))&&this.$8()};a.prototype.$9=function(a){var c=a.author?b("MercuryIDs").getUserIDFromParticipantID(a.author):null;if(c===this.$1)return!1;return!a.is_unread?!1:!0};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncEnvironment",["Arbiter","ChannelInitialData","CurrentUser","MercurySyncDeltaHandler","MessengerMQTTGating"],(function(a,b,c,d,e,f){"use strict";function a(){if(!b("ChannelInitialData").channelConfig&&!b("MessengerMQTTGating").isEnabled())return;b("MercurySyncDeltaHandler").get();b("Arbiter").inform("MercurySyncDeltaHandler/initSeqID",{fbid:b("CurrentUser").getAccountID(),seqID:b("ChannelInitialData").channelConfig?b("ChannelInitialData").channelConfig.sequenceId:0})}e.exports={setUp:a}}),null);
__d("MessengerFolders.bs",["MessagingTag","MercuryFoldersConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=[b("MessagingTag").INBOX,b("MessagingTag").PENDING,b("MessagingTag").OTHER,b("MessagingTag").ACTION_ARCHIVED];var g=d.filter(function(a){if(a===b("MessagingTag").PENDING)return!b("MercuryFoldersConfig").hide_message_filtered;else if(a===b("MessagingTag").OTHER)return!b("MercuryFoldersConfig").hide_message_requests;else return!0});function a(){return[].concat(g)}function c(a){if(a.is_archived)return b("MessagingTag").ACTION_ARCHIVED;else return a.folder}f.getSupportedFolders=a;f.getFromMeta=c}),null);
__d("MercuryUnreadState",["invariant","KeyedCallbackManager","LogHistory","MercuryActionType","MercuryConfig","MercuryDispatcher","MercuryGlobalActionType","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInformer","MercuryThreadlistConstants","MessagingTag","MessengerFolders.bs","MessengerState.bs","createObjectFrom"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=(b("MessengerFolders.bs").getSupportedFolders()||[]).filter(function(a){return a!==b("MessagingTag").ACTION_ARCHIVED}),i="unread_thread_hash",j="unseen_thread_list",k=b("MercuryThreadlistConstants").MAX_UNREAD_COUNT,l=b("LogHistory").getInstance("mercury_unread_state");a.getForFBID=function(a){return m.getForFBID(a)};a.get=function(){return m.get()};function a(a){this.$1=a,this.$2=b("MercuryServerRequests").getForFBID(this.$1),this.$3=b("MercuryThreadIDMap").getForFBID(this.$1),this.$4=b("MercuryThreadInformer").getForFBID(this.$1),this.$5=b("MercuryDispatcher").getForFBID(this.$1),this.$6={},this.$7={},this.$8={},this.$9={},this.$10={},h.forEach(function(a){this.$8[a]=0,this.$9[a]=!1,this.$10[a]=new(b("KeyedCallbackManager"))()}.bind(this)),this.$5.subscribe("update-unread",this.$11.bind(this)),this.$5.subscribe("update-thread-ids",function(a,b){this.$12(b)}.bind(this))}a.prototype.getUnreadCount=function(a){if(this.exceedsMaxCount(a)){l.error("unguarded_unread_count_fetch","{}");return 0}return this.$13(a)};a.prototype.exceedsMaxCount=function(a){return this.$9[a]||this.$13(a)>k};a.prototype.markFolderAsRead=function(a){(this.$9[a]||this.$13(a)>0)&&this.$2.markFolderAsRead(a),b("MercuryConfig").MessengerInboxRequests&&a===b("MessagingTag").INBOX&&this.$13(b("MessagingTag").PENDING)>0&&this.$2.markFolderAsRead(b("MessagingTag").PENDING)};a.prototype.getIsThreadUnread=function(a,c){c=c||b("MessagingTag").INBOX;c=this.$14(c);return!!(c&&c[a])};a.prototype.$15=function(a,b){this.$10[a].setResource(i,b),this.$10[a].setResource(j,Object.keys(b))};a.prototype.$16=function(a,b){b=this.$10[a].executeOrEnqueue(i,b);b=this.$10[a].getUnavailableResources(b);b.length&&this.$2.fetchUnreadThreadIDs(a)};a.prototype.$14=function(a){return this.$10[a].getResource(i)};a.prototype.$13=function(a){var b=this.$10[a].getResource(j);if(b)return b.length;else return this.$8[a]};a.prototype.$11=function(a,c){__p&&__p();var d;(c.unread_thread_fbids||[]).forEach(function(a){d=a.folder;if(!this.$17(d))return;var c=a.thread_fbids||[];c=c.concat(a.other_user_fbids||[]);a=this.$18(c);this.$15(d,b("createObjectFrom")(a,!0));a.length>k&&(this.$9[d]=!0);this.$4.updatedUnreadState()}.bind(this));(c.message_counts||[]).forEach(function(a){if(a.unread_count===undefined)return;d=a.folder;a.unread_count>k?(this.$9[d]=!0,this.$15(d,{}),this.$4.updatedUnreadState()):(this.$8[d]=a.unread_count,this.$8[d]===0&&this.$15(d,{}),this.$4.updatedUnreadState())}.bind(this));(c.global_actions||[]).forEach(function(a){a.action_type===b("MercuryGlobalActionType").MARK_ALL_READ&&this.$19(a.folder,a.timestamp)}.bind(this));(c.actions||[]).forEach(function(a){__p&&__p();var c=b("MercuryActionType"),e=a.other_user_fbid?a.other_user_fbid:a.thread_fbid,f=a.thread_id?a.thread_id:e;if(a.action_type==c.DELETE_THREAD)h.forEach(function(a){this.$20(a,f)}.bind(this));else if(a.action_type==c.CHANGE_ARCHIVED_STATUS||a.action_type==c.CHANGE_FOLDER){e=b("MessengerState.bs").getThreadMetaNow(this.$1,a.thread_id);!e&&g(0);d=b("MessengerFolders.bs").getFromMeta(e);this.$17(d)&&e.unread_count>0&&this.$21(d,f);h.forEach(function(a){a!=d&&this.$20(a,f)}.bind(this))}else{d=this.$22(a);if(!this.$17(d))return;a.action_type==c.CHANGE_READ_STATUS?a.mark_as_read?this.$20(d,f,a.timestamp):this.$21(d,f,a.timestamp):(a.action_type==c.USER_GENERATED_MESSAGE||a.action_type==c.LOG_MESSAGE)&&(a.is_unread&&this.$21(d,f,a.timestamp))}}.bind(this))};a.prototype.$21=function(a,b,c){if(this.$9[a])return;this.$16(a,function(d){var e=this.$6[a]||0,f=this.$7[b]||0,g=c||Number.POSITIVE_INFINITY;g>=e&&g>=f&&!d[b]&&(d[b]=c||0,this.$15(a,d),this.$4.updatedUnreadState())}.bind(this))};a.prototype.$20=function(a,b,c){__p&&__p();if(this.$9[a])return;this.$16(a,function(d){if(c){var e=this.$7[b];(!e||e<c)&&(this.$7[b]=c)}e=d[b];if(c&&typeof e==="number"&&c<e)return;b in d&&(delete d[b],this.$15(a,d),this.$4.updatedUnreadState())}.bind(this))};a.prototype.$19=function(a,b){this.$9[a]=!1,this.$15(a,{}),this.$6[a]=Math.max(this.$6[a]||0,b||0),this.$4.updatedUnreadState()};a.prototype.$18=function(a){return a.map(this.$3.convertThreadIDIfAvailable,this.$3)};a.prototype.$12=function(a){h.forEach(function(b){var c=this.$14(b);if(!c)return;for(var d in a){var e=a[d];c[d]&&(c[e]=c[d],delete c[d])}this.$15(b,c)}.bind(this))};a.prototype.$22=function(a){var c=a.thread_id?b("MessengerState.bs").getThreadMetaNow(this.$1,a.thread_id):null;return c?b("MessengerFolders.bs").getFromMeta(c):a.folder?a.folder:""};a.prototype.$17=function(a){return!!a&&h.includes(a)};var m=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryUnseenState",["KeyedCallbackManager","LogHistory","MercuryActionType","MercuryDispatcher","MercuryGlobalActionType","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInfo","MercuryThreadInformer","MercuryThreadlistConstants","MessageThreadReadStateEffect","MessagingTag","MessengerFolders.bs","MessengerState.bs","createObjectFrom","isEmpty"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessageThreadReadStateEffect").MessageThreadReadStateEffectType,h=b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT,i="unseen_thread_hash",j="unseen_thread_list",k=b("LogHistory").getInstance("mercury_unseen_state");a.getForFBID=function(a){return l.getForFBID(a)};a.get=function(){return l.get()};function a(a){this.$2=a,this.$7=b("MercuryServerRequests").getForFBID(this.$2),this.$8=b("MercuryThreadIDMap").getForFBID(this.$2),this.$9=b("MercuryThreadInformer").getForFBID(this.$2),this.$1=b("MercuryDispatcher").getForFBID(this.$2),this.$3=0,this.$4=0,this.$5=!1,this.$6=!1,this.$10=new(b("KeyedCallbackManager"))(),this.$1.subscribe("update-unseen",function(a,b){this.$11(b)}.bind(this)),this.$1.subscribe("update-thread-ids",function(a,b){this.$12(b)}.bind(this))}a.prototype.getUnseenCount=function(){if(this.exceedsMaxCount()){k.error("unguarded_unseen_count_fetch","{}");return 0}return this.$13()};a.prototype.exceedsMaxCount=function(){return this.$5||this.$13()>h};a.prototype.markAsSeen=function(){var a=this.$13();a===null?this.$6=!0:(a>0||this.$5)&&(this.$7.markSeen(),this.$14(this.$7.getLastActionTimestamp(),[]))};a.prototype.$15=function(a,b){var c;this.$16((c={},c[a]=0,c),b)};a.prototype.$17=function(a){this.$10.setResource(i,a),this.$10.setResource(j,Object.keys(a))};a.prototype.$18=function(a){a=this.$10.executeOrEnqueue(i,a);a=this.$10.getUnavailableResources(a);a.length&&this.$7.fetchUnseenThreadIDs()};a.prototype.$19=function(){return this.$10.getResource(i)};a.prototype.$13=function(){var a=this.$10.getResource(j);if(a)return a.length;else return this.$3};a.prototype.$11=function(a){__p&&__p();var c=this,d=this.$20(a);if(a.unseen_thread_fbids)a.unseen_thread_fbids.forEach(function(a){if(a.folder!=b("MessagingTag").INBOX)return;a=(a.thread_fbids||[]).concat(a.other_user_fbids||[]);a=this.$21(a);var c=d.seen_timestamp?d.seen_timestamp:this.$4;this.$14(c,a);d.unseen_count>h&&(this.$5=!0)}.bind(this));else if(d.seen_timestamp!==undefined)this.$4=d.seen_timestamp,d.unseen_count>h?(this.$5=!0,this.$17({})):(this.$3=d.unseen_count,this.$3===0&&this.$17({}));else{var e=function(){__p&&__p();(a.global_actions||[]).forEach(function(a){a.action_type===b("MercuryGlobalActionType").MARK_ALL_SEEN&&this.$14(a.timestamp,[])}.bind(c));if(c.$5)return{v:void 0};var d=a.actions;if(!d||!d.length)return{v:void 0};var e={},f={},h=function(a){__p&&__p();var h=d[a];a=h.action_type;var i=h.other_user_fbid?h.other_user_fbid:h.thread_fbid,j=h.thread_id?h.thread_id:i;if(a===b("MercuryActionType").MARK_THREAD_SEEN){c.$15(j,h.persistent);return"continue"}if(!c.$22(h))return"continue";if(h.thread_read_state_effect&&h.thread_read_state_effect!==g.MARK_UNREAD)return"continue";if(a===b("MercuryActionType").USER_GENERATED_MESSAGE||a===b("MercuryActionType").LOG_MESSAGE){i=e[j]?h.timestamp>e[j]:!1;i=i||!e[j];h.is_unread&&i&&b("MessengerState.bs").getThreadMeta(c.$2,j,function(a){!b("MercuryThreadInfo").isMuted(a)&&!(a&&a.last_read_timestamp>=h.timestamp)&&(e[j]=h.timestamp)})}else a===b("MercuryActionType").CHANGE_READ_STATUS&&h.mark_as_read&&(f[j]=h.timestamp)};for(var i=0;i<d.length;i++){var j=h(i);if(j==="continue")continue}c.$23(e);c.$16(f)}();if(typeof e==="object")return e.v}this.$6&&(this.$6=!1,this.markAsSeen())};a.prototype.$14=function(a,c){__p&&__p();var d=this.$19();if(d===undefined||a>this.$4||this.$5){this.$4=a;c=c||[];c.length<=h&&(this.$5=!1);d={};a=this.$19();for(var e in a)if(a[e]!==!0){var f=a[e];this.$24(f)&&(d[e]=f)}f=Object.assign(b("createObjectFrom")(c,!0),d);this.$17(f);this.$9.updatedUnseenState()}};a.prototype.$23=function(a){__p&&__p();if(this.$5)return;var b={},c=!1;for(var d in a){var e=a[d];this.$24(e)&&(b[d]=e,c=!0)}if(!c)return;this.$18(function(a){for(var c in b){var d=b[c];!a[c]&&this.$24(d)&&(a[c]=b[c])}this.$17(a);this.$9.updatedUnseenState()}.bind(this))};a.prototype.$16=function(a,c){b("isEmpty")(a)||this.$18(function(b){var d=!1;for(var e in a){var f=a[e],g=f>=b[e];b[e]&&(!f||g)&&(delete b[e],d=!0)}d&&(this.$17(b),this.$9.updatedUnseenState(),c&&this.$13()===0&&this.$7.markSeen())}.bind(this))};a.prototype.$24=function(a){return a>this.$4};a.prototype.$21=function(a){return a.map(this.$8.convertThreadIDIfAvailable,this.$8)};a.prototype.$12=function(a){var b=this.$19();if(!b)return;for(var c in a){var d=a[c];b[c]&&(b[d]=b[c],delete b[c])}this.$17(b)};a.prototype.$22=function(a){var c=a.thread_id?b("MessengerState.bs").getThreadMetaNow(this.$2,a.thread_id):null;c=c?b("MessengerFolders.bs").getFromMeta(c):a.folder;return c===b("MessagingTag").INBOX||c===undefined};a.prototype.$20=function(a){a=a.message_counts||[];for(var c=0;c<a.length;c++)if(a[c].folder===b("MessagingTag").INBOX)return a[c];return{}};var l=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("P2PActionConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CREDIT_CARDS_UPDATED:"credit_cards_updated",CREDIT_CARDS_UPDATED_ERROR:"credit_cards_updated_error",CHANNEL_EVENTS_ALLOWED:"channel_events_allowed",CHANNEL_EVENTS_IGNORED:"channel_events_ignored",CREDIT_CARD_SAVING:"credit_card_saving",CREDIT_CARD_ADDED:"credit_card_added",CREDIT_CARD_ADDED_ERROR:"credit_card_added_error",CREDIT_CARD_ADDED_ERROR_CLEARED:"credit_card_added_error_cleared",CREDIT_CARD_DELETED:"credit_card_deleted",CREDIT_CARD_DELETED_ERROR:"credit_card_deleted_error",CREDIT_CARD_UPDATED:"credit_card_updated",CREDIT_CARD_UPDATED_ERROR:"credit_card_updated_error",PRESET_CREDIT_CARD_UPDATED:"preset_credit_card_updated",PRESET_CREDIT_CARD_UPDATED_ERROR:"preset_credit_card_updated_error",CREDIT_CARD_VERIFIED:"credit_card_verified",CREDIT_CARD_VERIFIED_ERROR:"credit_card_verified_error",PAYMENT_METHODS_UPDATED:"payment_methods_updated",PAYMENT_METHODS_UPDATED_ERROR:"payment_methods_updated_error",TRANSFERS_UPDATED:"transfers_updated",TRANSFERS_UPDATED_ERROR:"transfers_updated_error",NUX_TRANSFERS_UPDATED:"nux_transfers_updated",TRANSFER_ADDED:"transfer_added",TRANSFER_ADDED_ERROR:"transfer_added_error",TRANSFER_UPDATED:"transfer_updated",TRANSFER_UPDATED_ERROR:"transfer_updated_error",TRANSFER_ACCEPTED:"transfer_accepted",TRANSFER_DECLINED:"transfer_declined",CHAT_SEND_VIEW_OPENED:"chat_send_view_opened",CHAT_SEND_VIEW_CLOSED:"chat_send_view_closed",BIN_NUMBER_VALIDATED:"bin_number_validated",BIN_NUMBER_VALIDATED_ERROR:"bin_number_validated_error",USER_ELIGIBILITY_UDPATED:"user_eligibility_updated",FRIENDS_LIST_UPDATED:"friends_list_updated",DIALOG_SHOWN:"dialog_shown",DIALOG_CLOSED:"dialog_closed",BANNER_STATES_UPDATED:"banner_states_updated",BANNER_DISMISSED:"banner_dismissed",BANNER_VIEWED:"banner_viewed",BANNER_COMPLETED:"banner_completed",MONEYPENNY_TRANSFER_CREATED:"moneypenny_transfer_created",MONEYPENNY_TRANSFER_CREATED_ERROR:"moneypenny_transfer_created_error",PLATFORM_CONTEXT_ADDED:"platform_context_added",PLATFORM_CONTEXT_ADDED_ERROR:"platform_context_added_error",PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED:"platform_context_save_errors_cleared",PLATFORM_CONTEXT_BANNER_DISMISSED:"platform_context_banner_dismissed",PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD:"platform_context_product_item_sold",PLATFORM_CONTEXT_CHANGED:"platform_context_changed",EXTENSIVE_TRANSFER_DETAILS_UPDATED:"extensive_transfer_details_updated",ADDRESS_SAVING:"address_saving",ADDRESSES_UPDATED:"addresses_updated",ADDRESS_ADDED:"address_added",ADDRESS_ADDED_ERROR:"address_added_error",ADDRESS_ADDED_ERROR_CLEARED:"address_added_error_cleared",CHECKOUT_CART_INITIATED:"checkout_cart_initiated",CHECKOUT_CART_CREATED:"checkout_cart_created",CHECKOUT_SHIPPING_OPTION_SELECTED:"checkout_shipping_option_selected",CHECKOUT_ADDRESS_SELECTED:"checkout_address_selected",CHECKOUT_CREDIT_CARD_SELECTED:"checkout_credit_card_selected",CHECKOUT_ADDRESS_FORM_TOGGLED:"checkout_address_form_toggled",CHECKOUT_CREDIT_CARD_FORM_TOGGLED:"checkout_credit_card_form_toggled",CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED:"checkout_address_options_toggled",CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED:"checkout_credit_card_edit_options_toggled",CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED:"checkout_payment_edit_options_toggled",CHECKOUT_PAYMENT_METHOD_SELECTED:"checkout_payment_method_selected",CHECKOUT_PAYMENT_METHOD_CONFIGURED:"checkout_payment_method_configured",CHECKOUT_PAYMENT_METHOD_CONFIRMED:"checkout_payment_method_confirmed",CHECKOUT_ADDRESS_FORM_VALIDATED:"checkout_address_form_validated",CHECKOUT_CREDIT_CARD_FORM_VALIDATED:"checkout_credit_card_form_validated",CHECKOUT_EDIT_COMPLETED:"checkout_completed",CHECKOUT_PROCESSING:"checkout_processing",CHECKOUT_BUYER_PROFILE_UPDATED:"checkout_buyer_profile_updated",CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED:"checkout_manual_payment_receipt_updated",PAYMENT_REQUEST_INITIATED:"payment_request_initiated",PAYMENT_REQUEST_INITIATED_COMPLETE:"payment_request_initiated_completed",PAYMENT_REQUEST_CREATED:"payment_request_created",PAYMENT_REQUEST_CREATED_ERROR:"payment_request_created_error",PAYMENT_REQUEST_UPDATED:"payment_request_updated",PAYMENT_REQUEST_DECLINE_INITIATED:"payment_request_decline_initiated",PAYMENT_REQUEST_DECLINED:"payment_request_declined",PAYMENT_REQUEST_DECLINE_ERROR:"payment_request_decline_error",PAYMENT_REQUESTS_FETCHED:"payment_requests_fetched",PAYMENT_REQUEST_CANCEL_INITIATED:"payment_request_cancel_initiated",PAYMENT_REQUEST_CANCELED:"payment_request_canceled",PAYMENT_REQUEST_CANCEL_ERROR:"payment_request_cancel_error"});e.exports=a}),null);
__d("P2PDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!1})}),null);
__d("P2PSendMoneyDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=36,i;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),i=new Map(),b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").CHAT_SEND_VIEW_OPENED:this.handleChatSendViewOpened(c);this.emit("change");break;case b("P2PActionConstants").CHAT_SEND_VIEW_CLOSED:this.handleChatSendViewClosed(c);this.emit("change");break}};a.prototype.getStateByThreadID=function(a){return i.get(a)};a.prototype.handleChatSendViewOpened=function(a){i.set(a.threadID,{amount:a.amount,groupSendRecipientUserIDs:a.groupSendRecipientUserIDs,groupSendReceiptDetails:a.groupSendReceiptDetails,groupThreadFBID:a.groupThreadFBID,onCompletion:a.onCompletion,openRequestTab:a.openRequestTab,memoText:a.memoText&&a.memoText.substr(0,h),platformData:a.platformData,referrer:a.referrer,paymentRequestID:a.paymentRequestID,sendMoneyDialogShown:!0,sendMoneyNUXDismissed:a.sendMoneyNUXDismissed,useModal:a.useModal})};a.prototype.handleChatSendViewClosed=function(a){i.set(a.threadID,{amount:"",groupSendRecipientUserIDs:[],groupSendReceiptDetails:null,groupThreadFBID:"",onCompletion:null,openRequestTab:!1,memoText:null,platformData:null,referrer:null,paymentRequestID:null,sendMoneyDialogShown:!1,sendMoneyNUXDismissed:!1,useModal:!1})};a.prototype.isAnyChatSendViewOpen=function(){__p&&__p();for(var a=i.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(d.sendMoneyDialogShown)return!0}return!1};e.exports=new a()}),null);
__d("FantaTabsAppBase",["Bootloader","ChatAppActions","ChatAppStore","ChatPerfInstrumentation","CSS","JSLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.init=function(a,c,d){__p&&__p();if(this.isInitialized()){b("JSLogger").create("chat_app").error("repeated_init");return}this.$1=a;this.tabsElem=c;var e=b("ChatAppStore").addListener(function(){var a=b("ChatAppStore").getPreviousState(),c=b("ChatAppStore").getState();a.initialDisplayDone===!1&&c.initialDisplayDone===!0&&(b("ChatPerfInstrumentation").logDisplayDone(),e.remove())});b("ChatPerfInstrumentation").init();this.$2(d);this.initializeFantaData(d.interstitial_data);this.initializeFantaUI();this.$3();b("ChatAppActions").tti();b("ChatPerfInstrumentation").logTTI()};a.prototype.isInitialized=function(){return!!b("ChatAppStore").getState().isInitialized};a.prototype.isHidden=function(){var a=b("ChatAppStore").getState();return!!(!a.isInitialized||a.isHidden)};a.prototype.hide=function(){if(this.isHidden())return;b("CSS").hide(this.$1);b("ChatAppActions").hide()};a.prototype.unhide=function(){var a=b("ChatAppStore").getState();a.isInitialized?a.isHidden&&(b("CSS").show(this.$1),d(["Dock"],function(a){a.resizeAllFlyouts()}),b("ChatAppActions").unhide()):a.isLoaded||(d(["UIPagelet"],function(a){a.loadFromEndpoint("ChatTabsPagelet","ChatTabsPagelet"),a.loadFromEndpoint("BuddylistPagelet","BuddylistPagelet")}),b("ChatAppActions").load())};a.prototype.initializeFantaData=function(a){};a.prototype.initializeFantaUI=function(){};a.prototype.$2=function(a){d(["MercuryDeliveryState","MessengerParticipants.bs","MercuryServerPayloadPreprocessor","MessengerState.bs","MercuryUnreadState","MercuryUnseenState","MercurySyncEnvironment","P2PSendMoneyDialogStore"],function(c,d,e,f,g,h,i,j){c.get(),d,h.get(),g.get(),i.setUp(),b("ChatPerfInstrumentation").logInitStores(),a.graphql_payload?b("Bootloader").loadModules(["ChatInitialDataTransformer.bs"],function(b){var c=a.graphql_payload;b=b.transform(c);b.message_blocked_ids=c.message_blocked_ids;b.message_ignored_ids=c.message_ignored_ids;b.payload_source=c.payload_source;e.get().handleUpdate(b)},"FantaTabsAppBase"):e.get().handleUpdate(a.initial_data)})};a.prototype.$3=function(){d(["HotLikeSound","ChatOptions"],function(a,c){a.setCheckSoundEnabledFunc(function(){return c.getSetting("sound")}),b("ChatPerfInstrumentation").logInitSound()})};function a(){}e.exports=a}),null);
__d("FBRTCExperiment",["FBRTCExperimentsConfig","QE2Logger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();g.gen=function(a){var c={params:{},auto_exposure:!1,in_experiment:!1};c=b("FBRTCExperimentsConfig")[a]||c;a=new g(a,c);return a};g.getIncomingCallExperiments=function(){return g.gen("rtweb_incoming_call_experiments")};function g(a,b){this.$1=a,this.$2=b}g.prototype.$3=function(){this.$2.auto_exposure&&this.logExposure()};g.prototype.logExposure=function(){this.$2.in_experiment&&b("QE2Logger").logExposureForUser(this.$1)};g.prototype.getParam=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==undefined)return this.$2.params[a].toString()}return b};g.prototype.getInt=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==undefined)return parseInt(this.$2.params[a],10)}return b};g.prototype.getBool=function(a,b){var c=this.$2.params;if(this.$2.in_experiment){this.$3();if(c[a]!==undefined)return c[a]==="1"||c[a]===1||c[a]==="true"||c[a]===!0}return b};e.exports=g}),null);
__d("FBRTCCallControlActions",["FBRTCDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ACCEPT_ESCALATION:null,HANG_UP:null,PARENT_WINDOW_START_CALL:null,TOGGLE_FULL_SCREEN:null,TOGGLE_MUTE_AUDIO:null,TOGGLE_MUTE_VIDEO:null,TOGGLE_SCREEN_SHARING:null,TOGGLE_SELF_VIEW:null,SHOW_SETTINGS:null,START_CALL:null,DECLINE_ESCALATION:null,RECEIVED_SIGNALING_MESSAGE:null,RESET_CALL:null,OPEN_SCREEN_IN_NEW:null,CLOSE_STANDALONE_SCREEN:null,REDIAL_CALL:null});a={Types:g,hangUp:function(){b("FBRTCDispatcher").dispatch({type:g.HANG_UP})},toggleMuteAudio:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_MUTE_AUDIO})},toggleMuteVideo:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_MUTE_VIDEO})},toggleFullScreen:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_FULL_SCREEN})},toggleSelfView:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_SELF_VIEW})},showSettings:function(){b("FBRTCDispatcher").dispatch({type:g.SHOW_SETTINGS})},toggleScreenSharing:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_SCREEN_SHARING})},startCall:function(){b("FBRTCDispatcher").dispatch({type:g.START_CALL})},openScreenInNewWindow:function(){b("FBRTCDispatcher").dispatch({type:g.OPEN_SCREEN_IN_NEW})},receivedSignalingMessage:function(a){b("FBRTCDispatcher").dispatch({type:g.RECEIVED_SIGNALING_MESSAGE,message_type:a.msgType,message:a})},acceptEscalation:function(){b("FBRTCDispatcher").dispatch({type:g.ACCEPT_ESCALATION})},declineEscalation:function(){b("FBRTCDispatcher").dispatch({type:g.DECLINE_ESCALATION})},resetCall:function(a){b("FBRTCDispatcher").dispatch({type:g.RESET_CALL,trigger:a})},redialCall:function(){b("FBRTCDispatcher").dispatch({type:g.REDIAL_CALL})},parentWindowStartCall:function(){b("FBRTCDispatcher").dispatch({type:g.PARENT_WINDOW_START_CALL})}};e.exports=a}),null);
__d("FBRTCStruct",[],(function(a,b,c,d,e,f){__p&&__p();var g=function(a,b,c){var d,e;if(typeof a==="string"||a instanceof String)e=a,d=a;else for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(f==="index"?c=a[f]:(e=f,d=a[f]));b[e]=c;b.strNames[c]=d};function a(a){"use strict";this.strNames=[];for(var b=0;b<a.length;b++)g(a[b],this,b)}e.exports=a}),null);
__d("FBRTCConstants",["FBRTCStruct","keyMirror"],(function(a,b,c,d,e,f){__p&&__p();a=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",PING:"ping",PING_ACK:"ping_ack",HANGUP:"hang_up",OTHER_DISMISS:"other_dismiss",MSG_ACK:"msg_ack",PRANSWER:"pranswer",ICERESTART_OFFER:"icerestart_offer",ICERESTART_ANSWER:"icerestart_answer",PCRESTART_OFFER:"pcrestart_offer",PCRESTART_ANSWER:"pcrestart_answer",SDP_UPDATE:"sdp_update",OFFER_ACK:"offer_ack",OFFER_NACK:"offer_nack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",VIDEO_REQUEST:"video_request",ACK:"ack",SWITCH_TO_MULTIWAY:"switch_to_multiway"});c=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",CHILD_WINDOW_START_CALL:"rtc_child_window_start_call",CHILD_WINDOW_MESSAGE:"rtc_child_window_message"});d=Object.freeze({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",VOIP:"voip"});var g=Object.freeze({LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5});f=Object.freeze({AUDIO_ONLY:"audio_only",AUDIO_VIDEO:"audio_video",SCREEN_CONTENT:"screen"});var h=Object.freeze({CUSTOM_VIDEO_STREAM_SIZE:"CUSTOM_VIDEO_STREAM_SIZE",CUSTOM_VIDEO:"CUSTOM_VIDEO",FHD_VIDEO:"FHD_VIDEO",HD_VIDEO:"HD_VIDEO",LQ_VIDEO:"LQ_VIDEO",NO_VIDEO:"NO_VIDEO",SD_VIDEO:"SD_VIDEO"}),i=Object.freeze({FHD_HEIGHT:1080,HD_HEIGHT:720,LQ_HEIGHT:180,SD_HEIGHT:480,FHD_WIDTH:1920,HD_WIDTH:1280,LQ_WIDTH:320,SD_WIDTH:848,VLQ_FRAME_RATE:5,LQ_FRAME_RATE:15,FRAME_RATE:30}),j=new(b("FBRTCStruct"))([{IGNORE_CALL:"IgnoreCall"},{HANGUP_CALL:"HangupCall"},{IN_ANOTHER_CALL:"InAnotherCall"},{ACCEPT_AFTER_HANGUP:"CallEndAcceptAfterHangUp"},{NO_ANSWER_TIMEOUT:"NoAnswerTimeout"},{INCOMING_TIMEOUT:"IncomingTimeout"},{OTHER_INSTANCE_HANDLED:"OtherInstanceHandled"},{SIGNALING_MESSAGE_FAILED:"SignalingMessageFailed"},{CONNECTION_DROPPED:"ConnectionDropped"},{CLIENT_INTERRUPTED:"ClientInterrupted"},{WEBRTC_ERROR:"WebRTCError"},{CLIENT_ERROR:"ClientError"},{NO_PERMISSION:"NoPermission"},{OTHER_NOT_CAPABLE:"OtherNotCapable"},{NO_UI_ERROR:"NoUIShown"},{UNSUPPORTED_VERSION:"VersionUnsupported"},{CALLER_NOT_VISIBLE:"CallerNotVisible"},{CARRIER_BLOCKED:"CarrierBlocked"},{OTHER_CARRIER_BLOCKED:"OtherCarrierBlocked"},{CLIENT_ENCRYPTION_ERROR:"ClientEncryptionError"},{INACTIVE_TIMEOUT:"InactiveTimeout"}]),k=Object.freeze({CALL_INITIALIZATION_FAILED:"CollabCallInitializationFailed",CLOSED_AS_STALE:"CollabClosedAsStale",CLOSED_BY_MCU:"CollabClosedByMcu",LOST_MCU_CONNECTION:"CollabLostMcuConnection",LOST_MCU_THRIFT_CONNECTION:"CollabLostMcuThriftConnection",LOST_SIP_ADAPTER_CONNECTION:"CollabLostSipAdapterConnection",MCU_INVALID_STREAM_CONFIGURATION:"CollabMcuInvalidStreamConfiguration",MCU_NO_AUDIO_STREAM:"CollabMcuNoAudioStream",REMOTE_PEER_HANGUP:"CollabRemotePeerHangup",REMOTE_PEER_REJECT:"CollabRemotePeerReject",SIP_CONNECTION_INITIALIZATION_FAILED:"CollabSipConnectionInitializationFailed",UNKNOWN:"CollabUnknown"}),l=Object.freeze({TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10}),m=Object.freeze({ONE_HOUR:"1hour",UNTIL_EIGHT_AM:"8am",ALWAYS:"always"});b=b("keyMirror")({AUDIO:null,VIDEO:null});var n=Object.freeze({CUSTOM:"custom",MULTIWAY:"multiway",P2P:"p2p"}),o=Object.freeze({DOMINANT_SPEAKER:"DOMINANT_SPEAKER",GRID:"GRID"});m={CallBlockingConstants:m,CallEndReason:j,CallType:d,ChildWindowMessageType:c,CollabCallEndSubreason:k,GroupVideoViewLayout:o,IncomingCallDialogTypes:b,PayloadType:a,RTCConstraints:i,SignalingProtocol:n,StreamType:f,UIEventType:l,UploadLogLevel:g,VideoQuality:h,convertFromUploadLogLevel:function(a){switch(a){case g.LL_DEBUG:return"d";case g.LL_BASIC:return"b";case g.LL_WARNING:return"w";case g.LL_INFO:return"i";case g.LL_VERBOSE:return"v";case g.LL_NONE:default:return null}},convertToUploadLogLevel:function(a){switch(a){case"d":return g.LL_DEBUG;case"b":return g.LL_BASIC;case"w":return g.LL_WARNING;case"i":return g.LL_INFO;case"v":return g.LL_VERBOSE;default:return g.LL_NONE}},uploadLogLevelString:function(a){switch(a){case g.LL_BASIC:return"basic";case g.LL_DEBUG:return"debug";case g.LL_WARNING:return"warning";case g.LL_INFO:return"info";case g.LL_VERBOSE:return"verbose";default:return""}},endCallReasonFromString:function(a){return j.strNames.indexOf(a)},callEndReasonString:function(a){return a<0||a>j.strNames.length?"Unknown":j.strNames[a]},fullCallEndReasonString:function(a,b){return this.callEndReasonString(a)+"_"+(b?"remote":"local")}};e.exports=m}),null);
__d("FBRTCConsoleLogger",["Log","LogHistory","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;h.getInstance=function(){g||(g=new h());return g};function h(){this.$1=b("LogHistory").getInstance(h.MODULE_NAME)}h.prototype.getLogHistory=function(){return this.$1};h.prototype.log=function(a,b,c,event){event===void 0&&(event="Console");var d="";b&&c&&(d=" (peerID:"+b+", callID:"+c+")");this.$1.log(event||"Console",a+d);return this};h.MODULE_NAME="webrtc";e.exports=h}),null);
__d("FBRTCLocalMessageQueue",["CacheStorage","FBRTCConsoleLogger"],(function(a,b,c,d,e,f){__p&&__p();var g="localstorage",h="RTC_",i="offer",j="offer_msg",k="data_",l=30*1e3,m=15*1e3,n=500,o=new Map();function a(){"use strict";this.$1=b("FBRTCConsoleLogger").getInstance()}a.prototype.enqueueOffer=function(a,b){"use strict";a=this.$2(a,j);this.$3(a,i,b)};a.prototype.getOffer=function(a){"use strict";a=this.$2(a,j);return this.$4(a,i)};a.prototype.removeOffer=function(a){"use strict";a=this.$2(a,j);a.remove(i)};a.prototype.enqueueMessage=function(a,b,c,d){"use strict";b=k+c.toString();c=o.get(a)||new Map();c.set(b,d);o.set(a,c);this.$1.log("Queued "+b)};a.prototype.drainQueue=function(a,b){"use strict";__p&&__p();var c=o.get(a)||new Map(),d;for(var c=c,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;var d=g[0];g=g[1];void d;b(g)}o.set(a,new Map())};a.prototype.enableDequeuing=function(a,b,c,d){"use strict";d===undefined&&(d=m),this.$5(a,b,c,d)};a.prototype.$5=function(a,b,c,d){"use strict";var e=this.$2(a,b),f=e.keys(),g=f.length;for(var h=0;h<g;h++){var i=this.$6(e,f[h]);i&&c&&c(i)}this.$1.log("Dequeued "+g+" ("+a+") with "+d+" left)");d>0&&(d-=n,setTimeout(function(){this.$5(a,b,c,d)}.bind(this),n))};a.prototype.$3=function(a,b,c){"use strict";c={__t:Date.now(),__d:c};a.set(b,c)};a.prototype.$4=function(a,b){"use strict";var c=a.get(b);if(c&&this.$7(c))return c.__d;else c&&a.remove(b);return null};a.prototype.$6=function(a,b){"use strict";var c=this.$4(a,b);if(c!==null){a.remove(b);return c}return null};a.prototype.$7=function(a){"use strict";return Date.now()-a.__t<l};a.prototype.$2=function(a,c){"use strict";return new(b("CacheStorage"))(g,""+h+a+"_"+c+"_")};e.exports=a}),null);
__d("FBRTCMessageListener",["invariant","Arbiter","BonfireFeatureGating","ChannelConstants","FBRTCCallControlActions","FBRTCConstants","FBRTCLocalMessageQueue","FBRTCSupport","RTCConfig","guid","mixInEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").ChildWindowMessageType,i=45*1e3,j=[],k=null,l=null,m=null,n=null,o=null,p=!1,q=null,r=null,s;a={init:function(a,c){__p&&__p();if(p)return;p=!0;b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offer"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offerack"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("rtc_multi_json"),function(a,b){this._onMultiwayMessage(b.obj)}.bind(this));b("BonfireFeatureGating").canReceiveBonfireRingInterop()&&b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("parties_notifications"),function(a,b){this._onBonfireMessage(b.obj)}.bind(this));this._localMessageQueue=new(b("FBRTCLocalMessageQueue"))();if(b("RTCConfig").PassMessagesBetweenWindowsGK){if(b("FBRTCSupport").isWebrtcSupported()&&window.addEventListener){var d=a?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener("message",d,!1)}a&&this._connectToParentWindow(c)}},setParentWindowNonce:function(a){n=a},generateNewNonce:function(){o=b("guid")();return o},setMultiwayMessageHandler:function(a,b){q&&g(0),q=b?a.bind(b):a},_onMultiwayMessage:function(a){this.emit("multiwayMessageReceived",a),q&&q(a)},setBonfireMessageHandler:function(a,b){r&&g(0),r=b?a.bind(b):a},_onBonfireMessage:function(a){this.emit("bonfireMessageReceived",a),r&&r(a)},setMessageHandler:function(a,b){k&&g(0);k=b?a.bind(b):a;while(j.length)k(j.shift())},removeMessageHandler:function(){k=null},setParentWindowStartCallHandler:function(a){s=a;return function(){return s=null}},_onMessage:function(a){a.from&&(a.from=a.from.toString()),this.emit("messageReceived",a),k?k(a):j.push(a),this._passMessageToChildWindow(a)},_connectToParentWindow:function(a){if(window.opener&&window.opener.postMessage){a={type:h.CHILD_WINDOW_READY,nonce:n,childNonce:this.generateNewNonce(),peerID:a};window.opener.postMessage(a,window.location.origin)}},_verifyWindowMessage:function(event){return event.origin===window.location.origin&&event.data&&o&&event.data.nonce===o},_handleWindowMessageToParent:function(event){if(!this._verifyWindowMessage(event))return;event.data.type===h.CHILD_WINDOW_READY&&(this.setParentWindowNonce(event.data.childNonce),this._setChildWindow(event.source),this._replayQueuedMessagesToChild(event.data.peerID,l))},_handleWindowMessageToChild:function(event){if(!this._verifyWindowMessage(event))return;event.data.type===h.CHILD_WINDOW_MESSAGE&&this._onMessage(event.data.message);event.data.type===h.CHILD_WINDOW_START_CALL&&(s?s():b("FBRTCCallControlActions").parentWindowStartCall())},_replayQueuedMessagesToChild:function(a,b){this._localMessageQueue.drainQueue(a,function(a){a={type:h.CHILD_WINDOW_MESSAGE,nonce:n,message:a};b.postMessage(a,window.location.origin)})},_setChildWindow:function(a){l=a,clearTimeout(m),m=setTimeout(function(){l=null},i),this._startCallInChildWindow(),this.generateNewNonce()},_passMessageToChildWindow:function(a){if(l){a={type:h.CHILD_WINDOW_MESSAGE,nonce:n,message:a};l.postMessage(a,window.location.origin)}},_startCallInChildWindow:function(){if(l){var a={type:h.CHILD_WINDOW_START_CALL,nonce:n};l.postMessage(a,window.location.origin)}}};b("mixInEventEmitter")(a,{messageReceived:!0,multiwayMessageReceived:!0,bonfireMessageReceived:!0});e.exports=a}),null);
__d("FBRTCIceStatsParser",[],(function(a,b,c,d,e,f){__p&&__p();var g=null;h.getInstance=function(){"use strict";g||(g=new h());return g};h.prototype.extractIceInfo=function(a){"use strict";var b=[];a=a.split("\r\n");for(var c=0;c<a.length;c++){var d=a[c];this.$1(d)&&b.push({gen:this.$2(d),type:this.$3(d)})}return b};h.prototype.$1=function(a){"use strict";return a.indexOf("candidate:")>-1};h.prototype.$2=function(a){"use strict";var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b};h.prototype.$3=function(a){"use strict";a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"};function h(){"use strict"}e.exports=h}),null);
__d("FBRTCLocalUploadLogLevel",["CurrentUser","FBRTCConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("FBRTCConstants").UploadLogLevel,h={getUploadLogLevel:function(a){return Math.max(h.getLocalUploadLogLevel(),a)},getLocalUploadLogLevel:function(){return b("CurrentUser").isEmployee()?g.LL_DEBUG:g.LL_NONE}};e.exports=h}),null);
__d("FBRTCLogger",["ChannelManager","FBRTCConsoleLogger","MarauderLogger","P2PReliabilityTypedLogger","RTCConfig","UserAgentData","VideoCallTypedLogger","CurrentUser","pageID"],(function(a,b,c,d,e,f){__p&&__p();var g=b("CurrentUser").getID(),h="call_action",i="rtc_client_call_summary",j="client_error",k="client_event",l="info",m="received_message",n="send_failed",o="send_succeeded",p="sent_message",q=null;r.getInstance=function(){"use strict";q==null&&(q=new r());return q};function r(){"use strict";this.$2=JSON.stringify({version:2,device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion}),this.$1=b("UserAgentData").browserName+Date.now().toString()}r.prototype.logToConsole=function(a){"use strict";this.$3(null,null,"Console",a)};r.prototype.$4=function(a){"use strict";return new(b("P2PReliabilityTypedLogger"))().setExtra(this.$2).setDeviceID(this.$1).setRawTime(Date.now()).setMsgType(a.toUpperCase())};r.prototype.logReceivedMessage=function(a,c,d){"use strict";var e=c?c.toString():null,f={call_id:c,from:a,msg_id:d.msg_id,type:d.type};d.sdp&&(f.content=d.sdp);d.ack_id&&(f.ack_msg_id=d.ack_id);var h=d.type||d.msgType;b("RTCConfig").rtc_message_logging&&new(b("VideoCallTypedLogger"))().setIsClient(!0).setEvent("p2p_message_receive").setMessageType(h).setPeerID(a).setCallID(e).log();this.$4(h).setEventName("CLIENT_RECEIVED_CHAT_PROXY").setCallID(e).setMsgID(d.msg_id).setSenderID(a).setReceiverID(g).log();this.$5(m,f);this.$3(a,c,"Received",d.type+", "+d.msg_id)};r.prototype.logSentMessage=function(a,b,c){"use strict";var d=b?b.toString():null,e={call_id:b,msg_id:c.msg_id,to:a,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);this.$4(c.type).setEventName("CLIENT_SENT").setCallID(d).setMsgID(c.msg_id).setSenderID(g).setReceiverID(a).log();this.$5(p,e);this.$3(a,b,"Sent",c.type+", "+c.msg_id)};r.prototype.logSentMessageSuccess=function(a,b,c,d){"use strict";var e={call_id:b,msg_id:d,peer_id:a,type:c};b=b?b.toString():null;this.$4(c).setEventName("CLIENT_SENT_SUCCESS").setCallID(b).setMsgID(d.toString()).setSenderID(g).setReceiverID(a).log();this.$5(o,e)};r.prototype.logSentMessageFailure=function(a,b,c,d,e){"use strict";var f={call_id:b,error_code:e,msg_id:d,peer_id:a,type:c},h=b?b.toString():null;this.$4(c).setEventName("CLIENT_SENT_FAILURE").setCallID(h).setMsgID(d.toString()).setSenderID(a).setSenderID(g).setReceiverID(a).log();this.$5(n,f);this.$3(a,b,"Send Failed",c+", "+e)};r.prototype.logCallAction=function(a,b,c,d,e){"use strict";var f={call_action:c,call_id:b,content:d,peer_id:a};e&&(f.trigger=e);this.$5(h,f);this.$3(a,b,"CallAction",c+", "+JSON.stringify(d))};r.prototype.logEvent=function(a,b,event){"use strict";var c={call_id:b,content:event,peer_id:a};this.$5(k,c);this.$3(a,b,"Event",JSON.stringify(event))};r.prototype.logInfo=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$5(l,d);this.$3(a,b,"Info",JSON.stringify(c))};r.prototype.logError=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$5(j,d);this.$3(a,b,"Error",JSON.stringify(c))};r.prototype.logErrorWithoutID=function(a){"use strict";this.logError(null,null,a)};r.prototype.logEndCallSummary=function(a){"use strict";if(!a)return;var c={call_id:a.callID,channel_session_id:b("ChannelManager").getCompleteConfig().sessionID,content:a.toString(),peer_id:a.peerID,tag:"endcallstats"},d=a.getExtraInfo();for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(c[e]=d[e]);this.$5(i,c);this.$3(a.peerID,a.callID,"Call Summary",JSON.stringify(c))};r.prototype.$5=function(a,c){"use strict";c.page_id=b("pageID"),b("FBRTCConsoleLogger").getInstance().getLogHistory().log(a,c),b("MarauderLogger").log(a,b("FBRTCConsoleLogger").MODULE_NAME,c)};r.prototype.$3=function(a,c,d,e){"use strict";b("FBRTCConsoleLogger").getInstance().log(e,a,c,d)};r.CallAction=Object.freeze({ANSWER_CALL:"answer_call",AUTO_DISABLE_VIDEO:"auto_disable_video",DENIED_PERMISSION:"denied_permission",END_CALL:"end_call",FAILED_GETTING_URI:"failed_getting_uri",OLD_URI:"old_uri",OPEN_POPUP:"open_popup",POPUP_OPENED:"popup_opened",RECEIVED_CALL:"received_call",SET_FULLSCREEN_ON:"set_fullscreen_on",SET_MUTE:"set_mute",SET_SELF_VIEW_ON:"set_self_view_on",SET_VIDEO_ON:"set_video_on",START_CALL:"start_call",START_SKYPE:"start_skype",TRY_NEW:"try_new",USER_SETTINGS_CHANGED:"user_settings_changed"});r.Trigger=Object.freeze({ADMIN_MESSAGE:"admin_message",CHAT_TAB_ICON_TOUR:"chat_tab_icon_tour",CHAT_TAB_ICON:"chat_tab_icon",CHAT_TAB_VOICE_ICON:"chat_tab_voice_icon",MULTIWAY_CHAT_TAB_SHEET_JOIN_CALL_BUTTON:"multiway_chat_tab_sheet_join_call_button",MULTIWAY_POPUP_START_CALL_BUTTON:"multiway_popup_start_call_button",MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:"multiway_thread_header_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_audio_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_audio_call_video_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_video_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_video_call_video_button",MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:"multiway_thread_header_video_button",MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON:"multiway_thread_list_join_call_button",POPUP_CALL_START_BUTTON:"popup_start_call_button",REDIAL_BUTTON:"redial_button",RESET_CALL:"install_screen_sharing_ext_dialog",RETURN_CALL:"return_call",SKYPE_DEPRECATION_DIALOG:"skype_deprecation_dialog",TIMELINE_PROFILE:"timeline_profile",UNKNOWN:"unknown",WEB_MESSENGER:"web_messenger"});r.Key=Object.freeze({DEVICE_INFO:"device_info",INITIATED_BY_PAGE_ID:"initiated_by_page_id",PEER_IS_MOBILE:"peer_is_mobile",RATING_SHOWN:"rating_shown",RATING:"rating5",SCREEN_DURATION:"screen_duration",SURVEY_CHOICE:"survey_choice",SURVEY_DETAILS:"survey_details",SURVEY_SHOWN:"survey_shown"});e.exports=r}),null);
__d("FBRTCMediaMetricTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={min:-1,max:-1,mean:-1,median:-1,total:-1,count:0};function h(){this.$1={},this.$2={},this.$3={}}h.prototype.getVideoStreamReportKeys=function(){return Object.keys(this.$3)};h.prototype.getJitterStreamReportKey=function(){return Object.keys(this.$1)};h.prototype.getAudioStreamReportKeys=function(){return Object.keys(this.$2)};h.prototype.addJitterBufferDelay=function(a,b){b!==null&&b!==undefined&&(this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b))};h.prototype.setVideoMetric=function(a,c,d){d!==null&&d!==undefined&&(this.$3[a]||(this.$3[a]={}),!this.$3[a][c]?this.$3[a][c]={first:d,startedTime:b("performanceNow")(),current:d,updatedTime:b("performanceNow")()}:(this.$3[a][c].current=d,this.$3[a][c].updatedTime=b("performanceNow")()))};h.prototype.getVideoMetric=function(a,b){return this.$3[a]?this.$3[a][b]:null};h.prototype.addMetricStat=function(a,b,c){c!==null&&c!==undefined&&(this.$2[a]||(this.$2[a]={}),!this.$2[a][b]?this.$2[a][b]={min:c,max:c,total:c,count:1,mean:c}:(this.$2[a][b].total+=c,this.$2[a][b].count+=1,this.$2[a][b].min=Math.min(this.$2[a][b].min,c),this.$2[a][b].max=Math.max(this.$2[a][b].max,c),this.$2[a][b].mean=this.$2[a][b].total/this.$2[a][b].count))};h.prototype.getMetricKeys=function(a){return!this.$2[a]?[]:Object.keys(this.$2[a])};h.prototype.getMetricStats=function(a,b){return!this.$2[a]?null:this.$2[a][b]};h.prototype.getJitterBufferStats=function(a){__p&&__p();if(!this.$1[a])return g;var b=this.$1[a].length;if(b===0)return g;this.$1[a].sort(function(a,b){return a-b});var c=this.$1[a].reduce(function(a,b){return a+b});if(b%2===0){var d=Math.floor((b-1)/2),e=Math.ceil((b-1)/2);d=(this.$1[a][d]+this.$1[a][e])/2}else d=this.$1[a][(b-1)/2];return{max:this.$1[a][b-1],min:this.$1[a][0],mean:c/b,median:d,total:c,count:b}};h.prototype.toJsonString=function(){return JSON.stringify({stats:this.$2,jitterBufferDelays:this.$1,videoMetric:this.$3})};h.fromJsonString=function(a){var b=new h();try{a=JSON.parse(a),a=a}catch(a){return b}a.stats&&(b.$2=a.stats);a.jitterBufferDelays&&(b.$1=a.jitterBufferDelays);a.videoMetric&&(b.$3=a.videoMetric);return b};e.exports=h}),null);
__d("FBRTCMediaMetricsConst",[],(function(a,b,c,d,e,f){"use strict";a={JITTER:"jitter",ACCELERATE_RATE:"accelerate_rate",DISCARD_RATE:"discard_rate",EXPAND_RATE:"expand_rate",PREEMPTIVE_RATE:"preemptive_rate",VIDEO_BYTES_RECEIVED:"video_bytes_received",VIDEO_BYTES_SENT:"video_bytes_sent",INBOUND_QP:"inbound_qp",OUTBOUND_QP:"outbound_qp",FRAMES_ENCODED:"frames_encoded",FRAMES_DECODED:"frames_decoded"};e.exports=a}),null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMediaMetricTracker","SiteData","UserAgentData","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g=5*60*1e3,h={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended",SENT_JOIN_REQUEST:"s_jreq",RECV_JOIN_RESPONSE:"r_jresp",PROC_JOIN_RESPONSE:"p_jresp",RECV_RING_REQUEST:"r_rreq",SENT_RING_RESPONSE:"s_rresp"},i={FELLBACK_TO_AUDIO:"f_a",MEDIA_REQUESTED:"m_r",MEDIA_SUCCEEDED:"m_s",POPUP_OPENED:"opened",PRESSED_ANSWER:"p_a"},j={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"},k={ESCALATION_INITIATION_BUTTON_CLICKED:"esc_init_button",ESCALATION_APPROVED_BUTTON_CLICKED:"esc_appr_button",ESCALATION_DECLINED_BUTTON_CLICKED:"esc_decl_button",USERMEDIA_REQUEST:"media_req",USERMEDIA_SUCCESS:"media_success",USERMEDIA_FAILURE:"media_fail",SENT_ESC_REQUEST:"s_esc_req",RECV_ESC_REQUEST:"r_esc_req",SENT_ESC_REQUEST_ACK:"s_esc_req_ack",RECV_ESC_REQUEST_ACK:"s_esc_req_ack",SENT_ESC_RESPONSE:"s_esc_rep",RECV_ESC_ACCEPT:"r_esc_accept",RECV_ESC_DECLINE:"r_esc_decl",RECV_ESC_TIMEOUT:"r_esc_timeout"};l.nullSummary=function(){"use strict";return new l({peerID:"0",callID:"0",isCaller:!1,callTrigger:"NULL_SUMMARY"})};function l(a){"use strict";this.peerID=String(a.peerID),this.callID=String(a.callID),this.$1=a.isCaller,this.$2=b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel(),this.$13=new Date().valueOf(),this.$3=a.callTrigger||null,this.$4={},this.$6={},this.$7={},this.$12={},this.$35=null,this.$36=null,this.$37=null,this.$15=0,this.$16=0,this.$34=!1,this.$23={},this.$24={},this.$8={},this.$9={},this.$10={},this.$11={},this.$25=null,this.$18=b("performanceNow")(),this.$14=0,this.$5={},this.$17=this.$18,this.$19=0,this.$20={},this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_INFO,this.$39()),this.$40(),this.$22=b("FBRTCIceStatsParser").getInstance(),this.$38=new(b("FBRTCMediaMetricTracker"))(),this.$21=b("FBRTCLogger").getInstance()}l.prototype.toJsonString=function(){"use strict";this.$16=new Date().valueOf();return JSON.stringify({version:l.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$1,uploadLogLevel:this.$2,clientVersion:this.$25,callType:this.$30,conferenceName:this.$27,joinWithSID:this.$28,activeConn:this.$26,escP2PCallID:this.$29,serverInfoData:this.$31,localVideoDuration:this.$32,remoteVideoDuration:this.$33,startTime:this.$13,trigger:this.$3,signalingTime:this.$4,escStateTimes:this.$6,applicationEventTime:this.$7,videoEscTimes:this.$12,endCallReason:this.$35,endCallSubreason:this.$36,isRemoteEnded:this.$37,lastUpdatedTime:this.$15,lastSerializedTime:this.$16,unsetOnRetrieve:this.$34,openCount:this.$19,extraInfo:this.$20,pcStats:this.$23,captureStats:this.$24,gen0IceSentCount:this.$8,gen0IceReceivedCount:this.$9,iceSentCount:this.$10,iceReceivedCount:this.$11,mediaMetricStats:this.$38.toJsonString(),newSignalingTime:this.$5,accumulatedCallTime:this.$41()})};l.fromJsonString=function(a){"use strict";__p&&__p();try{a=JSON.parse(a)}catch(a){return null}if(a.version!==l.CURRENT_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(a,"peerID")||!Object.prototype.hasOwnProperty.call(a,"callID")||!Object.prototype.hasOwnProperty.call(a,"isCaller")||!Object.prototype.hasOwnProperty.call(a,"startTime")||!Object.prototype.hasOwnProperty.call(a,"trigger")||!Object.prototype.hasOwnProperty.call(a,"signalingTime")||!Object.prototype.hasOwnProperty.call(a,"endCallReason")||!Object.prototype.hasOwnProperty.call(a,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(a,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(a,"lastSerializedTime"))return null;var c=new l({peerID:a.peerID,callID:a.callID,isCaller:a.isCaller});c.$2=a.uploadLogLevel;c.$25=a.clientVersion;c.$13=a.startTime;c.$3=a.trigger;c.$4=a.signalingTime;c.$35=a.endCallReason;c.$36=a.endCallSubreason;c.$37=a.isRemoteEnded;c.$15=a.lastUpdatedTime;c.$16=a.lastSerializedTime;c.$28=a.joinWithSID;a.callType&&(c.$30=a.callType);a.conferenceName&&(c.$27=a.conferenceName);a.escP2PCallID&&(c.$29=a.escP2PCallID);a.activeConn&&(c.$26=a.activeConn);a.serverInfoData&&(c.$31=a.serverInfoData);a.localVideoDuration&&(c.$32=a.localVideoDuration);a.remoteVideoDuration&&(c.$33=a.remoteVideoDuration);a.unsetOnRetrieve&&(c.$34=a.unsetOnRetrieve);a.openCount&&(c.$19=a.openCount);a.extraInfo&&(c.$20=a.extraInfo);a.pcStats&&(c.$23=a.pcStats);a.captureStats&&(c.$24=a.captureStats);a.gen0IceSentCount&&(c.$8=a.gen0IceSentCount);a.gen0IceReceivedCount&&(c.$9=a.gen0IceReceivedCount);a.iceSentCount&&(c.$10=a.iceSentCount);a.iceReceivedCount&&(c.$11=a.iceReceivedCount);a.newSignalingTime&&(c.$5=a.newSignalingTime);a.accumulatedCallTime&&(c.$14=a.accumulatedCallTime);a.escStateTimes&&(c.$6=a.escStateTimes);a.applicationEventTime&&(c.$7=a.applicationEventTime);a.videoEscTimes&&(c.$12=a.videoEscTimes);a.mediaMetricStats&&(c.$38=b("FBRTCMediaMetricTracker").fromJsonString(a.mediaMetricStats));return c};l.restoreOrInitialize=function(a,c,d,e,f,g){"use strict";c=String(c);d=String(d);a=a.retrieveCallSummary(c,d);!a?(a=new l({peerID:c,callID:d,isCaller:e}),f?(a.onFullMessageReceived({msg:f}),a.onOfferAckSent(f)):a.onCallStarted(g||b("FBRTCLogger").Trigger.UNKNOWN),b("FBRTCLogger").getInstance().logError(c,d,"Missing call summary from storage")):a.$34&&(a.$35=null,a.$36=null,a.$37=null,delete a.$4[h.CALL_ENDED],delete a.$5[h.CALL_ENDED],a.$34=null);return a};l.logSavedSummaries=function(a){"use strict";__p&&__p();var c=a.getLoggableSummaries(),d=c.length;if(d<=0)return;var e=b("FBRTCLogger").getInstance(),f=[];for(var g=0;g<d;g++){var h=c[g];e.logEndCallSummary(h);f.push({peerID:h.peerID,callID:h.callID})}a.removeCallSummaries(f);e.logToConsole("Logged pending summaries: "+d)};l.prototype.isNull=function(){"use strict";var a=l.CANONICAL_NULL_SUMMARY;return this.peerID===a.peerID&&this.callID===a.callID&&this.isCaller()===a.isCaller()&&this.getCallTrigger()===a.getCallTrigger()};l.prototype.save=function(a){"use strict";var c=b("performanceNow")(),d=c-this.$17;if(d>g){this.$21.logInfo(this.peerID,this.callID,"Summary too old: "+d);return}a.storeCallSummary(this.peerID,this.callID,this);this.$17=c};l.prototype.getLastUpdatedTime=function(){"use strict";return this.$15};l.prototype.setLastUpdatedTime=function(a){"use strict";this.$15=a};l.prototype.getExtraInfo=function(){"use strict";return this.$20};l.prototype.getCallTrigger=function(){"use strict";return this.$3};l.prototype.addExtraInfo=function(a,b){"use strict";this.$20[a]=b,this.$40()};l.prototype.isCaller=function(){"use strict";return this.$1};l.prototype.isNetworkReady=function(){"use strict";if(this.$4[h.NETWORK_READY])return!0;else return!1};l.prototype.isAnswerReceived=function(){"use strict";if(this.$4[h.RECV_ANSWER])return!0;else return!1};l.prototype.onCallStarted=function(a){"use strict";this.$3=a,this.$42(h.CALL_STARTED),this.$40()};l.prototype.setCallTrigger=function(a){"use strict";this.$3=a,this.$40()};l.prototype.onPopupOpened=function(){"use strict";this.$43(i.POPUP_OPENED),this.$19++,this.$40()};l.prototype.onPressedAnswer=function(){"use strict";this.$43(i.PRESSED_ANSWER),this.$40()};l.prototype.onMediaRequested=function(){"use strict";this.$43(i.MEDIA_REQUESTED),this.$40()};l.prototype.onMediaSucceeded=function(){"use strict";this.$43(i.MEDIA_SUCCEEDED),this.$40()};l.prototype.onFellbackToAudio=function(){"use strict";this.$43(i.FELLBACK_TO_AUDIO),this.$40()};l.prototype.setPcStats=function(a){"use strict";this.$23=a,this.$40()};l.prototype.setVideoCaptureStats=function(a,b){"use strict";this.$24={w:a,h:b},this.$40()};l.prototype.setUploadLogLevel=function(a){"use strict";this.$2=a,this.$40()};l.prototype.getCallType=function(){"use strict";return this.$30};l.prototype.setCallType=function(a){"use strict";this.$30=a,this.addExtraInfo("call_type",a),this.$40()};l.prototype.setVideoDurations=function(a,b){"use strict";this.$32=a,this.$33=b,this.$40()};l.prototype.setScreenDuration=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.SCREEN_DURATION,a)};l.prototype.setConferenceName=function(a){"use strict";this.$27=a,this.$40()};l.prototype.setTotalVideoFilterDuration=function(a){"use strict";this.addExtraInfo("rtc_video_duration_with_filter_enabled",Math.ceil(a).toString())};l.prototype.setCoExperienceEffectDuration=function(a){"use strict";this.addExtraInfo("rtc_effect_total_duration",Math.ceil(a).toString())};l.prototype.setEffectCount=function(a){"use strict";this.addExtraInfo("rtc_effect_count",a.toString())};l.prototype.setJoinWithSID=function(a){"use strict";this.$28=a,this.$40()};l.prototype.setServerInfoData=function(a){"use strict";this.$31=a,this.$40()};l.prototype.setActiveConnection=function(a){"use strict";this.$26=a,this.$40()};l.prototype.setEscalationP2PCallID=function(a){"use strict";this.$29=a,this.$40()};l.prototype.onOfferAckSent=function(a){"use strict";this.onMessageSent({type:b("FBRTCConstants").PayloadType.OFFER_ACK,flag:a.flag})};l.prototype.onMessageSent=function(a){"use strict";__p&&__p();var c=a.flag===1;switch(a.type){case b("FBRTCConstants").PayloadType.OFFER:this.$44(c,h.SENT_OFFER,h.SENT_RETRIED_OFFER);this.$45(a,this.$8,this.$10);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$44(c,h.SENT_ANSWER,h.SENT_RETRIED_ANSWER);this.$45(a,this.$8,this.$10);break;case b("FBRTCConstants").PayloadType.OK:this.$42(h.SENT_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$42(h.SENT_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$44(c,h.SENT_OFFER_ACK,h.SENT_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$44(c,h.SENT_ANSWER_ACK,h.SENT_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$45(a,this.$8,this.$10);break;case b("FBRTCConstants").PayloadType.ACK:a.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$46(k.SENT_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:a.ack_id?this.$46(k.SENT_ESC_RESPONSE):this.$46(k.SENT_ESC_REQUEST);break;default:}this.$40()};l.prototype.$45=function(a,b,c){"use strict";var d,e=null;a=this.$22.extractIceInfo(a.sdp);for(var f=0;f<a.length;f++)d=a[f].gen,e=a[f].type,d===0&&this.$47(b,e),this.$47(c,e)};l.prototype.$47=function(a,b){"use strict";!a[b]?a[b]=1:a[b]=a[b]+1};l.prototype.$48=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.PEER_IS_MOBILE,a.isFromMobile()?"1":"0")};l.prototype.onFullMessageReceived=function(a){"use strict";__p&&__p();var c=a.msg,d=c.flag===1;switch(c.type){case b("FBRTCConstants").PayloadType.OFFER:this.$48(a);this.$44(d,h.RECV_OFFER,h.RECV_RETRIED_OFFER);this.$45(c,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$48(a);this.$44(d,h.RECV_ANSWER,h.RECV_RETRIED_ANSWER);this.$45(c,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.OK:this.$42(h.RECV_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$42(h.RECV_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$44(d,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$44(d,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$45(c,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ACK:c.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$46(k.RECV_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:c.ack_id?c.videoon||c.reqVideoOn?this.$46(k.RECV_ESC_ACCEPT):this.$46(k.RECV_ESC_DECLINE):c.videoon||c.reqVideoOn?this.$46(k.RECV_ESC_REQUEST):this.$46(k.RECV_ESC_TIMEOUT);default:}this.$40()};l.prototype.onMsgAckReceived=function(a,b){"use strict";a=a.msg.flag===1;b?this.$44(a,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK):this.$44(a,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK)};l.prototype.onNetworkReady=function(){"use strict";this.$42(h.NETWORK_READY),this.$40()};l.prototype.onCallConnected=function(){"use strict";this.$42(h.CALL_CONNECTED),this.$40()};l.prototype.onCallEnded=function(a,b,c,d){"use strict";this.$34=c,this.$35=String(a),this.$36=d,this.$37=b,this.$42(h.CALL_ENDED),this.$40()};l.prototype.setOfferSentTime=function(){"use strict";this.$42(h.SENT_OFFER)};l.prototype.setOfferAckReceivedTime=function(){"use strict";this.$42(h.RECV_OFFER_ACK)};l.prototype.setAnswerSentTime=function(){"use strict";this.$42(h.SENT_ANSWER)};l.prototype.setAnswerReceivedTime=function(){"use strict";this.$42(h.RECV_ANSWER)};l.prototype.setJoinRequestSent=function(){"use strict";this.$42(h.SENT_JOIN_REQUEST),this.$40()};l.prototype.setJoinResponseReceived=function(){"use strict";this.$42(h.RECV_JOIN_RESPONSE),this.$40()};l.prototype.setJoinResponseProcessed=function(){"use strict";this.$42(h.PROC_JOIN_RESPONSE),this.$40()};l.prototype.setRingRequestReceived=function(){"use strict";this.$42(h.RECV_RING_REQUEST),this.$40()};l.prototype.setRingResponseSent=function(){"use strict";this.$42(h.SENT_RING_RESPONSE),this.$40()};l.prototype.setEscalationAvailable=function(){"use strict";this.$49(j.ESCALATION_IS_AVAILABLE)};l.prototype.setEscalationInitiated=function(){"use strict";this.$49(j.USER_INITIATED_REQUEST)};l.prototype.setReceivedEscalationRequest=function(){"use strict";this.$49(j.RECEIVED_INCOMING_REQUEST)};l.prototype.setInvalidP2PEscalationState=function(){"use strict";this.$49(j.REJECTED_INVALID_P2P_STATE)};l.prototype.setEscalationConnectingToMultiway=function(){"use strict";this.$49(j.CONNECTING_TO_MULTIWAY)};l.prototype.setEscalationConnectedToMultiway=function(){"use strict";this.$49(j.CONNECTED_TO_MULTIWAY)};l.prototype.setEscalationPeerConnectingToMultiway=function(){"use strict";this.$49(j.PEER_CONNECTING_TO_MULTIWAY)};l.prototype.setEscalationPeerConnectedToMultiway=function(){"use strict";this.$49(j.PEER_CONNECTED_TO_MULTIWAY)};l.prototype.setReadyToEscalate=function(){"use strict";this.$49(j.READY_TO_ESCALATE)};l.prototype.setEscalationPeerFailedToConnectToMultiway=function(){"use strict";this.$49(j.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};l.prototype.setEscalationTimedOut=function(){"use strict";this.$49(j.TIMED_OUT)};l.prototype.setVidEscalationInitClick=function(){"use strict";this.$46(k.ESCALATION_INITIATION_BUTTON_CLICKED)};l.prototype.setVidEscalationAcceptedClick=function(){"use strict";this.$46(k.ESCALATION_APPROVED_BUTTON_CLICKED)};l.prototype.setVidEscalationDeclinedClick=function(){"use strict";this.$46(k.ESCALATION_DECLINED_BUTTON_CLICKED)};l.prototype.setVidEscalationMediaRequested=function(){"use strict";this.$46(k.USERMEDIA_REQUEST)};l.prototype.setVidEscalationMediaSuccess=function(){"use strict";this.$46(k.USERMEDIA_SUCCESS)};l.prototype.setVidEscalationMediaFailed=function(){"use strict";this.$46(k.USERMEDIA_FAILURE)};l.prototype.toString=function(){"use strict";var a={};a.core_metrics=this.$50();a.time_series=null;return JSON.stringify(a)};l.prototype.$50=function(){"use strict";__p&&__p();var a={};a.ver=l.CURRENT_SUMMARY_VERSION;a.log_level=b("FBRTCConstants").uploadLogLevelString(this.$2);a.caller=this.$1;a.call_type=this.$30;a.active_conn=this.$26;a.app_event_times=this.$7;a.conf_name=this.$27;a.join_with_sid=this.$28;a.esc_p2p_call_id=this.$29;a.esc_state_times=this.$6;a.vid_esc_times=this.$12;a.serv_info=this.$31;a.conn=this.$51();a.peer_id=this.peerID;a.has_video=!0;a.open_count=this.$19;a.signaling=this.$52();a.sender=this.$53();a.receiver=this.$54();a.end=this.$55();a.video=this.$56();a.push_phase=b("SiteData").push_phase;a.client_version=this.$25;a.DebugAudioMetrics=this.$57();return a};l.prototype.$57=function(){"use strict";return{NetworkReceive:{jb_nm:this.$58()}}};l.prototype.$58=function(){"use strict";var a={},b=this.$38.getAudioStreamReportKeys().pop(),c=this.$38.getMetricKeys(b);c.forEach(function(c){var d=this.$38.getMetricStats(b,c);d&&(a[c]={m:d.min,M:d.max,avg:d.mean})}.bind(this));c=this.$38.getJitterBufferStats(b);a.neteq={maxWait:c.max,meanWait:c.mean||0,mediaWait:c.median||0,minWait:c.min};return a};l.prototype.$51=function(){"use strict";var a={dtls:1};this.$23.sender&&this.$23.sender.rtt&&(a.rtt=this.$23.sender.rtt);return a};l.prototype.$52=function(){"use strict";__p&&__p();var a={};this.$3&&(a.trigger=this.$3);a.start_time=this.$13;a.time_from_start=this.$4;a.new_time_from_start=this.$5;var b=this.$5[h.CALL_CONNECTED]||this.$5[h.NETWORK_READY],c=this.$5[h.CALL_ENDED];if(b){c||(this.$14>0?c=this.$14:c=this.$41());c=c-b;c>0&&(a.duration=c)}return a};l.prototype.$53=function(){"use strict";var a={};this.$8&&(a.ice_g0=this.$8);this.$10&&(a.ice=this.$10);this.$23.sender&&Object.assign(a,this.$23.sender);return a};l.prototype.$54=function(){"use strict";var a={};this.$9&&(a.ice_g0=this.$9);this.$11&&(a.ice=this.$11);return a};l.prototype.$55=function(){"use strict";var a={};this.$35!==null&&(a.end_call_reason_string=b("FBRTCConstants").callEndReasonString(this.$35),this.$36!==null&&(a.end_call_subreason_string=this.$36),a.remote_ended=this.$37);this.$23.end&&Object.assign(a,this.$23.end);return a};l.prototype.$56=function(){"use strict";var a={capture:{},eqp:this.$59()};this.$23.video&&this.$23.video.sender&&Object.assign(a,this.$23.video.sender);this.$24&&Object.assign(a.capture,this.$24);return{sender:a,receiver:this.$60(),ld:this.$32,rd:this.$33,bwe:{avg_enc_bitrate:this.$61()}}};l.prototype.$61=function(){"use strict";__p&&__p();var a=this.$38.getVideoStreamReportKeys(),c=null;a.some(function(a){a=this.$38.getVideoMetric(a,b("FBRTCMediaMetricsConst").VIDEO_BYTES_SENT);if(a){var d=a.current-a.first;a=a.updatedTime-a.startedTime;a>0&&(c=d*8/a*1e3);return!0}return!1}.bind(this));return c};l.prototype.$59=function(){"use strict";__p&&__p();var a=this.$38.getVideoStreamReportKeys(),c=null;a.some(function(a){var d=this.$38.getVideoMetric(a,b("FBRTCMediaMetricsConst").OUTBOUND_QP);a=this.$38.getVideoMetric(a,b("FBRTCMediaMetricsConst").FRAMES_ENCODED);if(d&&a){c=d.current/a.current;return!0}return!1}.bind(this));return c};l.prototype.$62=function(){"use strict";__p&&__p();var a=this.$38.getVideoStreamReportKeys(),c=null;a.some(function(a){var d=this.$38.getVideoMetric(a,b("FBRTCMediaMetricsConst").INBOUND_QP);a=this.$38.getVideoMetric(a,b("FBRTCMediaMetricsConst").FRAMES_DECODED);if(d&&a){c=d.current/a.current;return!0}return!1}.bind(this));return c};l.prototype.$60=function(){"use strict";__p&&__p();var a={inboundEQp:this.$62(),dec_bytes:null,dec_time:null},c=this.$38.getVideoStreamReportKeys();c.some(function(c){c=this.$38.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED);if(c){a.dec_bytes=c.current-c.first;a.dec_time=c.updatedTime-c.startedTime;return!0}return!1}.bind(this));return a};l.prototype.$63=function(){"use strict";return new Date().valueOf()-this.$13};l.prototype.$41=function(){"use strict";var a=b("performanceNow")()-this.$18;return Math.floor(this.$14+a)};l.prototype.$42=function(a){"use strict";if(this.$4[a])return;this.$4[a]=this.$63();this.$5[a]=this.$41()};l.prototype.$49=function(a){"use strict";if(this.$6[a])return;this.$6[a]=this.$63()};l.prototype.$43=function(event){"use strict";if(this.$7[event])return;this.$7[event]=this.$63()};l.prototype.$46=function(event){"use strict";if(this.$12[event])return;this.$12[event]=this.$63()};l.prototype.$44=function(a,b,c){"use strict";a?this.$42(c):this.$42(b)};l.prototype.$40=function(){"use strict";this.$15=new Date().valueOf()};l.prototype.$39=function(){"use strict";return{device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth}};l.prototype.setClientVersion=function(a){"use strict";this.$25=a};l.prototype.getCallDuration=function(){"use strict";var a=this.$52();return a.duration?a.duration:0};l.prototype.getConnectedStartTime=function(){"use strict";return this.$4[h.CALL_CONNECTED]?this.$4[h.CALL_CONNECTED]+this.$13:0};l.prototype.getMediaMetricTracker=function(){"use strict";return this.$38};l.CANONICAL_NULL_SUMMARY=Object.freeze(l.nullSummary());l.CURRENT_SUMMARY_VERSION=19;l.REPORT_KEY="reportID";e.exports=l}),null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBLogger","FBRTCCallSummary","FBRTCLogger","areEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="localstorage",h="RTC_CALL_SUMMARY_",i="summary",j=2e3,k=3,l=3*60*1e3,m=null;n.getInstance=function(){m||(m=new n());return m};function n(){this.$1=new(b("CacheStorage"))(g,h),this.$2=b("FBRTCLogger").getInstance()}n.prototype.storeCallSummary=function(a,c,d){__p&&__p();if(d.isNull()){b("FBLogger")("rtweb").mustfix("Storing invalid FBRTCCallSummary!");return}var e=this;this.$3(function(b){__p&&__p();b[a]||(b[a]={});var f=b[a][c];if(f){f=e.$4(f);if(f&&f.getLastUpdatedTime()>d.getLastUpdatedTime()){e.$2.logToConsole("Outdated summaries");return null}}b[a][c]=e.$5(d);return b},e.$2.logError.bind(e.$2,a,c))};n.prototype.retrieveCallSummary=function(a,b){var c=this.$6(),d=null;c[a]&&(d=c[a][b]);if(d)return this.$4(d);else return null};n.prototype.removeCallSummary=function(a,b){this.removeCallSummaries([{peerID:a,callID:b}])};n.prototype.removeCallSummaries=function(a){this.$3(function(b){var c=a.length;for(var d=0;d<c;d++){var e=a[d].peerID,f=a[d].callID;b[e]&&b[e][f]&&(delete b[e][f],this.$7(b[e])&&delete b[e])}return b}.bind(this),this.$2.logError.bind(this.$2,null,null))};n.prototype.getLoggableSummaries=function(){var a=this.$6(),b=[];for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))for(var d in a[c])if(Object.prototype.hasOwnProperty.call(a[c],d)){var e=this.$4(a[c][d],l);e&&b.push(e)}return b};n.prototype.$7=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0};n.prototype.$5=function(a){a={__t:Date.now(),__d:a.toJsonString()};return a};n.prototype.$4=function(a,c){return a&&(!c||Date.now()-a.__t>=c)?b("FBRTCCallSummary").fromJsonString(a.__d):null};n.prototype.$6=function(){var a=this.$1.get(i)||{};return a};n.prototype.$3=function(a,c,d,e){__p&&__p();d===void 0&&(d=k);(d===undefined||d===null)&&(d=k);var f=this.$6(),g=this.$6();f=a(f);if(f===null)return;var h=this.$6();if(b("areEqual")(g,h))this.$1.set(i,f);else if(d>0){c("Retry lock");if(e){var l=this;setTimeout(function(){l.$3(a,c,d-1,!0)},j)}else this.$3(a,c,d-1,!0)}else c("Failed to lock")};e.exports=n}),null);
__d("FBRTCCallSummaryUploader",["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore"],(function(a,b,c,d,e,f){a={init:function(){var a=b("FBRTCCallSummaryStore").getInstance();b("Banzai").subscribe(b("Banzai").SEND,function(){b("FBRTCCallSummary").logSavedSummaries(a)})}};e.exports=a}),null);
__d("MessengerRTCMessageHandler",["Bootloader","FBRTCCallSummaryUploader","FBRTCExperiment","FBRTCMessageListener","URI","isFacebookURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=null,i=null;function j(){b("isFacebookURI")(new(b("URI"))(window.top.location.href))&&b("FBRTCExperiment").getIncomingCallExperiments().logExposure()}a={init:function(){b("FBRTCCallSummaryUploader").init(),b("FBRTCMessageListener").init(!1),b("FBRTCMessageListener").once("messageReceived",function(a){k()}),b("FBRTCMessageListener").once("multiwayMessageReceived",function(a){l(a)}),b("FBRTCMessageListener").once("bonfireMessageReceived",function(a){m(a)})}};function k(){g||(j(),b("Bootloader").loadModules(["FBRTCIncomingCallController","MessengerRTCIncomingDialogController","MessengerRTCMissedCallDialogController","FBRTCUnsupportedBrowserMessage"],function(a,c,d,e){g=new a(c,e,d),b("FBRTCMessageListener").setMessageHandler(g.onMessageReceived,g)},"MessengerRTCMessageHandler"))}function l(a){h||(j(),b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(c,d){h=new c(d,!1),b("FBRTCMessageListener").setMultiwayMessageHandler(h.onMessageReceived,h),h.onMessageReceived(a)},"MessengerRTCMessageHandler"))}function m(a){i||(j(),b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(c,d){i=new c(d),b("FBRTCMessageListener").setBonfireMessageHandler(i.onBonfireMessageReceived,i),i.onBonfireMessageReceived(a)},"MessengerRTCMessageHandler"))}e.exports=a}),null);
__d("FBRTCMessageHandler",["Bootloader","FBRTCExperiment","FBRTCMessageListener","MessengerRTCMessageHandler"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=!1,i=null,j=null,k={init:function(){if(b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_messenger_on_fb",!1)){b("MessengerRTCMessageHandler").init();return}h===!1&&(h=!0,b("FBRTCMessageListener").init(!1),b("FBRTCMessageListener").once("messageReceived",function(a){b("FBRTCExperiment").getIncomingCallExperiments().logExposure(),k.initIncomingCallController()}),b("FBRTCMessageListener").once("multiwayMessageReceived",function(a){l(a)}),b("FBRTCMessageListener").once("bonfireMessageReceived",function(a){m(a)}))},initIncomingCallController:function(){g||b("Bootloader").loadModules(["FBRTCIncomingCallController","FBRTCIncomingCallDialog","FBRTCMissedVideoCallHandler","FBRTCUnsupportedBrowserMessage"],function(a,c,d,e){g=new a(c,e,new d()),b("FBRTCMessageListener").setMessageHandler(g.onMessageReceived,g)},"FBRTCMessageHandler")}};function l(a){i||b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(c,d){b("FBRTCExperiment").getIncomingCallExperiments().logExposure(),i=new c(d,!0),b("FBRTCMessageListener").setMultiwayMessageHandler(i.onMessageReceived,i),i.onMessageReceived(a)},"FBRTCMessageHandler")}function m(a){j||b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(c,d){b("FBRTCExperiment").getIncomingCallExperiments().logExposure(),j=new c(d),b("FBRTCMessageListener").setBonfireMessageHandler(j.onBonfireMessageReceived,j),j.onBonfireMessageReceived(a)},"FBRTCMessageHandler")}e.exports=k}),null);
__d("FantaTabsReactApp",["ChatPerfInstrumentation","FantaMercuryTabsWithMain.react","FantaTabsAppBase","React","ReactDOM","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;g=babelHelpers.inherits(a,b("FantaTabsAppBase"));g&&g.prototype;a.prototype.initializeFantaData=function(a){__p&&__p();d(["FantaAppStore","FantaCookieUtil","FantaGetMessageActions","FantaTabActions","MercuryThreadInformer","PresenceState"],function(c,d,e,f,g,i){__p&&__p();f.loadFromData(d.convertCookieData(i.get(),null,a)),i.registerStateLoader(function(b){f.loadFromData(d.convertCookieData(b,c.getState().tabGroup,a))}),i.registerStateStorer(function(a){var b=c.getState().tabGroup;if(!h||h&&!h.equals(b)){h=b;return d.createCookieData(b,a)}else return a}),g.get().subscribe("threads-updated",function(a,c){Object.keys(c).forEach(function(a){b("setImmediate")(function(){e.refreshThread(a)})})}),b("ChatPerfInstrumentation").logInitData()})};a.prototype.initializeFantaUI=function(){__p&&__p();d(["FantaAppStore","FantaMercuryThreadEventsBootloaded","FantaMessageActions","FantaTabActions","FantaTabViewportManager","FBRTCMessageHandler","MercuryBrowserAlerts"],function(a,c,d,e,f,g,h){__p&&__p();g.init();h.init();b("ReactDOM").render(this.getViewComponent(),this.tabsElem);c.onMessagesReceived(function(a,c){b("setImmediate")(function(){d.receivedNewMessage(a,c)})});f.init(this.tabsElem);b("ChatPerfInstrumentation").logInitUI();e=a.getState().tabGroup.tabs;e.toArray().length===0&&b("ChatPerfInstrumentation").logDisplayDone()}.bind(this))};a.prototype.getViewComponent=function(){return b("React").createElement(b("FantaMercuryTabsWithMain.react"),{loadDataOnMount:!1})};function a(){g.apply(this,arguments)}e.exports=new a()}),null);
__d("MercuryAudienceRestrictedTypeaheadDataSource",["CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("DataSource"));g=c&&c.prototype;function a(a){"use strict";a=a||{},a.kanaNormalization=!0,a.maxResults=b("MercuryTypeaheadConstants").COMPOSER_CHATTAB_MAX,a.minQueryLength=2,g.constructor.call(this,a),this.$MercuryAudienceRestrictedTypeaheadDataSource1=!1,this.$MercuryAudienceRestrictedTypeaheadDataSource2=!1,this.$MercuryAudienceRestrictedTypeaheadDataSource3={},this.$MercuryAudienceRestrictedTypeaheadDataSource4=!0,this.queryCache={},this.localCache={},this.queryIDs={}}a.prototype.dirty=function(){"use strict";return this};a.prototype.buildData=function(a){"use strict";return g.buildData.call(this,a)};a.prototype.query=function(a,b,c,d){"use strict";b=b||a.length===1;return g.query.call(this,a,b,c,d)};a.prototype.getQueryData=function(a,b){"use strict";return babelHelpers["extends"]({},g.getQueryData.call(this,a,b))};a.prototype.setEntry=function(a,b){"use strict";this.$MercuryAudienceRestrictedTypeaheadDataSource3[a]=b};a.prototype.getEntry=function(a){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource3[a]||null};a.prototype.getCachedShortProfileIDs=function(){"use strict";var a=b("ShortProfiles").getCachedProfileIDs();a=a.filter(function(a){var c=b("ShortProfiles").getNow(a);return a==b("CurrentUser").getID()||c&&(c.type===b("MercuryParticipantTypes").FRIEND||c.type===b("MercuryParticipantTypes").FB4C)});return a};a.prototype.isBootstrapped=function(){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource1};a.prototype.isBootstrapping=function(){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource2};a.prototype.processEntries=function(a,c){"use strict";a=a&&a.map(function(a){a.index==null&&(a.render_type===b("MercuryParticipantTypes").FRIEND||a.render_type===b("MercuryParticipantTypes").FB4C)&&(a.index=b("OrderedFriendsList").getActiveRank(a.uid));return a});return g.processEntries.call(this,a)};a.prototype.mergeUids=function(a,b,c,d){"use strict";b=b.sort(function(a,b){a=this.getEntry(a);b=this.getEntry(b);return a&&a.index&&b&&b.index?a.index-b.index:0}.bind(this));return g.mergeUids.call(this,a,b,c,d)};a.prototype.setQueryData=function(a,b){"use strict";return g.setQueryData.call(this,a)};a.prototype.respond=function(a,b,c){"use strict";return g.respond.call(this,a,b,c)};a.prototype.setShowThreads=function(a){"use strict";this.$MercuryAudienceRestrictedTypeaheadDataSource4=a};e.exports=a}),null);
__d("getScrollPosition",["getDocumentScrollElement","getUnboundedScrollPosition"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("getDocumentScrollElement")(a.ownerDocument||a.document);a.Window&&a instanceof a.Window&&(a=c);var d=b("getUnboundedScrollPosition")(a);c=a===c?a.ownerDocument.documentElement:a;var e=a.scrollWidth-c.clientWidth;a=a.scrollHeight-c.clientHeight;d.x=Math.max(0,Math.min(d.x,e));d.y=Math.max(0,Math.min(d.y,a));return d}e.exports=a}),null);
__d("DraftEditorTextNode.react",["invariant","React","ReactDOM","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("UserAgent").isBrowser("IE <= 11");function j(a){return i?a.textContent==="\n":a.tagName==="BR"}var k=i?b("React").createElement("span",{key:"A","data-text":"true"},"\n"):b("React").createElement("br",{key:"A","data-text":"true"}),l=i?b("React").createElement("span",{key:"B","data-text":"true"},"\n"):b("React").createElement("br",{key:"B","data-text":"true"});c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$1=!1}a.prototype.shouldComponentUpdate=function(a){var c=b("ReactDOM").findDOMNode(this),d=a.children==="";c instanceof Element||g(0);return d?!j(c):c.textContent!==a.children};a.prototype.componentDidMount=function(){this.$1=!this.$1};a.prototype.componentDidUpdate=function(){this.$1=!this.$1};a.prototype.render=function(){return this.props.children===""?this.$1?k:l:b("React").createElement("span",{key:this.$1?"A":"B","data-text":"true"},this.props.children)};e.exports=a}),null);
__d("DraftJsDebugLogging",["CurrentUser","DraftJsEventsTypedLogger","ScriptPath"],(function(a,b,c,d,e,f){"use strict";e.exports={logBlockedSelectionEvent:function(a){var c=a.anonymizedDom,d=a.extraParams;a=a.selectionState;new(b("DraftJsEventsTypedLogger"))().setEvent("blocked_selection_event").setAnonymizedDom(c).setExtraParams(d).setScriptPath(b("ScriptPath").getScriptPath()).setSelectionState(a).log()},logSelectionStateFailure:function(a){var c=a.anonymizedDom,d=a.extraParams;a=a.selectionState;b("CurrentUser").isEmployee()&&new(b("DraftJsEventsTypedLogger"))().setEvent("selection_state_failure").setAnonymizedDom(c).setExtraParams(d).setScriptPath(b("ScriptPath").getScriptPath()).setSelectionState(a).log()}}}),null);
__d("setDraftEditorSelection",["invariant","DraftJsDebugLogging","containsNode","getActiveElement"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,b){if(!a)return"[empty]";a=i(a,b);if(a.nodeType===Node.TEXT_NODE)return a.textContent;a instanceof Element||g(0);return a.outerHTML}function i(a,b){__p&&__p();var c=b!==undefined?b(a):[];if(a.nodeType===Node.TEXT_NODE){var d=a.textContent.length;return document.createTextNode("[text "+d+(c.length?" | "+c.join(", "):"")+"]")}d=a.cloneNode();d.nodeType===1&&c.length&&d.setAttribute("data-labels",c.join(", "));c=a.childNodes;for(var a=0;a<c.length;a++)d.appendChild(i(c[a],b));return d}function j(a,b){a=a;while(a)if(a instanceof Element&&a.hasAttribute("contenteditable"))return h(a,b);else a=a.parentNode;return"Could not find contentEditable parent of node"}function k(a){return a.nodeValue===null?a.childNodes.length:a.nodeValue.length}function c(c,d,e,f,g){__p&&__p();if(!b("containsNode")(document.documentElement,d))return;var h=a.getSelection(),i=c.getAnchorKey(),j=c.getAnchorOffset(),k=c.getFocusKey(),n=c.getFocusOffset(),o=c.getIsBackward();if(!h.extend&&o){var p=i,q=j;i=k;j=n;k=p;n=q;o=!1}p=i===e&&f<=j&&g>=j;q=k===e&&f<=n&&g>=n;if(p&&q){h.removeAllRanges();m(h,d,j-f,c);l(h,d,n-f,c);return}if(!o)p&&(h.removeAllRanges(),m(h,d,j-f,c)),q&&l(h,d,n-f,c);else{q&&(h.removeAllRanges(),m(h,d,n-f,c));if(p){i=h.focusNode;k=h.focusOffset;h.removeAllRanges();m(h,d,j-f,c);l(h,i,k,c)}}}function l(a,c,d,e){__p&&__p();var f=b("getActiveElement")();if(a.extend&&b("containsNode")(f,c)){d>k(c)&&b("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:j(c),extraParams:JSON.stringify({offset:d}),selectionState:JSON.stringify(e.toJS())});var g=c===a.focusNode;try{a.extend(c,d)}catch(h){b("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:j(c,function(b){var c=[];b===f&&c.push("active element");b===a.anchorNode&&c.push("selection anchor node");b===a.focusNode&&c.push("selection focus node");return c}),extraParams:JSON.stringify({activeElementName:f?f.nodeName:null,nodeIsFocus:c===a.focusNode,nodeWasFocus:g,selectionRangeCount:a.rangeCount,selectionAnchorNodeName:a.anchorNode?a.anchorNode.nodeName:null,selectionAnchorOffset:a.anchorOffset,selectionFocusNodeName:a.focusNode?a.focusNode.nodeName:null,selectionFocusOffset:a.focusOffset,message:h?""+h:null,offset:d},null,2),selectionState:JSON.stringify(e.toJS(),null,2)});throw h}}else{g=a.getRangeAt(0);g.setEnd(c,d);a.addRange(g.cloneRange())}}function m(a,c,d,e){var f=document.createRange();d>k(c)&&b("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:j(c),extraParams:JSON.stringify({offset:d}),selectionState:JSON.stringify(e.toJS())});f.setStart(c,d);a.addRange(f)}e.exports=c}),null);
__d("DraftEditorLeaf.react",["invariant","DraftEditorTextNode.react","React","ReactDOM","setDraftEditorSelection"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.$1=function(){__p&&__p();var a=this.props.selection;if(a==null||!a.getHasFocus())return;var c=this.props,d=c.block,e=c.start;c=c.text;d=d.getKey();c=e+c.length;if(!a.hasEdgeWithin(d,e,c))return;var f=b("ReactDOM").findDOMNode(this);f||g(0);var h=f.firstChild;h||g(0);var i;h.nodeType===Node.TEXT_NODE?i=h:h.tagName==="BR"?i=f:(i=h.firstChild,i||g(0));b("setDraftEditorSelection")(a,i,d,e,c)};a.prototype.shouldComponentUpdate=function(a){var c=b("ReactDOM").findDOMNode(this.leaf);c||g(0);c=c.textContent!==a.text||a.styleSet!==this.props.styleSet||a.forceSelection;return c};a.prototype.componentDidUpdate=function(){this.$1()};a.prototype.componentDidMount=function(){this.$1()};a.prototype.render=function(){__p&&__p();var a=this.props.block,c=this.props.text;c.endsWith("\n")&&this.props.isLast&&(c+="\n");var d=this.props,e=d.customStyleMap,f=d.customStyleFn,g=d.offsetKey;d=d.styleSet;var h=d.reduce(function(a,b){var c={};b=e[b];b!==undefined&&a.textDecoration!==b.textDecoration&&(c.textDecoration=[a.textDecoration,b.textDecoration].join(" ").trim());return Object.assign(a,b,c)},{});if(f){f=f(d,a);h=Object.assign(h,f)}return b("React").createElement("span",{"data-offset-key":g,ref:function(a){return this.leaf=a}.bind(this),style:h},b("React").createElement(b("DraftEditorTextNode.react"),null,c))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("DraftOffsetKey",[],(function(a,b,c,d,e,f){"use strict";var g="-";a={encode:function(a,b,c){return a+g+b+g+c},decode:function(a){a=a.split(g);var b=a[0],c=a[1];a=a[2];return{blockKey:b,decoratorKey:parseInt(c,10),leafKey:parseInt(a,10)}}};e.exports=a}),null);
__d("DraftEditorBlock.react",["cx","invariant","DraftEditorLeaf.react","DraftOffsetKey","React","ReactDOM","Scroll","Style","UnicodeBidi","UnicodeBidiDirection","getElementPosition","getScrollPosition","getViewportDimensions","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=10,k=function(a,b){return a.getAnchorKey()===b||a.getFocusKey()===b};i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.shouldComponentUpdate=function(a){return this.props.block!==a.block||this.props.tree!==a.tree||this.props.direction!==a.direction||k(a.selection,a.block.getKey())&&a.forceSelection};a.prototype.componentDidMount=function(){__p&&__p();var a=this.props.selection,c=a.getEndKey();if(!a.getHasFocus()||c!==this.props.block.getKey())return;a=b("ReactDOM").findDOMNode(this);c=b("Style").getScrollParent(a);var d=b("getScrollPosition")(c);if(c===window){var e=b("getElementPosition")(a);e=e.y+e.height;var f=b("getViewportDimensions")().height;e=e-f;e>0&&window.scrollTo(d.x,d.y+e+j)}else{a instanceof HTMLElement||h(0);f=a.offsetHeight+a.offsetTop;a=c.offsetHeight+d.y;e=f-a;e>0&&b("Scroll").setTop(c,b("Scroll").getTop(c)+e+j)}};a.prototype.$1=function(){__p&&__p();var a=this.props.block,c=a.getKey(),d=a.getText(),e=this.props.tree.size-1,f=k(this.props.selection,c);return this.props.tree.map(function(g,h){__p&&__p();var i=g.get("leaves"),j=i.size-1,k=i.map(function(i,k){var l=b("DraftOffsetKey").encode(c,h,k),g=i.get("start");i=i.get("end");return b("React").createElement(b("DraftEditorLeaf.react"),{key:l,offsetKey:l,block:a,start:g,selection:f?this.props.selection:null,forceSelection:this.props.forceSelection,text:d.slice(g,i),styleSet:a.getInlineStyleAt(g),customStyleMap:this.props.customStyleMap,customStyleFn:this.props.customStyleFn,isLast:h===e&&k===j})}.bind(this)).toArray(),l=g.get("decoratorKey");if(l==null)return k;if(!this.props.decorator)return k;var m=b("nullthrows")(this.props.decorator),n=m.getComponentForKey(l);if(!n)return k;m=m.getPropsForKey(l);l=b("DraftOffsetKey").encode(c,h,0);var o=i.first().get("start");i=i.last().get("end");var p=d.slice(o,i);g=a.getEntityAt(g.get("start"));var q=b("UnicodeBidiDirection").getHTMLDirIfDifferent(b("UnicodeBidi").getDirection(p),this.props.direction);p={contentState:this.props.contentState,decoratedText:p,dir:q,key:l,start:o,end:i,blockKey:c,entityKey:g,offsetKey:l};return b("React").createElement(n,babelHelpers["extends"]({},m,p),k)}.bind(this)).toArray()};a.prototype.render=function(){var a=this.props,c=a.direction;a=a.offsetKey;c="_1mf"+(c==="LTR"?" _1mj":"")+(c==="RTL"?" _1mk":"");return b("React").createElement("div",{"data-offset-key":a,className:c},this.$1())};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("findRangesImmutable",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c,d){if(!a.size)return;var e=0;a.reduce(function(a,f,g){b(a,f)||(c(a)&&d(e,g),e=g);return f});c(a.last())&&d(e,a.count())}e.exports=a}),null);
__d("BlockTree",["immutable","emptyFunction","findRangesImmutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h=b("immutable").Repeat;a=b("immutable").Record;var i=b("emptyFunction").thatReturnsTrue;c={start:null,end:null};var j=a(c);d={start:null,end:null,decoratorKey:null,leaves:null};var k=a(d);f={generate:function(a,c,d){var e=c.getLength();if(!e)return g.of(new k({start:0,end:0,decoratorKey:null,leaves:g.of(new j({start:0,end:0}))}));var f=[],n=d?d.getDecorations(c,a):g(h(null,e)),o=c.getCharacterList();b("findRangesImmutable")(n,m,i,function(a,b){f.push(new k({start:a,end:b,decoratorKey:n.get(a),leaves:l(o.slice(a,b).toList(),a)}))});return g(f)}};function l(a,c){var d=[];a=a.map(function(a){return a.getStyle()}).toList();b("findRangesImmutable")(a,m,i,function(a,b){d.push(new j({start:a+c,end:b+c}))});return g(d)}function m(a,b){return a===b}e.exports=f}),null);
__d("BlockMapBuilder",["immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("immutable").OrderedMap;a={createFromArray:function(a){return g(a.map(function(a){return[a.getKey(),a]}))}};e.exports=a}),null);
__d("CharacterMetadata",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").Map;a=b("immutable").OrderedSet;c=b("immutable").Record;var i=a();d={style:i,entity:null};f=c(d);g=babelHelpers.inherits(j,f);g&&g.prototype;j.prototype.getStyle=function(){return this.get("style")};j.prototype.getEntity=function(){return this.get("entity")};j.prototype.hasStyle=function(a){return this.getStyle().includes(a)};j.applyStyle=function(a,b){a=a.set("style",a.getStyle().add(b));return j.create(a)};j.removeStyle=function(a,b){a=a.set("style",a.getStyle().remove(b));return j.create(a)};j.applyEntity=function(a,b){a=a.getEntity()===b?a:a.set("entity",b);return j.create(a)};j.create=function(a){__p&&__p();if(!a)return k;var b={style:i,entity:null};b=h(b).merge(a);a=l.get(b);if(a)return a;a=new j(b);l=l.set(b,a);return a};function j(){g.apply(this,arguments)}var k=new j(),l=h([[h(d),k]]);j.EMPTY=k;e.exports=j}),null);
__d("ContentBlock",["CharacterMetadata","immutable","findRangesImmutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").List;c=b("immutable").Map;d=b("immutable").OrderedSet;f=b("immutable").Record;var i=b("immutable").Repeat,j=d();d={key:"",type:"unstyled",text:"",characterList:h(),depth:0,data:c()};c=f(d);var k=function(a){if(!a)return a;var c=a.characterList,d=a.text;d&&!c&&(a.characterList=h(i(b("CharacterMetadata").EMPTY,d.length)));return a};f=babelHelpers.inherits(a,c);g=f&&f.prototype;function a(a){g.constructor.call(this,k(a))}a.prototype.getKey=function(){return this.get("key")};a.prototype.getType=function(){return this.get("type")};a.prototype.getText=function(){return this.get("text")};a.prototype.getCharacterList=function(){return this.get("characterList")};a.prototype.getLength=function(){return this.getText().length};a.prototype.getDepth=function(){return this.get("depth")};a.prototype.getData=function(){return this.get("data")};a.prototype.getInlineStyleAt=function(a){a=this.getCharacterList().get(a);return a?a.getStyle():j};a.prototype.getEntityAt=function(a){a=this.getCharacterList().get(a);return a?a.getEntity():null};a.prototype.findStyleRanges=function(a,c){b("findRangesImmutable")(this.getCharacterList(),l,a,c)};a.prototype.findEntityRanges=function(a,c){b("findRangesImmutable")(this.getCharacterList(),m,a,c)};function l(a,b){return a.getStyle()===b.getStyle()}function m(a,b){return a.getEntity()===b.getEntity()}e.exports=a}),null);
__d("ContentBlockNode",["CharacterMetadata","immutable","findRangesImmutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").List;c=b("immutable").Map;d=b("immutable").OrderedSet;f=b("immutable").Record;var i=b("immutable").Repeat,j=d(),k={parent:null,characterList:h(),data:c(),depth:0,key:"",text:"",type:"unstyled",children:h(),prevSibling:null,nextSibling:null},l=function(a,b){return a.getStyle()===b.getStyle()},m=function(a,b){return a.getEntity()===b.getEntity()},n=function(a){if(!a)return a;var c=a.characterList,d=a.text;d&&!c&&(a.characterList=h(i(b("CharacterMetadata").EMPTY,d.length)));return a};d=babelHelpers.inherits(a,f(k));g=d&&d.prototype;function a(a){a===void 0&&(a=k),g.constructor.call(this,n(a))}a.prototype.getKey=function(){return this.get("key")};a.prototype.getType=function(){return this.get("type")};a.prototype.getText=function(){return this.get("text")};a.prototype.getCharacterList=function(){return this.get("characterList")};a.prototype.getLength=function(){return this.getText().length};a.prototype.getDepth=function(){return this.get("depth")};a.prototype.getData=function(){return this.get("data")};a.prototype.getInlineStyleAt=function(a){a=this.getCharacterList().get(a);return a?a.getStyle():j};a.prototype.getEntityAt=function(a){a=this.getCharacterList().get(a);return a?a.getEntity():null};a.prototype.getChildKeys=function(){return this.get("children")};a.prototype.getParentKey=function(){return this.get("parent")};a.prototype.getPrevSiblingKey=function(){return this.get("prevSibling")};a.prototype.getNextSiblingKey=function(){return this.get("nextSibling")};a.prototype.findStyleRanges=function(a,c){b("findRangesImmutable")(this.getCharacterList(),l,a,c)};a.prototype.findEntityRanges=function(a,c){b("findRangesImmutable")(this.getCharacterList(),m,a,c)};e.exports=a}),null);
__d("DraftEntityInstance",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("immutable").Record;d=c({type:"TOKEN",mutability:"IMMUTABLE",data:Object});g=babelHelpers.inherits(a,d);g&&g.prototype;a.prototype.getType=function(){return this.get("type")};a.prototype.getMutability=function(){return this.get("mutability")};a.prototype.getData=function(){return this.get("data")};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("DraftEntity",["invariant","DraftEntityInstance","immutable"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("immutable").Map;var h=a(),i=0;function j(a,b){!1}var k={getLastCreatedEntityKey:function(){j("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey");return k.__getLastCreatedEntityKey()},create:function(a,b,c){j("DraftEntity.create","contentState.createEntity");return k.__create(a,b,c)},add:function(a){j("DraftEntity.add","contentState.addEntity");return k.__add(a)},get:function(a){j("DraftEntity.get","contentState.getEntity");return k.__get(a)},mergeData:function(a,b){j("DraftEntity.mergeData","contentState.mergeEntityData");return k.__mergeData(a,b)},replaceData:function(a,b){j("DraftEntity.replaceData","contentState.replaceEntityData");return k.__replaceData(a,b)},__getLastCreatedEntityKey:function(){return""+i},__create:function(a,c,d){return k.__add(new(b("DraftEntityInstance"))({type:a,mutability:c,data:d||{}}))},__add:function(a){var b=""+ ++i;h=h.set(b,a);return b},__get:function(a){a=h.get(a);!a&&g(0);return a},__mergeData:function(a,b){var c=k.__get(a);b=babelHelpers["extends"]({},c.getData(),b);c=c.set("data",b);h=h.set(a,c);return c},__replaceData:function(a,b){var c=k.__get(a);c=c.set("data",b);h=h.set(a,c);return c}};e.exports=k}),null);
__d("SelectionState",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=b("immutable").Record;c={anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1};d=a(c);g=babelHelpers.inherits(h,d);g&&g.prototype;h.prototype.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())};h.prototype.getAnchorKey=function(){return this.get("anchorKey")};h.prototype.getAnchorOffset=function(){return this.get("anchorOffset")};h.prototype.getFocusKey=function(){return this.get("focusKey")};h.prototype.getFocusOffset=function(){return this.get("focusOffset")};h.prototype.getIsBackward=function(){return this.get("isBackward")};h.prototype.getHasFocus=function(){return this.get("hasFocus")};h.prototype.hasEdgeWithin=function(a,b,c){var d=this.getAnchorKey(),e=this.getFocusKey();if(d===e&&d===a){var f=this.getStartOffset(),g=this.getEndOffset();return b<=g&&f<=c}if(a!==d&&a!==e)return!1;g=a===d?this.getAnchorOffset():this.getFocusOffset();return b<=g&&c>=g};h.prototype.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()};h.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()};h.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()};h.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()};h.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()};h.createEmpty=function(a){return new h({anchorKey:a,anchorOffset:0,focusKey:a,focusOffset:0,isBackward:!1,hasFocus:!1})};function h(){g.apply(this,arguments)}e.exports=h}),null);
__d("generateRandomKey",[],(function(a,b,c,d,e,f){"use strict";var g={},h=Math.pow(2,24);function a(){var a;while(a===undefined||Object.prototype.hasOwnProperty.call(g,a)||!isNaN(+a))a=Math.floor(Math.random()*h).toString(32);g[a]=!0;return a}e.exports=a}),null);
__d("sanitizeDraftText",[],(function(a,b,c,d,e,f){"use strict";var g=new RegExp("\r","g");function a(a){return a.replace(g,"")}e.exports=a}),null);
__d("ContentState",["BlockMapBuilder","CharacterMetadata","ContentBlock","ContentBlockNode","DraftEntity","immutable","SelectionState","generateRandomKey","gkx","sanitizeDraftText"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").List;a=b("immutable").Record;var i=b("immutable").Repeat;c=b("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN");d={entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null};var j=c?b("ContentBlockNode"):b("ContentBlock");f=a(d);g=babelHelpers.inherits(k,f);g&&g.prototype;k.prototype.getEntityMap=function(){return b("DraftEntity")};k.prototype.getBlockMap=function(){return this.get("blockMap")};k.prototype.getSelectionBefore=function(){return this.get("selectionBefore")};k.prototype.getSelectionAfter=function(){return this.get("selectionAfter")};k.prototype.getBlockForKey=function(a){a=this.getBlockMap().get(a);return a};k.prototype.getKeyBefore=function(a){return this.getBlockMap().reverse().keySeq().skipUntil(function(b){return b===a}).skip(1).first()};k.prototype.getKeyAfter=function(a){return this.getBlockMap().keySeq().skipUntil(function(b){return b===a}).skip(1).first()};k.prototype.getBlockAfter=function(a){return this.getBlockMap().skipUntil(function(b,c){return c===a}).skip(1).first()};k.prototype.getBlockBefore=function(a){return this.getBlockMap().reverse().skipUntil(function(b,c){return c===a}).skip(1).first()};k.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray()};k.prototype.getFirstBlock=function(){return this.getBlockMap().first()};k.prototype.getLastBlock=function(){return this.getBlockMap().last()};k.prototype.getPlainText=function(a){return this.getBlockMap().map(function(a){return a?a.getText():""}).join(a||"\n")};k.prototype.getLastCreatedEntityKey=function(){return b("DraftEntity").__getLastCreatedEntityKey()};k.prototype.hasText=function(){var a=this.getBlockMap();return a.size>1||a.first().getLength()>0};k.prototype.createEntity=function(a,c,d){b("DraftEntity").__create(a,c,d);return this};k.prototype.mergeEntityData=function(a,c){b("DraftEntity").__mergeData(a,c);return this};k.prototype.replaceEntityData=function(a,c){b("DraftEntity").__replaceData(a,c);return this};k.prototype.addEntity=function(a){b("DraftEntity").__add(a);return this};k.prototype.getEntity=function(a){return b("DraftEntity").__get(a)};k.createFromBlockArray=function(a,c){a=Array.isArray(a)?a:a.contentBlocks;a=b("BlockMapBuilder").createFromArray(a);var d=a.isEmpty()?new(b("SelectionState"))():b("SelectionState").createEmpty(a.first().getKey());return new k({blockMap:a,entityMap:c||b("DraftEntity"),selectionBefore:d,selectionAfter:d})};k.createFromText=function(a,c){c===void 0&&(c=/\r\n?|\n/g);a=a.split(c);c=a.map(function(a){a=b("sanitizeDraftText")(a);return new j({key:b("generateRandomKey")(),text:a,type:"unstyled",characterList:h(i(b("CharacterMetadata").EMPTY,a.length))})});return k.createFromBlockArray(c)};function k(){g.apply(this,arguments)}e.exports=k}),null);
__d("UnicodeBidiService",["invariant","UnicodeBidi","UnicodeBidiDirection","UnicodeBidiGlobalDirection"],(function(a,b,c,d,e,f,g){"use strict";function a(a){!a?a=b("UnicodeBidiGlobalDirection").getDir():b("UnicodeBidiDirection").isStrong(a)||g(0),this.$1=a,this.reset()}a.prototype.reset=function(){this.$2=this.$1};a.prototype.getDirection=function(a){this.$2=b("UnicodeBidi").getDirection(a,this.$2);return this.$2};e.exports=a}),null);
__d("EditorBidiService",["immutable","UnicodeBidiService","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").OrderedMap,h;a={getDirectionMap:function(a,c){!h?h=new(b("UnicodeBidiService"))():h.reset();a=a.getBlockMap();var d=a.valueSeq().map(function(a){return b("nullthrows")(h).getDirection(a.getText())});a=g(a.keySeq().zip(d));return c!=null&&b("immutable").is(c,a)?c:a}};e.exports=a}),null);
__d("EditorState",["BlockTree","ContentState","EditorBidiService","immutable","SelectionState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").OrderedSet;a=b("immutable").Record;var h=b("immutable").Stack;c={allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:h(),selection:null,treeMap:null,undoStack:h()};var i=a(c);j.createEmpty=function(a){return j.createWithContent(b("ContentState").createFromText(""),a)};j.createWithContent=function(a,c){var d=a.getBlockMap().first().getKey();return j.create({currentContent:a,undoStack:h(),redoStack:h(),decorator:c||null,selection:b("SelectionState").createEmpty(d)})};j.create=function(a){var c=a.currentContent,d=a.decorator;a=babelHelpers["extends"]({},a,{treeMap:l(c,d),directionMap:b("EditorBidiService").getDirectionMap(c)});return new j(new i(a))};j.set=function(a,b){__p&&__p();var c=a.getImmutable().withMutations(function(c){__p&&__p();var d=c.get("decorator"),e=d;b.decorator===null?e=null:b.decorator&&(e=b.decorator);var f=b.currentContent||a.getCurrentContent();if(e!==d){var g=c.get("treeMap");e&&d?g=n(f,f.getBlockMap(),g,e,d):g=l(f,e);c.merge({decorator:e,treeMap:g,nativelyRenderedContent:null});return}d=a.getCurrentContent();f!==d&&c.set("treeMap",m(a,f.getBlockMap(),f.getEntityMap(),e));c.merge(b)});return new j(c)};j.prototype.toJS=function(){return this.getImmutable().toJS()};j.prototype.getAllowUndo=function(){return this.getImmutable().get("allowUndo")};j.prototype.getCurrentContent=function(){return this.getImmutable().get("currentContent")};j.prototype.getUndoStack=function(){return this.getImmutable().get("undoStack")};j.prototype.getRedoStack=function(){return this.getImmutable().get("redoStack")};j.prototype.getSelection=function(){return this.getImmutable().get("selection")};j.prototype.getDecorator=function(){return this.getImmutable().get("decorator")};j.prototype.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")};j.prototype.mustForceSelection=function(){return this.getImmutable().get("forceSelection")};j.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")};j.prototype.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")};j.prototype.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")};j.setInlineStyleOverride=function(a,b){return j.set(a,{inlineStyleOverride:b})};j.prototype.getCurrentInlineStyle=function(){var a=this.getInlineStyleOverride();if(a!=null)return a;a=this.getCurrentContent();var b=this.getSelection();return b.isCollapsed()?p(a,b):q(a,b)};j.prototype.getBlockTree=function(a){return this.getImmutable().getIn(["treeMap",a])};j.prototype.isSelectionAtStartOfContent=function(){var a=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(a,0,0)};j.prototype.isSelectionAtEndOfContent=function(){var a=this.getCurrentContent();a=a.getBlockMap();a=a.last();var b=a.getLength();return this.getSelection().hasEdgeWithin(a.getKey(),b,b)};j.prototype.getDirectionMap=function(){return this.getImmutable().get("directionMap")};j.acceptSelection=function(a,b){return k(a,b,!1)};j.forceSelection=function(a,b){b.getHasFocus()||(b=b.set("hasFocus",!0));return k(a,b,!0)};j.moveSelectionToEnd=function(a){var c=a.getCurrentContent();c=c.getLastBlock();var d=c.getKey();c=c.getLength();return j.acceptSelection(a,new(b("SelectionState"))({anchorKey:d,anchorOffset:c,focusKey:d,focusOffset:c,isBackward:!1}))};j.moveFocusToEnd=function(a){a=j.moveSelectionToEnd(a);return j.forceSelection(a,a.getSelection())};j.push=function(a,c,d){__p&&__p();if(a.getCurrentContent()===c)return a;var e=d!=="insert-characters",f=b("EditorBidiService").getDirectionMap(c,a.getDirectionMap());if(!a.getAllowUndo())return j.set(a,{currentContent:c,directionMap:f,lastChangeType:d,selection:c.getSelectionAfter(),forceSelection:e,inlineStyleOverride:null});var g=a.getSelection(),i=a.getCurrentContent(),k=a.getUndoStack(),l=c;g!==i.getSelectionAfter()||o(a,d)?(k=k.push(i),l=l.set("selectionBefore",g)):(d==="insert-characters"||d==="backspace-character"||d==="delete-character")&&(l=l.set("selectionBefore",i.getSelectionBefore()));g=a.getInlineStyleOverride();i=["adjust-depth","change-block-type","split-block"];i.indexOf(d)===-1&&(g=null);i={currentContent:l,directionMap:f,undoStack:k,redoStack:h(),lastChangeType:d,selection:c.getSelectionAfter(),forceSelection:e,inlineStyleOverride:g};return j.set(a,i)};j.undo=function(a){if(!a.getAllowUndo())return a;var c=a.getUndoStack(),d=c.peek();if(!d)return a;var e=a.getCurrentContent(),f=b("EditorBidiService").getDirectionMap(d,a.getDirectionMap());return j.set(a,{currentContent:d,directionMap:f,undoStack:c.shift(),redoStack:a.getRedoStack().push(e),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:e.getSelectionBefore()})};j.redo=function(a){if(!a.getAllowUndo())return a;var c=a.getRedoStack(),d=c.peek();if(!d)return a;var e=a.getCurrentContent(),f=b("EditorBidiService").getDirectionMap(d,a.getDirectionMap());return j.set(a,{currentContent:d,directionMap:f,undoStack:a.getUndoStack().push(e),redoStack:c.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:d.getSelectionAfter()})};function j(a){this.$1=a}j.prototype.getImmutable=function(){return this.$1};function k(a,b,c){return j.set(a,{selection:b,forceSelection:c,nativelyRenderedContent:null,inlineStyleOverride:null})}function l(a,c){return a.getBlockMap().map(function(d){return b("BlockTree").generate(a,d,c)}).toOrderedMap()}function m(a,c,d,e){var f=a.getCurrentContent().set("entityMap",d),g=f.getBlockMap();d=a.getImmutable().get("treeMap");return d.merge(c.toSeq().filter(function(a,b){return a!==g.get(b)}).map(function(a){return b("BlockTree").generate(f,a,e)}))}function n(a,c,d,e,f){return d.merge(c.toSeq().filter(function(b){return e.getDecorations(b,a)!==f.getDecorations(b,a)}).map(function(c){return b("BlockTree").generate(a,c,e)}))}function o(a,b){a=a.getLastChangeType();return b!==a||b!=="insert-characters"&&b!=="backspace-character"&&b!=="delete-character"}function p(a,b){var c=b.getStartKey();b=b.getStartOffset();var d=a.getBlockForKey(c);if(b>0)return d.getInlineStyleAt(b-1);return d.getLength()?d.getInlineStyleAt(0):r(a,c)}function q(a,b){var c=b.getStartKey();b=b.getStartOffset();var d=a.getBlockForKey(c);if(b<d.getLength())return d.getInlineStyleAt(b);return b>0?d.getInlineStyleAt(b-1):r(a,c)}function r(a,b){a=a.getBlockMap().reverse().skipUntil(function(a,c){return c===b}).skip(1).skipUntil(function(a,b){return a.getLength()}).first();return a?a.getInlineStyleAt(a.getLength()-1):g()}e.exports=j}),null);
__d("DraftEditorContents-core.react",["cx","DraftEditorBlock.react","DraftOffsetKey","EditorState","React","joinClasses","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=function(a,b,c,d){return(a==="unordered-list-item"?"_3kpz":"")+(a==="ordered-list-item"?" _3kp_":"")+(c?" _3kq0":"")+(b===0?" _3kq1":"")+(b===1?" _3kq2":"")+(b===2?" _3kq3":"")+(b===3?" _3kq4":"")+(b>=4?" _3kq5":"")+(d==="LTR"?" _3kq6":"")+(d==="RTL"?" _3kq7":"")};h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){__p&&__p();var b=this.props.editorState;a=a.editorState;var c=b.getDirectionMap(),d=a.getDirectionMap();if(c!==d)return!0;c=b.getSelection().getHasFocus();d=a.getSelection().getHasFocus();if(c!==d)return!0;c=a.getNativelyRenderedContent();d=b.isInCompositionMode();var e=a.isInCompositionMode();if(b===a||c!==null&&a.getCurrentContent()===c||d&&e)return!1;c=b.getCurrentContent();var f=a.getCurrentContent();b=b.getDecorator();var g=a.getDecorator();return d!==e||c!==f||b!==g||a.mustForceSelection()};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.blockRenderMap,d=a.blockRendererFn,e=a.blockStyleFn,f=a.customStyleMap,g=a.customStyleFn,h=a.editorState,j=a.editorKey;a=a.textDirectionality;var k=h.getCurrentContent(),l=h.getSelection(),m=h.mustForceSelection(),n=h.getDecorator(),o=b("nullthrows")(h.getDirectionMap()),p=k.getBlocksAsArray(),q=[],r=null,s=null;for(var t=0;t<p.length;t++){var u=p[t],v=u.getKey(),w=u.getType(),x=d(u),y=void 0,z=void 0,A=void 0;x&&(y=x.component,z=x.props,A=x.editable);x=a?a:o.get(v);var B=b("DraftOffsetKey").encode(v,0,0);z={contentState:k,block:u,blockProps:z,blockStyleFn:e,customStyleMap:f,customStyleFn:g,decorator:n,direction:x,forceSelection:m,key:v,offsetKey:B,selection:l,tree:h.getBlockTree(v)};var C=c.get(w)||c.get("unstyled"),D=C.wrapper;C=C.element||c.get("unstyled").element;var E=u.getDepth(),F="";e&&(F=e(u));if(C==="li"){var G=s!==D||r===null||E>r;F=b("joinClasses")(F,i(w,E,G,x))}w=y||b("DraftEditorBlock.react");E={className:F,"data-block":!0,"data-editor":j,"data-offset-key":B,key:v};A!==undefined&&(E=babelHelpers["extends"]({},E,{contentEditable:A,suppressContentEditableWarning:!0}));G=b("React").createElement(C,E,b("React").createElement(w,z));q.push({block:G,wrapperTemplate:D,key:v,offsetKey:B});D?r=u.getDepth():r=null;s=D}x=[];for(var y=0;y<q.length;){F=q[y];if(F.wrapperTemplate){A=[];do A.push(q[y].block),y++;while(y<q.length&&q[y].wrapperTemplate===F.wrapperTemplate);C=b("React").cloneElement(F.wrapperTemplate,{key:F.key+"-wrap","data-offset-key":F.offsetKey},A);x.push(C)}else x.push(F.block),y++}return b("React").createElement("div",{"data-contents":"true"},x)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("DraftEditorDecoratedLeaves.react",["DraftOffsetKey","React","UnicodeBidi","UnicodeBidiDirection"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=this.props,c=a.block,d=a.children,e=a.contentState,f=a.decorator,g=a.decoratorKey,h=a.direction,i=a.leafSet;a=a.text;var j=c.getKey(),k=i.get("leaves"),l=f.getComponentForKey(g);f=f.getPropsForKey(g);j=b("DraftOffsetKey").encode(j,parseInt(g,10),0);g=a.slice(k.first().get("start"),k.last().get("end"));a=b("UnicodeBidiDirection").getHTMLDirIfDifferent(b("UnicodeBidi").getDirection(g),h);return b("React").createElement(l,babelHelpers["extends"]({},f,{contentState:e,decoratedText:g,dir:a,key:j,entityKey:c.getEntityAt(i.get("start")),offsetKey:j}),d)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("DraftEditorNode.react",["cx","DraftEditorDecoratedLeaves.react","DraftEditorLeaf.react","DraftOffsetKey","immutable","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;b("immutable").List;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.block,d=a.contentState,e=a.customStyleFn,f=a.customStyleMap,g=a.decorator,h=a.direction,i=a.forceSelection,j=a.hasSelection,k=a.selection;a=a.tree;var l=c.getKey(),m=c.getText(),n=a.size-1;a=this.props.children||a.map(function(a,o){var p=a.get("decoratorKey"),q=a.get("leaves"),r=q.size-1;q=q.map(function(a,d){var g=b("DraftOffsetKey").encode(l,o,d),h=a.get("start");a=a.get("end");return b("React").createElement(b("DraftEditorLeaf.react"),{key:g,offsetKey:g,block:c,start:h,selection:j?k:null,forceSelection:i,text:m.slice(h,a),styleSet:c.getInlineStyleAt(h),customStyleMap:f,customStyleFn:e,isLast:p===n&&d===r})}).toArray();return!p||!g?q:b("React").createElement(b("DraftEditorDecoratedLeaves.react"),{block:c,children:q,contentState:d,decorator:g,decoratorKey:p,direction:h,leafSet:a,text:m,key:o})}).toArray();return b("React").createElement("div",{"data-offset-key":b("DraftOffsetKey").encode(l,0,0),className:"_1mf"+(h==="LTR"?" _1mj":"")+(h==="RTL"?" _1mk":"")},a)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("DraftEditorBlockNode.react",["invariant","DraftEditorNode.react","DraftOffsetKey","EditorState","immutable","React","ReactDOM","Scroll","Style","getElementPosition","getScrollPosition","getViewportDimensions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=10;b("immutable").List;var j=function(a,b){return a.getAnchorKey()===b||a.getFocusKey()===b},k=function(a,b){var c=a.getNextSiblingKey();return c?b.getBlockForKey(c).getType()===a.getType():!1},l=function(a,c,d){__p&&__p();var e=[];for(var f=d.reverse(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;if(i.type!==c)break;e.push(i)}d.splice(d.indexOf(e[0]),e.length+1);i=e.reverse();c=i[0].key;d.push(b("React").cloneElement(a,{key:c+"-wrap","data-offset-key":b("DraftOffsetKey").encode(c,0,0)},i));return d},m=function(a,b){a=b.get(a.getType())||b.get("unstyled");var c=a.wrapper;a=a.element||b.get("unstyled").element;return{Element:a,wrapperTemplate:c}},n=function(a,b){b=b(a);if(!b)return{};a=b.component;var c=b.props;b=b.editable;return{CustomComponent:a,customProps:c,customEditable:b}},o=function(a,b,c,d,e){b={"data-block":!0,"data-editor":b,"data-offset-key":c,key:a.getKey()};c=d(a);c&&(b.className=c);e.customEditable!==undefined&&(b=babelHelpers["extends"]({},b,{contentEditable:e.customEditable,suppressContentEditableWarning:!0}));return b};h=babelHelpers.inherits(p,b("React").Component);h&&h.prototype;p.prototype.shouldComponentUpdate=function(a){var b=this.props,c=b.block,d=b.direction;b=b.tree;var e=!c.getChildKeys().isEmpty();c=c!==a.block||b!==a.tree||d!==a.direction||j(a.selection,a.block.getKey())&&a.forceSelection;return e||c};p.prototype.componentDidMount=function(){__p&&__p();var a=this.props.selection,c=a.getEndKey();if(!a.getHasFocus()||c!==this.props.block.getKey())return;a=b("ReactDOM").findDOMNode(this);c=b("Style").getScrollParent(a);var d=b("getScrollPosition")(c);if(c===window){var e=b("getElementPosition")(a);e=e.y+e.height;var f=b("getViewportDimensions")().height;e=e-f;e>0&&window.scrollTo(d.x,d.y+e+i)}else{a instanceof HTMLElement||g(0);f=a.offsetHeight+a.offsetTop;a=c.offsetHeight+d.y;e=f-a;e>0&&b("Scroll").setTop(c,b("Scroll").getTop(c)+e+i)}};p.prototype.render=function(){__p&&__p();var a=this.props,c=a.block,d=a.blockRenderMap,e=a.blockRendererFn,f=a.blockStyleFn,g=a.contentState,h=a.decorator,i=a.editorKey,q=a.editorState,r=a.customStyleFn,s=a.customStyleMap,t=a.direction,u=a.forceSelection,v=a.selection;a=a.tree;var w=null;c.children.size&&(w=c.children.reduce(function(c,h){var a=b("DraftOffsetKey").encode(h,0,0),j=g.getBlockForKey(h),r=n(j,e),s=r.CustomComponent||p,t=m(j,d),u=t.Element;t=t.wrapperTemplate;var v=o(j,i,a,f,r);h=babelHelpers["extends"]({},this.props,{tree:q.getBlockTree(h),blockProps:r.customProps,offsetKey:a,block:j});c.push(b("React").createElement(u,v,b("React").createElement(s,h)));if(!t||k(j,g))return c;l(t,u,c);return c}.bind(this),[]));var x=c.getKey(),y=b("DraftOffsetKey").encode(x,0,0);w=b("React").createElement(b("DraftEditorNode.react"),{block:c,children:w,contentState:g,customStyleFn:r,customStyleMap:s,decorator:h,direction:t,forceSelection:u,hasSelection:j(v,x),selection:v,tree:a});if(c.getParentKey())return w;r=m(c,d);s=r.Element;h=o(c,i,y,f,n(c,e));return b("React").createElement(s,h,w)};function p(){h.apply(this,arguments)}e.exports=p}),null);
__d("DraftEditorContentsExperimental.react",["DraftEditorBlockNode.react","DraftOffsetKey","EditorState","React","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.shouldComponentUpdate=function(a){__p&&__p();var b=this.props.editorState;a=a.editorState;var c=b.getDirectionMap(),d=a.getDirectionMap();if(c!==d)return!0;c=b.getSelection().getHasFocus();d=a.getSelection().getHasFocus();if(c!==d)return!0;c=a.getNativelyRenderedContent();d=b.isInCompositionMode();var e=a.isInCompositionMode();if(b===a||c!==null&&a.getCurrentContent()===c||d&&e)return!1;c=b.getCurrentContent();var f=a.getCurrentContent();b=b.getDecorator();var g=a.getDecorator();return d!==e||c!==f||b!==g||a.mustForceSelection()};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.blockRenderMap,d=a.blockRendererFn,e=a.blockStyleFn,f=a.customStyleMap,g=a.customStyleFn,h=a.editorState,i=a.editorKey;a=a.textDirectionality;var j=h.getCurrentContent(),k=h.getSelection(),l=h.mustForceSelection(),m=h.getDecorator(),n=b("nullthrows")(h.getDirectionMap()),o=j.getBlocksAsArray();o=o[0];var p=[];o=o;while(o){var q=o.getKey(),r={blockRenderMap:c,blockRendererFn:d,blockStyleFn:e,contentState:j,customStyleFn:g,customStyleMap:f,decorator:m,editorKey:i,editorState:h,forceSelection:l,selection:k,block:o,direction:a?a:n.get(q),tree:h.getBlockTree(q)},s=c.get(o.getType())||c.get("unstyled");s=s.wrapper;p.push({block:b("React").createElement(b("DraftEditorBlockNode.react"),babelHelpers["extends"]({key:q},r)),wrapperTemplate:s,key:q,offsetKey:b("DraftOffsetKey").encode(q,0,0)});r=o.getNextSiblingKey();o=r?j.getBlockForKey(r):null}s=[];for(var q=0;q<p.length;){r=p[q];if(r.wrapperTemplate){c=[];do c.push(p[q].block),q++;while(q<p.length&&p[q].wrapperTemplate===r.wrapperTemplate);d=b("React").cloneElement(r.wrapperTemplate,{key:r.key+"-wrap","data-offset-key":r.offsetKey},c);s.push(d)}else s.push(r.block),q++}return b("React").createElement("div",{"data-contents":"true"},s)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("DraftEditorContents.react",["gkx","DraftEditorContentsExperimental.react","DraftEditorContents-core.react"],(function(a,b,c,d,e,f){"use strict";a=b("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN");e.exports=a?b("DraftEditorContentsExperimental.react"):b("DraftEditorContents-core.react")}),null);
__d("DraftODS",["cx","BanzaiODS","CurrentUser","fbjs/lib/CSSCore"],(function(a,b,c,d,e,f,g){"use strict";var h=b("CurrentUser").isEmployee()?".employee":"";a={init:function(){document.addEventListener("input",function(a){a.target.nodeType===1&&b("fbjs/lib/CSSCore").hasClass(a.target,"_5rpu")&&b("BanzaiODS").bumpEntityKey("draft_js","input_events"+h)})}};e.exports=a}),null);
__d("getEntityMatcher",[],(function(a,b,c,d,e,f){function g(a,b){return b.getEntity(a)}function a(a,b){return function(c,d,e){var f=b||g;c.findEntityRanges(function(b){b=b.getEntity();return typeof b==="string"&&a(f(b,e))},d)}}e.exports=a}),null);
__d("DefaultDraftBlockRenderMap",["cx","immutable","React"],(function(a,b,c,d,e,f,g){"use strict";a=b("immutable").Map;c=b("React").createElement("ul",{className:"_1bv0"});d=b("React").createElement("ol",{className:"_1bv1"});f=b("React").createElement("pre",{className:"_1bv2"});g=a({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:c},"ordered-list-item":{element:"li",wrapper:d},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:f},unstyled:{element:"div",aliasedElements:["p"]}});e.exports=g}),null);
__d("DefaultDraftInlineStyle",[],(function(a,b,c,d,e,f){"use strict";e.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}}),null);
__d("ContentStateInlineStyle",["CharacterMetadata","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").Map;a={add:function(a,b,c){return h(a,b,c,!0)},remove:function(a,b,c){return h(a,b,c,!1)}};function h(a,c,d,e){__p&&__p();var f=a.getBlockMap(),h=c.getStartKey(),i=c.getStartOffset(),j=c.getEndKey(),k=c.getEndOffset(),l=f.skipUntil(function(a,b){return b===h}).takeUntil(function(a,b){return b===j}).concat(g([[j,f.get(j)]])).map(function(a,c){var f,g;h===j?(f=i,g=k):(f=c===h?i:0,g=c===j?k:a.getLength());c=a.getCharacterList();var l;while(f<g)l=c.get(f),c=c.set(f,e?b("CharacterMetadata").applyStyle(l,d):b("CharacterMetadata").removeStyle(l,d)),f++;return a.set("characterList",c)});return a.merge({blockMap:f.merge(l),selectionBefore:c,selectionAfter:c})}e.exports=a}),null);
__d("applyEntityToContentBlock",["CharacterMetadata"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){var f=a.getCharacterList();while(c<d)f=f.set(c,b("CharacterMetadata").applyEntity(f.get(c),e)),c++;return a.set("characterList",f)}e.exports=a}),null);
__d("applyEntityToContentState",["immutable","applyEntityToContentBlock"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){var e=a.getBlockMap(),f=c.getStartKey(),g=c.getStartOffset(),h=c.getEndKey(),i=c.getEndOffset(),j=e.skipUntil(function(a,b){return b===f}).takeUntil(function(a,b){return b===h}).toOrderedMap().merge(b("immutable").OrderedMap([[h,e.get(h)]])).map(function(a,c){var e=c===f?g:0;c=c===h?i:a.getLength();return b("applyEntityToContentBlock")(a,e,c,d)});return a.merge({blockMap:e.merge(j),selectionBefore:c,selectionAfter:c})}e.exports=a}),null);
__d("DraftEntitySegments",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getRemovalRange:function(a,b,c,d,e){__p&&__p();var f=c.split(" ");f=f.map(function(a,b){if(e==="forward"){if(b>0)return" "+a}else if(b<f.length-1)return a+" ";return a});var g=d,h,i=null,j=null;for(var k=0;k<f.length;k++){h=f[k];h=g+h.length;if(a<h&&g<b)i!==null?j=h:(i=g,j=h);else if(i!==null)break;g=h}h=d+c.length;k=i===d;g=j===h;(!k&&g||k&&!g)&&(e==="forward"?j!==h&&j++:i!==d&&i--);return{start:i,end:j}}};e.exports=a}),null);
__d("getRangesForDraftEntity",["invariant"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=[];a.findEntityRanges(function(a){return a.getEntity()===b},function(a,b){c.push({start:a,end:b})});!c.length&&g(0);return c}e.exports=a}),null);
__d("getCharacterRemovalRange",["invariant","DraftEntitySegments","getRangesForDraftEntity"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b,c,d,e){__p&&__p();var f=d.getStartOffset(),g=d.getEndOffset();f=b.getEntityAt(f);g=c.getEntityAt(g-1);if(!f&&!g)return d;d=d;if(f&&f===g)d=h(a,b,d,e,f,!0,!0);else if(f&&g){var i=h(a,b,d,e,f,!1,!0),j=h(a,c,d,e,g,!1,!1);d=d.merge({anchorOffset:i.getAnchorOffset(),focusOffset:j.getFocusOffset(),isBackward:!1})}else if(f){i=h(a,b,d,e,f,!1,!0);d=d.merge({anchorOffset:i.getStartOffset(),isBackward:!1})}else if(g){j=h(a,c,d,e,g,!1,!1);d=d.merge({focusOffset:j.getEndOffset(),isBackward:!1})}return d}function h(a,c,d,e,f,h,i){__p&&__p();var j=d.getStartOffset(),k=d.getEndOffset();a=a.__get(f);a=a.getMutability();var l=i?j:k;if(a==="MUTABLE")return d;f=b("getRangesForDraftEntity")(c,f).filter(function(a){return l<=a.end&&l>=a.start});f.length==1||g(0);f=f[0];if(a==="IMMUTABLE")return d.merge({anchorOffset:f.start,focusOffset:f.end,isBackward:!1});h||(i?k=f.end:j=f.start);a=b("DraftEntitySegments").getRemovalRange(j,k,c.getText().slice(f.start,f.end),f.start,e);return d.merge({anchorOffset:a.start,focusOffset:a.end,isBackward:!1})}e.exports=a}),null);
__d("randomizeBlockMapKeys",["ContentBlockNode","immutable","generateRandomKey"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").OrderedMap,h=function(a){__p&&__p();var c={},d;return g(a.withMutations(function(a){__p&&__p();a.forEach(function(e,f){__p&&__p();var g=e.getKey();f=e.getNextSiblingKey();var h=e.getPrevSiblingKey(),i=e.getChildKeys(),j=e.getParentKey(),k=b("generateRandomKey")();c[g]=k;if(f){var l=a.get(f);l?a.setIn([f,"prevSibling"],k):a.setIn([g,"nextSibling"],null)}if(h){l=a.get(h);l?a.setIn([h,"nextSibling"],k):a.setIn([g,"prevSibling"],null)}if(j&&a.get(j)){f=a.get(j);l=f.getChildKeys();a.setIn([j,"children"],l.set(l.indexOf(e.getKey()),k))}else a.setIn([g,"parent"],null),d&&(a.setIn([d.getKey(),"nextSibling"],k),a.setIn([g,"prevSibling"],c[d.getKey()])),d=a.get(g);i.forEach(function(b){var c=a.get(b);c?a.setIn([b,"parent"],k):a.setIn([g,"children"],e.getChildKeys().filter(function(a){return a!==b}))})})}).toArray().map(function(a){return[c[a.getKey()],a.set("key",c[a.getKey()])]}))},i=function(a){return g(a.toArray().map(function(a){var c=b("generateRandomKey")();return[c,a.set("key",c)]}))};a=function(a){var c=a.first()instanceof b("ContentBlockNode");return!c?i(a):h(a)};e.exports=a}),null);
__d("removeEntitiesAtEdges",["invariant","CharacterMetadata","findRangesImmutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b){var c=a.getBlockMap(),d=a.getEntityMap(),e={},f=b.getStartKey(),g=b.getStartOffset(),h=c.get(f);g=i(d,h,g);g!==h&&(e[f]=g);h=b.getEndKey();var j=b.getEndOffset(),k=c.get(h);f===h&&(k=g);f=i(d,k,j);f!==k&&(e[h]=f);return!Object.keys(e).length?a.set("selectionAfter",b):a.merge({blockMap:c.merge(e),selectionAfter:b})}function h(a,c,d){var e;b("findRangesImmutable")(a,function(a,b){return a.getEntity()===b.getEntity()},function(a){return a.getEntity()===c},function(a,b){a<=d&&b>=d&&(e={start:a,end:b})});typeof e==="object"||g(0);return e}function i(a,c,d){__p&&__p();var e=c.getCharacterList(),f=d>0?e.get(d-1):undefined,g=d<e.count()?e.get(d):undefined;f=f?f.getEntity():undefined;g=g?g.getEntity():undefined;if(g&&g===f){f=a.__get(g);if(f.getMutability()!=="MUTABLE"){a=h(e,g,d);f=a.start;g=a.end;while(f<g)d=e.get(f),e=e.set(f,b("CharacterMetadata").applyEntity(d,null)),f++;return c.set("characterList",e)}}return c}e.exports=a}),null);
__d("getContentStateFragment",["randomizeBlockMapKeys","removeEntitiesAtEdges"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,c){__p&&__p();var d=c.getStartKey(),e=c.getStartOffset(),f=c.getEndKey(),g=c.getEndOffset();a=b("removeEntitiesAtEdges")(a,c);c=a.getBlockMap();a=c.keySeq();var h=a.indexOf(d);a=a.indexOf(f)+1;return b("randomizeBlockMapKeys")(c.slice(h,a).map(function(a,b){var c=a.getText(),h=a.getCharacterList();if(d===f)return a.merge({text:c.slice(e,g),characterList:h.slice(e,g)});if(b===d)return a.merge({text:c.slice(e),characterList:h.slice(e)});return b===f?a.merge({text:c.slice(0,g),characterList:h.slice(0,g)}):a}))};e.exports=a}),null);
__d("insertIntoList",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){__p&&__p();if(c===a.count())b.forEach(function(b){a=a.push(b)});else if(c===0)b.reverse().forEach(function(b){a=a.unshift(b)});else{var d=a.slice(0,c);c=a.slice(c);a=d.concat(b,c).toList()}return a}e.exports=a}),null);
__d("insertFragmentIntoContentState",["invariant","BlockMapBuilder","ContentBlockNode","immutable","insertIntoList","randomizeBlockMapKeys"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List,i=function(a,c,d,e,f,g){var h=d.get(f),i=h.getText(),j=h.getCharacterList(),k=f,l=g+e.getText().length;h=h.merge({text:i.slice(0,g)+e.getText()+i.slice(g),characterList:b("insertIntoList")(j,e.getCharacterList(),g),data:e.getData()});return a.merge({blockMap:d.set(f,h),selectionBefore:c,selectionAfter:c.merge({anchorKey:k,anchorOffset:l,focusKey:k,focusOffset:l,isBackward:!1})})},j=function(a,b,c){var d=a.getText(),e=a.getCharacterList();d=d.slice(0,b);e=e.slice(0,b);b=c.first();return a.merge({text:d+b.getText(),characterList:e.concat(b.getCharacterList()),type:d?a.getType():b.getType(),data:b.getData()})},k=function(a,b,c){var d=a.getText();a=a.getCharacterList();var e=d.length;d=d.slice(b,e);a=a.slice(b,e);b=c.last();return b.merge({text:b.getText()+d,characterList:b.getCharacterList().concat(a),data:b.getData()})},l=function(a,b){__p&&__p();var c=a.getKey();a=a;var d=[];b.get(c)&&d.push(c);while(a&&a.getNextSiblingKey()){c=a.getNextSiblingKey();if(!c)break;d.push(c);a=b.get(c)}return d},m=function(a,b,c,d){__p&&__p();return a.withMutations(function(b){__p&&__p();var e=c.getKey(),f=d.getKey(),g=c.getNextSiblingKey(),i=c.getParentKey(),j=l(d,a),k=j[j.length-1];b.get(f)?(b.setIn([e,"nextSibling"],f),b.setIn([f,"prevSibling"],e)):(b.setIn([e,"nextSibling"],d.getNextSiblingKey()),b.setIn([d.getNextSiblingKey(),"prevSibling"],e));b.setIn([k,"nextSibling"],g);g&&b.setIn([g,"prevSibling"],k);j.forEach(function(a){return b.setIn([a,"parent"],i)});if(i){f=a.get(i);g=f.getChildKeys();k=g.indexOf(e);f=k+1;e=g.toArray();e.splice.apply(e,[f,0].concat(j));b.setIn([i,"children"],h(e))}})},n=function(a,c,d,e,f,g){__p&&__p();var h=d.first()instanceof b("ContentBlockNode"),i=[],l=e.size,n=d.get(f),o=e.first(),p=e.last(),q=p.getLength();p=p.getKey();var r=h&&(!n.getChildKeys().isEmpty()||!o.getChildKeys().isEmpty());d.forEach(function(a,b){if(b!==f){i.push(a);return}r?i.push(a):i.push(j(a,g,e));e.slice(r?0:1,l-1).forEach(function(a){return i.push(a)});i.push(k(a,g,e))});var s=b("BlockMapBuilder").createFromArray(i);h&&(s=m(s,d,n,o));return a.merge({blockMap:s,selectionBefore:c,selectionAfter:c.merge({anchorKey:p,anchorOffset:q,focusKey:p,focusOffset:q,isBackward:!1})})};a=function(a,c,d){c.isCollapsed()||g(0);var e=a.getBlockMap();d=b("randomizeBlockMapKeys")(d);var f=c.getStartKey(),h=c.getStartOffset(),j=e.get(f);j instanceof b("ContentBlockNode")&&(j.getChildKeys().isEmpty()||g(0));return d.size===1?i(a,c,e,d.first(),f,h):n(a,c,e,d,f,h)};e.exports=a}),null);
__d("insertTextIntoContentState",["invariant","immutable","insertIntoList"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Repeat;function a(a,c,d,e){c.isCollapsed()||g(0);var f=d.length;if(!f)return a;var i=a.getBlockMap(),j=c.getStartKey(),k=c.getStartOffset(),l=i.get(j),m=l.getText();d=l.merge({text:m.slice(0,k)+d+m.slice(k,l.getLength()),characterList:b("insertIntoList")(l.getCharacterList(),h(e,f).toList(),k)});m=k+f;return a.merge({blockMap:i.set(j,d),selectionAfter:c.merge({anchorOffset:m,focusOffset:m})})}e.exports=a}),null);
__d("modifyBlockForContentState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("immutable").Map;function a(a,b,c){var d=b.getStartKey(),e=b.getEndKey(),f=a.getBlockMap();c=f.toSeq().skipUntil(function(a,b){return b===d}).takeUntil(function(a,b){return b===e}).concat(g([[e,f.get(e)]])).map(c);return a.merge({blockMap:f.merge(c),selectionBefore:b,selectionAfter:b})}e.exports=a}),null);
__d("getNextDelimiterBlockKey",["ContentBlockNode"],(function(a,b,c,d,e,f){__p&&__p();a=function(a,c){__p&&__p();var d=a instanceof b("ContentBlockNode");if(!d)return null;d=a.getNextSiblingKey();if(d)return d;d=a.getParentKey();if(!d)return null;a=c.get(d);while(a&&!a.getNextSiblingKey()){d=a.getParentKey();a=d?c.get(d):null}return!a?null:a.getNextSiblingKey()};e.exports=a}),null);
__d("removeRangeFromContentState",["ContentBlockNode","immutable","getNextDelimiterBlockKey"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").List;var g=b("immutable").Map,h=function(a,b,c){if(!a)return;var d=b.get(a);if(!d)return;b.set(a,c(d))},i=function(a,b){__p&&__p();var c=[];if(!a)return c;a=b.get(a);while(a&&a.getParentKey()){var d=a.getParentKey();d&&c.push(d);a=d?b.get(d):null}return c},j=function(a,c){__p&&__p();var d=[];if(!a)return d;a=b("getNextDelimiterBlockKey")(a,c);while(a&&c.get(a)){var e=c.get(a);d.push(a);a=e.getParentKey()?b("getNextDelimiterBlockKey")(e,c):null}return d},k=function(a,b,c){if(!a)return null;a=c.get(a.getKey()).getNextSiblingKey();while(a&&!b.get(a))a=c.get(a).getNextSiblingKey()||null;return a},l=function(a,b,c){if(!a)return null;a=c.get(a.getKey()).getPrevSiblingKey();while(a&&!b.get(a))a=c.get(a).getPrevSiblingKey()||null;return a},m=function(a,b,c,d){__p&&__p();return a.withMutations(function(a){__p&&__p();h(b.getKey(),a,function(c){return c.merge({nextSibling:k(b,a,d),prevSibling:l(b,a,d)})}),h(c.getKey(),a,function(b){return b.merge({nextSibling:k(c,a,d),prevSibling:l(c,a,d)})}),i(b.getKey(),d).forEach(function(b){return h(b,a,function(b){return b.merge({children:b.getChildKeys().filter(function(b){return a.get(b)}),nextSibling:k(b,a,d),prevSibling:l(b,a,d)})})}),h(b.getNextSiblingKey(),a,function(a){return a.merge({prevSibling:b.getPrevSiblingKey()})}),h(b.getPrevSiblingKey(),a,function(c){return c.merge({nextSibling:k(b,a,d)})}),h(c.getNextSiblingKey(),a,function(b){return b.merge({prevSibling:l(c,a,d)})}),h(c.getPrevSiblingKey(),a,function(a){return a.merge({nextSibling:c.getNextSiblingKey()})}),i(c.getKey(),d).forEach(function(b){h(b,a,function(b){return b.merge({children:b.getChildKeys().filter(function(b){return a.get(b)}),nextSibling:k(b,a,d),prevSibling:l(b,a,d)})})}),j(c,d).forEach(function(b){return h(b,a,function(b){return b.merge({nextSibling:k(b,a,d),prevSibling:l(b,a,d)})})})})};a=function(a,c){__p&&__p();if(c.isCollapsed())return a;var d=a.getBlockMap(),e=c.getStartKey(),f=c.getStartOffset(),h=c.getEndKey(),j=c.getEndOffset(),k=d.get(e),l=d.get(h),o=k instanceof b("ContentBlockNode"),p=[];if(o){var q=l.getChildKeys(),r=i(h,d);l.getNextSiblingKey()&&(p=p.concat(r));q.isEmpty()||(p=p.concat(r.concat([h])));p=p.concat(i(b("getNextDelimiterBlockKey")(l,d),d))}k===l?q=n(k.getCharacterList(),f,j):q=k.getCharacterList().slice(0,f).concat(l.getCharacterList().slice(j));var s=k.merge({text:k.getText().slice(0,f)+l.getText().slice(j),characterList:q});r=d.toSeq().skipUntil(function(a,b){return b===e}).takeUntil(function(a,b){return b===h}).filter(function(a,b){return p.indexOf(b)===-1}).concat(g([[h,null]])).map(function(a,b){return b===e?s:null});j=d.merge(r).filter(function(a){return!!a});o&&(j=m(j,k,l,d));return a.merge({blockMap:j,selectionBefore:c,selectionAfter:c.merge({anchorKey:e,anchorOffset:f,focusKey:e,focusOffset:f,isBackward:!1})})};var n=function(a,b,c){__p&&__p();if(b===0)while(b<c)a=a.shift(),b++;else if(c===a.count())while(c>b)a=a.pop(),c--;else{b=a.slice(0,b);c=a.slice(c);a=b.concat(c).toList()}return a};e.exports=a}),null);
__d("splitBlockInContentState",["invariant","ContentBlockNode","immutable","generateRandomKey"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List,i=b("immutable").Map,j=function(a,b,c){if(!a)return;var d=b.get(a);if(!d)return;b.set(a,c(d))},k=function(a,b,c){__p&&__p();return a.withMutations(function(a){__p&&__p();var d=b.getKey(),e=c.getKey();j(b.getParentKey(),a,function(a){var b=a.getChildKeys(),c=b.indexOf(d)+1;b=b.toArray();b.splice(c,0,e);return a.merge({children:h(b)})});j(b.getNextSiblingKey(),a,function(a){return a.merge({prevSibling:e})});j(d,a,function(a){return a.merge({nextSibling:e})});j(e,a,function(a){return a.merge({prevSibling:d})})})};a=function(a,c){__p&&__p();c.isCollapsed()||g(0);var d=c.getAnchorKey(),e=c.getAnchorOffset(),f=a.getBlockMap(),h=f.get(d),j=h.getText(),l=h.getCharacterList(),m=b("generateRandomKey")(),n=h instanceof b("ContentBlockNode"),o=h.merge({text:j.slice(0,e),characterList:l.slice(0,e)});j=o.merge({key:m,text:j.slice(e),characterList:l.slice(e),data:i()});l=f.toSeq().takeUntil(function(a){return a===h});e=f.toSeq().skipUntil(function(a){return a===h}).rest();f=l.concat([[d,o],[m,j]],e).toOrderedMap();n&&(h.getChildKeys().isEmpty()||g(0),f=k(f,o,j));return a.merge({blockMap:f,selectionBefore:c,selectionAfter:c.merge({anchorKey:m,anchorOffset:0,focusKey:m,focusOffset:0,isBackward:!1})})};e.exports=a}),null);
__d("DraftModifier",["invariant","CharacterMetadata","ContentStateInlineStyle","immutable","applyEntityToContentState","getCharacterRemovalRange","getContentStateFragment","gkx","insertFragmentIntoContentState","insertTextIntoContentState","modifyBlockForContentState","removeEntitiesAtEdges","removeRangeFromContentState","splitBlockInContentState"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").OrderedSet,i={replaceText:function(a,c,d,e,f){a=b("removeEntitiesAtEdges")(a,c);a=b("removeRangeFromContentState")(a,c);c=b("CharacterMetadata").create({style:e||h(),entity:f||null});return b("insertTextIntoContentState")(a,a.getSelectionAfter(),d,c)},insertText:function(a,b,c,d,e){b.isCollapsed()||g(0);return i.replaceText(a,b,c,d,e)},moveText:function(a,c,d){var e=b("getContentStateFragment")(a,c);a=i.removeRange(a,c,"backward");return i.replaceWithFragment(a,d,e)},replaceWithFragment:function(a,c,d){a=b("removeEntitiesAtEdges")(a,c);a=b("removeRangeFromContentState")(a,c);return b("insertFragmentIntoContentState")(a,a.getSelectionAfter(),d)},removeRange:function(a,c,d){__p&&__p();var e,f,g,h;c.getIsBackward()&&(c=c.merge({anchorKey:c.getFocusKey(),anchorOffset:c.getFocusOffset(),focusKey:c.getAnchorKey(),focusOffset:c.getAnchorOffset(),isBackward:!1}));e=c.getAnchorKey();f=c.getFocusKey();g=a.getBlockForKey(e);h=a.getBlockForKey(f);var i=c.getStartOffset(),j=c.getEndOffset();i=g.getEntityAt(i);j=h.getEntityAt(j-1);if(e===f&&(i&&i===j)){e=b("getCharacterRemovalRange")(a.getEntityMap(),g,h,c,d);return b("removeRangeFromContentState")(a,e)}f=c;b("gkx")("AT4OHQOtsQXrOADgyVq6K5UIDe9T9eDsSwdY2t65CYKcEvQqwy-mi67Du6upmMMIJ9MJGXqczfRABuu9cZxiVQ31ZCO7_57Q5Y5XG2T5gJJ6NQ")&&(f=b("getCharacterRemovalRange")(a.getEntityMap(),g,h,c,d));i=b("removeEntitiesAtEdges")(a,f);return b("removeRangeFromContentState")(i,f)},splitBlock:function(a,c){a=b("removeEntitiesAtEdges")(a,c);a=b("removeRangeFromContentState")(a,c);return b("splitBlockInContentState")(a,a.getSelectionAfter())},applyInlineStyle:function(a,c,d){return b("ContentStateInlineStyle").add(a,c,d)},removeInlineStyle:function(a,c,d){return b("ContentStateInlineStyle").remove(a,c,d)},setBlockType:function(a,c,d){return b("modifyBlockForContentState")(a,c,function(a){return a.merge({type:d,depth:0})})},setBlockData:function(a,c,d){return b("modifyBlockForContentState")(a,c,function(a){return a.merge({data:d})})},mergeBlockData:function(a,c,d){return b("modifyBlockForContentState")(a,c,function(a){return a.merge({data:a.getData().merge(d)})})},applyEntity:function(a,c,d){a=b("removeEntitiesAtEdges")(a,c);return b("applyEntityToContentState")(a,c,d)}};e.exports=i}),null);
__d("getEntityKeyForSelection",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){__p&&__p();var c;if(b.isCollapsed()){var d=b.getAnchorKey(),e=b.getAnchorOffset();if(e>0){c=a.getBlockForKey(d).getEntityAt(e-1);return c!==a.getBlockForKey(d).getEntityAt(e)?null:g(a.getEntityMap(),c)}return null}d=b.getStartKey();e=b.getStartOffset();b=a.getBlockForKey(d);c=e===b.getLength()?null:b.getEntityAt(e);return g(a.getEntityMap(),c)}function g(a,b){if(b){a=a.__get(b);return a.getMutability()==="MUTABLE"?b:null}return null}e.exports=a}),null);
__d("isEventHandled",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a==="handled"||a===!0}e.exports=a}),null);
__d("isSelectionAtLeafStart",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var b=a.getSelection(),c=b.getAnchorKey();a=a.getBlockTree(c);var d=b.getStartOffset();c=!1;a.some(function(a){__p&&__p();if(d===a.get("start")){c=!0;return!0}return d<a.get("end")?a.get("leaves").some(function(a){a=a.get("start");if(d===a){c=!0;return!0}return!1}):!1});return c}e.exports=a}),null);
__d("DraftEditorCompositionHandler",["DraftModifier","EditorState","Keys","getEntityKeyForSelection","gkx","isEventHandled","isSelectionAtLeafStart"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=20,h=!1,i=!1,j="",k={onBeforeInput:function(a,b){j=(j||"")+b.data},onCompositionStart:function(a){i=!0},onCompositionEnd:function(a,b){h=!1,i=!1,setTimeout(function(){h||k.resolveComposition(a,b)},g)},onKeyDown:function(a,c){if(!i){k.resolveComposition(a,c);a._onKeyDown(c);return}(c.which===b("Keys").RIGHT||c.which===b("Keys").LEFT)&&c.preventDefault()},onKeyPress:function(a,c){c.which===b("Keys").RETURN&&c.preventDefault()},resolveComposition:function(a,event){__p&&__p();if(i)return;h=!0;var c=j;j="";var d=b("EditorState").set(a._latestEditorState,{inCompositionMode:!1}),e=d.getCurrentInlineStyle(),f=b("getEntityKeyForSelection")(d.getCurrentContent(),d.getSelection()),g=!c||b("isSelectionAtLeafStart")(d)||e.size>0||f!==null;g&&a.restoreEditorDOM();a.exitCurrentMode();if(c){if(b("gkx")("AT4jBaTBzRYWAA8oybsDztxwiWb9Je6Ni1Zs7j6Be7i903PJcYxWjBm6VmCRmSERiUtQwjG1NtMNd-IjzhQ-KM-ZjR33VQC_LUaQqKcsVkKJAw")&&a.props.handleBeforeInput&&b("isEventHandled")(a.props.handleBeforeInput(c,d,event.timeStamp)))return;c=b("DraftModifier").replaceText(d.getCurrentContent(),d.getSelection(),c,e,f);a.update(b("EditorState").push(d,c,"insert-characters"));return}g&&a.update(b("EditorState").set(d,{nativelyRenderedContent:null,forceSelection:!0}))}};e.exports=k}),null);
__d("getSelectionOffsetKeyForNode",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();if(a instanceof Element){var b=a.getAttribute("data-offset-key");if(b)return b;for(var b=0;b<a.childNodes.length;b++){var c=g(a.childNodes[b]);if(c)return c}}return null}e.exports=g}),null);
__d("findAncestorOffsetKey",["getSelectionOffsetKeyForNode"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a=a;while(a&&a!==document.documentElement){var c=b("getSelectionOffsetKeyForNode")(a);if(c!=null)return c;a=a.parentNode}return null}e.exports=a}),null);
__d("getTextContentFromFiles",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/\.textClipping$/,i={"text/plain":!0,"text/html":!0,"text/rtf":!0},j=5e3;function b(a,b){var c=0,d=[];a.forEach(function(e){k(e,function(e){c++,e&&d.push(e.slice(0,j)),c==a.length&&b(d.join("\r"))})})}function k(b,c){__p&&__p();if(!a.FileReader||b.type&&!(b.type in i)){c("");return}if(b.type===""){var d="";h.test(b.name)&&(d=b.name.replace(h,""));c(d);return}var e=new FileReader();e.onload=function(){var a=e.result;typeof a==="string"||g(0);c(a)};e.onerror=function(){c("")};e.readAsText(b)}e.exports=b}),null);
__d("getUpdatedSelectionState",["DraftOffsetKey","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){__p&&__p();var g=b("nullthrows")(a.getSelection());c=b("DraftOffsetKey").decode(c);var h=c.blockKey;c=a.getBlockTree(h).getIn([c.decoratorKey,"leaves",c.leafKey]);e=b("DraftOffsetKey").decode(e);var i=e.blockKey;e=a.getBlockTree(i).getIn([e.decoratorKey,"leaves",e.leafKey]);var j=c.get("start"),k=e.get("start"),l=c?j+d:null,m=e?k+f:null,n=g.getAnchorKey()===h&&g.getAnchorOffset()===l&&g.getFocusKey()===i&&g.getFocusOffset()===m;if(n)return g;!1;if(h===i){n=c.get("end");c=e.get("end");k===j&&c===n?e=f<d:e=k<j}else{c=a.getCurrentContent().getBlockMap().keySeq().skipUntil(function(a){return a===h||a===i}).first();e=c===i}return g.merge({anchorKey:h,anchorOffset:l,focusKey:i,focusOffset:m,isBackward:e})}e.exports=a}),null);
__d("DraftEditorDragHandler",["DataTransfer","DraftModifier","EditorState","findAncestorOffsetKey","getTextContentFromFiles","getUpdatedSelectionState","isEventHandled","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(event,a){__p&&__p();var c=null,d=null;if(typeof document.caretRangeFromPoint==="function"){var e=document.caretRangeFromPoint(event.x,event.y);c=e.startContainer;d=e.startOffset}else if(event.rangeParent)c=event.rangeParent,d=event.rangeOffset;else return null;c=b("nullthrows")(c);d=b("nullthrows")(d);e=b("nullthrows")(b("findAncestorOffsetKey")(c));return b("getUpdatedSelectionState")(a,e,d,e,d)}a={onDragEnd:function(a){a.exitCurrentMode()},onDrop:function(a,c){__p&&__p();var d=new(b("DataTransfer"))(c.nativeEvent.dataTransfer),e=a._latestEditorState,f=g(c.nativeEvent,e);c.preventDefault();a.exitCurrentMode();if(f==null)return;c=d.getFiles();if(c.length>0){if(a.props.handleDroppedFiles&&b("isEventHandled")(a.props.handleDroppedFiles(f,c)))return;b("getTextContentFromFiles")(c,function(b){b&&a.update(i(e,f,b))});return}c=a._internalDrag?"internal":"external";if(a.props.handleDrop&&b("isEventHandled")(a.props.handleDrop(f,d,c)))return;if(a._internalDrag){a.update(h(e,f));return}a.update(i(e,f,d.getText()))}};function h(a,c){c=b("DraftModifier").moveText(a.getCurrentContent(),a.getSelection(),c);return b("EditorState").push(a,c,"insert-fragment")}function i(a,c,d){c=b("DraftModifier").insertText(a.getCurrentContent(),c,d,a.getCurrentInlineStyle());return b("EditorState").push(a,c,"insert-fragment")}e.exports=a}),null);
__d("editOnBeforeInput",["DraftModifier","EditorState","UserAgent","getEntityKeyForSelection","isEventHandled","isSelectionAtLeafStart","nullthrows","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="'",h="/",i=b("UserAgent").isBrowser("Firefox");function j(a){return i&&(a==g||a==h)}function k(a,c,d,e){c=b("DraftModifier").replaceText(a.getCurrentContent(),a.getSelection(),c,d,e);return b("EditorState").push(a,c,"insert-characters")}function c(c,d){__p&&__p();c._pendingStateFromBeforeInput!==undefined&&(c.update(c._pendingStateFromBeforeInput),c._pendingStateFromBeforeInput=undefined);var e=c._latestEditorState,f=d.data;if(!f)return;if(c.props.handleBeforeInput&&b("isEventHandled")(c.props.handleBeforeInput(f,e,d.timeStamp))){d.preventDefault();return}var g=e.getSelection(),h=g.getStartOffset(),i=g.getEndOffset(),l=g.getAnchorKey();if(!g.isCollapsed()){d.preventDefault();var m=e.getCurrentContent().getPlainText().slice(h,i);f===m?c.update(b("EditorState").forceSelection(e,g.merge({anchorOffset:i,focusOffset:i}))):c.update(k(e,f,e.getCurrentInlineStyle(),b("getEntityKeyForSelection")(e.getCurrentContent(),e.getSelection())));return}m=k(e,f,e.getCurrentInlineStyle(),b("getEntityKeyForSelection")(e.getCurrentContent(),e.getSelection()));g=!1;g||(g=b("isSelectionAtLeafStart")(c._latestCommittedEditorState));if(!g){i=a.getSelection();if(i.anchorNode&&i.anchorNode.nodeType===Node.TEXT_NODE){i=i.anchorNode.parentNode;g=i.nodeName==="SPAN"&&i.firstChild.nodeType===Node.TEXT_NODE&&i.firstChild.nodeValue.indexOf("\t")!==-1}}if(!g){i=e.getBlockTree(l);var n=m.getBlockTree(l);g=i.size!==n.size||i.zip(n).some(function(a){var b=a[0];a=a[1];var c=b.get("start");c=c+(c>=h?f.length:0);var d=b.get("end");d=d+(d>=h?f.length:0);return b.get("decoratorKey")!==a.get("decoratorKey")||b.get("leaves").size!==a.get("leaves").size||c!==a.get("start")||d!==a.get("end")})}g||(g=j(f));g||(g=b("nullthrows")(m.getDirectionMap()).get(l)!==b("nullthrows")(e.getDirectionMap()).get(l));if(g){d.preventDefault();c.update(m);return}m=b("EditorState").set(m,{nativelyRenderedContent:m.getCurrentContent()});c._pendingStateFromBeforeInput=m;b("setImmediate")(function(){c._pendingStateFromBeforeInput!==undefined&&(c.update(c._pendingStateFromBeforeInput),c._pendingStateFromBeforeInput=undefined)})}e.exports=c}),null);
__d("editOnBlur",["EditorState","containsNode","getActiveElement"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function c(c,d){__p&&__p();if(b("getActiveElement")()===document.body){var e=a.getSelection(),f=c.editor;e.rangeCount===1&&b("containsNode")(f,e.anchorNode)&&b("containsNode")(f,e.focusNode)&&e.removeAllRanges()}f=c._latestEditorState;e=f.getSelection();if(!e.getHasFocus())return;e=e.set("hasFocus",!1);c.props.onBlur&&c.props.onBlur(d);c.update(b("EditorState").acceptSelection(f,e))}e.exports=c}),null);
__d("editOnCompositionStart",["EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a.setMode("composite"),a.update(b("EditorState").set(a._latestEditorState,{inCompositionMode:!0})),a._onCompositionStart(c)}e.exports=a}),null);
__d("getFragmentFromSelection",["getContentStateFragment"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getSelection();return c.isCollapsed()?null:b("getContentStateFragment")(a.getCurrentContent(),c)}e.exports=a}),null);
__d("editOnCopy",["getFragmentFromSelection"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=a._latestEditorState;d=d.getSelection();if(d.isCollapsed()){c.preventDefault();return}a.setClipboard(b("getFragmentFromSelection")(a._latestEditorState))}e.exports=a}),null);
__d("editOnCut",["DraftModifier","EditorState","Style","getFragmentFromSelection","getScrollPosition"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=a._latestEditorState,e=d.getSelection(),f=c.target,h;if(e.isCollapsed()){c.preventDefault();return}f instanceof Node&&(h=b("getScrollPosition")(b("Style").getScrollParent(f)));e=b("getFragmentFromSelection")(d);a.setClipboard(e);a.setMode("cut");setTimeout(function(){a.restoreEditorDOM(h),a.exitCurrentMode(),a.update(g(d))},0)}function g(a){var c=b("DraftModifier").removeRange(a.getCurrentContent(),a.getSelection(),"forward");return b("EditorState").push(a,c,"remove-range")}e.exports=a}),null);
__d("editOnDragOver",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a._internalDrag=!1,a.setMode("drag"),b.preventDefault()}e.exports=a}),null);
__d("editOnDragStart",[],(function(a,b,c,d,e,f){"use strict";function a(a){a._internalDrag=!0,a.setMode("drag")}e.exports=a}),null);
__d("editOnFocus",["EditorState","UserAgent"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=a._latestEditorState,e=d.getSelection();if(e.getHasFocus())return;e=e.set("hasFocus",!0);a.props.onFocus&&a.props.onFocus(c);b("UserAgent").isBrowser("Chrome < 60.0.3081.0")?a.update(b("EditorState").forceSelection(d,e)):a.update(b("EditorState").acceptSelection(d,e))}e.exports=a}),null);
__d("editOnInput",["DraftModifier","DraftOffsetKey","EditorState","UserAgent","findAncestorOffsetKey","gkx","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("UserAgent").isEngine("Gecko"),h="\n\n";function c(c){__p&&__p();c._pendingStateFromBeforeInput!==undefined&&(c.update(c._pendingStateFromBeforeInput),c._pendingStateFromBeforeInput=undefined);var d=a.getSelection(),e=d.anchorNode,f=d.isCollapsed,i=e.nodeType!==Node.TEXT_NODE,j=e.nodeType!==Node.TEXT_NODE&&e.nodeType!==Node.ELEMENT_NODE;if(b("gkx")("AT5-KQB0Xj_CDLWUIMILzoGYzlpu0hwpg4CPaxfzm51RfcOYLYkvJCug0it-P2OAOdRH1lNv4lP4oODRvdq9nXftShx8XbKClVLq-dwF7Ip31Q")){if(i)return}else if(j)return;if(e.nodeType===Node.TEXT_NODE&&(e.previousSibling!==null||e.nextSibling!==null)){i=e.parentNode;e.nodeValue=i.textContent;for(var j=i.firstChild;j!==null;j=j.nextSibling)j!==e&&i.removeChild(j)}j=e.textContent;i=c._latestEditorState;e=b("nullthrows")(b("findAncestorOffsetKey")(e));e=b("DraftOffsetKey").decode(e);var k=e.blockKey,l=e.decoratorKey;e=e.leafKey;l=i.getBlockTree(k).getIn([l,"leaves",e]);e=l.start;l=l.end;var m=i.getCurrentContent();k=m.getBlockForKey(k);var n=k.getText().slice(e,l);j.endsWith(h)&&(j=j.slice(0,-1));if(j===n)return;var o=i.getSelection();l=o.merge({anchorOffset:e,focusOffset:l,isBackward:!1});var p=k.getEntityAt(e);p=p&&m.getEntity(p);p=p&&p.getMutability();p=p==="MUTABLE";var q=p?"spellcheck-change":"apply-entity";l=b("DraftModifier").replaceText(m,l,j,k.getInlineStyleAt(e),p?k.getEntityAt(e):null);if(g)p=d.anchorOffset,k=d.focusOffset,d=e+Math.min(p,k),e=d+Math.abs(p-k),p=d,k=e;else{j=j.length-n.length;d=o.getStartOffset();e=o.getEndOffset();p=f?e+j:d;k=e+j}n=l.merge({selectionBefore:m.getSelectionAfter(),selectionAfter:o.merge({anchorOffset:p,focusOffset:k})});c.update(b("EditorState").push(i,n,q))}e.exports=c}),null);
__d("KeyBindingUtil",["UserAgent"],(function(a,b,c,d,e,f){"use strict";var g=b("UserAgent").isPlatform("Mac OS X"),h={isCtrlKeyCommand:function(a){return!!a.ctrlKey&&!a.altKey},isOptionKeyCommand:function(a){return g&&a.altKey},hasCommandModifier:function(a){return g?!!a.metaKey&&!a.altKey:h.isCtrlKeyCommand(a)}};e.exports=h}),null);
__d("SecondaryClipboard",["DraftModifier","EditorState","getContentStateFragment","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;a={cut:function(a){__p&&__p();var c=a.getCurrentContent(),d=a.getSelection(),e=null;if(d.isCollapsed()){var f=d.getAnchorKey();f=c.getBlockForKey(f).getLength();if(f===d.getAnchorOffset())return a;e=d.set("focusOffset",f)}else e=d;e=b("nullthrows")(e);g=b("getContentStateFragment")(c,e);f=b("DraftModifier").removeRange(c,e,"forward");return f===c?a:b("EditorState").push(a,f,"remove-range")},paste:function(a){if(!g)return a;var c=b("DraftModifier").replaceWithFragment(a.getCurrentContent(),a.getSelection(),g);return b("EditorState").push(a,c,"insert-fragment")}};e.exports=a}),null);
__d("getRangeClientRects",["invariant","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("UserAgent").isBrowser("Chrome");function a(a){__p&&__p();var b=a.cloneRange(),c=[];for(var d=a.endContainer;d!=null;d=d.parentNode){var e=d===a.commonAncestorContainer;e?b.setStart(a.startContainer,a.startOffset):b.setStart(b.endContainer,0);var f=Array.from(b.getClientRects());c.push(f);if(e){c.reverse();return(f=[]).concat.apply(f,c)}b.setEndBefore(d)}g(0)}d=c?a:function(a){return Array.from(a.getClientRects())};e.exports=d}),null);
__d("expandRangeToStartOfLine",["invariant","UnicodeUtils","getRangeClientRects"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){__p&&__p();a=getComputedStyle(a);var b=document.createElement("div");b.style.fontFamily=a.fontFamily;b.style.fontSize=a.fontSize;b.style.fontStyle=a.fontStyle;b.style.fontWeight=a.fontWeight;b.style.lineHeight=a.lineHeight;b.style.position="absolute";b.textContent="M";a=document.body;a||g(0);a.appendChild(b);var c=b.getBoundingClientRect();a.removeChild(b);return c.height}function i(a,b){__p&&__p();var c=Infinity,d=Infinity,e=-Infinity,f=-Infinity;for(var g=0;g<a.length;g++){var h=a[g];if(h.width===0||h.width===1)continue;c=Math.min(c,h.top);d=Math.min(d,h.bottom);e=Math.max(e,h.top);f=Math.max(f,h.bottom)}return e<=d&&e-c<b&&f-d<b}function j(a){switch(a.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return a.length;default:return a.childNodes.length}}function a(a){__p&&__p();a.collapsed||g(0);a=a.cloneRange();var c=a.startContainer;c.nodeType!==1&&(c=c.parentNode);c=h(c);var d=a.endContainer,e=a.endOffset;a.setStart(a.startContainer,0);while(i(b("getRangeClientRects")(a),c)){d=a.startContainer;e=a.startOffset;d.parentNode||g(0);a.setStartBefore(d);if(d.nodeType===1&&getComputedStyle(d).display!=="inline")break}var f=d,k=e-1;do{var l=f.nodeValue,m=k;for(;m>=0;m--){if(l!=null&&m>0&&b("UnicodeUtils").isSurrogatePair(l,m-1))continue;a.setStart(f,m);if(i(b("getRangeClientRects")(a),c))d=f,e=m;else break}if(m===-1||f.childNodes.length===0)break;f=f.childNodes[m];k=j(f)}while(!0);a.setStart(d,e);return a}e.exports=a}),null);
__d("getDraftEditorSelectionWithNodes",["invariant","findAncestorOffsetKey","getSelectionOffsetKeyForNode","getUpdatedSelectionState","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,c,d,e,f,g){var h=d.nodeType===Node.TEXT_NODE,i=f.nodeType===Node.TEXT_NODE;if(h&&i)return{selectionState:b("getUpdatedSelectionState")(a,b("nullthrows")(b("findAncestorOffsetKey")(d)),e,b("nullthrows")(b("findAncestorOffsetKey")(f)),g),needsRecovery:!1};var k=null,l=null,m=!0;h?(k={key:b("nullthrows")(b("findAncestorOffsetKey")(d)),offset:e},l=j(c,f,g)):i?(l={key:b("nullthrows")(b("findAncestorOffsetKey")(f)),offset:g},k=j(c,d,e)):(k=j(c,d,e),l=j(c,f,g),d===f&&e===g&&(m=!!d.firstChild&&d.firstChild.nodeName!=="BR"));return{selectionState:b("getUpdatedSelectionState")(a,k.key,k.offset,l.key,l.offset),needsRecovery:m}}function h(a){while(a.firstChild&&(a.firstChild instanceof Element&&a.firstChild.getAttribute("data-blocks")==="true"||b("getSelectionOffsetKeyForNode")(a.firstChild)))a=a.firstChild;return a}function i(a){while(a.lastChild&&(a.lastChild instanceof Element&&a.lastChild.getAttribute("data-blocks")==="true"||b("getSelectionOffsetKeyForNode")(a.lastChild)))a=a.lastChild;return a}function j(a,c,d){__p&&__p();c=c;var e=b("findAncestorOffsetKey")(c);e!=null||a&&(a===c||a.firstChild===c)||g(0);a===c&&(c=c.firstChild,c instanceof Element&&c.getAttribute("data-contents")==="true"||g(0),d>0&&(d=c.childNodes.length));if(d===0){if(e!=null)a=e;else{var f=h(c);a=b("nullthrows")(b("getSelectionOffsetKeyForNode")(f))}return{key:a,offset:0}}f=c.childNodes[d-1];a=null;if(!b("getSelectionOffsetKeyForNode")(f))a=b("nullthrows")(e),c=k(f);else{d=i(f);a=b("nullthrows")(b("getSelectionOffsetKeyForNode")(d));c=k(d)}return{key:a,offset:c}}function k(a){a=a.textContent;return a==="\n"?0:a.length}e.exports=a}),null);
__d("moveSelectionBackward",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){__p&&__p();var c=a.getSelection();a=a.getCurrentContent();var d=c.getStartKey(),e=c.getStartOffset(),f=d,g=0;if(b>e){var h=a.getKeyBefore(d);if(h==null)f=d;else{f=h;d=a.getBlockForKey(h);g=d.getText().length}}else g=e-b;return c.merge({focusKey:f,focusOffset:g,isBackward:!0})}e.exports=a}),null);
__d("removeTextWithStrategy",["DraftModifier"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e=a.getSelection(),f=a.getCurrentContent(),g=e;if(e.isCollapsed()){if(d==="forward"){if(a.isSelectionAtEndOfContent())return f}else if(a.isSelectionAtStartOfContent())return f;g=c(a);if(g===e)return f}return b("DraftModifier").removeRange(f,g,d)}e.exports=a}),null);
__d("keyCommandBackspaceToStartOfLine",["EditorState","expandRangeToStartOfLine","getDraftEditorSelectionWithNodes","moveSelectionBackward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function c(c){var d=b("removeTextWithStrategy")(c,function(c){var d=c.getSelection();if(d.isCollapsed()&&d.getAnchorOffset()===0)return b("moveSelectionBackward")(c,1);d=a.getSelection();d=d.getRangeAt(0);d=b("expandRangeToStartOfLine")(d);return b("getDraftEditorSelectionWithNodes")(c,null,d.endContainer,d.endOffset,d.startContainer,d.startOffset).selectionState},"backward");return d===c.getCurrentContent()?c:b("EditorState").push(c,d,"remove-range")}e.exports=c}),null);
__d("DraftRemovableWord",["TokenizeUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("TokenizeUtil").getPunctuation();c="['\u2018\u2019]";d="\\s|(?![_])"+a;f="^(?:"+d+")*(?:"+c+"|(?!"+d+").)*(?:(?!"+d+").)";var g=new RegExp(f);b="(?:(?!"+d+").)(?:"+c+"|(?!"+d+").)*(?:"+d+")*$";var h=new RegExp(b);function i(a,b){b=b?h.exec(a):g.exec(a);return b?b[0]:a}a={getBackward:function(a){return i(a,!0)},getForward:function(a){return i(a,!1)}};e.exports=a}),null);
__d("keyCommandBackspaceWord",["DraftRemovableWord","EditorState","moveSelectionBackward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=b("removeTextWithStrategy")(a,function(a){var c=a.getSelection(),d=c.getStartOffset();if(d===0)return b("moveSelectionBackward")(a,1);c=c.getStartKey();var e=a.getCurrentContent();e=e.getBlockForKey(c).getText().slice(0,d);c=b("DraftRemovableWord").getBackward(e);return b("moveSelectionBackward")(a,c.length||1)},"backward");return c===a.getCurrentContent()?a:b("EditorState").push(a,c,"remove-range")}e.exports=a}),null);
__d("moveSelectionForward",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=a.getSelection(),d=c.getStartKey(),e=c.getStartOffset();a=a.getCurrentContent();var f=d,g=a.getBlockForKey(d);b>g.getText().length-e?(f=a.getKeyAfter(d),g=0):g=e+b;return c.merge({focusKey:f,focusOffset:g})}e.exports=a}),null);
__d("keyCommandDeleteWord",["DraftRemovableWord","EditorState","moveSelectionForward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("removeTextWithStrategy")(a,function(a){var c=a.getSelection(),d=c.getStartOffset();c=c.getStartKey();var e=a.getCurrentContent();e=e.getBlockForKey(c).getText().slice(d);c=b("DraftRemovableWord").getForward(e);return b("moveSelectionForward")(a,c.length||1)},"forward");return c===a.getCurrentContent()?a:b("EditorState").push(a,c,"remove-range")}e.exports=a}),null);
__d("keyCommandInsertNewline",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("DraftModifier").splitBlock(a.getCurrentContent(),a.getSelection());return b("EditorState").push(a,c,"split-block")}e.exports=a}),null);
__d("keyCommandMoveSelectionToEndOfBlock",["EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getSelection(),d=c.getEndKey(),e=a.getCurrentContent();e=e.getBlockForKey(d).getLength();return b("EditorState").set(a,{selection:c.merge({anchorKey:d,anchorOffset:e,focusKey:d,focusOffset:e,isBackward:!1}),forceSelection:!0})}e.exports=a}),null);
__d("keyCommandMoveSelectionToStartOfBlock",["EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getSelection(),d=c.getStartKey();return b("EditorState").set(a,{selection:c.merge({anchorKey:d,anchorOffset:0,focusKey:d,focusOffset:0,isBackward:!1}),forceSelection:!0})}e.exports=a}),null);
__d("keyCommandPlainBackspace",["EditorState","UnicodeUtils","moveSelectionBackward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("removeTextWithStrategy")(a,function(c){var a=c.getSelection(),d=c.getCurrentContent(),e=a.getAnchorKey();a=a.getAnchorOffset();d=d.getBlockForKey(e).getText()[a-1];return b("moveSelectionBackward")(c,d?b("UnicodeUtils").getUTF16Length(d,0):1)},"backward");if(c===a.getCurrentContent())return a;var d=a.getSelection();return b("EditorState").push(a,c.set("selectionBefore",d),d.isCollapsed()?"backspace-character":"remove-range")}e.exports=a}),null);
__d("keyCommandPlainDelete",["EditorState","UnicodeUtils","moveSelectionForward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("removeTextWithStrategy")(a,function(c){var a=c.getSelection(),d=c.getCurrentContent(),e=a.getAnchorKey();a=a.getAnchorOffset();d=d.getBlockForKey(e).getText()[a];return b("moveSelectionForward")(c,d?b("UnicodeUtils").getUTF16Length(d,0):1)},"forward");if(c===a.getCurrentContent())return a;var d=a.getSelection();return b("EditorState").push(a,c.set("selectionBefore",d),d.isCollapsed()?"delete-character":"remove-range")}e.exports=a}),null);
__d("keyCommandTransposeCharacters",["DraftModifier","EditorState","getContentStateFragment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.getSelection();if(!c.isCollapsed())return a;var d=c.getAnchorOffset();if(d===0)return a;var e=c.getAnchorKey(),f=a.getCurrentContent();e=f.getBlockForKey(e);e=e.getLength();if(e<=1)return a;var g;d===e?(e=c.set("anchorOffset",d-1),g=c):(e=c.set("focusOffset",d+1),g=e.set("anchorOffset",d+1));c=b("getContentStateFragment")(f,e);d=b("DraftModifier").removeRange(f,e,"backward");f=d.getSelectionAfter();e=f.getAnchorOffset()-1;f=f.merge({anchorOffset:e,focusOffset:e});e=b("DraftModifier").replaceWithFragment(d,f,c);d=b("EditorState").push(a,e,"insert-fragment");return b("EditorState").acceptSelection(d,g)}e.exports=a}),null);
__d("keyCommandUndo",["EditorState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e=b("EditorState").undo(c);if(c.getLastChangeType()==="spellcheck-change"){var f=e.getCurrentContent();d(b("EditorState").set(e,{nativelyRenderedContent:f}));return}a.preventDefault();if(!c.getNativelyRenderedContent()){d(e);return}d(b("EditorState").set(c,{nativelyRenderedContent:null}));setTimeout(function(){d(e)},0)}e.exports=a}),null);
__d("editOnKeyDown",["DraftModifier","EditorState","KeyBindingUtil","Keys","SecondaryClipboard","UserAgent","isEventHandled","keyCommandBackspaceToStartOfLine","keyCommandBackspaceWord","keyCommandDeleteWord","keyCommandInsertNewline","keyCommandMoveSelectionToEndOfBlock","keyCommandMoveSelectionToStartOfBlock","keyCommandPlainBackspace","keyCommandPlainDelete","keyCommandTransposeCharacters","keyCommandUndo"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("KeyBindingUtil").isOptionKeyCommand,h=b("UserAgent").isBrowser("Chrome");function i(a,c){__p&&__p();switch(a){case"redo":return b("EditorState").redo(c);case"delete":return b("keyCommandPlainDelete")(c);case"delete-word":return b("keyCommandDeleteWord")(c);case"backspace":return b("keyCommandPlainBackspace")(c);case"backspace-word":return b("keyCommandBackspaceWord")(c);case"backspace-to-start-of-line":return b("keyCommandBackspaceToStartOfLine")(c);case"split-block":return b("keyCommandInsertNewline")(c);case"transpose-characters":return b("keyCommandTransposeCharacters")(c);case"move-selection-to-start-of-block":return b("keyCommandMoveSelectionToStartOfBlock")(c);case"move-selection-to-end-of-block":return b("keyCommandMoveSelectionToEndOfBlock")(c);case"secondary-cut":return b("SecondaryClipboard").cut(c);case"secondary-paste":return b("SecondaryClipboard").paste(c);default:return c}}function a(a,c){__p&&__p();var d=c.which,e=a._latestEditorState;function f(b){b=a.props[b];if(b){b(c);return!0}else return!1}switch(d){case b("Keys").RETURN:c.preventDefault();if(a.props.handleReturn&&b("isEventHandled")(a.props.handleReturn(c,e)))return;break;case b("Keys").ESC:c.preventDefault();if(f("onEscape"))return;break;case b("Keys").TAB:if(f("onTab"))return;break;case b("Keys").UP:if(f("onUpArrow"))return;break;case b("Keys").RIGHT:if(f("onRightArrow"))return;break;case b("Keys").DOWN:if(f("onDownArrow"))return;break;case b("Keys").LEFT:if(f("onLeftArrow"))return;break;case b("Keys").SPACE:if(h&&g(c)){c.preventDefault();d=b("DraftModifier").replaceText(e.getCurrentContent(),e.getSelection(),"\xa0");a.update(b("EditorState").push(e,d,"insert-characters"));return}}f=a.props.keyBindingFn(c);if(!f)return;if(f==="undo"){b("keyCommandUndo")(c,e,a.update);return}c.preventDefault();if(a.props.handleKeyCommand&&b("isEventHandled")(a.props.handleKeyCommand(f,e,c.timeStamp)))return;d=i(f,e);d!==e&&a.update(d)}e.exports=a}),null);
__d("getSafeBodyFromHTML",["invariant","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";var h=b("UserAgent").isBrowser("IE <= 9");function a(a){var b,c=null;!h&&document.implementation&&document.implementation.createHTMLDocument&&(b=document.implementation.createHTMLDocument("foo"),b.documentElement||g(0),b.documentElement.innerHTML=a,c=b.getElementsByTagName("body")[0]);return c}e.exports=a}),null);
__d("convertFromHTMLToContentBlocks",["cx","invariant","CharacterMetadata","ContentBlock","ContentBlockNode","DefaultDraftBlockRenderMap","DraftEntity","immutable","URI","generateRandomKey","getSafeBodyFromHTML","gkx","sanitizeDraftText"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("immutable").Set,j=b("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN"),k=b("immutable").List,l=b("immutable").OrderedSet;a="&nbsp;";var m=" ",n=4,o=new RegExp("\r","g"),p=new RegExp("\n","g"),q=new RegExp(a,"g"),r=new RegExp("&#13;?","g"),s=new RegExp("&#8203;?","g"),t=["bold","bolder","500","600","700","800","900"],u=["light","lighter","100","200","300","400"],v={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},w=(c={},c._3kq1=0,c._3kq2=1,c._3kq3=2,c._3kq4=3,c._3kq5=4,c),x=["className","href","rel","target","title"],y=["alt","className","height","src","width"],z,A={text:"",inlines:[],entities:[],blocks:[]},B={children:k(),depth:0,key:"",type:""},C=function(a,b){return a==="li"?b==="ol"?"ordered-list-item":"unordered-list-item":null},D=function(a){var b=a.get("unstyled").element,c=i([]);a.forEach(function(a){a.aliasedElements&&a.aliasedElements.forEach(function(a){c=c.add(a)}),c=c.add(a.element)});return c.filter(function(a){return a&&a!==b}).toArray().sort()},E=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(e)return e}return null},F=function(a,b,c){c=c.filter(function(b){return b.element===a||b.wrapper===a||b.aliasedElements&&b.aliasedElements.some(function(b){return b===a})}).keySeq().toSet().toArray().sort();switch(c.length){case 0:return"unstyled";case 1:return c[0];default:return E(a,b,[C])||"unstyled"}},G=function(a,b,c){__p&&__p();a=v[a];if(a)c=c.add(a).toOrderedSet();else if(b instanceof HTMLElement){var d=b;c=c.withMutations(function(a){var b=d.style.fontWeight,c=d.style.fontStyle,e=d.style.textDecoration;t.indexOf(b)>=0?a.add("BOLD"):u.indexOf(b)>=0&&a.remove("BOLD");c==="italic"?a.add("ITALIC"):c==="normal"&&a.remove("ITALIC");e==="underline"&&a.add("UNDERLINE");e==="line-through"&&a.add("STRIKETHROUGH");e==="none"&&(a.remove("UNDERLINE"),a.remove("STRIKETHROUGH"))}).toOrderedSet()}return c},H=function(a,b,c){var d=a.text.slice(-1),e=b.text.slice(0,1);d==="\r"&&e==="\r"&&!c&&(a.text=a.text.slice(0,-1),a.inlines.pop(),a.entities.pop(),a.blocks.pop());if(d==="\r")if(b.text===m||b.text==="\n")return a;else(e===m||e==="\n")&&(b.text=b.text.slice(1),b.inlines.shift(),b.entities.shift());return{text:a.text+b.text,inlines:a.inlines.concat(b.inlines),entities:a.entities.concat(b.entities),blocks:a.blocks.concat(b.blocks)}},I=function(a,b){return b.some(function(b){return a.indexOf("<"+b)!==-1})},J=function(a){a instanceof HTMLAnchorElement||h(0);a=a.protocol;return a==="http:"||a==="https:"||a==="mailto:"},K=function(a){var b=new Array(1);a&&(b[0]=a);return babelHelpers["extends"]({},A,{text:m,inlines:[l()],entities:b})},L=function(){return babelHelpers["extends"]({},A,{text:"\n",inlines:[l()],entities:new Array(1)})},M=function(a){a===void 0&&(a={});return babelHelpers["extends"]({},B,a)},N=function(a,c,d){d===void 0&&(d=null);return{text:"\r",inlines:[l()],entities:new Array(1),blocks:[M({parent:d,key:b("generateRandomKey")(),type:a,depth:Math.max(0,Math.min(n,c))})]}},O=function(a,b){b===void 0&&(b=0);Object.keys(w).some(function(c){a.classList.contains(c)&&(b=w[c])});return b},P=function a(c,d,e,f,g,h,i,k,l,n){__p&&__p();var o=z,q=d.nodeName.toLowerCase(),r=c,s="unstyled",t=!1,u=g&&F(g,f,k),v=babelHelpers["extends"]({},A),w;if(q==="#text"){var B=d.textContent,C=B.trim();if(f&&C===""&&d.parentElement){var D=d.parentElement.nodeName.toLowerCase();if(D==="ol"||D==="ul")return{chunk:babelHelpers["extends"]({},A),entityMap:c}}if(C===""&&g!=="pre")return{chunk:K(l),entityMap:c};g!=="pre"&&(B=B.replace(p,m));z=q;return{chunk:{text:B,inlines:Array(B.length).fill(e),entities:Array(B.length).fill(l),blocks:[]},entityMap:c}}z=q;if(q==="br")return o==="br"&&(!g||u==="unstyled")?{chunk:N("unstyled",i,n),entityMap:c}:{chunk:L(),entityMap:c};if(q==="img"&&d instanceof HTMLImageElement&&d.attributes.getNamedItem("src")&&d.attributes.getNamedItem("src").value){var E=d,I={};y.forEach(function(a){var b=E.getAttribute(a);b&&(I[a]=b)});d.textContent="\ud83d\udcf7";l=b("DraftEntity").__create("IMAGE","MUTABLE",I||{})}e=G(q,d,e);(q==="ul"||q==="ol")&&(f&&(i+=1),f=q);!j&&q==="li"&&d instanceof HTMLElement&&(i=O(d,i));D=F(q,f,k);C=f&&g==="li"&&q==="li";B=(!g||j)&&h.indexOf(q)!==-1;(C||B)&&(v=N(D,i,n),w=v.blocks[0].key,g=q,t=!j);C&&(s=f==="ul"?"unordered-list-item":"ordered-list-item");var M=d.firstChild;M!=null&&(q=M.nodeName.toLowerCase());o=null;while(M){M instanceof HTMLAnchorElement&&M.href&&J(M)?(function(){var c=M,a={};x.forEach(function(b){var d=c.getAttribute(b);d&&(a[b]=d)});a.url=new(b("URI"))(c.href).toString();o=b("DraftEntity").__create("LINK","MUTABLE",a||{})})():o=undefined;u=a(r,M,e,f,g,h,i,k,o||l,j?w:null);c=u.chunk;B=u.entityMap;D=c;r=B;v=H(v,D,j);C=M.nextSibling;!n&&C&&h.indexOf(q)>=0&&g&&(v=H(v,L()));C&&(q=C.nodeName.toLowerCase());M=C}t&&(v=H(v,N(s,i,n)));return{chunk:v,entityMap:r}},Q=function(a,b,c,d){__p&&__p();a=a.trim().replace(o,"").replace(q,m).replace(r,"").replace(s,"");var e=D(c);b=b(a);if(!b)return null;z=null;a=I(a,e)?e:["div"];e=P(d,b,l(),"ul",null,a,-1,c);d=e.chunk;b=e.entityMap;d.text.indexOf("\r")===0&&(d={text:d.text.slice(1),inlines:d.inlines.slice(1),entities:d.entities.slice(1),blocks:d.blocks});d.text.slice(-1)==="\r"&&(d.text=d.text.slice(0,-1),d.inlines=d.inlines.slice(0,-1),d.entities=d.entities.slice(0,-1),d.blocks.pop());d.blocks.length===0&&d.blocks.push(babelHelpers["extends"]({},A,{type:"unstyled",depth:0}));d.text.split("\r").length===d.blocks.length+1&&d.blocks.unshift({type:"unstyled",depth:0});return{chunk:d,entityMap:b}},R=function(a){__p&&__p();if(!a||!a.text||!Array.isArray(a.blocks))return null;var c={cacheRef:{},contentBlocks:[]},d=0,e=a.blocks,f=a.inlines,g=a.entities,h=j?b("ContentBlockNode"):b("ContentBlock");return a.text.split("\r").reduce(function(a,c,i){__p&&__p();c=b("sanitizeDraftText")(c);var j=e[i],l=d+c.length,m=f.slice(d,l),n=g.slice(d,l);m=k(m.map(function(c,a){c={style:c,entity:null};n[a]&&(c.entity=n[a]);return b("CharacterMetadata").create(c)}));d=l+1;l=j.depth;var o=j.type,p=j.parent;j=j.key||b("generateRandomKey")();var q=null;if(p){var r=a.cacheRef[p],s=a.contentBlocks[r];if(s.getChildKeys().isEmpty()&&s.getText()){var t=s.getCharacterList(),u=s.getText();q=b("generateRandomKey")();var v=new(b("ContentBlockNode"))({key:q,text:u,characterList:t,parent:p,nextSibling:j});a.contentBlocks.push(v);s=s.withMutations(function(a){a.set("characterList",k()).set("text","").set("children",s.children.push(v.getKey()))})}a.contentBlocks[r]=s.set("children",s.children.push(j))}u=new h({key:j,parent:p,type:o,depth:l,text:c,characterList:m,prevSibling:q||(i===0||e[i-1].parent!==p?null:e[i-1].key),nextSibling:i===e.length-1||e[i+1].parent!==p?null:e[i+1].key});a.contentBlocks.push(u);a.cacheRef[u.key]=i;return a},c).contentBlocks};d=function(a,c,d){c===void 0&&(c=b("getSafeBodyFromHTML"));d===void 0&&(d=b("DefaultDraftBlockRenderMap"));a=Q(a,c,d,b("DraftEntity"));if(a==null)return null;c=a.chunk;d=a.entityMap;a=R(c);return{contentBlocks:a,entityMap:d}};e.exports=d}),null);
__d("convertFromHTMLToContentBlocks2",["cx","CharacterMetadata","ContentBlock","ContentBlockNode","DefaultDraftBlockRenderMap","DraftEntity","immutable","URI","generateRandomKey","getSafeBodyFromHTML","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List,i=b("immutable").Map,j=b("immutable").OrderedSet,k=b("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN");a="&nbsp;";var l=" ",m=new RegExp("\r","g"),n=new RegExp("\n","g"),o=new RegExp(a,"g"),p=new RegExp("&#13;?","g"),q=new RegExp("&#8203;?","g"),r=["bold","bolder","500","600","700","800","900"],s=["light","lighter","100","200","300","400"],t=["className","href","rel","target","title"],u=["alt","className","height","src","width"],v=(c={},c._3kq1=0,c._3kq2=1,c._3kq3=2,c._3kq4=3,c._3kq5=4,c),w=i({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"}),x=function(a){var b={};a.mapKeys(function(a,c){var d=[c.element];c.aliasedElements!==undefined&&d.push.apply(d,c.aliasedElements);d.forEach(function(c){b[c]===undefined?b[c]=a:typeof b[c]==="string"?b[c]=[b[c],a]:b[c].push(a)})});return i(b)},y=function(a,b){b===void 0&&(b=0);Object.keys(v).some(function(c){a.classList.contains(c)&&(b=v[c])});return b},z=function(a){return!!(a instanceof HTMLAnchorElement&&a.href&&(a.protocol==="http:"||a.protocol==="https:"||a.protocol==="mailto:"))},A=function(a){return!!(a instanceof HTMLImageElement&&a.attributes.getNamedItem("src")&&a.attributes.getNamedItem("src").value)},B=function(a){return a==="ul"||a==="ol"};function C(a,b){this.clear(),this.blockTypeMap=a,this.disambiguate=b}C.prototype.clear=function(){this.characterList=h(),this.blockConfigs=[],this.currentBlockType="unstyled",this.currentDepth=-1,this.currentEntity=null,this.currentStyle=j(),this.currentText="",this.entityMap=b("DraftEntity"),this.wrapper="ul",this.contentBlocks=[]};C.prototype.addDOMNode=function(a){var b;this.contentBlocks=[];(b=this.blockConfigs).push.apply(b,this.$1([a]));this.$2();this.currentText!==""&&this.blockConfigs.push(this.$3());return this};C.prototype.getContentBlocks=function(){this.contentBlocks.length===0&&(k?this.$4(this.blockConfigs):this.$5(this.blockConfigs));return{contentBlocks:this.contentBlocks,entityMap:this.entityMap}};C.prototype.addStyle=function(a){this.currentStyle=this.currentStyle.add(a)};C.prototype.removeStyle=function(a){this.currentStyle=this.currentStyle.remove(a)};C.prototype.$3=function(a){a===void 0&&(a={});var c=a.key||b("generateRandomKey")();c=babelHelpers["extends"]({key:c,type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:Math.max(0,this.currentDepth),parent:null,children:h(),prevSibling:null,nextSibling:null,childConfigs:[]},a);this.characterList=h();this.currentBlockType="unstyled";this.currentDepth=-1;this.currentText="";return c};C.prototype.$1=function(a){__p&&__p();var c=[];for(var d=0;d<a.length;d++){var e=a[d],f=e.nodeName.toLowerCase();if(f==="body"||B(f)){this.$2();this.currentText!==""&&c.push(this.$3());var g=this.currentDepth,h=this.wrapper;B(f)&&(this.wrapper=f,B(h)&&this.currentDepth++);c.push.apply(c,this.$1(Array.from(e.childNodes)));this.currentDepth=g;this.wrapper=h;continue}g=this.blockTypeMap.get(f);if(g!==undefined){this.$2();this.currentText!==""&&c.push(this.$3());h=this.currentDepth;var i=this.wrapper;this.wrapper=f==="pre"?"pre":this.wrapper;typeof g!=="string"&&(g=this.disambiguate(f,this.wrapper)||g[0]||"unstyled");!k&&e instanceof HTMLElement&&(g==="unordered-list-item"||g==="ordered-list-item")&&(this.currentDepth=y(e,this.currentDepth));var j=b("generateRandomKey")(),l=this.$1(Array.from(e.childNodes));this.$2();c.push(this.$3({key:j,childConfigs:l,type:g}));this.currentDepth=h;this.wrapper=i;continue}if(f==="#text"){this.$6(e);continue}if(A(e)){this.$7(e);continue}if(z(e)){this.$8(e,c);continue}j=w.get(f);j!==undefined&&this.addStyle(j);c.push.apply(c,this.$1(Array.from(e.childNodes)));j!==undefined&&this.removeStyle(j);this.$9(e)}return c};C.prototype.$10=function(a){var c;this.currentText+=a;var d=b("CharacterMetadata").create({style:this.currentStyle,entity:this.currentEntity});this.characterList=(c=this.characterList).push.apply(c,Array(a.length).fill(d))};C.prototype.$2=function(){var a=this.currentText.length,b=a-this.currentText.trimLeft().length,c=this.currentText.trimRight().length,d=this.characterList.findEntry(function(a){return a.getEntity()!==null});b=d!==undefined?Math.min(b,d[0]):b;d=this.characterList.reverse().findEntry(function(a){return a.getEntity()!==null});c=d!==undefined?Math.max(c,a-d[0]):c;b>c?(this.currentText="",this.characterList=h()):(this.currentText=this.currentText.slice(b,c),this.characterList=this.characterList.slice(b,c))};C.prototype.$6=function(a){a=a.textContent;var b=a.trim();b===""&&this.wrapper!=="pre"&&(a=" ");this.wrapper!=="pre"&&(a=a.replace(n,l));this.$10(a)};C.prototype.$7=function(a){if(!(a instanceof HTMLImageElement))return;var b=a,c={};u.forEach(function(a){var d=b.getAttribute(a);d&&(c[a]=d)});this.currentEntity=this.entityMap.__create("IMAGE","MUTABLE",c);this.$10("\ud83d\udcf7");this.currentEntity=null};C.prototype.$8=function(a,c){__p&&__p();if(!(a instanceof HTMLAnchorElement))return;var d=a,e={};t.forEach(function(a){var b=d.getAttribute(a);b&&(e[a]=b)});e.url=new(b("URI"))(d.href).toString();this.currentEntity=this.entityMap.__create("LINK","MUTABLE",e||{});c.push.apply(c,this.$1(Array.from(a.childNodes)));this.currentEntity=null};C.prototype.$9=function(a){__p&&__p();if(!(a instanceof HTMLElement))return;a=a;var b=a.style.fontWeight,c=a.style.fontStyle;a=a.style.textDecoration;r.indexOf(b)>=0?this.addStyle("BOLD"):s.indexOf(b)>=0&&this.removeStyle("BOLD");c==="italic"?this.addStyle("ITALIC"):c==="normal"&&this.removeStyle("ITALIC");a==="underline"&&this.addStyle("UNDERLINE");a==="line-through"&&this.addStyle("STRIKETHROUGH");a==="none"&&(this.removeStyle("UNDERLINE"),this.removeStyle("STRIKETHROUGH"))};C.prototype.$4=function(a,c){__p&&__p();c===void 0&&(c=null);var d=a.length-1;for(var e=0;e<=d;e++){var f=a[e];f.parent=c;f.prevSibling=e>0?a[e-1].key:null;f.nextSibling=e<d?a[e+1].key:null;f.children=h(f.childConfigs.map(function(a){return a.key}));this.contentBlocks.push(new(b("ContentBlockNode"))(babelHelpers["extends"]({},f)));this.$4(f.childConfigs,f.key)}};C.prototype.$5=function(a){var c=a.length-1;for(var d=0;d<=c;d++){var e=a[d],f=this.$11(e.childConfigs),g=f.text;f=f.characterList;this.contentBlocks.push(new(b("ContentBlock"))(babelHelpers["extends"]({},e,{text:e.text+g,characterList:e.characterList.concat(f)})))}};C.prototype.$11=function(a){__p&&__p();var b=a.length-1,c="",d=h();for(var e=0;e<=b;e++){var f=a[e];c+=f.text;d=d.concat(f.characterList);c!==""&&f.blockType!=="unstyled"&&(c+="\n",d=d.push(d.last()));f=this.$11(f.childConfigs);c+=f.text;d=d.concat(f.characterList)}return{text:c,characterList:d}};d=function(a,c,d){__p&&__p();c===void 0&&(c=b("getSafeBodyFromHTML"));d===void 0&&(d=b("DefaultDraftBlockRenderMap"));a=a.trim().replace(m,"").replace(o,l).replace(p,"").replace(q,"");c=c(a);if(!c)return null;a=x(d);d=function(a,b){return a==="li"?b==="ol"?"ordered-list-item":"unordered-list-item":null};return new C(a,d).addDOMNode(c).getContentBlocks()};e.exports=d}),null);
__d("DraftPasteProcessor",["CharacterMetadata","ContentBlock","ContentBlockNode","immutable","convertFromHTMLToContentBlocks","convertFromHTMLToContentBlocks2","generateRandomKey","getSafeBodyFromHTML","gkx","sanitizeDraftText"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h=b("immutable").Repeat,i=b("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN"),j=i?b("ContentBlockNode"):b("ContentBlock");a=b("gkx")("AT4Vn9c4nyCQi9FbI92idfipi4-xPrBGYoLyHdxBecidhoaDzIDMum5YRhGk1tg7g1I2N6GxZjMLsBIZPzEDVO4l");var k=a?b("convertFromHTMLToContentBlocks2"):b("convertFromHTMLToContentBlocks");c={processHTML:function(a,c){return k(a,b("getSafeBodyFromHTML"),c)},processText:function(a,c,d){__p&&__p();return a.reduce(function(a,e,f){__p&&__p();e=b("sanitizeDraftText")(e);var k=b("generateRandomKey")();e={key:k,type:d,text:e,characterList:g(h(c,e.length))};if(i&&f!==0){f=f-1;f=a[f]=a[f].merge({nextSibling:k});e=babelHelpers["extends"]({},e,{prevSibling:f.getKey()})}a.push(new j(e));return a},[])}};e.exports=c}),null);
__d("adjustBlockDepthForContentState",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c,d){var e=b.getStartKey(),f=b.getEndKey(),g=a.getBlockMap(),h=g.toSeq().skipUntil(function(a,b){return b===e}).takeUntil(function(a,b){return b===f}).concat([[f,g.get(f)]]).map(function(a){var b=a.getDepth()+c;b=Math.max(0,Math.min(b,d));return a.set("depth",b)});g=g.merge(h);return a.merge({blockMap:g,selectionBefore:b,selectionAfter:b})}e.exports=a}),null);
__d("RichTextEditorUtil",["DraftModifier","EditorState","SelectionState","adjustBlockDepthForContentState","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={currentBlockContainsLink:function(a){var b=a.getSelection();a=a.getCurrentContent();var c=a.getEntityMap();return a.getBlockForKey(b.getAnchorKey()).getCharacterList().slice(b.getStartOffset(),b.getEndOffset()).some(function(a){a=a.getEntity();return!!a&&c.__get(a).getType()==="LINK"})},getCurrentBlockType:function(a){var b=a.getSelection();return a.getCurrentContent().getBlockForKey(b.getStartKey()).getType()},getDataObjectForLinkURL:function(a){return{url:a.toString()}},handleKeyCommand:function(a,b,c){switch(b){case"bold":return g.toggleInlineStyle(a,"BOLD");case"italic":return g.toggleInlineStyle(a,"ITALIC");case"underline":return g.toggleInlineStyle(a,"UNDERLINE");case"code":return g.toggleCode(a);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return g.onBackspace(a);case"delete":case"delete-word":case"delete-to-end-of-block":return g.onDelete(a);default:return null}},insertSoftNewline:function(a){var c=b("DraftModifier").insertText(a.getCurrentContent(),a.getSelection(),"\n",a.getCurrentInlineStyle(),null);a=b("EditorState").push(a,c,"insert-characters");return b("EditorState").forceSelection(a,c.getSelectionAfter())},onBackspace:function(a){__p&&__p();var c=a.getSelection();if(!c.isCollapsed()||c.getAnchorOffset()||c.getFocusOffset())return null;var d=a.getCurrentContent(),e=c.getStartKey();e=d.getBlockBefore(e);if(e&&e.getType()==="atomic"){e=d.getBlockMap()["delete"](e.getKey());e=d.merge({blockMap:e,selectionAfter:c});if(e!==d)return b("EditorState").push(a,e,"remove-range")}c=g.tryToRemoveBlockStyle(a);return c?b("EditorState").push(a,c,"change-block-type"):null},onDelete:function(a){__p&&__p();var c=a.getSelection();if(!c.isCollapsed())return null;var d=a.getCurrentContent(),e=c.getStartKey(),f=d.getBlockForKey(e);f=f.getLength();if(c.getStartOffset()<f)return null;f=d.getBlockAfter(e);if(!f||f.getType()!=="atomic")return null;e=c.merge({focusKey:f.getKey(),focusOffset:f.getLength()});c=b("DraftModifier").removeRange(d,e,"forward");return c!==d?b("EditorState").push(a,c,"remove-range"):null},onTab:function(event,a,c){__p&&__p();var d=a.getSelection(),e=d.getAnchorKey();if(e!==d.getFocusKey())return a;var f=a.getCurrentContent();e=f.getBlockForKey(e);var g=e.getType();if(g!=="unordered-list-item"&&g!=="ordered-list-item")return a;event.preventDefault();g=e.getDepth();if(!event.shiftKey&&g===c)return a;e=b("adjustBlockDepthForContentState")(f,d,event.shiftKey?-1:1,c);return b("EditorState").push(a,e,"adjust-depth")},toggleBlockType:function(a,c){__p&&__p();var d=a.getSelection(),e=d.getStartKey(),f=d.getEndKey(),g=a.getCurrentContent(),h=d;if(e!==f&&d.getEndOffset()===0){var i=b("nullthrows")(g.getBlockBefore(f));f=i.getKey();h=h.merge({anchorKey:e,anchorOffset:d.getStartOffset(),focusKey:f,focusOffset:i.getLength(),isBackward:!1})}d=g.getBlockMap().skipWhile(function(a,b){return b!==e}).reverse().skipWhile(function(a,b){return b!==f}).some(function(a){return a.getType()==="atomic"});if(d)return a;i=g.getBlockForKey(e).getType()===c?"unstyled":c;return b("EditorState").push(a,b("DraftModifier").setBlockType(g,h,i),"change-block-type")},toggleCode:function(a){var b=a.getSelection(),c=b.getAnchorKey(),d=b.getFocusKey();return b.isCollapsed()||c!==d?g.toggleBlockType(a,"code-block"):g.toggleInlineStyle(a,"CODE")},toggleInlineStyle:function(a,c){var d=a.getSelection(),e=a.getCurrentInlineStyle();if(d.isCollapsed())return b("EditorState").setInlineStyleOverride(a,e.has(c)?e.remove(c):e.add(c));var f=a.getCurrentContent();e.has(c)?e=b("DraftModifier").removeInlineStyle(f,d,c):e=b("DraftModifier").applyInlineStyle(f,d,c);return b("EditorState").push(a,e,"change-inline-style")},toggleLink:function(a,c,d){c=b("DraftModifier").applyEntity(a.getCurrentContent(),c,d);return b("EditorState").push(a,c,"apply-entity")},tryToRemoveBlockStyle:function(a){__p&&__p();var c=a.getSelection(),d=c.getAnchorOffset();if(c.isCollapsed()&&d===0){d=c.getAnchorKey();a=a.getCurrentContent();var e=a.getBlockForKey(d);e=e.getType();d=a.getBlockBefore(d);if(e==="code-block"&&d&&d.getType()==="code-block"&&d.getLength()!==0)return null;if(e!=="unstyled")return b("DraftModifier").setBlockType(a,c,"unstyled")}return null}};e.exports=g}),null);
__d("splitTextIntoTextBlocks",[],(function(a,b,c,d,e,f){"use strict";var g=/\r\n?|\n/g;function a(a){return a.split(g)}e.exports=a}),null);
__d("editOnPaste",["BlockMapBuilder","CharacterMetadata","DataTransfer","DraftModifier","DraftPasteProcessor","EditorState","RichTextEditorUtil","getEntityKeyForSelection","getTextContentFromFiles","isEventHandled","splitTextIntoTextBlocks"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();c.preventDefault();c=new(b("DataTransfer"))(c.clipboardData);if(!c.isRichText()){var d=c.getFiles(),e=c.getText();if(d.length>0){if(a.props.handlePastedFiles&&b("isEventHandled")(a.props.handlePastedFiles(d)))return;b("getTextContentFromFiles")(d,function(d){__p&&__p();d=d||e;if(!d)return;var c=a._latestEditorState;d=b("splitTextIntoTextBlocks")(d);var f=b("CharacterMetadata").create({style:c.getCurrentInlineStyle(),entity:b("getEntityKeyForSelection")(c.getCurrentContent(),c.getSelection())}),g=b("RichTextEditorUtil").getCurrentBlockType(c);d=b("DraftPasteProcessor").processText(d,f,g);f=b("BlockMapBuilder").createFromArray(d);g=b("DraftModifier").replaceWithFragment(c.getCurrentContent(),c.getSelection(),f);a.update(b("EditorState").push(c,g,"insert-fragment"))});return}}d=[];var f=c.getText(),i=c.getHTML(),j=a._latestEditorState;if(a.props.handlePastedText&&b("isEventHandled")(a.props.handlePastedText(f,i,j)))return;f&&(d=b("splitTextIntoTextBlocks")(f));if(!a.props.stripPastedStyles){var k=a.getClipboard();if(c.isRichText()&&k){if(i.indexOf(a.getEditorKey())!==-1||d.length===1&&k.size===1&&k.first().getText()===f){a.update(g(a._latestEditorState,k));return}}else if(k&&c.types.includes("com.apple.webarchive")&&!c.types.includes("text/html")&&h(d,k)){a.update(g(a._latestEditorState,k));return}if(i){f=b("DraftPasteProcessor").processHTML(i,a.props.blockRenderMap);if(f){c=f.contentBlocks;k=f.entityMap;if(c){i=b("BlockMapBuilder").createFromArray(c);a.update(g(a._latestEditorState,i,k));return}}}a.setClipboard(null)}if(d.length){f=b("CharacterMetadata").create({style:j.getCurrentInlineStyle(),entity:b("getEntityKeyForSelection")(j.getCurrentContent(),j.getSelection())});c=b("RichTextEditorUtil").getCurrentBlockType(j);i=b("DraftPasteProcessor").processText(d,f,c);k=b("BlockMapBuilder").createFromArray(i);a.update(g(a._latestEditorState,k))}}function g(a,c,d){c=b("DraftModifier").replaceWithFragment(a.getCurrentContent(),a.getSelection(),c);return b("EditorState").push(a,c.set("entityMap",d),"insert-fragment")}function h(a,b){return a.length===b.size&&b.valueSeq().every(function(b,c){return b.getText()===a[c]})}e.exports=a}),null);
__d("getDraftEditorSelection",["getDraftEditorSelectionWithNodes"],(function(a,b,c,d,e,f){"use strict";function c(c,d){var e=a.getSelection();return e.rangeCount===0?{selectionState:c.getSelection().set("hasFocus",!1),needsRecovery:!1}:b("getDraftEditorSelectionWithNodes")(c,d,e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}e.exports=c}),null);
__d("editOnSelect",["invariant","DraftJsDebugLogging","EditorState","ReactDOM","getDraftEditorSelection"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();if(a._blockSelectEvents||a._latestEditorState!==a.props.editorState){if(a._blockSelectEvents){var c=a.props.editorState;c=c.getSelection();b("DraftJsDebugLogging").logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:new Error().stack}),selectionState:JSON.stringify(c.toJS())})}return}c=a.props.editorState;var d=b("ReactDOM").findDOMNode(a.editorContainer);d||g(0);d.firstChild instanceof HTMLElement||g(0);d=b("getDraftEditorSelection")(c,d.firstChild);var e=d.selectionState;e!==c.getSelection()&&(d.needsRecovery?c=b("EditorState").forceSelection(c,e):c=b("EditorState").acceptSelection(c,e),a.update(c))}e.exports=a}),null);
__d("DraftEditorEditHandler",["editOnBeforeInput","editOnBlur","editOnCompositionStart","editOnCopy","editOnCut","editOnDragOver","editOnDragStart","editOnFocus","editOnInput","editOnKeyDown","editOnPaste","editOnSelect"],(function(a,b,c,d,e,f){"use strict";a={onBeforeInput:b("editOnBeforeInput"),onBlur:b("editOnBlur"),onCompositionStart:b("editOnCompositionStart"),onCopy:b("editOnCopy"),onCut:b("editOnCut"),onDragOver:b("editOnDragOver"),onDragStart:b("editOnDragStart"),onFocus:b("editOnFocus"),onInput:b("editOnInput"),onKeyDown:b("editOnKeyDown"),onPaste:b("editOnPaste"),onSelect:b("editOnSelect")};e.exports=a}),null);
__d("DraftEditorPlaceholder.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){return this.props.text!==a.text||this.props.editorState.getSelection().getHasFocus()!==a.editorState.getSelection().getHasFocus()};a.prototype.render=function(){var a=this.props.editorState.getSelection().getHasFocus();a="_1p1t"+(a?" _1p1u":"");var c={whiteSpace:"pre-wrap"};return b("React").createElement("div",{className:a},b("React").createElement("div",{className:"_1p1v",id:this.props.accessibilityID,style:c},this.props.text))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("getDefaultKeyBinding",["KeyBindingUtil","Keys","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("UserAgent").isPlatform("Mac OS X"),h=g&&b("UserAgent").isBrowser("Firefox < 29"),i=b("KeyBindingUtil").hasCommandModifier,j=b("KeyBindingUtil").isCtrlKeyCommand;function k(a){return g&&a.altKey||j(a)}function l(a){return!i(a)?null:a.shiftKey?"redo":"undo"}function m(a){return!g&&a.shiftKey?null:k(a)?"delete-word":"delete"}function n(a){return i(a)&&g?"backspace-to-start-of-line":k(a)?"backspace-word":"backspace"}function a(a){__p&&__p();switch(a.keyCode){case 66:return i(a)?"bold":null;case 68:return j(a)?"delete":null;case 72:return j(a)?"backspace":null;case 73:return i(a)?"italic":null;case 74:return i(a)?"code":null;case 75:return g&&j(a)?"secondary-cut":null;case 77:return j(a)?"split-block":null;case 79:return j(a)?"split-block":null;case 84:return g&&j(a)?"transpose-characters":null;case 85:return i(a)?"underline":null;case 87:return g&&j(a)?"backspace-word":null;case 89:return j(a)?g?"secondary-paste":"redo":null;case 90:return l(a)||null;case b("Keys").RETURN:return"split-block";case b("Keys").DELETE:return m(a);case b("Keys").BACKSPACE:return n(a);case b("Keys").LEFT:return h&&i(a)?"move-selection-to-start-of-block":null;case b("Keys").RIGHT:return h&&i(a)?"move-selection-to-end-of-block":null;default:return null}}e.exports=a}),null);
__d("DraftEditor.react",["cx","invariant","DefaultDraftBlockRenderMap","DefaultDraftInlineStyle","DraftEditorCompositionHandler","DraftEditorContents.react","DraftEditorDragHandler","DraftEditorEditHandler","DraftEditorPlaceholder.react","DraftODS","EditorState","React","ReactDOM","Scroll","Style","UserAgent","emptyFunction","generateRandomKey","getDefaultKeyBinding","getScrollPosition","gkx","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=b("UserAgent").isBrowser("IE"),l=!k,m={edit:b("DraftEditorEditHandler"),composite:b("DraftEditorCompositionHandler"),drag:b("DraftEditorDragHandler"),cut:null,render:null},n=!1;i=babelHelpers.inherits(o,b("React").Component);i&&i.prototype;o.prototype.render=function(){return null};o.prototype.componentDidMount=function(){this._update()};o.prototype.componentDidUpdate=function(){this._update()};o.prototype._update=function(){var a=this.props.editor;a._latestEditorState=this.props.editorState;a._blockSelectEvents=!0};function o(){i.apply(this,arguments)}c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){__p&&__p();j.constructor.call(this,a),this.focus=function(a){__p&&__p();var c=this.props.editorState,d=c.getSelection().getHasFocus(),e=b("ReactDOM").findDOMNode(this.editor);if(!e)return;var f=b("Style").getScrollParent(e);a=a||b("getScrollPosition")(f);var g=a.x;a=a.y;e instanceof HTMLElement||h(0);e.focus();f===window?window.scrollTo(g,a):b("Scroll").setTop(f,a);d||this.update(b("EditorState").forceSelection(c,c.getSelection()))}.bind(this),this.blur=function(){var a=b("ReactDOM").findDOMNode(this.editor);a instanceof HTMLElement||h(0);a.blur()}.bind(this),this.setMode=function(a){this._handler=m[a]}.bind(this),this.exitCurrentMode=function(){this.setMode("edit")}.bind(this),this.restoreEditorDOM=function(a){this.setState({contentsKey:this.state.contentsKey+1},function(){this.focus(a)}.bind(this))}.bind(this),this.setClipboard=function(a){this._clipboard=a}.bind(this),this.getClipboard=function(){return this._clipboard}.bind(this),this.update=function(a){this._latestEditorState=a,this.props.onChange(a)}.bind(this),this.onDragEnter=function(){this._dragCount++}.bind(this),this.onDragLeave=function(){this._dragCount--,this._dragCount===0&&this.exitCurrentMode()}.bind(this),this._blockSelectEvents=!1,this._clipboard=null,this._handler=null,this._dragCount=0,this._editorKey=a.editorKey||b("generateRandomKey")(),this._placeholderAccessibilityID="placeholder-"+this._editorKey,this._latestEditorState=a.editorState,this._latestCommittedEditorState=a.editorState,this._onBeforeInput=this._buildHandler("onBeforeInput"),this._onBlur=this._buildHandler("onBlur"),this._onCharacterData=this._buildHandler("onCharacterData"),this._onCompositionEnd=this._buildHandler("onCompositionEnd"),this._onCompositionStart=this._buildHandler("onCompositionStart"),this._onCopy=this._buildHandler("onCopy"),this._onCut=this._buildHandler("onCut"),this._onDragEnd=this._buildHandler("onDragEnd"),this._onDragOver=this._buildHandler("onDragOver"),this._onDragStart=this._buildHandler("onDragStart"),this._onDrop=this._buildHandler("onDrop"),this._onInput=this._buildHandler("onInput"),this._onFocus=this._buildHandler("onFocus"),this._onKeyDown=this._buildHandler("onKeyDown"),this._onKeyPress=this._buildHandler("onKeyPress"),this._onKeyUp=this._buildHandler("onKeyUp"),this._onMouseDown=this._buildHandler("onMouseDown"),this._onMouseUp=this._buildHandler("onMouseUp"),this._onPaste=this._buildHandler("onPaste"),this._onSelect=this._buildHandler("onSelect"),this.getEditorKey=function(){return this._editorKey}.bind(this),this.state={contentsKey:0}}a.prototype._buildHandler=function(a){var c=b("ReactDOM").unstable_flushControlled;return function(b){if(!this.props.readOnly){var d=this._handler&&this._handler[a];d&&(c?c(function(){return d(this,b)}.bind(this)):d(this,b))}}.bind(this)};a.prototype._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()};a.prototype._renderPlaceholder=function(){if(this._showPlaceholder()){var a={text:b("nullthrows")(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return b("React").createElement(b("DraftEditorPlaceholder.react"),a)}return null};a.prototype.render=function(){var a=this.props,c=a.blockRenderMap,d=a.blockRendererFn,e=a.blockStyleFn,f=a.customStyleFn,g=a.customStyleMap,h=a.editorState,i=a.readOnly,j=a.textAlignment;a=a.textDirectionality;j="_5rp7"+(j==="left"?" _5rp8":"")+(j==="right"?" _5rp9":"")+(j==="center"?" _5rpa":"");var k={outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},m=this.props.role||"textbox",n=m==="combobox"?!!this.props.ariaExpanded:null;c={blockRenderMap:c,blockRendererFn:d,blockStyleFn:e,customStyleMap:babelHelpers["extends"]({},b("DefaultDraftInlineStyle"),g),customStyleFn:f,editorKey:this._editorKey,editorState:h,key:"contents"+this.state.contentsKey,textDirectionality:a};return b("React").createElement("div",{className:j},this._renderPlaceholder(),b("React").createElement("div",{className:"_5rpb",ref:function(a){return this.editorContainer=a}.bind(this)},b("React").createElement("div",{"aria-activedescendant":i?null:this.props.ariaActiveDescendantID,"aria-autocomplete":i?null:this.props.ariaAutoComplete,"aria-controls":i?null:this.props.ariaControls,"aria-describedby":this.props.ariaDescribedBy||this._placeholderAccessibilityID,"aria-expanded":i?null:n,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:(i?"":"notranslate")+" _5rpu",contentEditable:!i,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:function(a){return this.editor=a}.bind(this),role:i?null:m,spellCheck:l&&this.props.spellCheck,style:k,suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},b("React").createElement(o,{editor:this,editorState:h}),b("React").createElement(b("DraftEditorContents.react"),c))))};a.prototype.componentDidMount=function(){this._blockSelectEvents=!1,!n&&b("gkx")("AT60Qhny9fC3BpbI8ZQSvDSWTGcUliA-72QFfXtmX6zOJHm8k3Eh1sQgzLifAxrJandLHat-LCVV6kN9-xliHn1Q")&&(n=!0,b("DraftODS").init()),this.setMode("edit"),k&&document.execCommand("AutoUrlDetect",!1,!1)};a.prototype.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestEditorState=this.props.editorState,this._latestCommittedEditorState=this.props.editorState};a.defaultProps={blockRenderMap:b("DefaultDraftBlockRenderMap"),blockRendererFn:b("emptyFunction").thatReturnsNull,blockStyleFn:b("emptyFunction").thatReturns(""),keyBindingFn:b("getDefaultKeyBinding"),readOnly:!1,spellCheck:!1,stripPastedStyles:!1};e.exports=a}),null);
__d("GroupTypeaheadTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USER:"user",PAGE:"page",APP:"app",GROUP:"group",EVENT:"event",PLACE:"place",GROUP_RULE:"group_rule"})}),null);
__d("replaceSelectionWithMention",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){e=e(c.getCurrentContent(),a);var g=e.getLastCreatedEntityKey();f=f?f(a):a.getTitle();a=b("DraftModifier").replaceText(e,d,f,c.getCurrentInlineStyle(),g);return b("EditorState").push(c,a,"insert-fragment")}e.exports=a}),null);
__d("replaceMentionedTextInEditorState",["GroupTypeaheadTypeEnum","gkx","replaceSelectionWithMention"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="@\uff20\ufe68";function a(a,c,d,e){var f=c.getSelection(),g=c.getCurrentContent(),j=f.getAnchorKey(),k=f.getAnchorOffset();g=g.getBlockMap().get(j);j=f.getStartOffset();j=g.getText().substr(j-d,d);var l=h(a,j);j=k-i(g.getText().substr(0,k),l,d);return b("replaceSelectionWithMention")(a,c,f.set("anchorOffset",j),e,function(){return l})}function h(a,c){__p&&__p();if(a.getType()===b("GroupTypeaheadTypeEnum").GROUP_RULE)return a.getSubtitle();if(!b("gkx")("AT4eVhAyXs5l-SdU2eMzGAtYZHW_8azbWQtRzBkQx-hxEYvZmrk9VzKrNwtfnQLv-dOZuBnZ683myig4JsVLktUm"))return a.getTitle();c=c.toLowerCase();g.includes(c.substring(0,1))&&(c=c.substring(1,c.length));if(a.getTitle().toLowerCase().startsWith(c))return a.getTitle();else if(a.getSubtitle().toLowerCase().startsWith(c))return"@"+a.getSubtitle();else if(a.getTitle().toLowerCase().includes(c))return a.getTitle();else if(a.getSubtitle().toLowerCase().includes(c))return"@"+a.getSubtitle();return a.getTitle()}function i(a,b,c){for(var d=c;d<=b.length;d++)a.substr(-d)==b.substr(0,d)&&(c=d);return c}e.exports=a}),null);
__d("AbstractMentionsTextEditor.react",["ContentState","DraftEditor.react","React","SearchableEntry","TypeaheadNavigation","clearImmediate","getOrCreateDOMID","replaceMentionedTextInEditorState","setImmediate","uniqueID"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React").PropTypes;d=5;var h="handled",i="not-handled";f=babelHelpers.inherits(a,b("React").Component);g=f&&f.prototype;function a(a,c){"use strict";__p&&__p();g.constructor.call(this,a,c),this.__onShowMentions=function(a,b,c){__p&&__p();if(!this.$2)return;b=b||0;if(!a||!a.length){var d=this.state.mentionableEntries;if(d&&d.length&&d[0].getDataType()!==(c||""))return;this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return}d=this.props.typeaheadViewProps;c=a;d&&d.mentionSortFn&&c.sort(d.mentionSortFn);c=a.slice(0,this.props.maxResults);d=null;(this.props.autoHighlight||this.state.highlightedMentionable!==null)&&(d=c[0]);this.setState({highlightedMentionable:d,mentionableEntries:c,characterOffset:b});this.props.onShowMentions&&this.props.onShowMentions(c,b)}.bind(this),this.$8=function(a){this.setState(this.$12()),this.props.onBlur&&this.props.onBlur(a)}.bind(this),this.$7=function(a){this.props.mentionsSource&&this.props.mentionsSource.bootstrap(),this.props.assistantTypeaheadSource&&this.props.assistantTypeaheadSource.bootstrap(),this.props.onFocus&&this.props.onFocus(a)}.bind(this),this.$13=function(a,b){if(this.state.highlightedMentionable){this.$10(this.state.highlightedMentionable,a);return h}else if(this.props.handleContentReturn&&this.props.handleContentReturn(a,b))return h;return i}.bind(this),this.$6=function(a){var b=this.state.highlightedMentionable;b?(a.preventDefault(),this.$10(b,a)):this.props.onTab&&this.props.onTab(a)}.bind(this),this.$5=function(a){this.props.onEscape&&this.props.onEscape(a),this.state.mentionableEntries&&(a.stopPropagation(),a.nativeEvent.isPropagationStopped=!0,this.setState(this.$12()))}.bind(this),this.$11=function(a){var c=this.state.mentionableEntries;c?(a.preventDefault(),b("TypeaheadNavigation").moveUp(c,this.state.highlightedMentionable,this.$9)):this.props.onUpArrow&&this.props.onUpArrow(a)}.bind(this),this.$4=function(a){var c=this.state.mentionableEntries;c?(a.preventDefault(),b("TypeaheadNavigation").moveDown(c,this.state.highlightedMentionable,this.$9)):this.props.onDownArrow&&this.props.onDownArrow(a)}.bind(this),this.$9=function(a){this.setState({highlightedMentionable:a})}.bind(this),this.$14=function(a){a=b("getOrCreateDOMID")(a);this.setState({ariaActiveDescendantID:a})}.bind(this),this.$10=function(a,c){__p&&__p();var d=a.getDataType(),e=this.props.mentionCreationForContentStateFn;d==="ASSISTANT_TYPEAHEAD"&&this.props.mentionTypeaheadCreationForContentStateFn&&(e=this.props.mentionTypeaheadCreationForContentStateFn);d=b("replaceMentionedTextInEditorState")(a,this.props.editorState,this.state.characterOffset,e);this.props.onChange(d);this.setState(this.$12());e=this.props.onAddMention;d=this.state.mentionableEntries;if(e&&d){d=d.indexOf(a);e(a,d,c)}}.bind(this),this.__onShowMentions=this.__onShowMentions.bind(this),this.$4=this.$4.bind(this),this.$5=this.$5.bind(this),this.$6=this.$6.bind(this),this.$7=this.$7.bind(this),this.$8=this.$8.bind(this),this.$9=this.$9.bind(this),this.$10=this.$10.bind(this),this.$11=this.$11.bind(this),this.state=this.$12()}a.prototype.UNSAFE_componentWillMount=function(){"use strict";this.$2=!0,this.$1=b("uniqueID")(),this.$3=[]};a.prototype.componentWillUnmount=function(){"use strict";this.$2=!1,this.$3.forEach(function(a){return b("clearImmediate")(a)}),this.$3=[]};a.prototype.$12=function(){"use strict";return{highlightedMentionable:null,mentionableEntries:null,characterOffset:0}};a.prototype.shouldComponentUpdate=function(a,b){"use strict";return this.props.editorState!==a.editorState||this.props.placeholder!==a.placeholder||this.props.readOnly!==a.readOnly||this.props.className!==a.className||this.state.mentionableEntries!==b.mentionableEntries||this.state.highlightedMentionable!==b.highlightedMentionable||this.state.ariaActiveDescendantID!==b.ariaActiveDescendantID};a.prototype.componentDidUpdate=function(a){"use strict";__p&&__p();var c=this.props.editorState;if(c===a.editorState)return;var d=c.getSelection();if(d.getHasFocus()&&d.isCollapsed()){var e=c.getCurrentContent(),f=this.props.mentionsSource;f&&this.$3.push(b("setImmediate")(function(){f.search(e,d,this.__onShowMentions)}.bind(this)));var g=this.props.assistantTypeaheadSource;g&&this.$3.push(b("setImmediate")(function(){g.search(e,d,this.__onShowMentions)}.bind(this)))}};a.prototype.blur=function(){"use strict";this.refs.abstractTextEditor.blur()};a.prototype.focus=function(){"use strict";this.refs.abstractTextEditor.focus()};a.prototype.$15=function(){"use strict";var a=this.state.mentionableEntries;if(!a||!a.length)return null;var c=this.props.mentionResultsComponent;return b("React").createElement(c,babelHelpers["extends"]({},this.props.mentionResultsProps,{viewID:this.$1,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:a||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this.$10,onMentionHighlight:this.$9,onMentionRenderHighlight:this.$14}))};a.prototype.exitCurrentMode=function(){"use strict";this.refs.abstractTextEditor&&this.refs.abstractTextEditor.exitCurrentMode()};a.prototype.render=function(){"use strict";var a=this.state.mentionableEntries;a=!!(a&&a.length);var c=this.props.readOnly?null:"-1",d=this.props.role||"combobox",e=this.props.ariaAutoComplete||"list";return b("React").createElement("div",{ref:"container",className:this.props.className,tabIndex:c},b("React").createElement(b("DraftEditor.react"),babelHelpers["extends"]({},this.props,{ref:"abstractTextEditor",role:d,ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:e,ariaControls:this.$1,ariaExpanded:a,ariaHasPopup:a,editorState:this.props.editorState,onBlur:this.$8,onChange:this.props.onChange,onFocus:this.$7,onTab:this.$6,onEscape:this.$5,onDownArrow:this.$4,onUpArrow:this.$11,handleReturn:this.$13})),this.$15())};a.prototype.isShowingMentionables=function(){"use strict";return!!this.state.mentionableEntries};a.defaultProps=babelHelpers["extends"]({},b("DraftEditor.react").defaultProps,{autoHighlight:!0,maxResults:d});a.propTypes={mentionsSource:c.object,assistantTypeaheadSource:c.object,mentionCreationForContentStateFn:c.func.isRequired,mentionTypeaheadCreationForContentStateFn:c.func,mentionResultsComponent:c.func.isRequired,mentionResultsProps:c.object,excludedEntries:c.object,handleContentReturn:c.func,onAddMention:c.func,onShowMentions:c.func,autoHighlight:c.bool,maxResults:c.number,webDriverTestID:c.string};e.exports=a}),null);
__d("isSoftNewlineEvent",["Keys"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.which===b("Keys").RETURN&&(a.getModifierState("Shift")||a.getModifierState("Alt")||a.getModifierState("Control"))}e.exports=a}),null);
__d("CompositeDraftDecorator",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h=".";function a(a){this.$1=a.slice()}a.prototype.getDecorations=function(a,b){var c=Array(a.getText().length).fill(null);this.$1.forEach(function(d,e){var f=0;d=d.strategy;var g=function(a,b){i(c,a,b)&&(j(c,a,b,e+h+f),f++)};d(a,g,b)});return g(c)};a.prototype.getComponentForKey=function(a){a=parseInt(a.split(h)[0],10);return this.$1[a].component};a.prototype.getPropsForKey=function(a){a=parseInt(a.split(h)[0],10);return this.$1[a].props};function i(a,b,c){for(var b=b;b<c;b++)if(a[b]!=null)return!1;return!0}function j(a,b,c,d){for(var b=b;b<c;b++)a[b]=d}e.exports=a}),null);
__d("StickerAssetType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMAGE:"BestEffortImage",SPRITE:"SpriteImage",PADDED_SPRITE:"PaddedSpriteImage"})}),null);
__d("XStickerAssetController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/asset/",{sticker_id:{type:"Int",required:!0},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}})}),null);